{"meta":{"title":"kysonyangs","subtitle":"Stay Hungry, Stay Foolish","description":"kysonyangsä¸ªäººç«™ï¼Œå¤‡å¿˜","author":"kysonyangs","url":"https://kysonyangs.github.io"},"pages":[{"title":"","date":"2018-06-19T02:40:54.000Z","updated":"2018-06-20T02:06:23.137Z","comments":false,"path":"about/index.html","permalink":"https://kysonyangs.github.io/about/index.html","excerpt":"","text":"ä¸ªäººç®€ä»‹ï¼š KysonYangs iOSer æ¥è‡ªæ±Ÿè¥¿ ç°å±…ä¸Šæµ· Email: kysonyangs@gmail.com"},{"title":"categories","date":"2018-06-19T02:34:25.000Z","updated":"2018-06-19T02:34:35.000Z","comments":false,"path":"categories/index.html","permalink":"https://kysonyangs.github.io/categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2018-06-19T02:33:55.000Z","updated":"2018-06-19T02:34:15.000Z","comments":false,"path":"tags/index.html","permalink":"https://kysonyangs.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"R.Swiftä½¿ç”¨","slug":"R.Swiftä½¿ç”¨","date":"2019-08-12T12:32:33.000Z","updated":"2020-05-16T05:40:34.454Z","comments":true,"path":"default/R.Swiftä½¿ç”¨/","link":"","permalink":"https://kysonyangs.github.io/default/R.Swiftä½¿ç”¨/","excerpt":"R.Swift é«˜æ•ˆå¼•ç”¨èµ„æºæ–‡ä»¶ R.swift ä»‹ç» R.swift å®‰è£…é…ç½® R.swift ä½¿ç”¨ R.swift ä»‹ç» R.Swift æ˜¯ä¸€æ¬¾åŸºäº Swift å¹³å°ï¼Œé’ˆå¯¹ iOS ä»¥åŠ tvOS å¼€å‘çš„èµ„æºå¼•ç”¨æ¡†æ¶ é¿å…ä½¿ç”¨å­—ç¬¦ä¸²æ¥æ„é€ æŸäº›èµ„æºå®ä¾‹ R.Swift èƒ½å¤Ÿä½¿ç”¨ç±»ä¼¼è¯­æ³• R.èµ„æºç±»å‹.èµ„æºåç§° æ¥å¯¹æŸèµ„æºè¿›è¡Œå¼•ç”¨æ„å»º R.Swift æœ‰ç€åŠ¨æ€ç”Ÿæˆä»£ç çš„æœºåˆ¶, å®ƒå…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š ä»£ç è‡ªåŠ¨è¡¥å…¨ï¼šå°±åƒè¾“å…¥å…¶ä»–çš„ä»£ç ä¸€æ ·ï¼ŒR.Swift æ”¯æŒ IDE çš„ä»£ç è‡ªåŠ¨è¡¥å…¨ è‡ªåŠ¨æ£€æµ‹: å¯ä»¥è‡ªåŠ¨æ£€æµ‹ä»£ç æ˜¯å¦å­˜åœ¨é—®é¢˜, å½“æˆ‘ä»¬çš„èµ„æºæ–‡ä»¶åä¿®æ”¹çš„æ—¶å€™, è¿™æ˜¯å°±ä¼šæç¤ºèµ„æºå¼•ç”¨é”™è¯¯","text":"R.Swift é«˜æ•ˆå¼•ç”¨èµ„æºæ–‡ä»¶ R.swift ä»‹ç» R.swift å®‰è£…é…ç½® R.swift ä½¿ç”¨ R.swift ä»‹ç» R.Swift æ˜¯ä¸€æ¬¾åŸºäº Swift å¹³å°ï¼Œé’ˆå¯¹ iOS ä»¥åŠ tvOS å¼€å‘çš„èµ„æºå¼•ç”¨æ¡†æ¶ é¿å…ä½¿ç”¨å­—ç¬¦ä¸²æ¥æ„é€ æŸäº›èµ„æºå®ä¾‹ R.Swift èƒ½å¤Ÿä½¿ç”¨ç±»ä¼¼è¯­æ³• R.èµ„æºç±»å‹.èµ„æºåç§° æ¥å¯¹æŸèµ„æºè¿›è¡Œå¼•ç”¨æ„å»º R.Swift æœ‰ç€åŠ¨æ€ç”Ÿæˆä»£ç çš„æœºåˆ¶, å®ƒå…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š ä»£ç è‡ªåŠ¨è¡¥å…¨ï¼šå°±åƒè¾“å…¥å…¶ä»–çš„ä»£ç ä¸€æ ·ï¼ŒR.Swift æ”¯æŒ IDE çš„ä»£ç è‡ªåŠ¨è¡¥å…¨ è‡ªåŠ¨æ£€æµ‹: å¯ä»¥è‡ªåŠ¨æ£€æµ‹ä»£ç æ˜¯å¦å­˜åœ¨é—®é¢˜, å½“æˆ‘ä»¬çš„èµ„æºæ–‡ä»¶åä¿®æ”¹çš„æ—¶å€™, è¿™æ˜¯å°±ä¼šæç¤ºèµ„æºå¼•ç”¨é”™è¯¯ R.swift å®‰è£…é…ç½® å®‰è£… CocoaPods pod &#39;R.swift&#39; å®‰è£… é…ç½® Build Phases -&gt; New Run Script Phase (-&gt; é‡å‘½åä¸º R.swift) å°† ğŸ‘† æ·»åŠ çš„ Run Script æ‹–åŠ¨åˆ° Check Pods Manifest.lock ä¸‹é¢ æ·»åŠ è„šæœ¬&quot;$PODS_ROOT/R.swift/rswift&quot; generate &quot;$SRCROOT/R.generated.swift&quot; åœ¨ Input Files ä¸‹é¢æ·»åŠ  $TEMP_DIR/rswift-lastrun åœ¨ Output Files ä¸‹é¢æ·»åŠ  $SRCROOT/R.generated.swift Command+B ç¼–è¯‘é¡¹ç›®ï¼Œåœ¨é¡¹ç›®ä»£ç ç›®å½•ä¸‹ï¼Œä¼šç”Ÿæˆä¸€ä¸ª R.generated.swift çš„æ–‡ä»¶ï¼Œå°†å®ƒæ‹–å¦‚é¡¹ç›®ä¸­ æ³¨æ„äº‹é¡¹ ä¸è¦å‹¾é€‰ Copy items if needed é€‰é¡¹ï¼Œå› ä¸ºæ¯æ¬¡ç¼–è¯‘éƒ½ä¼šç”Ÿæˆæ–°çš„ R.generated.swift æ–‡ä»¶ï¼Œcopy çš„è¯ï¼Œæ—§çš„ R.generated.swift å°†ä¸ä¼šè¢«è¦†ç›– æ¯å½“æˆ‘ä»¬ä¿®æ”¹äº†èµ„æºï¼Œæˆ‘ä»¬éœ€è¦ Command + B æ¥ç¼–è¯‘ä¸€ä¸‹é¡¹ç›®ä»è€Œè®© R.Swift è‡ªåŠ¨è¿›è¡Œé…ç½®æ›´æ–° åœ¨ .gitignore æ·»åŠ  *.generated.swift é¿å…ä¸å¿…è¦çš„éº»çƒ¦ å¦‚æœæƒ³è‡ªå®šä¹‰ä½ç½®å­˜æ”¾ R.generated.swift å½“æŒ‰ç…§ä¸Šé¢é…ç½®å®‰è£… Build åæˆåŠŸç”Ÿæˆ R.generated.swift æ–‡ä»¶å æ‹–åŠ¨ R.generated.swift åˆ°é€†å‘å­˜æ”¾çš„ä½ç½® ä¿®æ”¹è„šæœ¬&quot;$PODS_ROOT/R.swift/rswift&quot; generate &quot;$SRCROOT/(è·¯å¾„)/R.generated.swift&quot; ä¿®æ”¹ Output Files $SRCROOT/(è·¯å¾„)/R.generated.swift åˆ é™¤é¡¹ç›® R.generated.swift,é‡æ–°æ·»åŠ  åœ¨æ­¤ Build å³å¯ R.swift ä½¿ç”¨ å›¾ç‰‡ 1234//ä¼ ç»Ÿæ–¹å¼let oldImage = UIImage(named: &quot;yellow-image&quot;)//R.Swiftæ–¹å¼let newImage = R.image.yellowImage() å­—ä½“ 1234//ä¼ ç»Ÿæ–¹å¼let lightFontTitle = UIFont(name: &quot;Acme-Light&quot;, size: 22)//R.Swiftæ–¹å¼let lightFontTitle = R.font.acmeLight(size: 22) æ•°æ®æ–‡ä»¶ 1234567//ä¼ ç»Ÿæ–¹å¼let jsonData = Bundle.main.path(forResource: &quot;menuList&quot;, ofType: &quot;json&quot;)let jsonUrl1 = Bundle.main.url(forResource: &quot;menuList&quot;, withExtension: &quot;json&quot;)//R.Swiftæ–¹å¼let jsonData2 = R.file.menuListJson.path()let newUrl = R.file.menuListJson() Storyboards 1234567891011121314//ä¼ ç»Ÿæ–¹å¼let nibVC1 = UIStoryboard(name: &quot;NibHome&quot;, bundle: nil).instantiateInitialViewController() ?? UIViewController()let storyboard = UIStoryboard(name: &quot;Main&quot;, bundle: nil)let initialTabBarController = storyboard.instantiateInitialViewController() as? UITabBarControllerlet settingsController = storyboard.instantiateViewController(withIdentifier: &quot;settingsController&quot;) as? SettingsControllerSettingsController//R.Swiftæ–¹å¼let nibVC = R.storyboard.nibHome().instantiateInitialViewController() ?? UIViewController()let storyboard = R.storyboard.main()let initialTabBarController = R.storyboard.main.initialViewController()let settingsController = R.storyboard.main.settingsController() Nibs 12345678910111213141516//ä¼ ç»Ÿæ–¹å¼let nameOfNib = &quot;CustomView&quot;let customViewNib = UINib(nibName: &quot;CustomView&quot;, bundle: nil)let rootViews = customViewNib.instantiate(withOwner: nil, options: nil)let customView = rootViews[0] as? CustomViewlet viewControllerWithNib = CustomViewController(nibName: &quot;CustomView&quot;, bundle: nil)//R.Swiftæ–¹å¼let nameOfNib = R.nib.customView.namelet customViewNib = R.nib.customView()let rootViews = R.nib.customView.instantiate(withOwner: nil)let customView = R.nib.customView.firstView(owner: nil)let viewControllerWithNib = CustomViewController(nib: R.nib.customView) cellå¤ç”¨ 12345678910111213141516171819//ä¼ ç»Ÿæ–¹å¼let cellNib = UINib(nibName: &quot;NibTableViewCell&quot;, bundle: nil)tableView.register(cellNib, forCellReuseIdentifier: &quot;NibTableViewCell&quot;)func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123; let cell = tableView.dequeueReusableCell(withIdentifier: &quot;NibTableViewCell&quot;, for: indexPath) cell?.leftLabel.text = dataArr[indexPath.row] return cell ?? UITableViewCell()&#125;//R.Swiftæ–¹å¼tableView.register(R.nib.nibTableViewCell(), forCellReuseIdentifier: R.nib.nibTableViewCell.name)func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123; let cell = tableView.dequeueReusableCell(withIdentifier: R.nib.nibTableViewCell.name, for: indexPath) as? NibTableViewCell cell?.leftLabel.text = dataArr[indexPath.row] return cell ?? UITableViewCell()&#125;","categories":[],"tags":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://kysonyangs.github.io/tags/å·¥å…·/"}]},{"title":"XCGLogger ä½¿ç”¨","slug":"XCGLoggeræ—¥å¿—æ¡†æ¶","date":"2019-08-12T08:10:05.000Z","updated":"2020-05-16T05:41:23.421Z","comments":true,"path":"default/XCGLoggeræ—¥å¿—æ¡†æ¶/","link":"","permalink":"https://kysonyangs.github.io/default/XCGLoggeræ—¥å¿—æ¡†æ¶/","excerpt":"XCGLoggerçš„ä»‹ç» XCGLoggerçš„å®‰è£…ä¸é…ç½® åŸºæœ¬ç”¨æ³• XCGLoggeråˆå§‹åŒ– æ—¥å¿—è¾“å‡º è¿è¡Œæ•ˆæœ æ›´é«˜çº§çš„åˆå§‹åŒ–æ–¹æ³• è¿‡æ»¤æ—¥å¿—ä¿¡æ¯ æŒ‰æ–‡ä»¶åè¿‡æ»¤ æŒ‰æ ‡ç­¾è¿‡æ»¤ é€‰æ‹©æ€§çš„æ‰§è¡Œä»£ç  æ—¥æœŸæ ¼å¼åŒ– è‡ªåŠ¨åˆ‡æ¢é…ç½® åœ¨åå°è¿›è¡Œæ—¥å¿—å¤„ç† ä¸‹é¢ä¸¤ç§æ–¹æ³•éƒ½æ˜¯å®ç°å°†æ—¥å¿—æ–‡ä»¶è¾“å‡ºæ”¾åœ¨åå°çº¿ç¨‹ä¸­è¿›è¡Œï¼š ä¹Ÿå¯ä»¥é€šè¿‡build flagsæ¥å®ç°ç¨‹åºåœ¨è°ƒè¯•ã€ç”Ÿäº§è‡ªåŠ¨ä½¿ç”¨ä¸åŒçº¿ç¨‹ å®ç°æ—¥å¿—æ–‡ä»¶çš„å¢é‡è®°å½• å®ç°æ—¥å¿—æ–‡ä»¶çš„è½¬å‚¨ XCGLoggerçš„ä»‹ç» XCGLogger æ˜¯ä¸€ä¸ª debug æ—¥å¿—æ¡†æ¶ï¼Œå¯ç”¨äº Swift é¡¹ç›®ä¸­ ä½¿ç”¨ XCGLogger ï¼Œé™¤äº†å¯ä»¥å°†æ—¥å¿—è¯¦ç»†ä¿¡æ¯è¾“å‡ºåˆ°æ§åˆ¶å™¨å°å¤–ï¼Œè¿˜å¯ä»¥è¾“å‡ºåˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­å» è™½ç„¶ä½¿ç”¨èµ·æ¥åŒ NSLog() æˆ– print() å·®ä¸å¤šï¼Œä½† XCGLogger ä¼šé™„å¸¦æ›´å¤šçš„é¢å¤–ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼šæ—¥æœŸã€å‡½æ•°åã€æ–‡ä»¶åå’Œè¡Œå·","text":"XCGLoggerçš„ä»‹ç» XCGLoggerçš„å®‰è£…ä¸é…ç½® åŸºæœ¬ç”¨æ³• XCGLoggeråˆå§‹åŒ– æ—¥å¿—è¾“å‡º è¿è¡Œæ•ˆæœ æ›´é«˜çº§çš„åˆå§‹åŒ–æ–¹æ³• è¿‡æ»¤æ—¥å¿—ä¿¡æ¯ æŒ‰æ–‡ä»¶åè¿‡æ»¤ æŒ‰æ ‡ç­¾è¿‡æ»¤ é€‰æ‹©æ€§çš„æ‰§è¡Œä»£ç  æ—¥æœŸæ ¼å¼åŒ– è‡ªåŠ¨åˆ‡æ¢é…ç½® åœ¨åå°è¿›è¡Œæ—¥å¿—å¤„ç† ä¸‹é¢ä¸¤ç§æ–¹æ³•éƒ½æ˜¯å®ç°å°†æ—¥å¿—æ–‡ä»¶è¾“å‡ºæ”¾åœ¨åå°çº¿ç¨‹ä¸­è¿›è¡Œï¼š ä¹Ÿå¯ä»¥é€šè¿‡build flagsæ¥å®ç°ç¨‹åºåœ¨è°ƒè¯•ã€ç”Ÿäº§è‡ªåŠ¨ä½¿ç”¨ä¸åŒçº¿ç¨‹ å®ç°æ—¥å¿—æ–‡ä»¶çš„å¢é‡è®°å½• å®ç°æ—¥å¿—æ–‡ä»¶çš„è½¬å‚¨ XCGLoggerçš„ä»‹ç» XCGLogger æ˜¯ä¸€ä¸ª debug æ—¥å¿—æ¡†æ¶ï¼Œå¯ç”¨äº Swift é¡¹ç›®ä¸­ ä½¿ç”¨ XCGLogger ï¼Œé™¤äº†å¯ä»¥å°†æ—¥å¿—è¯¦ç»†ä¿¡æ¯è¾“å‡ºåˆ°æ§åˆ¶å™¨å°å¤–ï¼Œè¿˜å¯ä»¥è¾“å‡ºåˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­å» è™½ç„¶ä½¿ç”¨èµ·æ¥åŒ NSLog() æˆ– print() å·®ä¸å¤šï¼Œä½† XCGLogger ä¼šé™„å¸¦æ›´å¤šçš„é¢å¤–ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼šæ—¥æœŸã€å‡½æ•°åã€æ–‡ä»¶åå’Œè¡Œå· XCGLoggerçš„å®‰è£…ä¸é…ç½® ä» GitHub ä¸‹è½½æœ€æ–°çš„ä»£ç , å¹¶æ‹–å…¥é¡¹ç›® æˆ–è€…ä½¿ç”¨ CocoaPods æˆ– Carthage åŸºæœ¬ç”¨æ³•XCGLoggeråˆå§‹åŒ– å®šä¹‰ä¸€ä¸ªå…¨å±€çš„ XCGLogger æ—¥å¿—å¯¹è±¡ï¼Œå¹¶è¿›è¡Œåˆå§‹åŒ– é€‰æ‹©æ‰“å°æ‰€æœ‰çš„æ—¥å¿—ä¿¡æ¯ï¼ˆçº§åˆ«ã€æ–¹æ³•åã€æ–‡ä»¶åã€è¡Œå·ï¼‰ æ—¥å¿—é™¤äº†ä¼šæ‰“å°åœ¨æ§åˆ¶å°ä¸­å¤–ï¼Œè¿˜ä¼šåŒæ­¥è¾“å‡ºåˆ°æ–‡ä»¶ä¸­ï¼ˆLibrary/Caches/log.txtï¼‰ åŒæ—¶æ—¥å¿—åœ¨æ§åˆ¶å°æ‰“å°å’Œæ–‡ä»¶è¾“å‡ºçš„æ¶ˆæ¯çº§åˆ«ä¸€æ ·ï¼Œéƒ½æ˜¯ debug çº§ 12345678910111213141516import XCGLoggerlet XCCacheDirectory: URL = &#123; let urls = FileManager.default.urls(for: .cachesDirectory, in: .userDomainMask) return urls[urls.endIndex - 1]&#125;()let log: XCGLogger = &#123; let log = XCGLogger.default // æ—¥å¿—æ–‡ä»¶åœ°å€ let logPath: URL = XCCacheDirectory.appendingPathComponent(&quot;XCGLogger_Log.txt&quot;) log.setup(level: .debug, showThreadName: true, showLevel: true, showFileNames: true, showLineNumbers: true, writeToFile: logPath) return log&#125;() æ—¥å¿—è¾“å‡ºé€šè¿‡ XCGLoggerå†…ç½®çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥è¾“å‡ºå„ç§æ¶ˆæ¯çº§åˆ«çš„æ—¥å¿—ä¿¡æ¯ã€‚æ¯”å¦‚ä¸‹é¢æ ·ä¾‹æˆ‘ä»¬æ‰“å°ä»ä½åˆ°é«˜å„ç§çº§åˆ«çš„æ—¥å¿— 123456log.verbose(&quot;ä¸€æ¡verboseçº§åˆ«æ¶ˆæ¯ï¼šç¨‹åºæ‰§è¡Œæ—¶æœ€è¯¦ç»†çš„ä¿¡æ¯ã€‚&quot;)log.debug(&quot;ä¸€æ¡debugçº§åˆ«æ¶ˆæ¯ï¼šç”¨äºä»£ç è°ƒè¯•ã€‚&quot;)log.info(&quot;ä¸€æ¡infoçº§åˆ«æ¶ˆæ¯ï¼šå¸¸ç”¨ä¸ç”¨æˆ·åœ¨console.appä¸­æŸ¥çœ‹ã€‚&quot;)log.warning(&quot;ä¸€æ¡warningçº§åˆ«æ¶ˆæ¯ï¼šè­¦å‘Šæ¶ˆæ¯ï¼Œè¡¨ç¤ºä¸€ä¸ªå¯èƒ½çš„é”™è¯¯ã€‚&quot;)log.error(&quot;ä¸€æ¡errorçº§åˆ«æ¶ˆæ¯ï¼šè¡¨ç¤ºäº§ç”Ÿäº†ä¸€ä¸ªå¯æ¢å¤çš„é”™è¯¯ï¼Œç”¨äºå‘ŠçŸ¥å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ã€‚&quot;)log.severe(&quot;ä¸€æ¡severe errorçº§åˆ«æ¶ˆæ¯ï¼šè¡¨ç¤ºäº§ç”Ÿäº†ä¸€ä¸ªä¸¥é‡é”™è¯¯ã€‚ç¨‹åºå¯èƒ½å¾ˆå¿«ä¼šå¥”æºƒã€‚&quot;) è¿è¡Œæ•ˆæœç”±äºæˆ‘ä»¬å‰é¢å°†æ—¥å¿—æ˜¾ç¤ºçº§åˆ«è®¾ç½®æˆ debugï¼Œæ‰€ä»¥ verbose çº§åˆ«çš„æ—¥å¿—æ¶ˆæ¯å°±ä¸ä¼šæ‰“å° æ›´é«˜çº§çš„åˆå§‹åŒ–æ–¹æ³•é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬åªéœ€è¦åƒä¸Šé¢æ ·ä¾‹ä¸€æ ·ï¼Œä½¿ç”¨ setup æ–¹æ³•åˆå§‹åŒ– XCGLoggerå¯¹è±¡ç›¸å…³é…ç½®å³å¯ã€‚æ–¹ä¾¿ç®€å•ï¼Œä»£ç ä¹Ÿå°‘ã€‚ å½“ç„¶ XCGLogger ä¹Ÿæ”¯æŒæ›´åŠ çµæ´»çš„é…ç½®ï¼Œä½¿å¾—æˆ‘ä»¬æ—¥å¿—è®°å½•ä¼šæ›´åŠ å¯æ§ã€‚æ¯”å¦‚ï¼šæƒ³è®©æ§åˆ¶å°æ˜¾ç¤ºçš„ä¿¡æ¯ä¸æ—¥å¿—æ–‡ä»¶é‡Œè®°å½•çš„ä¿¡æ¯ä¸ä¸€æ ·ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364// åˆ›å»ºä¸€ä¸ªloggerå¯¹è±¡let log = XCGLogger(identifier: &quot;advancedLogger&quot;, includeDefaultDestinations: false)// æ§åˆ¶å°è¾“å‡ºlet systemDestination = AppleSystemLogDestination(identifier: &quot;advancedLogger.systemDestination&quot;)// è®¾ç½®æ§åˆ¶å°è¾“å‡ºçš„å„ä¸ªé…ç½®é¡¹systemDestination.outputLevel = .debugsystemDestination.showLogIdentifier = falsesystemDestination.showFunctionName = truesystemDestination.showThreadName = truesystemDestination.showLevel = truesystemDestination.showFileName = truesystemDestination.showLineNumber = truesystemDestination.showDate = true// loggerå¯¹è±¡ä¸­æ·»åŠ æ§åˆ¶å°è¾“å‡ºlog.add(destination: systemDestination)// æ—¥å¿—æ–‡ä»¶åœ°å€let logPath: URL = XCCacheDirectory.appendingPathComponent(&quot;XCGLogger_Log.txt&quot;)let fileDestination = FileDestination(writeToFile: logPath, identifier: &quot;advancedLogger.fileDestination&quot;)// è®¾ç½®æ–‡ä»¶è¾“å‡ºçš„å„ä¸ªé…ç½®é¡¹fileDestination.outputLevel = .debugfileDestination.showLogIdentifier = falsefileDestination.showFunctionName = truefileDestination.showThreadName = truefileDestination.showLevel = truefileDestination.showFileName = truefileDestination.showLineNumber = truefileDestination.showDate = true// Xcode8ä»¥ä¸Šæ— æ•ˆäº†// è®¾ç½®è¾“å‡ºè¯­å¥é¢œè‰²å’Œæ ·å¼ï¼ˆæ­é…XcodeColorsä½¿ç”¨ï¼‰/**let ansiColorLogFormatter: ANSIColorLogFormatter = ANSIColorLogFormatter()ansiColorLogFormatter.colorize(level: .verbose, with: .colorIndex(number: 244), options: [.faint])ansiColorLogFormatter.colorize(level: .debug, with: .black)ansiColorLogFormatter.colorize(level: .info, with: .blue, options: [.underline])ansiColorLogFormatter.colorize(level: .warning, with: .red, options: [.faint])ansiColorLogFormatter.colorize(level: .error, with: .red, options: [.bold])ansiColorLogFormatter.colorize(level: .severe, with: .white, on: .red)fileDestination.formatters = [ansiColorLogFormatter]*/// æ–‡ä»¶è¾“å‡ºåœ¨åå°å¤„ç†fileDestination.logQueue = XCGLogger.logQueue// loggerå¯¹è±¡ä¸­æ·»åŠ æ§åˆ¶å°è¾“å‡ºlog.add(destination: fileDestination)// å¼€å§‹å¯ç”¨log.logAppDetails()// æ›´æ”¹æƒé™æç¤º eg: [debug]=&gt;&quot;ğŸ”¹&quot;let emojiLogFormatter = PrePostFixLogFormatter()emojiLogFormatter.apply(prefix: &quot;ğŸ—¯ğŸ—¯ğŸ—¯ &quot;, postfix: &quot; ğŸ—¯ğŸ—¯ğŸ—¯&quot;, to: .verbose)emojiLogFormatter.apply(prefix: &quot;ğŸ”¹ğŸ”¹ğŸ”¹ &quot;, postfix: &quot; ğŸ”¹ğŸ”¹ğŸ”¹&quot;, to: .debug)emojiLogFormatter.apply(prefix: &quot;â„¹ï¸â„¹ï¸â„¹ï¸ &quot;, postfix: &quot; â„¹ï¸â„¹ï¸â„¹ï¸&quot;, to: .info)emojiLogFormatter.apply(prefix: &quot;âš ï¸âš ï¸âš ï¸ &quot;, postfix: &quot; âš ï¸âš ï¸âš ï¸&quot;, to: .warning)emojiLogFormatter.apply(prefix: &quot;â€¼ï¸â€¼ï¸â€¼ï¸ &quot;, postfix: &quot; â€¼ï¸â€¼ï¸â€¼ï¸&quot;, to: .error)emojiLogFormatter.apply(prefix: &quot;ğŸ’£ğŸ’£ğŸ’£ &quot;, postfix: &quot; ğŸ’£ğŸ’£ğŸ’£&quot;, to: .severe)log.formatters = [emojiLogFormatter] è¿‡æ»¤æ—¥å¿—ä¿¡æ¯æŒ‰æ–‡ä»¶åè¿‡æ»¤ ä¸‹é¢ä»£ç ä¸æ˜¾ç¤º AppDelegate.swift ä¸­è¾“å‡ºçš„æ—¥å¿—ï¼Œå…¶å®ƒæ–‡ä»¶æ—¥å¿—éƒ½ä¼šæ˜¾ç¤º 1log.filters = [FileNameFilter(excludeFrom: [&quot;AppDelegate.swift&quot;], excludePathWhenMatching: true)] ä¸‹é¢ä»£ç åªæ˜¾ç¤º AppDelegate.swift ä¸­è¾“å‡ºçš„æ—¥å¿—ï¼Œå…¶å®ƒæ–‡ä»¶æ—¥å¿—éƒ½ä¸æ˜¾ç¤º 1log.filters = [FileNameFilter(includeFrom: [&quot;AppDelegate.swift&quot;], excludePathWhenMatching: true)] æŒ‰æ ‡ç­¾è¿‡æ»¤ ä½¿ç”¨è‡ªå®šä¹‰çš„æ ‡ç­¾å­—ç¬¦ä¸² æ¯”å¦‚æˆ‘ä»¬åœ¨è¾“å‡ºä¸€æ¡ debug æ¶ˆæ¯æ—¶ï¼Œé™„ä¸Šä¸€ä¸ªè‡ªå®šä¹‰çš„æ ‡ç­¾ï¼ˆsensitiveï¼‰ 12let sensitiveTag = XCGLogger.Constants.userInfoKeyTagslog.debug(&quot;è¿™é‡Œè¿›è¡Œç”¨æˆ·èº«ä»½éªŒè¯ã€‚&quot;, userInfo: [tags: &quot;sensitive&quot;]) ä¸‹é¢è®¾ç½®åˆ†åˆ«æ˜¯ä¸æ˜¾ç¤ºè¿™ä¸ªæ ‡ç­¾çš„æ—¥å¿—ï¼Œä»¥åŠåªæ˜¾ç¤ºè¿™ä¸ªæ ‡ç­¾çš„æ—¥å¿— 12345// ä¸‹é¢ä»£ç ä¸æ˜¾ç¤ºæ ‡ç­¾ä¸º&quot;sensitive&quot;çš„æ—¥å¿—ï¼Œå…¶å®ƒæ—¥å¿—éƒ½ä¼šæ˜¾ç¤ºlog.filters = [TagFilter(excludeFrom: [&quot;sensitive&quot;])]// ä¸‹é¢ä»£ç åªæ˜¾ç¤ºæ ‡ç­¾ä¸º&quot;sensitive&quot;çš„æ—¥å¿—ï¼Œå…¶å®ƒæ—¥å¿—éƒ½ä¸ä¼šæ˜¾ç¤ºlog.filters = [TagFilter(includeFrom: [&quot;sensitive&quot;])] é€šè¿‡æ‰©å±• Tag å’Œ Dev è¿™ä¸¤ä¸ªæ ‡ç­¾ç»“æ„ä½“Tag å’Œ Dev æ˜¯ XCGLogger è‡ªå¸¦çš„ï¼Œæˆ‘ä»¬è¿™é‡Œé€šè¿‡æ‰©å±•ï¼Œåœ¨å…¶ä¸Šé¢æ·»åŠ ä¸€ä¸ªäº›è‡ªå®šä¹‰æ ‡ç­¾ã€‚ 12345678910extension Tag &#123; static let sensitive = Tag(&quot;sensitive&quot;) static let ui = Tag(&quot;ui&quot;) static let data = Tag(&quot;data&quot;)&#125;extension Dev &#123; static let dave = Dev(&quot;dave&quot;) static let sabby = Dev(&quot;sabby&quot;)&#125; æˆ‘ä»¬æ—¥å¿—è¾“å‡ºæ—¶å¯ä»¥æ··åˆä½¿ç”¨å¤šä¸ªæ ‡ç­¾ï¼š 12345// è®¾ç½®å¤šä¸ªæ ‡ç­¾log.debug(&quot;A tagged log message&quot;, userInfo: Dev.dave | Tag.sensitive)// è®¾ç½®å•ä¸ªæ ‡ç­¾log.debug(&quot;Another tagged log message&quot;, userInfo: Dev.dave.dictionary) ä¸‹é¢æ ¹æ®ä¾¿ç­¾è¿›è¡Œæ—¥å¿—è¿‡æ»¤ï¼š 12345// ä¸‹é¢ä»£ç ä¸æ˜¾ç¤ºæ ‡ç­¾åªä¸º&quot;dave&quot;æˆ–&quot;sensitive&quot;çš„æ—¥å¿—ï¼Œå…¶å®ƒæ—¥å¿—éƒ½ä¼šæ˜¾ç¤ºlog.filters = [TagFilter(excludeFrom: [Dev.dave, Tag.sensitive])]// ä¸‹é¢ä»£ç åªæ˜¾ç¤ºæ ‡ç­¾ä¸º&quot;dave&quot;æˆ–&quot;sensitive&quot;çš„æ—¥å¿—ï¼Œå…¶å®ƒæ—¥å¿—éƒ½ä¸ä¼šæ˜¾ç¤ºlog.filters = [TagFilter(includeFrom: [Dev.dave, Tag.sensitive])] é€‰æ‹©æ€§çš„æ‰§è¡Œä»£ç æœ‰æ—¶æˆ‘ä»¬æ—¥å¿—è¾“å‡ºå‰è¦è¿›è¡Œä¸€äº›è®¡ç®—æˆ–æ“ä½œï¼Œå†å°†ç»“æœé€šè¿‡æ—¥å¿—æ‰“å°å‡ºæ¥ã€‚ç”±äºè¿™äº›æ“ä½œä¸ç¨‹åºå®é™…è¿è¡Œæ— å…³ï¼Œåªæ˜¯ç”¨äºæ—¥å¿—æ‰“å°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°†å…¶æ”¾ç½®åœ¨æ—¥å¿—æ–¹æ³•é—­åŒ…ä¸­ã€‚è¿™æ ·æ—¢ä¿è¯ä»£ç çš„å¹²å‡€ï¼ŒåŒæ—¶å¦‚æœæ—¥å¿—ä¸è¾“å‡ºçš„è¯ä¹Ÿä¸ä¼šæµªè´¹ç³»ç»Ÿèµ„æºã€‚ æ¯”å¦‚ä¸‹é¢æ ·ä¾‹ï¼Œå¦‚æœæˆ‘ä»¬å°†æ—¥å¿—æ¶ˆæ¯çº§åˆ«è°ƒåˆ° debugä»¥ä¸Šï¼Œé‚£ä¹ˆä¸‹é¢æ—¥å¿—ä¸ä¼šè¾“å‡ºï¼Œä¸”å†…éƒ¨çš„å¾ªç¯æ“ä½œè‡ªç„¶ä¹Ÿä¸ä¼šæ‰§è¡Œã€‚ 12345678log.debug &#123; var total = 0.0 for receipt in receipts &#123; total += receipt.total &#125; return &quot;Total of all receipts: \\(total)&quot;&#125; æ—¥æœŸæ ¼å¼åŒ–é»˜è®¤æ—¥å¿—è¾“å‡ºçš„æ ¼å¼æ˜¯ â€œ2000-01-01 00:00:00.000â€ è¿™ç§å½¢å¼ã€‚å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æ”¹æˆä»»æ„çš„è‡ªå®šä¹‰çš„æ ¼å¼ã€‚1234let dateFormatter = DateFormatter()dateFormatter.dateFormat = &quot;MM/dd/yyyy hh:mma&quot;dateFormatter.locale = Locale.currentlog.dateFormatter = dateFormatter è‡ªåŠ¨åˆ‡æ¢é…ç½®é€šè¿‡ä½¿ç”¨ Swift çš„ç¼–è¯‘æ ‡å¿—ï¼ˆbuild flagsï¼‰,æˆ‘ä»¬å¯ä»¥åœ¨ç¨‹åºè°ƒè¯•ã€ç”Ÿäº§ç‰ˆæœ¬ä¸­è‡ªåŠ¨ä½¿ç”¨ä¸åŒçš„æ—¥å¿—çº§åˆ«å’Œæ—¥å¿—æ¡ç›®ã€‚1234567#if DEBUGlog.setup(level: .debug, showThreadName: true, showLevel: true, showFileNames: true, showLineNumbers: true)#elselog.setup(level: .severe, showThreadName: true, showLevel: true, showFileNames: true, showLineNumbers: true)#endif åœ¨åå°è¿›è¡Œæ—¥å¿—å¤„ç†é»˜è®¤æƒ…å†µä¸‹ï¼Œæ—¥å¿—è¾“å‡ºæ˜¯åœ¨è°ƒç”¨å®ƒä»¬çš„è¿›ç¨‹é‡Œè¿›è¡Œçš„ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿æ—¥å¿—æ¶ˆæ¯å¯ä»¥ç«‹åˆ»æ˜¾ç¤ºï¼Œæ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨æ–­ç‚¹è°ƒè¯•æ—¶å¯ä»¥ç«‹åˆ»çœ‹åˆ°ç»“æœã€‚ ä½†åœ¨å‘å¸ƒçš„ç”Ÿäº§ç‰ˆæœ¬ä¸­ï¼Œå¦‚æœæ—¥å¿—ä¹Ÿåœ¨å½“å‰çº¿ç¨‹ä¸­æ‰§è¡Œä¼šå¯¹æ€§èƒ½é€ æˆä¸€äº›å½±å“ã€‚æˆ‘ä»¬å¯ä»¥æŒ‡å®šæ—¥å¿—ç›®æ ‡è¿›ç¨‹ä½¿ç”¨å“ªä¸ªæ‰§è¡Œé˜Ÿåˆ—ä¸­ã€‚ ä¸‹é¢ä¸¤ç§æ–¹æ³•éƒ½æ˜¯å®ç°å°†æ—¥å¿—æ–‡ä»¶è¾“å‡ºæ”¾åœ¨åå°çº¿ç¨‹ä¸­è¿›è¡Œï¼š12345//æ–¹å¼1fileDestination.logQueue = XCGLogger.logQueue//æ–¹å¼2fileDestination.logQueue = DispatchQueue.global(qos: .background) ä¹Ÿå¯ä»¥é€šè¿‡build flagsæ¥å®ç°ç¨‹åºåœ¨è°ƒè¯•ã€ç”Ÿäº§è‡ªåŠ¨ä½¿ç”¨ä¸åŒçº¿ç¨‹1234567891011#if DEBUG log.setup(level: .debug, showThreadName: true, showLevel: true, showFileNames: true, showLineNumbers: true)#else log.setup(level: .severe, showThreadName: true, showLevel: true, showFileNames: true, showLineNumbers: true) if let consoleLog = log.logDestination(XCGLogger.Constants.baseConsoleDestinationIdentifier) as? ConsoleDestination &#123; consoleLog.logQueue = XCGLogger.logQueue &#125;#endif å®ç°æ—¥å¿—æ–‡ä»¶çš„å¢é‡è®°å½•é»˜è®¤æƒ…å†µä¸‹ï¼Œæ—¥å¿—æ–‡ä»¶çš„è¾“å‡ºçš„æ˜¯è¦†ç›–æ¨¡å¼çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æŒ‡å®šäº†ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼Œç¨‹åºæ¯æ¬¡é‡æ–°å¯åŠ¨æ—¶ï¼Œå¦‚æœè¿™ä¸ªæ–‡ä»¶åŸæ¥å°±å­˜åœ¨ï¼Œå…¶å†…å®¹ä¹Ÿä¼šè¢«è¦†ç›–ã€‚ æˆ‘ä»¬å¯ä»¥åœ¨æ—¥å¿—é…ç½®æ—¶å°† shouldAppend å‚æ•°è®¾ç½®ä¸º trueï¼Œè¿™æ ·å¦‚æœåŸæ¥çš„æ–‡ä»¶å­˜åœ¨ï¼Œä¹Ÿä¸ä¼šé‡æ–°è¦†ç›–ã€‚è€Œæ˜¯å°†æ–°æ—¥å¿—ä¿¡æ¯æ·»åŠ åˆ°æ–‡ä»¶å°¾éƒ¨ã€‚* åŒæ—¶ appendMarkerå¯ä»¥è®¾ç½®ä¸ªå­—ç¬¦ä¸²ï¼Œå…¶åœ¨æ¯æ¬¡ç¨‹åºå¯åŠ¨æ—¶ä¼šè‡ªåŠ¨æ·»åŠ åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ã€‚æ–¹ä¾¿æˆ‘ä»¬åŒºåˆ†å¼€æ¯æ¬¡ç¨‹åºè¿è¡Œçš„æ—¥å¿—ã€‚*1234567...//æ–‡ä»¶å‡ºè¾“å‡ºlet fileDestination = FileDestination(writeToFile: logURL, identifier: &quot;advancedLogger.fileDestination&quot;, shouldAppend: true, appendMarker: &quot;-- Relauched App --&quot;)... å®ç°æ—¥å¿—æ–‡ä»¶çš„è½¬å‚¨ä¸Šé¢çš„æ ·ä¾‹ä¸­ï¼Œæˆ‘ä»¬éƒ½æ˜¯å°†æ—¥å¿—è®°å½•åˆ° Caches æ–‡ä»¶å¤¹ä¸‹çš„ log.txtã€‚å¦‚æœæ˜¯å¢é‡æ—¥å¿—çš„è¯ï¼Œé‚£ä¸ªè¿™ä¸ªæ–‡ä»¶å°±ä¼šè¶Šæ¥è¶Šå¤§ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ rotateFile(to:) æ–¹æ³•å®ç°æ—¥å¿—çš„è½¬å‚¨ã€‚æ¯”å¦‚ï¼šæ¯éš”ä¸€æ®µæ—¶é—´ï¼Œæˆ–æ¯å½“æ—¥å¿—æ–‡ä»¶åˆ°ä¸€å®šå¤§å°æ—¶è°ƒç”¨ä¸‹è¯¥æ–¹æ³•ï¼Œå°†æ—¥å¿—å†…å®¹è½¬å‚¨åˆ°å¦ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚ï¼ˆæ³¨æ„ï¼šè½¬å‚¨ååŸæ¥æ—¥å¿—æ–‡ä»¶é‡Œçš„å†…å®¹ä¼šæ¸…ç©ºã€‚ï¼‰ å…·ä½“è½¬å‚¨æ“ä½œçš„æ­¥éª¤å¦‚ä¸‹ï¼š é¦–å…ˆé€šè¿‡ XCGLogger çš„ destination(withIdentifier:) æ–¹æ³•è·å– FileDestination å¯¹è±¡ã€‚ å†è°ƒç”¨ FileDestination å¯¹è±¡çš„ rotateFile(to:) æ–¹æ³•å°†æ—¥å¿—æ–‡ä»¶è½¬å‚¨åˆ°æŒ‡å®šè·¯å¾„ã€‚ rotateFile(to:) æ–¹æ³•æ‰§è¡ŒæˆåŠŸåä¼šè¿”å› trueã€‚æ ¹æ®ç»“æœæˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸€äº›åç»­æ“ä½œã€‚æ¯”å¦‚ï¼šå‹ç¼©ã€é‚®ä»¶å‘é€æ—¥å¿—æ–‡ä»¶ç­‰ç­‰ã€‚ ä¸‹é¢ä»£ç æˆ‘ä»¬å°†æ—¥å¿—æ–‡ä»¶è½¬å‚¨åˆ°ç”¨æˆ·æ–‡æ¡£ç›®å½•ä¸‹ï¼š1234567891011// è·å–FileDestinationlet fileDestination = log.destination(withIdentifier: &quot;advancedLogger.fileDestination&quot;) as! FileDestination// è·å–ç”¨æˆ·æ–‡æ¡£ç›®å½•let documentPath = FileManager.default.urls(for: .documentDirectory, in: .userDomainMask)[0]let logURL = documentPath.appendingPathComponent(&quot;log.txt&quot;)// å°†å½“å‰çš„æ—¥å¿—æ–‡ä»¶å¤åˆ¶åˆ°ç”¨æˆ·æ–‡æ¡£ç›®å½•ä¸­å»fileDestination.rotateFile(to: logURL)","categories":[],"tags":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://kysonyangs.github.io/tags/å·¥å…·/"}]},{"title":"SwiftLint è§„åˆ™æ”¶å½•","slug":"SwiftLintè§„åˆ™","date":"2019-08-11T11:32:33.000Z","updated":"2020-05-16T05:39:17.487Z","comments":true,"path":"default/SwiftLintè§„åˆ™/","link":"","permalink":"https://kysonyangs.github.io/default/SwiftLintè§„åˆ™/","excerpt":"è§„åˆ™ç›®å½•ï¼ŒæŒ‰å­—æ¯æ’åºæ’åˆ— anyobject_protocolå¯¹çº¯ç±»åè®®ä½¿ç”¨ AnyObject è€Œä¸æ˜¯ class è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ anyobject_protocol æœªå¯ç”¨ yes lint ç¤ºä¾‹ 12345678910// æ¨èprotocol SomeProtocol &#123;&#125;protocol SomeClassOnlyProtocol: AnyObject &#123;&#125;protocol SomeClassOnlyProtocol: AnyObject, SomeInheritedProtocol &#123;&#125;@objc protocol SomeClassOnlyProtocol: AnyObject, SomeInheritedProtocol &#123;&#125;// ä¸æ¨èï¼Œè§¦å‘è­¦å‘Šprotocol SomeClassOnlyProtocol: class &#123;&#125;protocol SomeClassOnlyProtocol: class, SomeInheritedProtocol &#123;&#125;@objc protocol SomeClassOnlyProtocol: class, SomeInheritedProtocol &#123;&#125;","text":"è§„åˆ™ç›®å½•ï¼ŒæŒ‰å­—æ¯æ’åºæ’åˆ— anyobject_protocolå¯¹çº¯ç±»åè®®ä½¿ç”¨ AnyObject è€Œä¸æ˜¯ class è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ anyobject_protocol æœªå¯ç”¨ yes lint ç¤ºä¾‹ 12345678910// æ¨èprotocol SomeProtocol &#123;&#125;protocol SomeClassOnlyProtocol: AnyObject &#123;&#125;protocol SomeClassOnlyProtocol: AnyObject, SomeInheritedProtocol &#123;&#125;@objc protocol SomeClassOnlyProtocol: AnyObject, SomeInheritedProtocol &#123;&#125;// ä¸æ¨èï¼Œè§¦å‘è­¦å‘Šprotocol SomeClassOnlyProtocol: class &#123;&#125;protocol SomeClassOnlyProtocol: class, SomeInheritedProtocol &#123;&#125;@objc protocol SomeClassOnlyProtocol: class, SomeInheritedProtocol &#123;&#125; array_initåºåˆ—è½¬åŒ–æˆæ•°ç»„æ—¶, ä¼˜å…ˆä½¿ç”¨æ•°ç»„è½¬åŒ–, è€Œä¸æ˜¯seq.map{$0} å°†åºåˆ—è½¬æ¢ä¸ºæ•°ç»„ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ array_init æœªå¯ç”¨ no lint ç¤ºä¾‹ 123456789101112131415161718192021222324252627282930// æ¨èArray(foo)foo.map &#123; $0.0 &#125;foo.map &#123; $1 &#125;foo.map &#123; $0() &#125;foo.map &#123; ((), $0) &#125;foo.map &#123; $0! &#125;foo.map &#123; $0! /* force unwrap */ &#125;foo.something &#123; RouteMapper.map($0) &#125;foo.map &#123; !$0 &#125;foo.map &#123; /* a comment */ !$0 &#125;// ä¸æ¨èï¼Œè§¦å‘è­¦å‘Šfoo.map(&#123; $0 &#125;)foo.map &#123; $0 &#125;foo.map &#123; return $0 &#125;foo.map &#123; elem in elem&#125;foo.map &#123; elem in return elem&#125;foo.map &#123; (elem: String) in elem&#125;foo.map &#123; elem -&gt; String in elem&#125;foo.map &#123; $0 /* a comment */ &#125;foo.map &#123; /* a comment */ $0 &#125; attributeså‡½æ•°å’Œç±»å‹ä¸­ï¼Œå±æ€§åº”è¯¥åœ¨ä¸€è¡Œ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ attributes æœªå¯ç”¨ no style ç¤ºä¾‹ 1234567// æ¨è@objc var x: String@IBOutlet private var label: UILabel// ä¸æ¨èï¼Œè§¦å‘è­¦å‘Š@objcvar x: String block_based_kvoä½¿ç”¨Swift 3.2+æ—¶ï¼Œé¦–é€‰ç³»ç»Ÿçš„KVO çš„APIå’Œkeypath è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ block_based_kvo å¯ç”¨ no idiomatic ç¤ºä¾‹ 1234567891011// æ¨èlet observer = foo.observe(\\.value, options: [.new]) &#123; (foo, change) in print(change.newValue)&#125;// ä¸æ¨èï¼Œè§¦å‘è­¦å‘Šclass Foo: NSObject &#123; override func observeValue(forKeyPath keyPath: String?, of object: Any?, change: [NSKeyValueChangeKey : Any]?, context: UnsafeMutableRawPointer?) &#123;&#125;&#125; class_delegate_protocolå§”æ‰˜åè®®åº”è¯¥ä»…æ˜¯classï¼Œå¯ä»¥è¢«å¼±å¼•ç”¨ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® class_delegate_protocol å¯ç”¨ no lint ç¤ºä¾‹ 123456789101112131415// æ¨èprotocol FooDelegate: class &#123;&#125;protocol FooDelegate: class, BarDelegate &#123;&#125;protocol Foo &#123;&#125;class FooDelegate &#123;&#125;@objc protocol FooDelegate &#123;&#125;@objc(MyFooDelegate)protocol FooDelegate &#123;&#125;protocol FooDelegate: BarDelegate &#123;&#125;protocol FooDelegate: AnyObject &#123;&#125;protocol FooDelegate: NSObjectProtocol &#123;&#125;// ä¸æ¨èï¼Œè§¦å‘è­¦å‘Šprotocol FooDelegate &#123;&#125;protocol FooDelegate: Bar &#123;&#125; Closing Brace Spacingå°æ‹¬å·åŒ…å«å¤§æ‹¬å·çš„è¯ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® closing_brace å¯ç”¨ yes style ç¤ºä¾‹ 12345678910// æ¨è[1, 2].map(&#123; $0 &#125;)[1, 2].map( &#123; $0 &#125;)// ä¸æ¨èï¼Œè§¦å‘è­¦å‘Š[1, 2].map(&#123; $0 &#125; )[1, 2].map(&#123; $0 &#125; )[1, 2].map( &#123; $0 &#125;) Closure Body Lengthå¿…æŠ¥çš„å‡½æ•°ä½“ä¸åº”è¯¥å¤ªå¤šè¡Œ,20è¡Œè­¦å‘Šï¼Œ100è¡ŒæŠ¥é”™ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ closure_body_length æœªå¯ç”¨ no metrics Closure End Indentationé—­åŒ…çš„å°é—­ç«¯å’Œå¼€å§‹ç«¯æœ‰ç›¸åŒçš„ç¼©è¿› å°±æ˜¯ å¤§æ‹¬å·ï¼ˆä¸€èˆ¬æ˜¯æ–¹æ³•ï¼‰ä¸Šä¸‹å¯¹é½çš„é—®é¢˜ï¼Œè¿™æ ·ä½¿codeçœ‹èµ·æ¥æ›´åŠ æ•´æ´ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® closure_end_indentation æœªå¯ç”¨ no style ç¤ºä¾‹ 123456789101112131415161718// æ¨è[1, 2].map &#123; $0 + 1 &#125;SignalProducer(values: [1, 2, 3]) .startWithNext &#123; number in print(number) &#125;function &#123; ..........&#125;// ä¸æ¨èï¼Œè§¦å‘è­¦å‘ŠSignalProducer(values: [1, 2, 3]) .startWithNext &#123; number in print(number)&#125;function &#123; .......... &#125; Closure Parameter Positioné—­åŒ…å‚æ•°ä½ç½®ï¼Œé—­åŒ…å‚æ•°åº”è¯¥å’Œå¤§æ‹¬å·å·¦è¾¹åœ¨åŒä¸€è¡Œ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® closure_parameter_position å¯ç”¨ no style ç¤ºä¾‹ 1234567891011121314151617181920212223// æ¨èlet names = [1, 2, 3]names.forEach &#123; (number) in print(number)&#125;let names = [1, 2, 3]names.map &#123; number in number + 1&#125;// ä¸æ¨èï¼Œè§¦å‘è­¦å‘Šlet names = [1, 2, 3]names.forEach &#123; (number) in print(number)&#125;let names = [1, 2, 3]names.map &#123; number in number + 1&#125; Closure Spacingåœ¨é—­åŒ…çš„{}ä¸­é—´è¦æœ‰ä¸€ä¸ªç©ºæ ¼,å¦‚map({ $0 }) è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® closure_spacing æœªå¯ç”¨ no style ç¤ºä¾‹ 123456789// æ¨èmap(&#123; $0 &#125;)[].map (&#123; $0.description &#125;)// ä¸æ¨èï¼Œè§¦å‘è­¦å‘Šmap(&#123;$0 &#125;)map(&#123; $0&#125;)map(&#123;$0&#125;)[].map (&#123;$0.description &#125;) Collection Element Alignmenté›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ åº”è¯¥å‚ç›´å¯¹é½ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ collection_alignment æœªå¯ç”¨ no style ç¤ºä¾‹ 123456789101112131415161718192021222324// æ¨èdoThings(arg: [ &quot;foo&quot;: 1, &quot;bar&quot;: 2, &quot;fizz&quot;: 2, &quot;buzz&quot;: 2])let abc = [ &quot;alpha&quot;: &quot;a&quot;, &quot;beta&quot;: &quot;b&quot;, &quot;gamma&quot;: &quot;g&quot;, &quot;delta&quot;: &quot;d&quot;, &quot;epsilon&quot;: &quot;e&quot;]let abc = [1, 2, 3, 4]// ä¸æ¨èï¼Œè§¦å‘è­¦å‘Šlet abc = [ &quot;alpha&quot;: &quot;a&quot;, &quot;beta&quot;: &quot;b&quot;, &quot;gamma&quot;: &quot;g&quot;, &quot;delta&quot;: &quot;d&quot;, &quot;epsilon&quot;: &quot;e&quot;] Colonå†’å·åº”è¯¥ç´§æŒ¨å·¦è¾¹ï¼Œå³è¾¹ç©ºä¸€æ ¼ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® colon å¯ç”¨ yes style ç¤ºä¾‹ 12345678910// ä¸ä¼šè§¦å‘è­¦å‘Šlet abc: String = &quot;jun&quot;let abc = [1: [3: 2], 3: 4]let abc = [1: [3: 2], 3: 4]// ä¼šè§¦å‘è­¦å‘Šlet jun:Voidlet jun : Voidlet jun :Voidlet jun: Void Comma Spacingé€—å·åº”è¯¥ç´§æŒ¨å·¦è¾¹ï¼Œå³è¾¹ç©ºä¸€æ ¼ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® comma å¯ç”¨ yes style ç¤ºä¾‹ 12345// æ¨è[a, b, c, d]// ä¸æ¨èï¼Œè§¦å‘è­¦å‘Š[a ,b] Compiler Protocol Initæ¨èä½¿ç”¨è‡ªå˜é‡åˆå§‹åŒ–å˜é‡ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® compiler_protocol_init å¯ç”¨ no lint ç¤ºä¾‹ 123456// æ¨èlet set: Set&lt;Int&gt; = [1, 2]// ä¸æ¨èlet set = Set(arrayLiteral: 1, 2)let set = Set.init(arrayLiteral: 1, 2) Conditional Returns on Newlineæ¡ä»¶è¯­å¥åœ¨ä¸‹ä¸€è¡Œè¿”å› è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® conditional_returns_on_newline æœªå¯ç”¨ no style ç¤ºä¾‹ 123456789101112// æ¨èif true &#123; return&#125;guard true else &#123; return&#125;// ä¸æ¨è, ä¼šè§¦å‘warningif true &#123; return &#125;guard true else &#123; return &#125; contains_over_first_not_nilç±»ä¼¼firstå‡½æ•°ä¸èƒ½åˆ¤æ–­æ˜¯å¦ä¸ºnil è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® contains_over_first_not_nil æœªå¯ç”¨ no performance ç¤ºä¾‹ 1234567// æ¨èlet first = myList.first(where: &#123; $0 % 2 == 0 &#125;)let first = myList.first &#123; $0 % 2 == 0 &#125;// ä¸æ¨èmyList.first &#123; $0 % 2 == 0 &#125; != nilmyList.first(where: &#123; $0 % 2 == 0 &#125;) != nil control_statementæ§åˆ¶è¯­å¥, forï¼Œwhileï¼Œdoï¼Œcatchè¯­å¥ä¸­çš„æ¡ä»¶ä¸èƒ½åŒ…å«åœ¨()ä¸­ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® control_statement å¯ç”¨ no style ç¤ºä¾‹ 12345678// æ¨èif condition &#123;if (a, b) == (0, 1) &#123;// ä¸æ¨èif (condition) &#123;if(condition) &#123;if ((a || b) &amp;&amp; (c || d)) &#123; custom_rulesè‡ªå®šä¹‰è§„åˆ™ã€‚è¿™ä¸ªå±æ€§å¯ä»¥é€šè¿‡æä¾›æ­£åˆ™è¡¨è¾¾å¼æ¥åˆ›å»ºè‡ªå®šä¹‰è§„åˆ™ï¼Œå¯é€‰æŒ‡å®šè¯­æ³•ç±»å‹æ­é…ï¼Œå®‰å…¨ã€çº§åˆ«å’Œè¦é™ˆåˆ—çš„ä»€ä¹ˆä¿¡æ¯ã€‚è¿™ä¸ªå±æ€§æ¨èç†Ÿæ‚‰ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„äººä½¿ç”¨ã€‚ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® custom_rules å¯ç”¨ no style cyclomatic_complexityå¾ªç¯å¤æ‚åº¦ã€‚å‡½æ•°ä½“çš„å¤æ‚åº¦åº”è¯¥è¦é™åˆ¶ï¼Œè¿™ä¸ªå±æ€§ä¸»è¦çº¦æŸæ¡ä»¶å¥ã€å¾ªç¯å¥ä¸­çš„å¾ªç¯åµŒå¥—é—®é¢˜ï¼Œå½“åµŒå¥—å¤ªå¤šçš„å¾ªç¯æ—¶ï¼Œåˆ™ä¼šè§¦å‘swiftlintä¸­çš„warningå’Œerrorï¼Œå½“è¾¾åˆ°10ä¸ªå¾ªç¯åµŒå¥—æ—¶å°±ä¼šæŠ¥warningï¼Œè¾¾åˆ°20ä¸ªå¾ªç¯åµŒå¥—æ—¶å°±ä¼šæŠ¥error è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® cyclomatic_complexity å¯ç”¨ no metrics discarded_notification_center_observerå½“ä½¿ç”¨æ³¨å†Œçš„é€šçŸ¥æ—¶, åº”è¯¥å­˜å‚¨è¿”å›çš„è§‚å¯Ÿè€…, ä¾¿äºç”¨å®Œä¹‹åç§»é™¤é€šçŸ¥ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® discarded_notification_center_observer å¯ç”¨ no lint ç¤ºä¾‹ 1234567891011121314151617// æ¨èlet foo = nc.addObserver(forName: .NSSystemTimeZoneDidChange, object: nil, queue: nil) &#123; &#125;let foo = nc.addObserver(forName: .NSSystemTimeZoneDidChange, object: nil, queue: nil, using: &#123; &#125;)func foo() -&gt; Any &#123; return nc.addObserver(forName: .NSSystemTimeZoneDidChange, object: nil, queue: nil, using: &#123; &#125;)&#125;// ä¸æ¨ènc.addObserver(forName: .NSSystemTimeZoneDidChange, object: nil, queue: nil) &#123; &#125;nc.addObserver(forName: .NSSystemTimeZoneDidChange, object: nil, queue: nil, using: &#123; &#125;)@discardableResult func foo() -&gt; Any &#123; return nc.addObserver(forName: .NSSystemTimeZoneDidChange, object: nil, queue: nil, using: &#123; &#125;)&#125; discouraged_direct_inité˜»æ­¢ç›´æ¥åˆå§‹åŒ–å¯¼è‡´çš„é”™è¯¯ç±»å‹, æœ‰ç±»æ–¹æ³•çš„,ç”¨ç±»æ–¹æ³•åˆå§‹åŒ–(ä¸å»ºè®®ç›´æ¥initåˆå§‹åŒ–) è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® discouraged_direct_init å¯ç”¨ no lint ç¤ºä¾‹ 12345678910// æ¨èlet foo = UIDevice.currentlet foo = Bundle.mainlet foo = Bundle(path: &quot;bar&quot;)let foo = Bundle(identifier: &quot;bar&quot;)// ä¸æ¨èlet foo = UIDevice()let foo = Bundle()let foo = bar(bundle: Bundle(), device: UIDevice()) discouraged_optional_booleanä¸å»ºè®®ä½¿ç”¨å¯é€‰å¸ƒå°”å€¼ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® discouraged_optional_boolean æœªå¯ç”¨ no idiomatic ç¤ºä¾‹ 1234567891011// æ¨èvar foo: Boolvar foo: [String: Bool]var foo: [Bool]let foo: Bool = true// ä¸æ¨èvar foo: Bool?var foo: [String: Bool?]var foo: [Bool?]let foo: Bool? = nil discouraged_object_literalä¼˜å…ˆä½¿ç”¨å¯¹è±¡åˆå§‹åŒ–æ–¹æ³•, ä¸å»ºè®®ä½¿ç”¨ä»£ç å—åˆå§‹åŒ– è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® discouraged_object_literal æœªå¯ç”¨ no idiomatic ç¤ºä¾‹ 123// ä¸å»ºè®®let white = #colorLiteral(red: 1.0, green: 1.0, blue: 1.0, alpha: 1.0)let image = â†“#imageLiteral(resourceName: &quot;image.jpg&quot;) dynamic_inlineé¿å…ä¸€èµ·ä½¿ç”¨ dynamic å’Œ @inline(_ _always)ï¼Œ å¦åˆ™æŠ¥ error è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® dynamic_inline å¯ç”¨ no lint ç¤ºä¾‹ 12345678910111213141516171819202122232425// æ­£ç¡®çš„åšæ³•class LangKe &#123; dynamic func myFunction() &#123; &#125;&#125;class LangKe &#123; @inline(__always) func myFunction() &#123; &#125;&#125;class LangKe &#123; @inline(never) dynamic func myFunction() &#123; &#125;&#125;// åªè¦åŒæ—¶ä½¿ç”¨ dynamic å’Œ @inline(_ _always)éƒ½æŠ¥é”™ errorï¼ï¼ï¼class LangKe &#123; @inline(__always) public dynamic func myFunction() &#123; &#125;&#125; empty_countå»ºè®®ä½¿ç”¨isEmptyåˆ¤æ–­,è€Œä¸æ˜¯ä½¿ç”¨count==0åˆ¤æ–­ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® empty_count æœªå¯ç”¨ no performance ç¤ºä¾‹ 12345678910111213// æ¨è print(&quot;ä¸ºç©º&quot;)&#125; else &#123; print(&quot;ä¸ä¸ºç©º&quot;)&#125;// ä¸æ¨èlet number = &quot;long&quot;if number.characters.count == 0 &#123; print(&quot;ä¸ºç©º&quot;)&#125; else &#123; print(&quot;ä¸ä¸ºç©º&quot;)&#125; empty_enum_argumentså½“æšä¸¾ä¸å…³è”ç±»å‹åŒ¹é…æ—¶ï¼Œå¦‚æœä¸ä½¿ç”¨å®ƒä»¬ï¼Œå‚æ•°å¯ä»¥çœç•¥ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® empty_enum_arguments å¯ç”¨ yes style ç¤ºä¾‹ 123456789101112131415161718192021222324252627// æ¨èswitch foo &#123; case .bar: break&#125;switch foo &#123; case .bar(let x): break&#125;switch foo &#123; case let .bar(x): break&#125;switch (foo, bar) &#123; case (_, _): break&#125;switch foo &#123; case &quot;bar&quot;.uppercased(): break&#125;// ä¸æ¨èswitch foo &#123; case .bar(_): break&#125;switch foo &#123; case .bar(): break&#125;switch foo &#123; case .bar(_), .bar2(_): break&#125; empty_parametersé—­åŒ…å‚æ•°ä¸ºç©ºæ—¶,å»ºè®®ä½¿ç”¨() -&gt;Void, è€Œä¸æ˜¯Void -&gt;Void è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® empty_parameters å¯ç”¨ yes style ç¤ºä¾‹ 12345678910111213// æ¨èlet abc: () -&gt; Voidfunc foo(completion: () -&gt; Void) &#123;&#125;// ä¸æ¨èï¼ŒæŠ¥é”™let bcd: Void -&gt; Voidfunc foo(completion: Void -&gt; Void) &#123;&#125; empty_parentheses_with_trailing_closureåœ¨ä½¿ç”¨å°¾éšé—­åŒ…çš„æ—¶å€™ï¼Œ åº”è¯¥å°½é‡é¿å…ä½¿ç”¨ç©ºçš„åœ†æ‹¬å· è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® empty_parentheses_with_trailing_closure å¯ç”¨ yes style explicit_aclæ‰€æœ‰å±æ€§å’Œæ–¹æ³•çš„å£°æ˜, éƒ½åº”è¯¥æ˜ç¡®æŒ‡å®šä¿®é¥°å…³é”®å­— è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® explicit_acl æœªå¯ç”¨ no idiomatic ç¤ºä¾‹ 123456789101112131415161718192021// æ¨èinternal enum A &#123;&#125;public final class B &#123;&#125;private struct C &#123;&#125;internal func a() &#123; let a = &#125;private struct C &#123; let d = 5 &#125;internal class A &#123; deinit &#123;&#125; &#125;internal protocol A &#123; func b() var c: Int&#125;// ä¸æ¨èenum A &#123;&#125;final class B &#123;&#125;internal struct C &#123; let d = 5 &#125;public struct C &#123; let d = 5 &#125;func a() &#123;&#125;internal let a = 0func b() &#123;&#125; explicit_type_interfaceå£°æ˜çš„å±æ€§åº”è¯¥æ˜ç¡®å…¶ç±»å‹, å¦‚: var myVar: Int = 0 è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® explicit_type_interface æœªå¯ç”¨ no idomatic ç¤ºä¾‹ 1234567891011// æ¨èclass Foo &#123; var myVar: Int? = 0 let myLet: Int? = 0&#125;// ä¸æ¨èclass Foo &#123; var myVar = 0 let myLet = 0&#125; extension_access_modifieråœ¨è‡ªå®šä¹‰ç±»ä¸­,æ¨èä½¿ç”¨extensionæ‰©å±• è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® extension_access_modifier æœªå¯ç”¨ no idiomatic no_extension_access_modifieråœ¨extensionæ‰©å±•å‰é¢,ä¸å»ºè®®ä½¿ç”¨(fileprivate, public)ç­‰ä¿®é¥°ç¬¦ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® no_extension_access_modifier æœªå¯ç”¨ no idiomatic ç¤ºä¾‹ 123456// ä¸æ¨èprivate extension String &#123;&#125;public extension String &#123;&#125;open extension String &#123;&#125;internal extension String &#123;&#125;fileprivate extension String &#123;&#125; fallthroughswitchè¯­å¥ä¸­ä¸å»ºè®®ä½¿ç”¨fallthrough è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® fallthrough å¯ç”¨ no idiomatic ç¤ºä¾‹ 12345678910111213// æ¨èswitch foo &#123;case .bar, .bar2, .bar3: something()&#125;// ä¸æ¨èswitch foo &#123;case .bar: fallthroughcase .bar2: something()&#125; fatal_error_messageæ‰§è¡ŒfatalErroré”™è¯¯æ—¶,å»ºè®®æœ‰ä¸€ä¸ªæç¤ºä¿¡æ¯; å¦‚:fatalError(â€œFooâ€) è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® fatal_error_message æœªå¯ç”¨ no idiomatic ç¤ºä¾‹ 123456789// æ¨èrequired init?(coder aDecoder: NSCoder) &#123; fatalError(&quot;init(coder:) has not been implemented&quot;)&#125;// ä¸æ¨èrequired init?(coder aDecoder: NSCoder) &#123; fatalError(&quot;&quot;)&#125; file_headeræ–‡ä»¶å¤´ã€‚æ–°å»ºçš„æ–‡ä»¶å¼€å§‹çš„æ³¨é‡Šåº”è¯¥ä¸€æ · è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® file_header æœªå¯ç”¨ no style ç¤ºä¾‹ 123456789101112131415161718/// ä¸ä¼šè§¦å‘warning/// å¦‚æœæˆ‘æ–°å»ºä¸€ä¸ªå·¥ç¨‹ï¼Œåœ¨ViewController.swiftæ–‡ä»¶ä¸­ï¼Œ å¼€å§‹çš„æ³¨é‡Šåº”è¯¥æ˜¯ï¼š// ViewController.swift// SwiftLint//// Created by langke on 17/1/17.// Copyright Â© 2017å¹´ langke. All rights reserved.//æ”¹å˜ä¸€ä¸‹å˜ä¸ºï¼š//// MyViewController.swift...................ç”±äºè¿™é‡Œå’Œå¤–é¢çš„æ–‡ä»¶åä¸ä¸€æ ·ï¼Œæ‰€ä»¥è§¦å‘warningï¼ˆå®é™…ä¸Šåœ¨swift 3.0ä¸Šæµ‹è¯•è¿™ä¸ªå±æ€§æš‚æ—¶æ²¡æœ‰ä»»ä½•ä½œç”¨ï¼ï¼ï¼‰// SwiftLint//// Created by langke on 17/1/17.// Copyright Â© 2017å¹´ langke. All rights reserved................å®˜æ–¹terminalè¡¨ç¤ºï¼ŒCopyrightå’ŒCreatedæ²¡æœ‰å¯¹é½ï¼Œä¹Ÿä¼šè§¦å‘warningï¼ï¼ï¼// file_lengthæ–‡ä»¶å†…å®¹è¡Œæ•°, è¶…è¿‡400è¡Œwarning, è¶…è¿‡1000è¡Œç»™error è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® file_length å¯ç”¨ no metrics first_whereä¸å»ºè®®åœ¨ä½¿ç”¨filterå’Œmapå‡½æ•°åç›´æ¥ä½¿ç”¨.first è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® first_where æœªå¯ç”¨ no performance ç¤ºä¾‹ 123456789101112131415161718192021222324public static let description = RuleDescription( identifier: &quot;first_where&quot;, name: &quot;First Where&quot;, description: &quot;Prefer using `.first(where:)` over `.filter &#123; &#125;.first` in collections.&quot;, kind: .performance, // ä¸ä¼šè§¦å‘è­¦å‘Š nonTriggeringExamples: [ &quot;kinds.filter(excludingKinds.contains).isEmpty &amp;&amp; kinds.first == .identifier\\n&quot;, &quot;myList.first(where: &#123; $0 % 2 == 0 &#125;)\\n&quot;, &quot;match(pattern: pattern).filter &#123; $0.first == .identifier &#125;\\n&quot;, &quot;(myList.filter &#123; $0 == 1 &#125;.suffix(2)).first\\n&quot; ], // ä»¥ä¸‹å†™æ³•ä¼šè§¦å‘è­¦å‘Š triggeringExamples: [ &quot;â†“myList.filter &#123; $0 % 2 == 0 &#125;.first\\n&quot;, &quot;â†“myList.filter(&#123; $0 % 2 == 0 &#125;).first\\n&quot;, &quot;â†“myList.map &#123; $0 + 1 &#125;.filter(&#123; $0 % 2 == 0 &#125;).first\\n&quot;, &quot;â†“myList.map &#123; $0 + 1 &#125;.filter(&#123; $0 % 2 == 0 &#125;).first?.something()\\n&quot;, &quot;â†“myList.filter(someFunction).first\\n&quot;, &quot;â†“myList.filter(&#123; $0 % 2 == 0 &#125;)\\n.first\\n&quot;, &quot;(â†“myList.filter &#123; $0 == 1 &#125;).first\\n&quot; ]) for_whereåœ¨forå¾ªç¯ä¸­,ä¸å»ºè®®ä½¿ç”¨å•ä¸ªifè¯­å¥æˆ–è€…åªä½¿ç”¨ä¸€æ¬¡å¾ªç¯å˜é‡,å¯ä½¿ç”¨whereæˆ–è€…if{}else{}è¯­å¥ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® for_where å¯ç”¨ no idiomatic ç¤ºä¾‹ 123456789101112131415161718192021222324252627// æ¨èfor user in users where user.id == 1 &#123; &#125;for user in users &#123; if let id = user.id &#123; &#125;&#125;for user in users &#123; if var id = user.id &#123; &#125;&#125;for user in users &#123; if user.id == 1 &#123; &#125; else &#123; &#125;&#125;for user in users &#123; if user.id == 1 &#123; &#125; print(user)&#125;for user in users &#123; let id = user.id if id == 1 &#123; &#125;&#125;for user in users &#123; if user.id == 1 &amp;&amp; user.age &gt; 18 &#123; &#125;&#125;// ä¸æ¨èfor user in users &#123; if user.id == 1 &#123; return true &#125;&#125; force_castä¸å»ºè®®ç›´æ¥å¼ºè§£ç±»å‹ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® force_cast å¯ç”¨ no idiomatic ç¤ºä¾‹ 12345// æ¨èNSNumber() as? Int// ä¸æ¨èNSNumber() as! Int force_tryå¯¹ä¼šæŠ›å‡ºå¼‚å¸¸(throws)çš„æ–¹æ³•,ä¸å»ºè®®try!å¼ºè§£ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® force_try å¯ç”¨ no idiomatic ç¤ºä¾‹ 1234567891011func myFunction() throws &#123; &#125;// æ¨èdo &#123; try myFunction()&#125; catch &#123;&#125;// ä¸æ¨èï¼Œè¿™æ ·ç›´æ¥è§¦å‘ errortry! myFunction() force_unwrappingå¼ºåˆ¶è§£åŒ…/æ‹†åŒ…ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå½“ä¸€ä¸ªç±»å‹æ˜¯å¯é€‰ç±»å‹çš„æ—¶å€™ï¼Œå½“æˆ‘ä»¬è·å–å€¼æ—¶ï¼Œéœ€è¦å¼ºåˆ¶è§£åŒ…ï¼ˆä¹Ÿå«éšå¼è§£åŒ…ï¼‰, é€šå¸¸æˆ‘ä»¬æ˜¯åœ¨ä¸€ä¸ªå˜é‡æˆ–è€…æ‰€éœ€è¦çš„å¸¸é‡ã€ç±»å‹ç­‰åé¢åŠ ä¸€ä¸ªâ€œ ï¼â€ï¼Œ ç„¶è€Œï¼Œswiftlintå»ºè®®å¼ºåˆ¶è§£åŒ…åº”è¯¥è¦é¿å…ï¼Œ å¦åˆ™å°†ç»™äºˆwarning è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® force_unwrapping æœªå¯ç”¨ no idiomatic ç¤ºä¾‹ 12345678910// æ¨èï¼Œä¸ä¼šè§¦å‘warningnavigationController?.pushViewController(myViewController, animated: true)/// ä¸æ¨èï¼Œå°†è§¦å‘warningnavigationController!.pushViewController(myViewController, animated: true)let url = NSURL(string: &quot;http://www.baidu.com&quot;)!print(url)return cell! function_body_lengthå‡½æ•°ä½“é•¿åº¦ï¼Œ å‡½æ•°ä½“ä¸åº”è¯¥è·¨è¶Šå¤ªå¤šè¡Œï¼Œ è¶…è¿‡40è¡Œç»™warningï¼Œ è¶…è¿‡100è¡Œç›´æ¥æŠ¥é”™ï¼Œå¯ä»¥ç¦ç”¨è§„é¿æ‰ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® function_body_length å¯ç”¨ no metrics function_parameter_countå‡½æ•°å‚æ•°ä¸ªæ•° å‡½æ•°å‚æ•°æ•°é‡(initæ–¹æ³•é™¤å¤–)åº”è¯¥å°‘ç‚¹ï¼Œä¸è¦å¤ªå¤šï¼Œswiftlintè§„å®šå‡½æ•°å‚æ•°æ•°é‡è¶…è¿‡5ä¸ªç»™warningï¼Œ è¶…è¿‡8ä¸ªç›´æ¥æŠ¥errorï¼Œå¯ä»¥ç¦ç”¨è§„é¿æ‰ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® function_parameter_count å¯ç”¨ no metrics generic_type_nameæ³›å‹ç±»å‹åç§°åªèƒ½åŒ…å«å­—æ¯æ•°å­—å­—ç¬¦ï¼Œä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Œé•¿åº¦ä»‹äº1åˆ°20ä¸ªå­—ç¬¦ä¹‹é—´ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® generic_type_name æœªå¯ç”¨ no idiomatic ç¤ºä¾‹ 1234567891011// æ¨èfunc foo&lt;T&gt;() &#123;&#125;func foo&lt;T&gt;() -&gt; T &#123;&#125;func foo&lt;T, U&gt;(param: U) -&gt; T &#123;&#125;func foo&lt;T: Hashable, U: Rule&gt;(param: U) -&gt; T &#123;&#125;// ä¸æ¨èfunc foo&lt;T_Foo&gt;() &#123;&#125;func foo&lt;T, U_Foo&gt;(param: U_Foo) -&gt; T &#123;&#125;func foo&lt;TTTTTTTTTTTTTTTTTTTTT&gt;() &#123;&#125;func foo&lt;type&gt;() &#123;&#125; identifier_nameå˜é‡æ ‡è¯†ç¬¦åç§°åº”è¯¥åªåŒ…å«å­—æ¯æ•°å­—å­—ç¬¦ï¼Œå¹¶ä»¥å°å†™å­—æ¯å¼€å¤´æˆ–åªåº”åŒ…å«å¤§å†™å­—æ¯ã€‚åœ¨ä¸Šè¿°ä¾‹å¤–æƒ…å†µä¸‹ï¼Œå½“å˜é‡åç§°è¢«å£°æ˜ä¸ºé™æ€ä¸”ä¸å¯å˜æ—¶ï¼Œå˜é‡åç§°å¯èƒ½ä»¥å¤§å†™å­—æ¯å¼€å¤´ã€‚å˜é‡åç§°ä¸åº”è¯¥å¤ªé•¿æˆ–å¤ªçŸ­ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® identifier_name å¯ç”¨ no style ç¤ºä¾‹ 1234567891011121314151617181920212223242526272829303132internal struct IdentifierNameRuleExamples &#123; // ä¸ä¼šè§¦å‘error static let nonTriggeringExamples = [ &quot;let myLet = 0&quot;, &quot;var myVar = 0&quot;, &quot;private let _myLet = 0&quot;, &quot;class Abc &#123; static let MyLet = 0 &#125;&quot;, &quot;let URL: NSURL? = nil&quot;, &quot;let XMLString: String? = nil&quot;, &quot;override var i = 0&quot;, &quot;enum Foo &#123; case myEnum &#125;&quot;, &quot;func isOperator(name: String) -&gt; Bool&quot;, &quot;func typeForKind(_ kind: SwiftDeclarationKind) -&gt; String&quot;, &quot;func == (lhs: SyntaxToken, rhs: SyntaxToken) -&gt; Bool&quot;, &quot;override func IsOperator(name: String) -&gt; Bool&quot; ] // ä¼šè§¦å‘error static let triggeringExamples = [ &quot;â†“let MyLet = 0&quot;, &quot;â†“let _myLet = 0&quot;, &quot;private â†“let myLet_ = 0&quot;, &quot;â†“let myExtremelyVeryVeryVeryVeryVeryVeryLongLet = 0&quot;, &quot;â†“var myExtremelyVeryVeryVeryVeryVeryVeryLongVar = 0&quot;, &quot;private â†“let _myExtremelyVeryVeryVeryVeryVeryVeryLongLet = 0&quot;, &quot;â†“let i = 0&quot;, &quot;â†“var id = 0&quot;, &quot;private â†“let _i = 0&quot;, &quot;â†“func IsOperator(name: String) -&gt; Bool&quot;, &quot;enum Foo &#123; case â†“MyEnum &#125;&quot; ]&#125; implicit_getterå¯¹äºåªæœ‰åªè¯»å±æ€§ä¸å»ºè®®é‡å†™getæ–¹æ³• è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® implicit_getter å¯ç”¨ no style ç¤ºä¾‹ 123456789101112131415161718192021222324252627282930313233343536373839404142//ä¸ä¼šè§¦å‘error//é‡å†™getå’Œsetæ–¹æ³•class Foo &#123; var foo: Int &#123; get &#123; return 3 &#125; set &#123; _abc = newValue &#125; &#125;&#125;//åªè¯»class Foo &#123; var foo: Int &#123; return 20 &#125;&#125;class Foo &#123; static var foo: Int &#123; return 20 &#125;&#125;//ä¼šè§¦å‘errorclass Foo &#123; var foo: Int &#123; get &#123; return 20 &#125; &#125;&#125;class Foo &#123; var foo: Int &#123; get&#123; return 20 &#125; &#125;&#125; implicit_returnå»ºè®®ä½¿ç”¨éšå¼è¿”å›é—­åŒ…; å¦‚: foo.map({ $0 + 1 }) è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® implicit_return æœªå¯ç”¨ no style ç¤ºä¾‹ 123456789101112// æ¨èfoo.map &#123; $0 + 1 &#125;foo.map(&#123; $0 + 1 &#125;)foo.map &#123; value in value + 1 &#125;// ä¸æ¨èfoo.map &#123; value in return value + 1&#125;foo.map &#123; return $0 + 1&#125; implicitly_unwrapped_optionalå°½é‡é¿å…éšå¼è§£æå¯é€‰ç±»å‹çš„ä½¿ç”¨ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® implicitly_unwrapped_optional æœªå¯ç”¨ no idiomatic ç¤ºä¾‹ 12345678910111213141516171819202122232425262728293031public static let description = RuleDescription( identifier: &quot;implicitly_unwrapped_optional&quot;, name: &quot;Implicitly Unwrapped Optional&quot;, description: &quot;Implicitly unwrapped optionals should be avoided when possible.&quot;, kind: .idiomatic, //ä¸ä¼šè§¦å‘warning nonTriggeringExamples: [ &quot;@IBOutlet private var label: UILabel!&quot;, &quot;@IBOutlet var label: UILabel!&quot;, &quot;@IBOutlet var label: [UILabel!]&quot;, &quot;if !boolean &#123;&#125;&quot;, &quot;let int: Int? = 42&quot;, &quot;let int: Int? = nil&quot; ], //ä¼šè§¦å‘warning triggeringExamples: [ &quot;let label: UILabel!&quot;, &quot;let IBOutlet: UILabel!&quot;, &quot;let labels: [UILabel!]&quot;, &quot;var ints: [Int!] = [42, nil, 42]&quot;, &quot;let label: IBOutlet!&quot;, &quot;let int: Int! = 42&quot;, &quot;let int: Int! = nil&quot;, &quot;var int: Int! = 42&quot;, &quot;let int: ImplicitlyUnwrappedOptional&lt;Int&gt;&quot;, &quot;let collection: AnyCollection&lt;Int!&gt;&quot;, &quot;func foo(int: Int!) &#123;&#125;&quot; ]) is_disjointåˆå§‹åŒ–é›†åˆSetæ—¶,æ¨èä½¿ç”¨Set.isDisjoint(), ä¸å»ºè®®:Set.intersection è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® is_disjoint å¯ç”¨ no idiomatic ç¤ºä¾‹ 123// æ¨èå†™æ³•_ = Set(syntaxKinds).isDisjoint(with: commentAndStringKindsSet)let isObjc = !objcAttributes.isDisjoint(with: dictionary.enclosedSwiftAttributes) joined_default_parameterjoinedæ–¹æ³•ä½¿ç”¨é»˜è®¤åˆ†éš”ç¬¦æ—¶, å»ºè®®ä½¿ç”¨joined()æ–¹æ³•, è€Œä¸æ˜¯joined(separator: â€œâ€)æ–¹æ³• è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® joined_default_parameter æœªå¯ç”¨ yes idiomatic ç¤ºä¾‹ 12345678// æ¨èlet foo = bar.joined()let foo = bar.joined(separator: &quot;,&quot;)let foo = bar.joined(separator: toto)// ä¸æ¨èlet foo = bar.joined(separator: &quot;&quot;)let foo = bar.filter(toto).joined(separator: &quot;&quot;) large_tupleå®šä¹‰çš„å…ƒç»„æˆå‘˜ä¸ªæ•°,è¶…è¿‡ä¸¤ä¸ªwarning è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® large_tuple å¯ç”¨ no metrics ç¤ºä¾‹ 123456789// ä¸æ¨èlet foo: (Int, Int)let foo: (start: Int, end: Int)let foo: (Int, (Int, String))// æ¨èlet foo: (Int, Int, Int)let foo: (start: Int, end: Int, value: String)let foo: (Int, (Int, Int, Int)) leading_whitespaceæ–‡ä»¶å¼€å§‹ä¸åº”è¯¥æœ‰ç©ºæ ¼æˆ–è€…æ¢è¡Œ, å¦åˆ™å°±ä¼šè§¦å‘warning è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® leading_whitespace å¯ç”¨ yes style legacy_cggeometry_functionså½“è·å–æŸä¸ªè§†å›¾çš„å®½ã€é«˜ã€æœ€å°Xã€æœ€å¤§Xå€¼ç­‰ç­‰ï¼Œswiftlintæ¨èä½¿ç”¨swiftçš„æ ‡å‡†è¯­æ³•ï¼Œå°½é‡ä¸è¦ä½¿ç”¨ä»Objective-Cä¸­çš„é—ç•™ç‰ˆæœ¬ï¼Œå°½é‡è¯­æ³•swiftåŒ– è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® legacy_cggeometry_functions å¯ç”¨ yes idiomatic ç¤ºä¾‹ 123456789// æ¨èrect.widthrect.heightrect.minXrect.midXrect...................// ä¸æ¨èCGRectGetWidth(someView.frame) legacy_constantå’Œå±æ€§ legacy_cggeometry_functions ä¸€æ ·ï¼Œ ç»“æ„èŒƒå›´å¸¸æ•°å°½é‡åˆ†å¼€ã€æ˜ç¡®ã€å…·ä½“ï¼Œ ä¸è¦ä½¿ç”¨OCçš„é—ç•™æ•´ä½“å¸¸æ•° è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® legacy_constant å¯ç”¨ yes idiomatic ç¤ºä¾‹ 123456// æ¨èCGPoint.zero// ä¸æ¨èCGPointZeroCGRectZero legacy_constructorswiftlintè¦æ±‚ç³»ç»Ÿè‡ªå¸¦æ„é€ å™¨ï¼Œ ä½¿ç”¨swiftè¯­æ³•åŒ–ï¼Œä¸è¦ä½¿ç”¨OCç‰ˆæœ¬çš„æ„é€ å™¨ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® legacy_constructor å¯ç”¨ yes idiomatic ç¤ºä¾‹ 12345// swiftè¯­æ³•ï¼Œç›¸ä¿¡ä¹‹åç³»ç»Ÿä¹Ÿä¼šå¼ºåˆ¶è§„å®šä½¿ç”¨CGPointï¼ˆx: 10ï¼Œ y: 20ï¼‰// é”™è¯¯çš„æ„é€ å™¨è¯­æ³•CGPointMake(10, 20) legacy_nsgeometry_functionsnsç±»å‡ ä½•å‡½æ•°ï¼Œ å’Œå‰é¢çš„å‡ ä¸ªå±æ€§ä¸€æ ·ï¼Œ ä½¿ç”¨swiftç‚¹è¯­æ³•å‡½æ•°ï¼Œ ä¸ä½¿ç”¨ä»¥å‰çš„ç‰ˆæœ¬ã€‚ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® legacy_nsgeometry_functions å¯ç”¨ yes idiomatic ç¤ºä¾‹ 12345/// æ­£ç¡®view.width/height/minX/// é”™è¯¯NSWidth(view.frame) let_var_whitespaceletå’Œvarè¯­å¥åº”è¯¥ç”¨ç©ºç™½è¡Œä¸å…¶ä»–è¯­å¥åˆ†å¼€ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® let_var_whitespace æœªå¯ç”¨ no style ç¤ºä¾‹ 123456789// æ¨èlet a = 0var x = 1x = 2// ä¸æ¨èvar x = 1x = 2 line_lengthè¡Œçš„å­—ç¬¦é•¿åº¦å±æ€§ã€‚å®˜æ–¹çš„è§„å®šæ˜¯è¶…è¿‡120å­—ç¬¦å°±ç»™warningï¼Œ è¶…è¿‡200ä¸ªå­—ç¬¦å°±ç›´æ¥æŠ¥errorï¼ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® line_length å¯ç”¨ no metrics literal_expression_end_indentationå­—å…¸å’Œæ•°ç»„çš„å¼€å¤´å’Œç»“å°¾è¦æœ‰ç›¸åŒçš„ç¼©è¿›æ ¼å¼ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® literal_expression_end_indentation æœªå¯ç”¨ no style markæ ‡è®°æ–¹æ³•æˆ–è€…å±æ€§ã€‚ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® mark å¯ç”¨ yes lint ç¤ºä¾‹ 123456789101112// æ¨è// MARK: good// MARK: - good// MARK: -// ä¸æ¨è//MARK: bad// MARK:bad//MARK:bad// MARK: bad// MARK: bad// MARK: -bad multiline_argumentsè°ƒç”¨å‡½æ•°å’Œæ–¹æ³•æ—¶, å…¶å‚æ•°åº”è¯¥åœ¨åŒä¸€è¡Œä¸Šï¼Œæˆ–è€…æ¯è¡Œä¸€ä¸ª è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® multiline_arguments æœªå¯ç”¨ no style ç¤ºä¾‹ 12345678// ä¸æ¨èfoo(0, param1: 1, param2: true, param3: [3])foo( 0, param1: 1, param2: true, param3: [3]) multiline_parameterså£°æ˜å‡½æ•°å’Œæ–¹æ³•æ—¶, å…¶å‚æ•°åº”è¯¥åœ¨åŒä¸€è¡Œä¸Šï¼Œæˆ–è€…æ¯è¡Œä¸€ä¸ª è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® multiline_parameters æœªå¯ç”¨ no style ç¤ºä¾‹ 12345678910// ä¸æ¨èprotocol Foo &#123; func foo(param1: Int, param2: Bool, param3: [String]) &#123; &#125;&#125;protocol Foo &#123; func foo(param1: Int, param2: Bool, param3: [String]) &#123; &#125;&#125; multiple_closures_with_trailing_closureå½“å‡½æ•°æœ‰å¤šä¸ªé—­åŒ…æ—¶, ä¸å»ºè®®ä½¿ç”¨å°¾éšé—­åŒ…è¯­æ³• è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® multiple_closures_with_trailing_closure å¯ç”¨ no style ç¤ºä¾‹ 12345678// ä¸æ¨èfoo.something(param1: &#123; $0 &#125;) &#123; $0 + 1 &#125;UIView.animate(withDuration: 1.0, animations: &#123; someView.alpha = 0.0&#125;) &#123; _ in someView.removeFromSuperview()&#125; nestingåµŒå¥—ã€‚ç±»å‹åµŒå¥—è‡³å¤šä¸€çº§ç»“æ„ï¼Œ å‡½æ•°è¯­å¥åµŒå¥—è‡³å¤šäº”çº§ç»“æ„ã€‚ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® nesting å¯ç”¨ no metrics nimble_operatorå¿«æ·æ“ä½œç¬¦ã€‚å’Œè‡ªç”±åŒ¹é…å‡½æ•°ç›¸æ¯”ï¼Œæ›´å–œæ¬¢å¿«æ·æ“ä½œç¬¦ï¼Œæ¯”å¦‚ï¼š&gt;=ã€ ==ã€ &lt;=ã€ &lt;ç­‰ç­‰ã€‚ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® nimble_operator æœªå¯ç”¨ yes idiomatic ç¤ºä¾‹ 123456789// æ¨è(person.voice) != &quot;Hello world&quot; // åˆ¤æ–­å­—ç¬¦ä¸²ç›¸åŒ10 &gt; 5 // 10æ¯”5å¤§99 &lt; 100 // 99æ¯”100å°// ä¸æ¨è(person.voice).toNot(equal(&quot;Hello world&quot;)) // åˆ¤æ–­å­—ç¬¦ä¸²ç›¸åŒ10.to(beGreaterThan(5)) // 10æ¯”5å¤§99.to(beLessThan(100)) // 99æ¯”100å° no_grouping_extensionåªæœ‰classå’Œprotocolå¯ä»¥ä½¿ç”¨extension,å…¶ä»–ç±»å‹ä¸å¯ä½¿ç”¨ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® no_grouping_extension æœªå¯ç”¨ no idiomatic ç¤ºä¾‹ 123456789101112// ä¸æ¨èenum Fruit &#123;&#125;extension Fruit &#123;&#125;extension Tea: Error &#123;&#125;struct Tea &#123;&#125;class Ham &#123; class Spam &#123;&#125;&#125;extension Ham.Spam &#123;&#125;extension External &#123; struct Gotcha &#123;&#125;&#125;extension External.Gotcha &#123;&#125; notification_center_detachmentå¯¹è±¡ç§»é™¤é€šçŸ¥åªèƒ½åœ¨deinitç§»é™¤self,å‡½æ•°ä¸­ä¸èƒ½removeObserver(self) è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® notification_center_detachment å¯ç”¨ no lint ç¤ºä¾‹ 1234567891011121314151617181920// ä¸ä¼šè§¦å‘warningclass Foo &#123; deinit &#123; NotificationCenter.default.removeObserver(self) &#125;&#125;class Foo &#123; func bar() &#123; NotificationCenter.default.removeObserver(otherObject) &#125;&#125;// ä¼šè§¦å‘warningclass Foo &#123; func bar() &#123; NotificationCenter.default.removeObserver(self) &#125;&#125; number_separatoræ•°å­—åˆ†å‰²çº¿ã€‚å½“åœ¨å¤§é‡çš„å°æ•°ä¸­ï¼Œ åº”è¯¥ä½¿ç”¨ä¸‹åˆ’çº¿æ¥ä½œä¸ºåƒåˆ†ä½åˆ†å‰²çº¿ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® number_separator æœªå¯ç”¨ yes style ç¤ºä¾‹ 1234567// æ¨èlet xxx = 1_000_000_000.000_1print(xxx)// ä¸æ¨èlet xxx = 1000000000.0001print(xxx) object_literalswiftlintè¡¨ç¤ºæ¯”èµ·å›¾ç‰‡å’Œé¢œè‰²åˆå§‹åŒ–ï¼Œæ›´å–œæ¬¢å¯¹è±¡åˆå§‹åŒ–ã€‚å› ä¸ºswiftåˆå§‹åŒ–å¯ä»¥ç”¨è¡¨æƒ…ï¼Œå›¾ç‰‡ï¼Œé¢œè‰²ç­‰ï¼Œè¿™ä¸ç¬¦åˆé¡¹ç›®ä¸­çš„ä¸€äº›ä¹ æƒ¯ç”¨æ³•ã€‚ä¸ discouraged_object_literal äº’æ–¥ï¼Œ ä¸ªäººä¸æ¨è è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® object_literal æœªå¯ç”¨ no idiomatic ç¤ºä¾‹ 123456789101112131415// æ¨èlet image = #imageLiteral(resourceName: &quot;image.jpg&quot;)let color = #colorLiteral(red: 0.9607843161, green: 0.7058823705, blue: 0.200000003, alpha: 1)let image = UIImage(named: aVariable)let image = UIImage(named: &quot;interpolated \\(variable)&quot;)let color = UIColor(red: value, green: value, blue: value, alpha: 1)let image = NSImage(named: aVariable)let image = NSImage(named: &quot;interpolated \\(variable)&quot;)let color = NSColor(red: value, green: value, blue: value, alpha: 1)// ä¸æ¨èlet image = â†“UIImage(named: &quot;foo&quot;)let color = â†“UIColor(red: 0.3, green: 0.3, blue: 0.3, alpha: 1)let color = â†“UIColor(red: 100 / 255.0, green: 50 / 255.0, blue: 0, alpha: 1)let color = â†“UIColor(white: 0.5, alpha: 1) opening_braceèŠ±æ‹¬å·ä¹‹å‰åº”è¯¥æœ‰ä¸€ä¸ªç©ºæ ¼,ä¸”ä¸å£°æ˜åœ¨åŒä¸€è¡Œ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® opening_brace å¯ç”¨ yes style ç¤ºä¾‹ 12345678// å»ºè®®func abc() &#123;&#125;[].map() &#123; $0 &#125;[].map(&#123; &#125;)if let a = b &#123; &#125;while a == b &#123; &#125;guard let a = b else &#123; &#125; operator_usage_whitespaceæ“ä½œç¬¦ä½¿ç”¨è§„åˆ™ï¼Œæ“ä½œç¬¦ä¸¤è¾¹åº”è¯¥æœ‰ç©ºæ ¼ã€‚æ¯”å¦‚ â€œ+â€ â€œ-â€ â€œï¼Ÿï¼Ÿâ€ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® operator_usage_whitespace æœªå¯ç”¨ yes style ç¤ºä¾‹ 1234567891011// æ¨èlet foo = 1 + 2let foo = 1 &gt; 2let foo = !false// ä¸æ¨èlet foo = 1+2let foo = 1 + 2let foo = 1 + 2let foo = 1 + 2let foo=1+2 operator_whitespaceç©ºæ ¼/ç©ºç™½æ“ä½œç¬¦ã€‚å½“å®šä¹‰ç©ºæ ¼æ“ä½œç¬¦çš„æ—¶å€™ï¼Œè¢«å®šä¹‰çš„åå­—æˆ–ç±»å‹ä¸¤è¾¹åº”è¯¥å„æœ‰ä¸€ä¸ªå•è¡Œç©ºæ ¼æ“ä½œç¬¦ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® operator_whitespace å¯ç”¨ no style ç¤ºä¾‹ 12345678// è§¦å‘è­¦å‘Šclass Something: Equatable &#123; var text: String? // &quot;==&quot;å’Œâ€œ(lhs: Something, rhs: Something)â€ä¹‹é—´åº”è¯¥æœ‰ä¸€ä¸ªç©ºæ ¼ static func ==(lhs: Something, rhs: Something) -&gt; Bool &#123; return lhs.text == rhs.text &#125;&#125; overridden_super_callä¸€äº›é‡å†™çš„æ–¹æ³•åº”è¯¥è°ƒç”¨super.(çˆ¶ç±»çš„)æ–¹æ³• è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® overridden_super_call æœªå¯ç”¨ no lint override_in_extensionåœ¨extensionä¸­,ä¸èƒ½é‡å†™æœªå£°æ˜çš„å±æ€§å’Œæœªå®šä¹‰çš„æ–¹æ³• è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® override_in_extension æœªå¯ç”¨ no lint ç¤ºä¾‹ 12345678910// é”™è¯¯å†™æ³•extension Person &#123; //è¯¥å±æ€§ä¹‹å‰æœªå®šä¹‰, ä¸èƒ½é‡å†™ override var age: Int &#123; return 42 &#125;&#125;extension Person &#123; //è¯¥æ–¹æ³•ä¹‹å‰ä¹Ÿä¸ºå®šä¹‰ä¸èƒ½é‡å†™ override func celebrateBirthday() &#123;&#125;&#125; pattern_matching_keywordsåœ¨switch-caseè¯­å¥ä¸­, å»ºè®®ä¸è¦å°†caseä¸­çš„letå’Œvarç­‰å…³é”®å­—æ”¾åˆ°å…ƒç¥–å†… è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® pattern_matching_keywords æœªå¯ç”¨ no style prefixed_toplevel_constantç±»ä¼¼å…¨å±€å¸¸é‡,å»ºè®®å‰ç¼€ä»¥kå¼€å¤´ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® prefixed_toplevel_constant æœªå¯ç”¨ no style ç¤ºä¾‹ 12345// æ¨èprivate let kFoo = 20.0public let kFoo = falseinternal let kFoo = &quot;Foo&quot;let kFoo = true private_actionIBActionsä¿®é¥°çš„æ–¹æ³•,åº”è¯¥éƒ½æ˜¯ç§æœ‰çš„ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® private_action æœªå¯ç”¨ no lint private_outletIBOutletsä¿®é¥°çš„å±æ€§åº”è¯¥éƒ½æ˜¯ç§æœ‰çš„ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® private_outlet æœªå¯ç”¨ no lint private_over_fileprivateprivateæ¯”fileprivateçš„ç§æœ‰ç¨‹åº¦æ›´é«˜ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® private_over_fileprivate å¯ç”¨ yes idiomatic private_unit_testç§æœ‰çš„å•å…ƒæµ‹è¯•ã€‚è¢«æ ‡è®°ä¸ºprivateçš„å•å…ƒæµ‹è¯•ä¸ä¼šè¢«æµ‹è¯•å·¥å…·XCTestè¿è¡Œï¼Œ ä¹Ÿå°±æ˜¯è¯´ï¼Œè¢«æ ‡è®°ä¸ºprivateçš„å•å…ƒæµ‹è¯•ä¼šè¢«é™æ€è·³è¿‡ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® private_unit_test å¯ç”¨ no lint ç¤ºä¾‹ 123456789101112131415161718192021222324252627private â†“class FooTest: XCTestCase &#123; ...............ç»§æ‰¿äºæµ‹è¯•ç”¨ä¾‹ç±»XCTestCase, è¢«æ ‡è®°ä¸ºprivateï¼Œæ‰€ä»¥è§¦å‘warning func test1() &#123;&#125; internal func test2() &#123;&#125; public func test3() &#123;&#125; private func test4() &#123;&#125;.......å¦å¤–æ³¨æ„è¿™é‡Œï¼Œä¸Šé¢æ—¢ç„¶ä¸ä¼šé€šè¿‡ï¼Œé‚£æ˜¾ç„¶è¿™é‡Œä¹Ÿä¸ä¼šé€šè¿‡ï¼Œæ ¹æœ¬ä¸ä¼šèµ°è¿™ä¸ªfunc &#125; internal class FooTest: XCTestCase &#123; ......å¼€å§‹é€šè¿‡æµ‹è¯•ï¼Œå› ä¸ºæ²¡æœ‰è¢«æ ‡è®°ä¸ºprivate func test1() &#123;&#125; internal func test2() &#123;&#125; public func test3() &#123;&#125; private â†“func test4() &#123;&#125;................ä¸é€šè¿‡ï¼Œå› ä¸ºè¢«æ ‡è®°ä¸ºprivate &#125; public class FooTest: XCTestCase &#123; ..........é€šè¿‡ func test1() &#123;&#125; internal func test2() &#123;&#125; public func test3() &#123;&#125; private â†“func test4() &#123;&#125;.................ä¸é€šè¿‡ï¼Œå› ä¸ºè¢«æ ‡è®°æˆprivate &#125; class FooTest: XCTestCase &#123; ..........é€šè¿‡ func test1() &#123;&#125; internal func test2() &#123;&#125; public func test3() &#123;&#125; private â†“func test4() &#123;&#125;.................ä¸é€šè¿‡ï¼Œå› ä¸ºè¢«æ ‡è®°æˆprivate &#125; prohibited_super_callä¸€äº›æ–¹æ³•ä¸åº”è¯¥è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³• è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® prohibited_super_call æœªå¯ç”¨ no lint ç¤ºä¾‹ 1234567891011121314151617181920212223242526//ä»¥ä¸‹æ–¹æ³•ä¸å»ºè®®è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•class VC: UIViewController &#123; override func loadView() &#123;â†“ super.loadView() &#125;&#125;class VC: NSFileProviderExtension &#123; override func providePlaceholder(at url: URL,completionHandler: @escaping (Error?) -&gt; Void) &#123;â†“ self.method1() super.providePlaceholder(at:url, completionHandler: completionHandler) &#125;&#125;class VC: NSView &#123; override func updateLayer() &#123;â†“ self.method1() super.updateLayer() self.method2() &#125;&#125;class VC: NSView &#123; override func updateLayer() &#123;â†“ defer &#123; super.updateLayer() &#125; &#125;&#125; protocol_property_accessors_orderåœ¨åè®®ä¸­å£°æ˜å±æ€§æ—¶ï¼Œè®¿é—®è€…çš„é¡ºåºåº”è¯¥æ˜¯get set è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® protocol_property_accessors_order å¯ç”¨ yes style ç¤ºä¾‹ 123456789// å»ºè®®protocol Foo &#123; var bar: String &#123; get set &#125;&#125;// ä¸å»ºè®®protocol Foo &#123; var bar: String &#123; set get &#125;&#125; quick_discouraged_callåœ¨å•å…ƒæµ‹è¯•ä¸­,ä¸å»ºè®®åœ¨describeå’Œcontentæ¯”ä¿é‡ç›´æ¥è°ƒç”¨æ–¹æ³•å’Œç±» è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® quick_discouraged_call æœªå¯ç”¨ no lint quick_discouraged_focused_teståœ¨å•å…ƒæµ‹è¯•ä¸­,ä¸å»ºè®®é›†ä¸­æµ‹è¯•,å¦åˆ™å¯èƒ½ä¸èƒ½è¿è¡ŒæˆåŠŸ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® quick_discouraged_focused_test æœªå¯ç”¨ no lint quick_discouraged_pending_testå•å…ƒæµ‹è¯•ä¸­é˜»æ­¢æœªè¿›è¡Œçš„æµ‹è¯•å•å…ƒ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® quick_discouraged_pending_test æœªå¯ç”¨ no lint redundant_discardable_letä¸éœ€è¦åˆå§‹åŒ–æ–¹æ³•è¿”å›ç»“æœæ—¶,å»ºè®®ä½¿ç”¨: _ = Person(), è€Œä¸æ˜¯:let _ = Person() è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® redundant_discardable_let å¯ç”¨ yes style ç¤ºä¾‹ 12345678// æ¨è_ = foo()if let _ = foo() &#123; &#125;guard let _ = foo() else &#123; return &#125;// ä¸å»ºè®®let _ = foo()if _ = foo() &#123; let _ = bar() &#125; redundant_nil_coalescingä½¿ç”¨å¯èƒ½ä¸ºä¸ºnilçš„å¯é€‰å€¼æ—¶,å»ºè®®ä½¿ç”¨: str ?? â€œâ€, ??å·¦å³ä¸¤ä¾§è¦æœ‰ä¸€ä¸ªç©ºæ ¼ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® redundant_nil_coalescing æœªå¯ç”¨ yes idiomatic ç¤ºä¾‹ 123456// å»ºè®®var myVar: Int?; myVar ?? 0// ä¸å»ºè®®var myVar: Int? = nil; myVar ?? nilvar myVar: Int? = nil; myVar??nil redundant_optional_initializationåˆå§‹åŒ–nilå˜é‡æ—¶,ä¸å»ºè®®èµ‹å€¼nil è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® redundant_optional_initialization å¯ç”¨ yes idiomatic ç¤ºä¾‹ 1234567891011// ä¸ä¼šè§¦å‘warningvar myVar: Int?let myVar: Int? = nilvar myVar: Optional&lt;Int&gt;let myVar: Optional&lt;Int&gt; = nil// ä¼šè§¦å‘warningvar myVar: Int?â†“ = nilvar myVar: Optional&lt;Int&gt;â†“ = nilvar myVar: Int?â†“=nilvar myVar: Optional&lt;Int&gt;â†“=nil redundant_string_enum_valueåœ¨å®šä¹‰å­—ç¬¦ä¸²æšä¸¾çš„æ—¶å€™, å½“å­—ç¬¦ä¸²æšä¸¾å€¼ç­‰äºæšä¸¾åç§°æ—¶ï¼Œå¯ä»¥ä¸ç”¨èµ‹å€¼ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® redundant_string_enum_value å¯ç”¨ no idiomatic ç¤ºä¾‹ 123456789101112131415161718// ä¸ä¼šè§¦å‘warningenum Numbers: String &#123; case one case two&#125;enum Numbers: Int &#123; case one = 1 case two = 2&#125;// ä¼šè§¦å‘warningenum Numbers: String &#123; case one = â†“&quot;one&quot; case two = â†“&quot;two&quot;&#125;enum Numbers: String &#123; case one = â†“&quot;one&quot;, two = â†“&quot;two&quot;&#125; redundant_void_returnå½“å‡½æ•°è¿”å›å€¼ä¸ºVoidæ—¶,å»ºè®®ä¸å†™è¿”å›å€¼, å®šä¹‰å¸¸é‡æˆ–è€…å˜é‡çš„æ—¶å€™å¯ä»¥ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® redundant_void_return å¯ç”¨ yes idiomatic ç¤ºä¾‹ 12345678910111213141516// ä¸ä¼šè§¦å‘warningfunc foo() &#123;&#125;func foo() -&gt; Int &#123;&#125;func foo() -&gt; Int -&gt; Void &#123;&#125;func foo() -&gt; VoidResponselet foo: Int -&gt; Void// ä¼šè§¦å‘warningfunc foo()â†“ -&gt; Void &#123;&#125;protocol Foo &#123; func foo()â†“ -&gt; Void&#125;func foo()â†“ -&gt; () &#123;&#125;protocol Foo &#123; func foo()â†“ -&gt; ()&#125; required_enum_caseå®šä¹‰çš„æšä¸¾,å¿…é¡»æœ‰ä¸å…¶å¯¹åº”çš„æ“ä½œå®ç° è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® required_enum_case æœªå¯ç”¨ no lint return_arrow_whitespaceswiftlintæ¨èè¿”å›ç®­å¤´å’Œè¿”å›ç±»å‹åº”è¯¥è¢«ç©ºæ ¼åˆ†å¼€ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® return_arrow_whitespace å¯ç”¨ yes style ç¤ºä¾‹ 12345678910// æ¨èå†™æ³•func abc() -&gt; Int &#123;&#125;func abc() -&gt; [Int] &#123;&#125;// ä¸å»ºè®®å†™æ³•func abc()â†“-&gt;Int &#123;&#125;func abc()â†“-&gt;[Int] &#123;&#125;func abc()â†“-&gt;(Int, Int) &#123;&#125;func abc()â†“-&gt; Int &#123;&#125;func abc()â†“ -&gt;Int &#123;&#125; shorthand_operatoråœ¨swiftlintä¸­ï¼Œ å°±æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„ç®€æ´æ“ä½œè¿ç®—ç¬¦ï¼Œæ¯”å¦‚ï¼š+= ï¼Œ -=ï¼Œ *=ï¼Œ /= ç­‰ç­‰ã€‚åœ¨swiftlintä¸­ï¼Œåœ¨åšä¸€äº›èµ‹å€¼æ“ä½œçš„æ—¶å€™ï¼Œæ¨èä½¿ç”¨ç®€çŸ­æ“ä½œç¬¦ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® shorthand_operator å¯ç”¨ no style ç¤ºä¾‹ 123456789/// ä¸æ¨èä½¿ç”¨var value = 4value = value / 2print(value)/// æ¨èä½¿ç”¨var value = 4value /= 2print(value) single_test_classå•å…ƒæµ‹è¯•ä¸­,æµ‹è¯•æ–‡ä»¶åº”è¯¥åŒ…å«ä¸€ä¸ªQuickSpecæˆ–XCTestCaseç±» è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® single_test_class æœªå¯ç”¨ no style sorted_first_laståœ¨è·å–æŸæ•°ç»„ä¸­æœ€å¤§æœ€å°å€¼æ—¶,å»ºè®®ä½¿ç”¨minå’Œmaxå‡½æ•°,è€Œä¸æ˜¯sorted().firstå’Œsorted().lase è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® sorted_first_last æœªå¯ç”¨ no style sorted_importsåˆ†ç±»/æœ‰åºå¯¼å…¥ã€‚ è¿™ä¸ªå±æ€§æœ‰äº›å¥‡æ€ªï¼Œ è¦æ±‚å¯¼å…¥çš„æ—¶å€™å¯¼å…¥çš„ç±»è¦æŒ‰é¡ºåºå¯¼å…¥ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® sorted_imports æœªå¯ç”¨ yes style ç¤ºä¾‹ 123456789//å»ºè®®å†™æ³•import AAAimport BBBimport CCCimport DDDimport Alamofireimport API statement_positioné™ˆè¿°å¥ä½ç½®ï¼Œ è¿™é‡Œä¸»è¦æŒ‡çš„æ˜¯ else å’Œ catch å‰é¢è¦åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œ ä¹Ÿä¸èƒ½å¤§äº1ä¸ªç©ºæ ¼ï¼Œ å¦åˆ™å°±ä¼šè§¦å‘è­¦å‘Š è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® statement_position å¯ç”¨ yes style ç¤ºä¾‹ 1234567891011121314151617181920212223242526/// æ²¡æœ‰ç©ºæ ¼ï¼Œè§¦å‘warninglet number = &quot;long&quot;if number.isEmpty &#123; print(&quot;ä¸ºç©º&quot;)&#125;else &#123;.............................æ³¨æ„è¿™é‡Œ print(&quot;ä¸ä¸ºç©º&quot;)&#125;/// è¿™é‡Œä¹Ÿä¼šè§¦å‘warningï¼Œ å› ä¸ºelse ifæ¢è¡Œäº†let number = &quot;long&quot;if number.isEmpty &#123; print(&quot;ä¸ºç©º&quot;)&#125;else if number.contains(&quot;long&quot;) &#123;............................æ³¨æ„è¿™é‡Œ print(&quot;ä¸ä¸ºç©º&quot;)&#125; else &#123; print(&quot;s&quot;)&#125;/// æ­£ç¡®çš„å†™æ³•let number = &quot;long&quot;if number.isEmpty &#123; print(&quot;ä¸ºç©º&quot;)&#125; else &#123; print(&quot;ä¸ä¸ºç©º&quot;)&#125; strict_fileprivateextensionä¸­ä¸å»ºè®®ä½¿ç”¨fileprivate ä¿®é¥°æ–¹æ³•å’Œå±æ€§ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® strict_fileprivate æœªå¯ç”¨ no idiomatic superfluous_disable_commandè¢«ç¦ç”¨çš„è§„åˆ™ä¸ä¼šåœ¨ç¦ç”¨åŒºåŸŸè§¦å‘è­¦å‘Š è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® superfluous_disable_command å¯ç”¨ no lint switch_case_alignmentswitch-caseè¯­å¥ä¸­switchå’Œcaseåº”è¯¥å‚ç›´å¯¹é½ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® switch_case_alignment å¯ç”¨ no style ç¤ºä¾‹ 1234567891011121314151617// æ¨èswitch someBool &#123;case true: // case 1 print(&apos;red&apos;)case false: if case let .someEnum(val) = someFunc() &#123; print(&apos;blue&apos;) &#125;&#125;// ä¸æ¨èswitch someBool &#123; â†“case true: print(&apos;red&apos;) â†“case false: print(&apos;blue&apos;)&#125; switch_case_on_newlineåœ¨switchè¯­æ³•é‡Œï¼Œ caseåº”è¯¥æ€»æ˜¯åœ¨ä¸€ä¸ªæ–°è¡Œä¸Šé¢ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® switch_case_on_newline å¯ç”¨ no idiomatic ç¤ºä¾‹ 12345678910111213141516// swiftlintè¡¨ç¤ºä¼šè§¦å‘warningswitch type &#123;case .value1: print(&quot;1&quot;)...................åœ¨åŒä¸€è¡Œé”™case .value2: print(&quot;2&quot;)...................åœ¨åŒä¸€è¡Œé”™default: print(&quot;3&quot;)...................åœ¨åŒä¸€è¡Œé”™&#125;/// ä¸ä¼šè§¦å‘warningswitch type &#123;case .value1: print(&quot;1&quot;)case .value2: print(&quot;2&quot;)default: print(&quot;3&quot;)&#125; syntactic_sugarswiftlintæ¨èä½¿ç”¨é€Ÿè®°è¯­æ³•ç³–ï¼Œ ä¾‹å¦‚ [Int] ä»£æ›¿ Array, å¼ºçƒˆå»ºè®®æ¨èä½¿ç”¨ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® syntactic_sugar å¯ç”¨ no idiomatic ç¤ºä¾‹ 1234567/// è§¦å‘warninglet myArray: Array&lt;Int&gt; = [1, 2, 3]print(myArray)/// æ­£ç¡®å†™æ³•ï¼Œä¸ä¼šè§¦å‘warninglet myArray: [Int] = [1, 2, 3] print(myArray) todoTODO å’Œ FIXME åº”è¯¥é¿å…ä½¿ç”¨ï¼Œ ä½¿ç”¨â€œnotaTODO å’Œ notaFIXMEâ€ä»£æ›¿ã€‚å¦å¤–ï¼Œ å’Œ MARK æ ‡è®°ä¸åŒçš„æ˜¯ï¼Œ â€œnotaTODO å’Œ notaFIXMEâ€æ²¡æœ‰ç©ºæ ¼è¦æ±‚ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® todo å¯ç”¨ no lint trailing_closureå…³äºé—­åŒ…ä¸­{}çš„ä½¿ç”¨, æ¨èä½¿ç”¨å°¾éšé—­åŒ…çš„è¯­æ³• è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® trailing_closure æœªå¯ç”¨ no style ç¤ºä¾‹ 1234567//æ¨èä½¿ç”¨foo.map &#123; $0 + 1 &#125;foo.reduce(0) &#123; $0 + 1 &#125;//ä¸æ¨èä½¿ç”¨foo.map(&#123; $0 + 1 &#125;)â†“foo.reduce(0, combine: &#123; $0 + 1 &#125;) trailing_comma è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® trailing_comma å¯ç”¨ yes style trailing_newlineæ–‡ä»¶ï¼ˆå±æ€§ã€æ–¹æ³•ï¼‰ç»“æŸçš„çš„æ—¶å€™ï¼ˆâ€œ}â€ä¹‹å‰ï¼‰ï¼Œ åº”è¯¥æœ‰ä¸€ä¸ªç©ºæ ¼æ–°è¡Œï¼Œä½†è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® trailing_newline å¯ç”¨ yes style ç¤ºä¾‹ 1234567891011121314151617/// ç©ºä¸€è¡Œï¼Œä¸ä¼šè§¦å‘è­¦å‘ŠnonTriggeringExamples: [ &quot;let a = 0\\n&quot;],/// ä¸‹é¢ä¼šè§¦å‘è­¦å‘ŠtriggeringExamples: [ &quot;let a = 0&quot;, /// ä¸ç©ºè¡Œï¼Œä¼šè§¦å‘è­¦å‘Šï¼ˆå®é™…ä¸Šï¼Œæˆ‘è¯•è¿‡ï¼Œä¸ä¼šè§¦å‘è­¦å‘Šï¼‰ &quot;let a = 0\\n\\n&quot; /// ç©ºä¸¤è¡Œï¼Œ ä¼šè§¦å‘è­¦å‘Šï¼ˆå®é™…ä¸Šï¼Œæˆ‘è¯•è¿‡ï¼Œä¼šè§¦å‘è­¦å‘Šï¼Œä½†æ˜¯è§¦å‘çš„æ˜¯vertical_whitespaceè­¦å‘Šè€Œä¸æ˜¯trailing_newlineï¼‰],/// è¯´è¯´è¿™é‡Œï¼Œå®ƒè¦æ±‚æ”¹æ­£ä¸ºéƒ½ç©ºä¸€è¡Œï¼Œè™½ç„¶è¿™æ ·codeçœ‹èµ·æ¥å¾ˆè½»æ¾ï¼Œä½†å¦‚æœå®šä¹‰å˜é‡æˆ–å¸¸é‡å¤ªå¤šï¼Œå°±å¤ªåˆ†æ•£äº†ï¼ˆå€¼å¾—è¯´çš„æ˜¯ï¼Œå°±ç®—ä¸ç©ºè¡Œä¹Ÿä¸ä¼šè§¦å‘trailing_newline, åº”è¯¥åˆšæ‰ä¹Ÿå·²ç»è¯´äº†ï¼Œè¿™ä¸ªå±æ€§åªæ˜¯è¯´â€œåº”è¯¥â€ï¼Œè€Œä¸æ˜¯å¿…é¡»ï¼‰corrections: [ &quot;let a = 0&quot;: &quot;let a = 0\\n&quot;, &quot;let b = 0\\n\\n&quot;: &quot;let b = 0\\n&quot;, &quot;let c = 0\\n\\n\\n\\n&quot;: &quot;let c = 0\\n&quot;] trailing_semicolonå°½ç®¡åœ¨å˜é‡æˆ–å¸¸é‡èµ‹å€¼ä¹‹ååŠ ä¸åŠ åˆ†å·åœ¨swiftä¸­æ²¡æœ‰ç¡¬æ€§çš„è¦æ±‚ï¼Œä½†æ˜¯ä¸ºäº†ä½¿code styleæ›´swiftåŒ–ï¼Œæ‰€ä»¥å°½é‡æˆ–è€…ç»å¯¹ä¸è¦åŠ â€œ;â€ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® trailing_semicolon å¯ç”¨ yes idiomatic trailing_whitespaceå‡½æ•°æ–¹æ³•ç»“æŸå,ä¸å»ºè®®æ·»åŠ ç©ºæ ¼è¡Œ, å’Œvertical_whitespaceè²Œä¼¼æœ‰å†²çª è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® trailing_whitespace å¯ç”¨ yes style ç¤ºä¾‹ 12345678910111213/// ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸ä¼šè§¦å‘è­¦å‘Šï¼Œä½†æ˜¯ä¸€æ—¦å…¶ä¸­æœ‰ä¸€ä¸ªç©ºè¡Œå°±ä¼šè§¦å‘è­¦å‘Štrailing_whitespace, è¿™å’Œvertical_whitespaceå®è´¨ä¸Šæœ‰äº›å†²çªï¼Œvertical_whitespaceè¦æ±‚ä¸¤è¡Œcodeä¹‹é—´ä¸è¶…è¿‡1è¡Œï¼Œè¦ä¹ˆæ²¡æœ‰ç©ºè¡Œï¼Œè¦ä¹ˆåªæœ‰1è¡Œï¼Œè€Œtrailing_whitespaceè¦æ±‚æ²¡æœ‰ç©ºè¡Œï¼ï¼ï¼class ViewController: UIViewController &#123; override func viewDidLoad() &#123; super.viewDidLoad() let a = 0 let b = 1 let c = 2 &#125; func chenlong() -&gt; Void &#123; let a = 0 print(a) &#125;&#125; type_body_lengthç±»å‹ä½“é•¿åº¦ã€‚ç±»å‹ä½“é•¿åº¦ä¸åº”è¯¥è·¨è¶Šå¤ªå¤šè¡Œï¼Œ è¶…è¿‡200è¡Œç»™warningï¼Œè¶…è¿‡350è¡Œç»™errorã€‚ä¸€èˆ¬æ˜¯å¤§æ‹¬å·æˆ–è€…æ‹¬å·å†…, æ¯”å¦‚å®šä¹‰ä¸€ä¸ªenumæˆ–struct è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® type_body_length å¯ç”¨ no metrics type_nameç±»å‹åï¼Œ ç±»å‹ååº”è¯¥åªåŒ…å«å­—æ¯æ•°å­—å­—ç¬¦ï¼Œ å¹¶ä¸”ä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Œé•¿åº¦åœ¨3-40ä¸ªå­—ç¬¦ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® type_name å¯ç”¨ no idiomatic unneeded_break_in_switchåœ¨switch-caseè¯­å¥ä¸­, æœ‰æ–¹æ³•è°ƒç”¨æˆ–æ“ä½œæ—¶,é¿å…ä½¿ç”¨breakè¯­å¥ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® unneeded_break_in_switch å¯ç”¨ no idiomatic ç¤ºä¾‹ 123456789101112131415161718192021//ä¸ä¼šè§¦å‘warningswitch foo &#123;case .bar: break&#125;switch foo &#123;default: break&#125;switch foo &#123;case .bar: something()&#125;//ä¼šè§¦å‘warningswitch foo &#123;case .bar://è¿™é‡Œå·²ç»æœ‰æ–¹æ³•è°ƒç”¨äº† something() â†“break&#125; unneeded_parentheses_in_closure_argumentåœ¨å®šä¹‰æˆ–ä½¿ç”¨é—­åŒ…æ—¶,é—­åŒ…å‚æ•°ä¸å»ºè®®ä½¿ç”¨æ‹¬å·() è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® unneeded_parentheses_in_closure_argument æœªå¯ç”¨ yes style ç¤ºä¾‹ 12345678//å»ºè®®let foo = &#123; (bar: Int) in &#125;let foo = &#123; bar, _ in &#125;let foo = &#123; bar in &#125;//ä¸å»ºè®®call(arg: &#123; â†“(bar) in &#125;)call(arg: &#123; â†“(bar, _) in &#125;) unused_closure_parameterswiftlintå»ºè®®æœ€å¥½æŠŠä¸ä½¿ç”¨çš„é—­åŒ…å‚æ•°ä½¿ç”¨ â€œ_â€ä»£æ›¿ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® unused_closure_parameter å¯ç”¨ yes lint ç¤ºä¾‹ 123456789101112131415//ä¸ä¼šè§¦å‘warning[1, 2].map &#123; number in number + 1&#125;[1, 2].map &#123; _ in 3&#125;//ä¼šè§¦å‘warning[1, 2].map &#123; â†“number in return 3&#125;[1, 2].map &#123; â†“number in return numberWithSuffix&#125; unused_enumeratedåœ¨foréå†æ•°ç»„æ—¶, å¦‚æœ‰æœªä½¿ç”¨çš„ç´¢å¼•,ä¸å»ºè®®ä½¿ç”¨.enumerated() è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® unused_enumerated å¯ç”¨ no idiomatic ç¤ºä¾‹ 12345678910//ä¸ä¼šè§¦å‘warningfor (idx, foo) in bar.enumerated() &#123; &#125;for (_, foo) in bar.enumerated().something() &#123; &#125;for (_, foo) in bar.something() &#123; &#125;//ä¼šè§¦å‘warningfor (â†“_, foo) in bar.enumerated() &#123; &#125;for (â†“_, foo) in abc.bar.enumerated() &#123; &#125;for (â†“_, foo) in abc.something().enumerated() &#123; &#125;for (idx, â†“_) in bar.enumerated() &#123; &#125; unused_optional_bindingåœ¨ä½¿ç”¨ifåˆ¤æ–­æŸå˜é‡æ˜¯å¦ä¸ºnilçš„æ—¶å€™, ä¸å»ºè®®ä½¿ç”¨ä¸‹åˆ’çº¿(_) è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® unused_optional_binding å¯ç”¨ no style ç¤ºä¾‹ 123456789//ä¸ä¼šè§¦å‘warningif let bar = Foo.optionalValue &#123;&#125;//ä¼šè§¦å‘warningif let â†“_ = Foo.optionalValue &#123;&#125;if let a = Foo.optionalValue, let â†“_ = Foo.optionalValue2 &#123;&#125; valid_ibinspectable@IBInspectableåœ¨swiftlintä¸­çš„ä½¿ç”¨éœ€è¦æ³¨æ„ï¼Œ ç¬¬ä¸€å¿…é¡»æ˜¯å˜é‡ï¼Œ ç¬¬äºŒå¿…é¡»è¦æœ‰æŒ‡å®šçš„ç±»å‹ï¼Œå¦‚æœæŒ‡å®šçš„ç±»å‹æ˜¯å¯é€‰ç±»å‹æˆ–è€…éšå¼ç±»å‹ï¼Œåˆ™ç›®å‰å®˜æ–¹åªæ”¯æŒä»¥ä¸‹å‡ ç§ç±»å‹ï¼šString, NSString, UIColor, NSColor, UIImage, NSImage. è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® valid_ibinspectable å¯ç”¨ no lint ç¤ºä¾‹ 12345678910111213/// æŒ‡å®šä¸ºå˜é‡varï¼Œ ç±»å‹ä¸ºStringï¼Ÿå’ŒStringï¼@IBInspectable private var yyy: String?@IBInspectable private var zzz: String!/// å¦‚æœå†™æˆè¿™æ ·ï¼Œç¼–è¯‘èƒ½é€šè¿‡ï¼Œä½†æ˜¯ä¼šè§¦å‘è­¦å‘Š, å› ä¸ºswiftlintæš‚ä¸æ”¯æŒIntå¯é€‰å’Œéšå¼ç±»å‹:@IBInspectable private var dddl: Int!@IBInspectable private var eeel: Int?/// å¦‚æœæŒ‡å®šçš„ç±»å‹ä¸æ˜¯å¯é€‰ç±»å‹ï¼Œ å°±åº”è¯¥åˆå§‹åŒ–ï¼Œå¦åˆ™ç³»ç»Ÿä¸å…è®¸ï¼Œä¼šæŠ¥é”™æ‰€åœ¨çš„ç±»æ²¡æœ‰åˆå§‹åŒ–å¯¹ï¼š@IBInspectable private var counts: Int = 0ç³»ç»ŸæŠ¥é”™ï¼š@IBInspectable private var counts: Int vertical_parameter_alignmentå‚ç›´æ–¹å‘ä¸Šçš„å‚æ•°å¯¹é½ã€‚å½“å‡½æ•°å‚æ•°æœ‰å¤šè¡Œçš„æ—¶å€™ï¼Œ å‡½æ•°å‚æ•°åœ¨å‚ç›´æ–¹å‘ä¸Šåº”è¯¥å¯¹é½ï¼ˆå‚æ•°æ¢è¡Œçš„æ—¶å€™å·¦è¾¹å¯¹é½ï¼‰ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® vertical_parameter_alignment å¯ç”¨ no style ç¤ºä¾‹ 12345678910//ä¸ä¼šè§¦å‘warningfunc validateFunction(_ file: File, kind: SwiftDeclarationKind, dictionary: [String: SourceKitRepresentable]) &#123; &#125;func validateFunction(_ file: File, kind: SwiftDeclarationKind, dictionary: [String: SourceKitRepresentable]) -&gt; [StyleViolation]//ä¼šè§¦å‘warningfunc validateFunction(_ file: File, kind: SwiftDeclarationKind, â†“dictionary: [String: SourceKitRepresentable]) &#123; &#125; vertical_parameter_alignment_on_callå½“è°ƒç”¨å¤šä¸ªå‚æ•°çš„å‡½æ•°æ—¶,å¦‚æœå‚æ•°å¤šè¡Œæ˜¾ç¤º,åˆ™åº”è¯¥å‚ç›´å¯¹é½ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® vertical_parameter_alignment_on_call æœªå¯ç”¨ no style ç¤ºä¾‹ 12345678910111213141516171819//ä¸ä¼šè§¦å‘warningfoo(param1: 1, param2: bar param3: false, param4: true)foo(param1: 1, param2: bar)foo(param1: 1, param2: bar param3: false, param4: true)//ä¼šè§¦å‘warningfoo(param1: 1, param2: bar â†“param3: false, param4: true)foo(param1: 1, param2: bar â†“param3: false, param4: true)foo(param1: 1, param2: bar â†“param3: false, â†“param4: true) vertical_whitespaceå‚ç›´æ–¹å‘ä¸Šçš„ç©ºæ ¼è¡Œï¼Œé™åˆ¶ä¸ºä¸€è¡Œï¼ˆæ³¨é‡Šé™¤å¤–ï¼‰ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® vertical_whitespace å¯ç”¨ yes style ç¤ºä¾‹ 1234567891011121314151617181920/// æ²¡æœ‰ç©ºæ ¼ï¼Œ nonTriggerWarningoverride func viewDidLoad() &#123; super.viewDidLoad() let aaa = 0&#125;/// æœ‰ä¸€è¡Œç©ºæ ¼, nonTriggerWarningoverride func viewDidLoad() &#123; super.viewDidLoad() let aaa = 0 ............................1&#125;/// &gt;=2è¡Œï¼Œå°±ä¼šè§¦å‘è­¦å‘Šoverride func viewDidLoad() &#123; super.viewDidLoad() let aaa = 0 .............................1 .............................2&#125; void_returnå¤šä½™çš„è¿”å›å€¼ä¸ºç©ºï¼Œ åœ¨å‡½æ•°å£°æ˜çš„æ—¶å€™ï¼Œè¿”å›å€¼ä¸ºç©ºæ˜¯å¤šä½™çš„ã€‚å®šä¹‰å¸¸é‡æˆ–è€…å˜é‡çš„æ—¶å€™å¯ä»¥ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® void_return å¯ç”¨ yes style ç¤ºä¾‹ 123456789/// è¿™ä¸ªå±æ€§è¦æ±‚è¿™æ ·å†™ï¼Œ è¿”å›å€¼ä¸ºç©ºçœç•¥func XingYun() &#123; print(&quot;titan&quot;)&#125;/// è¿™ä¸ªå±æ€§è¦æ±‚åˆ«è¿™æ ·å†™ï¼Œå¦åˆ™ä¼šæœ‰warningï¼ˆä½†æ˜¯æˆ‘åœ¨swift 3.0ä¸Šæµ‹è¯•å¹¶æ²¡æœ‰è§¦å‘warningï¼‰func XingYun() -&gt; Void &#123; print(&quot;titan&quot;)&#125; weak_delegateä»£ç†åº”è¯¥å†™æˆweakç±»å‹ï¼ˆå¼±ä»£ç†ï¼‰æ¥é¿å…å¾ªç¯å¼•ç”¨ è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® weak_delegate å¯ç”¨ no lint ç¤ºä¾‹ 123456789101112131415161718192021222324252627282930/// 1.1 ç¼–è¯‘é€šè¿‡class Langke &#123; var chenlong: NSObjectProtocol?&#125;/// 1.2 ç¼–è¯‘é€šè¿‡ï¼Œä½†æ˜¯è§¦å‘swiftlintçš„ weak_delegateè­¦å‘Šï¼Œ åŸå› æ˜¯å˜é‡å myDelegate ä¸­æœ‰ delegate å…³é”®å­—ï¼Œè¿™å±äºåå­—æ»¥ç”¨class Langke &#123; var myDelegate: NSObjectProtocol?&#125;/// 1.3 ç¼–è¯‘é€šè¿‡ï¼Œ ä¸ä¼šè§¦å‘è­¦å‘Šï¼Œ åŸå› æ˜¯åœ¨ var å…³é”®å­—å‰é¢åŠ äº† weakclass Langke &#123; weak var myDelegate: NSObjectProtocol?&#125;/// 2.1 ç¼–è¯‘é€šè¿‡ï¼Œä½†æ˜¯è§¦å‘ weak_delegate è­¦å‘Šï¼ŒåŸå› æ˜¯ scrollDelegate ä¸­ Delegate æ”¾åœ¨äº†æœ€åï¼Œ è¢«ç†è§£æˆäº†ä»£ç†class Langke &#123; var scrollDelegate: UIScrollViewDelegate?&#125;/// 2.2 ç¼–è¯‘é€šè¿‡ï¼Œ æ—¢ç„¶å˜é‡åè¢«ç†è§£æˆäº†ä»£ç†ï¼Œ é‚£ä¸ºäº†ç±»ä¼¼é˜²æ­¢å¾ªç¯å¼•ç”¨ï¼Œ åº”è¯¥åŠ å…³é”®å­— weakclass Langke &#123; weak var scrollDelegate: UIScrollViewDelegate?&#125;/// ç¼–è¯‘é€šè¿‡ï¼Œ ä¸ä¼šè§¦å‘è­¦å‘Šï¼Œ å› ä¸ºdelegateæ”¾åœ¨äº†å‰é¢ï¼Œ æ²¡æœ‰è¢«ç†è§£æˆä»£ç†class Langke &#123; var delegateScroll: UIScrollViewDelegate?&#125; xctfail_messageå•å…ƒæµ‹è¯•ä¸­,XCTFailè°ƒç”¨åº”è¯¥åŒ…æ‹¬å£°æ˜æè¿° è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® xctfail_message å¯ç”¨ no idiomatic yoda_condition è¯†åˆ«ç  é»˜è®¤æ˜¯å¦å¯ç”¨ æ˜¯å¦æ”¯æŒè‡ªåŠ¨æ›´æ­£ ç±»å‹ é»˜è®¤é…ç½® yoda_condition æœªå¯ç”¨ no lint ç¤ºä¾‹ 123456789101112//ä¸ä¼šè§¦å‘warningif foo == 42 &#123;&#125;if foo &lt;= 42.42 &#123;&#125;guard foo &gt;= 42 else &#123; return &#125;guard foo != &quot;str str&quot; else &#123; return &#125;//ä¼šè§¦å‘warningâ†“if 42 == foo &#123;&#125;â†“if 42.42 &gt;= foo &#123;&#125;â†“guard 42 &lt;= foo else &#123; return &#125;â†“guard &quot;str str&quot; != foo else &#123; return &#125;â†“while 10 &gt; foo &#123; &#125;","categories":[],"tags":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://kysonyangs.github.io/tags/å·¥å…·/"}]},{"title":"SwiftLint ä½¿ç”¨","slug":"SwiftLintä½¿ç”¨","date":"2019-08-11T07:32:33.000Z","updated":"2020-05-16T05:40:03.190Z","comments":true,"path":"default/SwiftLintä½¿ç”¨/","link":"","permalink":"https://kysonyangs.github.io/default/SwiftLintä½¿ç”¨/","excerpt":"SwiftLintå®˜æ–¹æ–‡æ¡£ SwiftLint ä»‹ç» SwiftLint å®‰è£… SwiftLint è§„åˆ™ è‡ªå®šä¹‰é…ç½® SwiftLint ä»‹ç» SwiftLint æ˜¯ Realm æ¨å‡ºçš„ä¸€æ¬¾ Swift ä»£ç è§„èŒƒæ£€æŸ¥å·¥å…·, SwiftLint åŸºäº Github å…¬å¸ƒçš„ Swift ä»£ç è§„èŒƒ è¿›è¡Œä»£ç æ£€æŸ¥ï¼Œå¹¶ä¸”èƒ½å¤Ÿå¾ˆå¥½çš„å’Œ Xcode æ•´åˆ é…ç½®å¥½æ‰€æœ‰çš„è®¾ç½®ä¹‹åï¼Œåœ¨ Xcode ä¸­æ‰§è¡Œç¼–è¯‘æ—¶ï¼ŒSwiftLint ä¼šè‡ªåŠ¨è¿è¡Œæ£€æŸ¥ï¼Œä¸ç¬¦åˆè§„èŒƒçš„ä»£ç ä¼šé€šè¿‡ è­¦å‘Š æˆ–è€… çº¢è‰²é”™è¯¯ çš„å½¢å¼æŒ‡ç¤ºå‡ºæ¥ æ”¯æŒè‡ªå®šä¹‰è§„åˆ™,å¯ç¦ç”¨æˆ–è€…å¼€å¯æŸä¸€äº›è§„åˆ™","text":"SwiftLintå®˜æ–¹æ–‡æ¡£ SwiftLint ä»‹ç» SwiftLint å®‰è£… SwiftLint è§„åˆ™ è‡ªå®šä¹‰é…ç½® SwiftLint ä»‹ç» SwiftLint æ˜¯ Realm æ¨å‡ºçš„ä¸€æ¬¾ Swift ä»£ç è§„èŒƒæ£€æŸ¥å·¥å…·, SwiftLint åŸºäº Github å…¬å¸ƒçš„ Swift ä»£ç è§„èŒƒ è¿›è¡Œä»£ç æ£€æŸ¥ï¼Œå¹¶ä¸”èƒ½å¤Ÿå¾ˆå¥½çš„å’Œ Xcode æ•´åˆ é…ç½®å¥½æ‰€æœ‰çš„è®¾ç½®ä¹‹åï¼Œåœ¨ Xcode ä¸­æ‰§è¡Œç¼–è¯‘æ—¶ï¼ŒSwiftLint ä¼šè‡ªåŠ¨è¿è¡Œæ£€æŸ¥ï¼Œä¸ç¬¦åˆè§„èŒƒçš„ä»£ç ä¼šé€šè¿‡ è­¦å‘Š æˆ–è€… çº¢è‰²é”™è¯¯ çš„å½¢å¼æŒ‡ç¤ºå‡ºæ¥ æ”¯æŒè‡ªå®šä¹‰è§„åˆ™,å¯ç¦ç”¨æˆ–è€…å¼€å¯æŸä¸€äº›è§„åˆ™ SwiftLint å®‰è£… å®‰è£… ä½¿ç”¨Homebrew brew install swiftlint CocoaPods å®‰è£… pod &#39;SwiftLint&#39; æ³¨æ„åœ¨ .gitignore æ·»åŠ  å¯¹åº”ç›®å½• é¿å…ä¸å¿…è¦çš„éº»çƒ¦ é…ç½® Build Phases -&gt; New Run Script Phase (-&gt; é‡å‘½åä¸º SwiftLint) æ·»åŠ è„šæœ¬ Homebrew å®‰è£… 12345if which swiftlint &gt;/dev/null; thenswiftlintelseecho &quot;warning: SwiftLint not installed, download from https://github.com/realm/ SwiftLint&quot;fi CocoaPodså®‰è£… &quot;${PODS_ROOT}/SwiftLint/swiftlint&quot; Command+B ç¼–è¯‘é¡¹ç›®ï¼Œå¯ä»¥æŸ¥çœ‹ä½ ä¸è§„èŒƒçš„åœ°æ–¹äº† SwiftLint è§„åˆ™ Rules.md åœ¨ä»£ç ä¸­å…³é—­æŸä¸ªè§„åˆ™1234å¯ä»¥é€šè¿‡åœ¨ä¸€ä¸ªæºæ–‡ä»¶ä¸­å®šä¹‰ä¸€ä¸ªå¦‚ä¸‹æ ¼å¼çš„æ³¨é‡Šæ¥å…³é—­æŸä¸ªè§„åˆ™ï¼š// swiftlint:disable &lt;rule&gt;åœ¨è¯¥æ–‡ä»¶ç»“æŸä¹‹å‰æˆ–è€…åœ¨å®šä¹‰å¦‚ä¸‹æ ¼å¼çš„åŒ¹é…æ³¨é‡Šä¹‹å‰ï¼Œè¿™æ¡è§„åˆ™éƒ½ä¼šè¢«ç¦ç”¨ï¼š// swiftlint:enable &lt;rule&gt; 1234567ä¹Ÿå¯ä»¥é€šè¿‡æ·»åŠ  :previous, :this æˆ–è€… :next æ¥ä½¿å…³é—­æˆ–è€…æ‰“å¼€æŸæ¡è§„åˆ™çš„å‘½ä»¤åˆ†åˆ«åº”ç”¨äºå‰ä¸€è¡Œï¼Œå½“å‰æˆ–è€…åä¸€è¡Œä»£ç ã€‚// swiftlint:disable:next force_castlet noWarning = NSNumber() as! Intlet hasWarning = NSNumber() as! Intlet noWarning2 = NSNumber() as! Int // swiftlint:disable:this force_castlet noWarning3 = NSNumber() as! Int// swiftlint:disable:previous force_cast è‡ªå®šä¹‰é…ç½®å½“ç¼–è¯‘åå‘ç° 999+è­¦å‘Š 999+ é”™è¯¯ï¼Œæ˜¯ä¸æ˜¯å¾ˆå´©æºƒï¼Œå¦‚æœè§‰å¾—è§„èŒƒå¤ªä¸¥æ ¼ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ä¸€äº›é…ç½®æ¥ç¬¦åˆè‡ªå·±çš„é£æ ¼ï¼Œå†åšä¸€äº›é…ç½®å¿½ç•¥ CocoaPodsã€Carthageã€è‡ªå·±å¯¼å…¥çš„åŒ… ç­‰åŒ…ç®¡ç†å™¨å¼•å…¥çš„ç¬¬ä¸‰æ–¹åº“ åˆ›å»ºé…ç½®æ–‡ä»¶ æ ¹ç›®å½•ä¸‹ touch .swiftlint.yml æ–°å»ºä¸€ä¸ª .swiftlint.yml çš„é…ç½®æ–‡ä»¶ å‡ ä¸ªé…ç½®é€‰é¡¹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849disabled_rules: # ç¦ç”¨æŒ‡å®šçš„è§„åˆ™ - colon - comma - control_statementopt_in_rules: # å¯ç”¨æŒ‡å®šçš„è§„åˆ™ - empty_count - missing_docs # å¯ä»¥é€šè¿‡æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤æ¥æŸ¥æ‰¾æ‰€æœ‰å¯ç”¨çš„è§„åˆ™: # swiftlint rulesincluded: # æ‰§è¡Œ linting æ—¶åŒ…å«çš„è·¯å¾„ã€‚å¦‚æœå‡ºç°è¿™ä¸ª `--path` ä¼šè¢«å¿½ç•¥ã€‚ - Sourceexcluded: # æ‰§è¡Œ linting æ—¶å¿½ç•¥çš„è·¯å¾„ã€‚ ä¼˜å…ˆçº§æ¯” `included` æ›´é«˜ã€‚ - Carthage - Pods - Source/ExcludedFolder - Source/ExcludedFile.swift# å¯é…ç½®çš„è§„åˆ™å¯ä»¥é€šè¿‡è¿™ä¸ªé…ç½®æ–‡ä»¶æ¥è‡ªå®šä¹‰# äºŒè¿›åˆ¶è§„åˆ™å¯ä»¥è®¾ç½®ä»–ä»¬çš„ä¸¥æ ¼ç¨‹åº¦force_cast: warning # éšå¼force_try: severity: warning # æ˜¾å¼# åŒæ—¶æœ‰è­¦å‘Šå’Œé”™è¯¯ç­‰çº§çš„è§„åˆ™ï¼Œå¯ä»¥åªè®¾ç½®å®ƒçš„è­¦å‘Šç­‰çº§# éšå¼line_length: 110# å¯ä»¥é€šè¿‡ä¸€ä¸ªæ•°ç»„åŒæ—¶è¿›è¡Œéšå¼è®¾ç½®type_body_length: - 300 # warning - 400 # error# æˆ–è€…ä¹Ÿå¯ä»¥åŒæ—¶è¿›è¡Œæ˜¾å¼è®¾ç½®file_length: warning: 500 error: 1200# å‘½åè§„åˆ™å¯ä»¥è®¾ç½®æœ€å°é•¿åº¦å’Œæœ€å¤§ç¨‹åº¦çš„è­¦å‘Š/é”™è¯¯# æ­¤å¤–å®ƒä»¬ä¹Ÿå¯ä»¥è®¾ç½®æ’é™¤åœ¨å¤–çš„åå­—type_name: min_length: 4 # åªæ˜¯è­¦å‘Š max_length: # è­¦å‘Šå’Œé”™è¯¯ warning: 40 error: 50 excluded: iPhone # æ’é™¤æŸä¸ªåå­—identifier_name: min_length: # åªæœ‰æœ€å°é•¿åº¦ error: 4 # åªæœ‰é”™è¯¯ excluded: # æ’é™¤æŸäº›åå­— - id - URL - GlobalAPIKeyreporter: &quot;xcode&quot; # æŠ¥å‘Šç±»å‹ (xcode, json, csv, checkstyle, junit, html, emoji) æˆ‘çš„é…ç½®æ–‡ä»¶ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677disabled_rules: # rule identifiers to exclude from running - missing_docs - unused_closure_parameter - cyclomatic_complexityopt_in_rules: # some rules are only opt-in - empty_count# Find all the available rules by running:# swiftlint rulesincluded: # paths to include during linting. `--path` is ignored if present. - xxx - xxx - xxxexcluded: # paths to ignore during linting. Takes precedence over `included`. - Pods - xxx - xxx# configurable rules can be customized from this configuration file# binary rules can set their severity levelforce_cast: warning # implicitlyforce_try: severity: warning # explicitly# rules that have both warning and error levels, can set just the warning level# implicitlyline_length: 300function_body_length: - 300 # warning - 400 # errorfunction_parameter_count: - 10 # warning - 15 # errorlarge_tuple: - 6 # warning - 12 # error# they can set both implicitly with an arraytype_body_length: - 300 # warning - 400 # error# or they can set both explicitlyfile_length: warning: 1000 error: 2000cyclomatic_complexity: - 15 # warning - 30 # error# naming rules can set warnings/errors for min_length and max_length# additionally they can set excluded namestype_name: min_length: 3 # only warning max_length: # warning and error warning: 40 error: 50 excluded: # excluded via string - T - Eidentifier_name: min_length: # only min_length error: 3 # only error excluded: # excluded via string array - vc - id - in - kf - x - y","categories":[],"tags":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://kysonyangs.github.io/tags/å·¥å…·/"}]},{"title":"YYCacheæºç é˜…è¯»","slug":"YYCacheæºç é˜…è¯»","date":"2018-12-16T12:18:20.000Z","updated":"2020-05-17T08:12:25.627Z","comments":true,"path":"default/YYCacheæºç é˜…è¯»/","link":"","permalink":"https://kysonyangs.github.io/default/YYCacheæºç é˜…è¯»/","excerpt":"ä¸€ç›´æƒ³å†™ä¸€å†™è‡ªå·±è¯»æºç çš„æ„Ÿå—ä¸ç†è§£ï¼Œå¯æƒœä¸€ç›´æœªä»˜è¯¸è¡ŒåŠ¨ã€‚æœ€è¿‘é—²æ¥æ— äº‹ï¼Œç´¢æ€§æ•´ç†ä¸€ä¸‹ï¼Œè®°å½•äºæ­¤. YYCacheYYCahce åŒ…æ‹¬ å†…å­˜ç¼“å­˜(YYMemoryCache) ä¸ ç£ç›˜ç¼“å­˜(YYDiskCache), è€Œä¸”éƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ YYMemoryCache å†…å­˜ç¼“å­˜ä¸€èˆ¬è¿™ä¸ªç¼“å­˜éœ€è¦è¿›è¡Œé«˜æ•ˆæŸ¥è¯¢æ•°æ®ï¼Œæ‰€ä»¥ä½¿ç”¨å­—å…¸è¿™ç§ key-value æ¨¡å¼ã€‚é‚£ä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨å­—å…¸å‘¢ï¼Œå› ä¸ºéœ€è¦ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚è€Œä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨ NSCache å‘¢ï¼Œå› ä¸º YYMemoryCache æä¾›ä¸€ç§ LRU(least-recently-used: æœ€è¿‘æœ€ä¹…å°‘ä½¿ç”¨çš„ä¼šå…ˆåˆ é™¤) ç®—æ³•å»æ“ä½œç¼“å­˜ã€‚","text":"ä¸€ç›´æƒ³å†™ä¸€å†™è‡ªå·±è¯»æºç çš„æ„Ÿå—ä¸ç†è§£ï¼Œå¯æƒœä¸€ç›´æœªä»˜è¯¸è¡ŒåŠ¨ã€‚æœ€è¿‘é—²æ¥æ— äº‹ï¼Œç´¢æ€§æ•´ç†ä¸€ä¸‹ï¼Œè®°å½•äºæ­¤. YYCacheYYCahce åŒ…æ‹¬ å†…å­˜ç¼“å­˜(YYMemoryCache) ä¸ ç£ç›˜ç¼“å­˜(YYDiskCache), è€Œä¸”éƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ YYMemoryCache å†…å­˜ç¼“å­˜ä¸€èˆ¬è¿™ä¸ªç¼“å­˜éœ€è¦è¿›è¡Œé«˜æ•ˆæŸ¥è¯¢æ•°æ®ï¼Œæ‰€ä»¥ä½¿ç”¨å­—å…¸è¿™ç§ key-value æ¨¡å¼ã€‚é‚£ä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨å­—å…¸å‘¢ï¼Œå› ä¸ºéœ€è¦ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚è€Œä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨ NSCache å‘¢ï¼Œå› ä¸º YYMemoryCache æä¾›ä¸€ç§ LRU(least-recently-used: æœ€è¿‘æœ€ä¹…å°‘ä½¿ç”¨çš„ä¼šå…ˆåˆ é™¤) ç®—æ³•å»æ“ä½œç¼“å­˜ã€‚ _YYLinkedMapä¸ºäº†å®ç°ç®—æ³•ï¼ŒYYMemoryCache å†…éƒ¨å°è£…äº†ä¸€ä¸ª _YYLinkedMap çš„åŒå‘é“¾è¡¨12345678910@interface _YYLinkedMap : NSObject &#123; @package CFMutableDictionaryRef _dic; // å“ˆå¸Œå­—å…¸ï¼Œå­˜æ”¾ (key : _YYLinkedMapNode) NSUInteger _totalCost; // ç¼“å­˜æ€»å¤§å° NSUInteger _totalCount; // ç¼“å­˜èŠ‚ç‚¹ä¸ªæ•° _YYLinkedMapNode *_head; // å¤´ç»“ç‚¹ _YYLinkedMapNode *_tail; // å°¾èŠ‚ç‚¹ BOOL _releaseOnMainThread; // åœ¨ä¸»çº¿ç¨‹é‡Šæ”¾ BOOL _releaseAsynchronously; // åœ¨å¼‚æ­¥çº¿ç¨‹é‡Šæ”¾&#125; _YYLinkedMapNode é“¾è¡¨èŠ‚ç‚¹æ•°æ®123456789@interface _YYLinkedMapNode : NSObject &#123; @package __unsafe_unretained _YYLinkedMapNode *_prev; // æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ __unsafe_unretained _YYLinkedMapNode *_next; // æŒ‡å‘åä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ id _key; // ç¼“å­˜æ•°æ®çš„key id _value; // ç¼“å­˜çš„æ•°æ® NSUInteger _cost; // èŠ‚ç‚¹å ç”¨å¤§å° NSTimeInterval _time; // èŠ‚ç‚¹æ“ä½œæ—¶é—´&#125; CFMutableDictionaryRef æ“ä½œ: CoreFoundation çš„å­—å…¸ï¼Œå…¶æ€§èƒ½æ›´å¥½ 12345678/// åˆå§‹åŒ–_dic = CFDictionaryCreateMutable(CFAllocatorGetDefault(), 0, &amp;kCFTypeDictionaryKeyCallBacks, &amp;kCFTypeDictionaryValueCallBacks);/// å­˜å‚¨æ•°æ®CFDictionarySetValue(_dic, (__bridge const void *)(node-&gt;_key), (__bridge const void *)(node));/// æ ¹æ®keyåˆ é™¤æ•°æ®CFDictionaryRemoveValue(_dic, (__bridge const void *)(node-&gt;_key));/// è·å–å­—å…¸å…ƒç´ ä¸ªæ•°CFDictionaryGetCount(_dic); 2._YYLinkedMap æ–¹æ³•åˆ—è¡¨ï¼š 12345678910/// æ’å…¥å¤´èŠ‚ç‚¹- (void)insertNodeAtHead:(_YYLinkedMapNode *)node;/// å°†èŠ‚ç‚¹è®¾ä¸ºå¤´ç»“ç‚¹- (void)bringNodeToHead:(_YYLinkedMapNode *)node;/// åˆ é™¤èŠ‚ç‚¹- (void)removeNode:(_YYLinkedMapNode *)node;/// åˆ é™¤å°¾èŠ‚ç‚¹- (_YYLinkedMapNode *)removeTailNode;/// åˆ é™¤æ‰€æœ‰æ•°æ®- (void)removeAll; pthread_mutex_t äº’æ–¥é”ï¼Œä¿è¯çº¿ç¨‹å®‰å…¨æ“ä½œæ–¹æ³•:1234pthread_mutex_init(&amp;_lock, NULL); // åˆå§‹åŒ–pthread_mutex_lock(&amp;_lock); // åŠ é”pthread_mutex_unlock(&amp;_lock); // è§£é”pthread_mutex_trylock(&amp;_lock) == 0 // æ˜¯å¦åŠ é”ï¼Œ0:æœªé”ä½ï¼Œå…¶ä»–å€¼ï¼šé”ä½ è¾¹ç•Œæ£€æµ‹YYMemoryCache æœ‰ä¸€ä¸ªè¾¹ç•Œæ£€æµ‹æœºåˆ¶ï¼Œä» YYMemoryCache åˆå§‹åŒ–å°±å¼€å§‹å·¥ä½œ(ç±»ä¼¼äºå®šæ—¶å™¨ï¼Œéš”ä¸€æ®µæ—¶é—´å°±æ‰§è¡Œä¸€æ¬¡æ“ä½œï¼Œä½†ä¸æ˜¯ä½¿ç”¨å®šæ—¶å™¨)ï¼Œä½¿ç”¨é€’å½’è°ƒç”¨1234567891011121314151617- (void)_trimRecursively &#123; __weak typeof(self) _self = self; dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(_autoTrimInterval * NSEC_PER_SEC)), dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^&#123; __strong typeof(_self) self = _self; if (!self) return; [self _trimInBackground]; // è¾¹ç•Œæ£€æµ‹ [self _trimRecursively]; // é€’å½’è°ƒç”¨è‡ªå·±ï¼Œå®ç°å®šæ—¶å™¨çš„æ•ˆæœ &#125;);&#125;- (void)_trimInBackground &#123; dispatch_async(_queue, ^&#123; [self _trimToCost:self-&gt;_costLimit]; // ç¼“å­˜å¤§å°æ˜¯å¦è¶…è¿‡é¢„å®šå€¼ï¼Œè¶…è¿‡åˆ™ä»å°¾èŠ‚ç‚¹å¼€å§‹åˆ é™¤ [self _trimToCount:self-&gt;_countLimit];// ç¼“å­˜ä¸ªæ•°æ˜¯å¦è¶…è¿‡é¢„å®šå€¼ï¼Œè¶…è¿‡åˆ™ä»å°¾èŠ‚ç‚¹å¼€å§‹åˆ é™¤ [self _trimToAge:self-&gt;_ageLimit]; // éå†èŠ‚ç‚¹ï¼Œåˆ é™¤å’Œnowç›¸å·® _ageLimit çš„èŠ‚ç‚¹ &#125;);&#125; _trimToCost _trimToCount123456789101112131415161718192021222324252627282930313233343536- (void)_trimToCost:(NSUInteger)costLimit &#123; BOOL finish = NO; pthread_mutex_lock(&amp;_lock); if (costLimit == 0) &#123; [_lru removeAll]; finish = YES; &#125; else if (_lru-&gt;_totalCost &lt;= costLimit) &#123; finish = YES; &#125; pthread_mutex_unlock(&amp;_lock); if (finish) return; NSMutableArray *holder = [NSMutableArray new]; while (!finish) &#123; if (pthread_mutex_trylock(&amp;_lock) == 0) &#123; if (_lru-&gt;_totalCost &gt; costLimit) &#123; _YYLinkedMapNode *node = [_lru removeTailNode]; if (node) [holder addObject:node]; &#125; else &#123; finish = YES; &#125; pthread_mutex_unlock(&amp;_lock); &#125; else &#123; usleep(10 * 1000); //10 ms &#125; &#125; if (holder.count) &#123; dispatch_queue_t queue = _lru-&gt;_releaseOnMainThread ? dispatch_get_main_queue() : YYMemoryCacheGetReleaseQueue(); dispatch_async(queue, ^&#123; [holder count]; // åœ¨è¿™é‡Œ é‡Šæ”¾ nodeï¼Œé˜²æ­¢åˆ†æ•£æ§åˆ¶ &#125;); &#125;&#125;- (void)_trimToCount:(NSUInteger)countLimit &#123; ...&#125; _trimToAge12345678910111213141516171819- (void)_trimToAge:(NSTimeInterval)ageLimit &#123; ... NSMutableArray *holder = [NSMutableArray new]; while (!finish) &#123; if (pthread_mutex_trylock(&amp;_lock) == 0) &#123; if (_lru-&gt;_tail &amp;&amp; (now - _lru-&gt;_tail-&gt;_time) &gt; ageLimit) &#123; _YYLinkedMapNode *node = [_lru removeTailNode]; if (node) [holder addObject:node]; &#125; else &#123; finish = YES; &#125; pthread_mutex_unlock(&amp;_lock); &#125; else &#123; usleep(10 * 1000); //10 ms &#125; &#125; ...&#125; ç›‘å¬å†…å­˜è­¦å‘Šé€šçŸ¥/è¿›å…¥åå°é€šçŸ¥è‡ªåŠ¨æ¸…ç©ºå†…å­˜ç¼“å­˜ å¢åˆ æŸ¥æ”¹æ‰€æœ‰æ“ä½œéƒ½éœ€è¦è¿›è¡Œçº¿ç¨‹å®‰å…¨æ§åˆ¶ï¼šåŠ é” å¢/æ”¹ 12345678910111213141516171819202122232425262728293031323334- (void)setObject:(id)object forKey:(id)key withCost:(NSUInteger)cost &#123; ... pthread_mutex_lock(&amp;_lock); _YYLinkedMapNode *node = CFDictionaryGetValue(_lru-&gt;_dic, (__bridge const void *)(key)); NSTimeInterval now = CACurrentMediaTime(); if (node) &#123; // æ•°æ®å­˜åœ¨: æ›´æ–°ï¼Œå¹¶ç§»åŠ¨åˆ°å¤´ç»“ç‚¹ _lru-&gt;_totalCost -= node-&gt;_cost; _lru-&gt;_totalCost += cost; node-&gt;_cost = cost; node-&gt;_time = now; node-&gt;_value = object; [_lru bringNodeToHead:node]; &#125; else &#123; // æ•°æ®ä¸å­˜åœ¨ï¼šç›´æ¥æ·»åŠ åˆ°å¤´ç»“ç‚¹ node = [_YYLinkedMapNode new]; node-&gt;_cost = cost; node-&gt;_time = now; node-&gt;_key = key; node-&gt;_value = object; [_lru insertNodeAtHead:node]; &#125; // è®¡ç®—ç¼“å­˜å¤§å°æ˜¯å¦å¤§äºé¢„å®šå€¼ï¼Œå¤§äºåˆ™è¿›è¡Œåˆ ç¼“å­˜æ“ä½œ if (_lru-&gt;_totalCost &gt; _costLimit) &#123; dispatch_async(_queue, ^&#123; [self trimToCost:_costLimit]; &#125;); &#125; // ç¼“å­˜ä¸ªæ•°å¤§äºé¢„å®šå€¼ï¼Œç›´æ¥åˆ é™¤å°¾èŠ‚ç‚¹ if (_lru-&gt;_totalCount &gt; _countLimit) &#123; _YYLinkedMapNode *node = [_lru removeTailNode]; ... &#125; pthread_mutex_unlock(&amp;_lock);&#125; åˆ  12345678910111213/// æ ¹æ®keyè¿›è¡Œåˆ é™¤- (void)removeObjectForKey:(id)key &#123; ... pthread_mutex_lock(&amp;_lock); _YYLinkedMapNode *node = CFDictionaryGetValue(_lru-&gt;_dic, (__bridge const void *)(key)); if (node) &#123; [_lru removeNode:node]; ... &#125; pthread_mutex_unlock(&amp;_lock);&#125;/// åˆ é™¤æ‰€æœ‰- (void)removeAllObjects; æŸ¥ 1234/// æ˜¯å¦åŒ…å«æŸä¸ªæ•°æ®- (BOOL)containsObjectForKey:(id)key;/// è·å–ç¼“å­˜æ•°æ®: 1.æ›´æ–°èŠ‚ç‚¹çš„æ—¶é—´æˆ³ï¼Œ2.å¹¶å°†èŠ‚ç‚¹ç§»åˆ°å¤´ç»“ç‚¹- (id)objectForKey:(id)key; æ€»ç»“ YYMemoryCache æ“ä½œäº†å†…å­˜ç¼“å­˜, ç›¸è¾ƒäºç£ç›˜ç¼“å­˜éœ€è¦è¿›è¡ŒI/Oæ“ä½œ, åœ¨æ€§èƒ½ä¸Šå¿«å¾ˆå¤š, å› æ­¤YYCacheè®¿é—®ç¼“å­˜æ—¶, ä¼˜å…ˆç”¨çš„æ˜¯YYMemoryCacheã€‚ YYMemoryCache å°±æ˜¯æ“ä½œåŒå‘é“¾è¡¨å’Œå“ˆå¸Œå­—å…¸ï¼Œä½¿ç”¨ LRU ç®—æ³•æ“ä½œæ•°æ® YYDiskCache ç£ç›˜ç¼“å­˜YYDiskCache ç£ç›˜ç¼“å­˜åˆåˆ†ä¸º æ–‡ä»¶ç¼“å­˜ å’Œ æ•°æ®åº“ç¼“å­˜12345/// æ ¹æ®è¿™ä¸ªå±æ€§è¿›è¡ŒåŒºåˆ†ï¼Œå½“å¤§äºè¯¥å€¼æ—¶ä½¿ç”¨æ•°æ®åº“ç¼“å­˜ï¼Œå°äºè¯¥å€¼ä½¿ç”¨æ–‡ä»¶ç¼“å­˜/// é»˜è®¤ 20480(20kb)/// 0 æ–‡ä»¶ç¼“å­˜/// NSUIntegerMax æ•°æ®åº“ç¼“å­˜@property (readonly) NSUInteger inlineThreshold; NSMapTableYYDiskCache ç»´æŠ¤ä¸€ä¸ª NSMapTable(Path : YYDiskCache) æ¥è¿›è¡Œç¼“å­˜æ“ä½œ NSMapTable: ç±»ä¼¼äº NSDictionary ä½†æ˜¯å¯ä»¥æŒ‡å®škey-valueçš„å¼•ç”¨ç±»å‹ï¼Œå½“valueçš„å¼•ç”¨ç±»å‹ä¸º weak æ—¶ï¼Œå½“ value ä¸º nil æ—¶ï¼Œè‡ªåŠ¨åˆ é™¤key-value123456/// åˆå§‹åŒ–_globalInstances = [[NSMapTable alloc] initWithKeyOptions:NSPointerFunctionsStrongMemory valueOptions:NSPointerFunctionsWeakMemory capacity:0];/// set[_globalInstances setObject:cache forKey:cache.path];/// getid cache = [_globalInstances objectForKey:path]; ä¿¡å·é‡ dispatch_semaphoreYYDiskCache ä½¿ç”¨ä¿¡å·é‡è¿›è¡ŒåŠ é”è§£é”æ“ä½œã€‚dispatch_semaphore_t GCD ä¸­ä¿¡å·é‡ï¼Œä¹Ÿå¯ä»¥è§£å†³èµ„æºæŠ¢å é—®é¢˜,æ”¯æŒä¿¡å·é€šçŸ¥å’Œä¿¡å·ç­‰å¾…ã€‚æ¯å½“å‘é€ä¸€ä¸ªä¿¡å·é€šçŸ¥ï¼Œåˆ™ä¿¡å·é‡ +1ï¼›æ¯å½“å‘é€ä¸€ä¸ªç­‰å¾…ä¿¡å·æ—¶ä¿¡å·é‡ -1,ï¼›å¦‚æœä¿¡å·é‡ä¸º 0 åˆ™ä¿¡å·ä¼šå¤„äºç­‰å¾…çŠ¶æ€ï¼Œç›´åˆ°ä¿¡å·é‡å¤§äº 0(æˆ–è€…è¶…æ—¶) å¼€å§‹æ‰§è¡Œä¹‹åä»£ç ã€‚ è¾¹ç•Œæ£€æŸ¥YYDiskCache åœ¨åˆå§‹åŒ–æ—¶ä¹Ÿä¼šè¿›è¡Œä¸€ä¸ªé€’å½’è°ƒç”¨çš„è¾¹ç•Œæ£€æŸ¥ä»»åŠ¡1234567891011121314151617181920212223- (void)_trimRecursively &#123; __weak typeof(self) _self = self; dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(_autoTrimInterval * NSEC_PER_SEC)), dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^&#123; __strong typeof(_self) self = _self; if (!self) return; [self _trimInBackground]; // è¾¹ç•Œæ£€æŸ¥ [self _trimRecursively]; // é€’å½’è°ƒç”¨ &#125;);&#125;- (void)_trimInBackground &#123; __weak typeof(self) _self = self; dispatch_async(_queue, ^&#123; __strong typeof(_self) self = _self; if (!self) return; Lock(); [self _trimToCost:self.costLimit]; // ç¼“å­˜å¤§å°åˆ¤æ–­æ¸…ç† [self _trimToCount:self.countLimit]; // ç¼“å­˜ä¸ªæ•°åˆ¤æ–­æ¸…ç† [self _trimToAge:self.ageLimit]; // ç¼“å­˜çš„æ—¶é—´åˆ¤æ–­æ¸…ç† [self _trimToFreeDiskSpace:self.freeDiskSpaceLimit]; // æœ€å°ç©ºç™½ç£ç›˜åˆ¤æ–­, å½“ç©ºé—²ç£ç›˜ç©ºé—´å°äºè¯¥å€¼åˆ™æ¸…æ¥šç¼“å­˜å·²è¾¾åˆ°æœ€å°çš„ç©ºç™½ç£ç›˜ç©ºé—´ Unlock(); &#125;);&#125; è°ƒç”¨ YYKVStorage çš„ç›¸åº”æ–¹æ³• YYKVStorage: YYDiskCache æ§åˆ¶ç¼“å­˜çš„æ“ä½œç±»ï¼Œä¸‹é¢ä¼šä»‹ç», æŠŠå®ƒå½“æˆ YYMemoryCache çš„ _YYLinkedMap YYDiskCache é»˜è®¤å°†æ•°æ®å½’æ¡£æˆ Data ç„¶åæ“ä½œ Data æ•°æ®è¿›è¡Œç¼“å­˜YYKVStorage: YYDiskCache æ“ä½œæ•°æ®çš„å·¥å…·ç±»ã€‚ YYKVStorage å®ç°äº† æ–‡ä»¶ç¼“å­˜ å’Œ æ•°æ®åº“ç¼“å­˜ åŠŸèƒ½ã€‚å¯ä»¥å‘æ“ä½œå­—å…¸ä¸€æ ·ä½¿ç”¨ key-value æ“ä½œæ•°æ®ã€‚YYKVStorageType æšä¸¾ç±»å‹ï¼Œä»£è¡¨ä½¿ç”¨å“ªä¸ªæ–¹å¼è¿›è¡Œå­˜å‚¨12345678typedef NS_ENUM(NSUInteger, YYKVStorageType) &#123; // ä½¿ç”¨æ–‡ä»¶ç¼“å­˜ å½“ YYDiskCache çš„ inlineThreshold ä¸º O æ—¶ YYKVStorageTypeFile = 0, // ä½¿ç”¨æ•°æ®åº“ç¼“å­˜ å½“ YYDiskCache çš„ inlineThreshold ä¸º NSUIntegerMax æ—¶ YYKVStorageTypeSQLite = 1, // åŒæ—¶ä½¿ç”¨æ•°æ®åº“å’Œæ–‡ä»¶ç¼“å­˜ï¼Œå½“å¤§äº YYDiskCache çš„ inlineThreshold æ—¶ä½¿ç”¨æ•°æ®åº“ç¼“å­˜ï¼Œå°äºä½¿ç”¨æ–‡ä»¶ç¼“å­˜ YYKVStorageTypeMixed = 2,&#125;; YYKVStorageItem: YYKVStorage æ“ä½œçš„æ•°æ®123456789@interface YYKVStorageItem : NSObject@property (nonatomic, strong) NSString *key; // ç¼“å­˜æ•°æ®çš„key@property (nonatomic, strong) NSData *value; // ç¼“å­˜æ•°æ®@property (nullable, nonatomic, strong) NSString *filename; // ç¼“å­˜æ–‡ä»¶åï¼ˆæ–‡ä»¶ç¼“å­˜æ—¶æœ‰ï¼Œæ•°æ®åº“ç¼“å­˜æ²¡æœ‰ï¼Œæœ‰å¯èƒ½æ˜¯æ•°æ®åº“ç¼“å­˜ä½†æ˜¯ä»ç„¶å­˜åœ¨ï¼Œåº”ä¸ºæ²¡å¤§äºè¾¹ç•Œå€¼æ—¶ä½¿ç”¨çš„æ–‡ä»¶ç¼“å­˜ï¼‰@property (nonatomic) int size; // æ•°æ®å¤§å°@property (nonatomic) int modTime; // ä¿®æ”¹æ—¶é—´@property (nonatomic) int accessTime; // è®¿é—®æ—¶é—´@property (nullable, nonatomic, strong) NSData *extendedData; // é™„åŠ æ•°æ®@end åˆå§‹åŒ–123456789101112131415161718192021222324252627- (instancetype)initWithPath:(NSString *)path type:(YYKVStorageType)type &#123; ... self = [super init]; _path = path.copy; _type = type; _dataPath = [path stringByAppendingPathComponent:kDataDirectoryName]; // æ–‡ä»¶å­˜å‚¨æ–‡ä»¶å¤¹è·¯å¾„ _trashPath = [path stringByAppendingPathComponent:kTrashDirectoryName]; // åˆ é™¤æ–‡ä»¶çš„æ–‡ä»¶å¤¹è·¯å¾„ï¼Œåˆ é™¤çš„æ—¶å€™å…ˆæ·»åŠ åˆ°è¯¥æ–‡ä»¶å¤¹ï¼Œåˆ°æ—¶å€™ç»Ÿä¸€åˆ é™¤ï¼Œå›æ”¶ç«™ _trashQueue = dispatch_queue_create(&quot;com.ibireme.cache.disk.trash&quot;, DISPATCH_QUEUE_SERIAL); // åˆ é™¤æ–‡ä»¶é˜Ÿåˆ— _dbPath = [path stringByAppendingPathComponent:kDBFileName]; // æ•°æ®åº“è·¯å¾„ _errorLogsEnabled = YES; ... æ–‡ä»¶å¤¹åˆ›å»º // _dbOpen æ–¹æ³•åˆ›å»ºå’Œæ‰“å¼€æ•°æ®åº“ manifest.sqlite // è°ƒç”¨ _dbInitialize æ–¹æ³•åˆ›å»ºæ•°æ®åº“ä¸­çš„è¡¨ if (![self _dbOpen] || ![self _dbInitialize]) &#123; // db file may broken... [self _dbClose]; [self _reset]; // rebuild if (![self _dbOpen] || ![self _dbInitialize]) &#123; [self _dbClose]; NSLog(@&quot;YYKVStorage init error: fail to open sqlite db.&quot;); return nil; &#125; &#125; [self _fileEmptyTrashInBackground]; // æ¸…ç©ºå›æ”¶ç«™ return self;&#125; 12345678910111213141516171819202122232425/* File: /path/ /manifest.sqlite /manifest.sqlite-shm /manifest.sqlite-wal /data/ /e10adc3949ba59abbe56e057f20f883e /e10adc3949ba59abbe56e057f20f883e /trash/ /unused_file_or_folder SQL: create table if not exists manifest ( key text, filename text, size integer, inline_data blob, modification_time integer, last_access_time integer, extended_data blob, primary key(key) ); create index if not exists last_access_time_idx on manifest(last_access_time); */ å¢åˆ æŸ¥æ”¹ å¢ 1234567891011121314151617181920212223- (BOOL)saveItemWithKey:(NSString *)key value:(NSData *)value filename:(NSString *)filename extendedData:(NSData *)extendedData &#123; ... // æ–‡ä»¶åå­˜åœ¨ (&gt;inlineThreshold) if (filename.length) &#123; if (![self _fileWriteWithName:filename data:value]) &#123; // åˆ›å»ºæ–‡ä»¶å¤±è´¥ return NO; &#125; if (![self _dbSaveWithKey:key value:value fileName:filename extendedData:extendedData]) &#123; // å­˜å‚¨æ•°æ®å¤±è´¥ [self _fileDeleteWithName:filename]; // åˆ é™¤æ–‡ä»¶ return NO; &#125; return YES; &#125; else &#123; if (_type != YYKVStorageTypeSQLite) &#123; NSString *filename = [self _dbGetFilenameWithKey:key]; if (filename) &#123; [self _fileDeleteWithName:filename]; &#125; &#125; return [self _dbSaveWithKey:key value:value fileName:nil extendedData:extendedData]; &#125;&#125; åˆ  12345678910111213141516171819202122232425- (BOOL)removeItemForKey:(NSString *)key &#123; ... switch (_type) &#123; case YYKVStorageTypeSQLite: &#123; return [self _dbDeleteItemWithKey:key]; &#125; break; case YYKVStorageTypeFile: case YYKVStorageTypeMixed: &#123; NSString *filename = [self _dbGetFilenameWithKey:key]; if (filename) &#123; [self _fileDeleteWithName:filename]; &#125; return [self _dbDeleteItemWithKey:key]; &#125; break; default: return NO; &#125;&#125;- (BOOL)removeItemForKeys:(NSArray *)keys;// åˆ é™¤æ—¶é—´è¶…äº†çš„æ•°æ®- (BOOL)removeItemsEarlierThanTime:(int)time;// å½“æ•°æ®æ€»å¤§å°å¤§äºä¸´ç•Œå€¼æ—¶åˆ é™¤- (BOOL)removeItemsToFitSize:(int)maxSize;// å½“æ•°æ®ä¸ªæ•°å¤§äºä¸´ç•Œå€¼æ—¶æ‰§è¡Œåˆ é™¤æ“ä½œ- (BOOL)removeItemsToFitCount:(int)maxCount;- (BOOL)removeAllItems; DBæ“ä½œ_db... ç›´æ¥æ“ä½œsqliteæ•°æ®åº“ï¼Œåˆæƒ³äº†è§£çš„è‡ªå·±å»çœ‹ï¼ŒæŒºå…¨é¢çš„ æ€»ç»“ YYDiskCache ä½¿ç”¨ YYKVStorage è¿›è¡Œæ–‡ä»¶ç¼“å­˜ å’Œ æ•°æ®åº“ç¼“å­˜ï¼Œæä¾›äº†ä¸€æ•´å¥—æ¥å£ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨æ—¶å°±åƒä½¿ç”¨å­—å…¸ä¸€æ ·æ–¹ä¾¿","categories":[],"tags":[{"name":"æºç ","slug":"æºç ","permalink":"https://kysonyangs.github.io/tags/æºç /"}]},{"title":"ä½¿ç”¨ Xcode å·¥å…·ï¼ˆNetwork Link Conditionerï¼‰æ¨¡æ‹Ÿç½‘ç»œçŠ¶æ€","slug":"iOSç½‘ç»œè°ƒè¯•","date":"2018-10-13T12:24:15.000Z","updated":"2020-05-17T08:14:34.333Z","comments":true,"path":"default/iOSç½‘ç»œè°ƒè¯•/","link":"","permalink":"https://kysonyangs.github.io/default/iOSç½‘ç»œè°ƒè¯•/","excerpt":"å½“åœ¨å’ŒæœåŠ¡å™¨è¿›è¡Œæ¥å£è°ƒè¯•æ—¶ï¼Œæœ‰çš„æ—¶å€™ç½‘ç»œä¸å¥½ï¼Œæ¥å£è¿”å›æ…¢ï¼Œè¿™ä¸ªä¸å¥½è°ƒè¯•ï¼Œä½†æ˜¯ Apple ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€æ¬¾å·¥å…·ï¼Œè®©æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿›è¡ŒæŒ–ç½‘ç»œçŠ¶æ€çš„æ¨¡æ‹Ÿ. å®‰è£… Additional Tools ä¸‹è½½æˆ‘ä»¬ä½¿ç”¨ Additional Tools for Xcode å·¥å…·æ¥è¿›è¡Œç½‘ç»œçŠ¶æ€çš„æ¨¡æ‹Ÿæµ‹è¯•. ä¸‹è½½å®Œæ¯• æ‰“å¼€ DMG -&gt; Hardware -&gt; åŒå‡» Network Link Conditioner.prefPane æ·»åŠ åˆ°åå¥½è®¾ç½®é‡Œã€‚ é€‰æ‹© ON æ‰“å¼€ Network Link Conditioner , å°±å¯ä»¥æ¨¡æ‹Ÿç½‘ç»œçŠ¶æ€äº†","text":"å½“åœ¨å’ŒæœåŠ¡å™¨è¿›è¡Œæ¥å£è°ƒè¯•æ—¶ï¼Œæœ‰çš„æ—¶å€™ç½‘ç»œä¸å¥½ï¼Œæ¥å£è¿”å›æ…¢ï¼Œè¿™ä¸ªä¸å¥½è°ƒè¯•ï¼Œä½†æ˜¯ Apple ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€æ¬¾å·¥å…·ï¼Œè®©æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿›è¡ŒæŒ–ç½‘ç»œçŠ¶æ€çš„æ¨¡æ‹Ÿ. å®‰è£… Additional Tools ä¸‹è½½æˆ‘ä»¬ä½¿ç”¨ Additional Tools for Xcode å·¥å…·æ¥è¿›è¡Œç½‘ç»œçŠ¶æ€çš„æ¨¡æ‹Ÿæµ‹è¯•. ä¸‹è½½å®Œæ¯• æ‰“å¼€ DMG -&gt; Hardware -&gt; åŒå‡» Network Link Conditioner.prefPane æ·»åŠ åˆ°åå¥½è®¾ç½®é‡Œã€‚ é€‰æ‹© ON æ‰“å¼€ Network Link Conditioner , å°±å¯ä»¥æ¨¡æ‹Ÿç½‘ç»œçŠ¶æ€äº† å¯åŠ¨ Network Link Conditioner å¯ä»¥æ ¹æ®é…ç½®æ¥æ›´æ”¹ç³»ç»Ÿçš„ç½‘ç»œç¯å¢ƒï¼Œä»è€Œè¾¾åˆ°ç½‘ç»œçŠ¶æ€æ¨¡æ‹Ÿ. é€‰é¡¹ï¼š 100% Loss 3G DSL EDGE High Latency DNS Very Bad Network WIFI æˆ–è€…ä¹Ÿå¯ä»¥è‡ªå·±æ·»åŠ  åœ¨iOSè®¾å¤‡ä¸Šå¯ç”¨ Network Link Conditionerè¦åœ¨iOSä¸Šä½¿ç”¨ Network Link Conditionerï¼Œå¯ä»¥è®¾ç½®ï¼š iOSè¿æ¥Mac åœ¨Xcodeä¸­ï¼Œå¯¼èˆªåˆ°Window&gt; Organizer åœ¨ä¾§æ ä¸­é€‰æ‹©æ‚¨çš„è®¾å¤‡ ç‚¹å‡»â€œç”¨äºå¼€å‘â€ç°åœ¨ï¼Œå¯ä»¥è®¿é—®â€œè®¾ç½®â€åº”ç”¨çš„â€œå¼€å‘è€…â€éƒ¨åˆ†ã€‚æ‚¨å¯ä»¥åœ¨iOSè®¾å¤‡ä¸Šçš„è®¾ç½®&gt;å¼€å‘äººå‘˜&gt;ç½‘ç»œä¸‹å¯ç”¨å’Œé…ç½® Network Link Conditionerã€‚","categories":[],"tags":[{"name":"Xcode","slug":"Xcode","permalink":"https://kysonyangs.github.io/tags/Xcode/"}]},{"title":"Runtime03 Method","slug":"Runtime03_Method","date":"2018-06-23T10:30:50.000Z","updated":"2020-05-17T08:13:24.547Z","comments":true,"path":"default/Runtime03_Method/","link":"","permalink":"https://kysonyangs.github.io/default/Runtime03_Method/","excerpt":"class_rw_té‡Œé¢çš„methodsã€propertiesã€protocolsæ˜¯äºŒç»´æ•°ç»„ï¼Œæ˜¯å¯è¯»å¯å†™çš„ï¼ŒåŒ…å«äº†ç±»çš„åˆå§‹å†…å®¹ã€åˆ†ç±»çš„å†…å®¹ class_ro_té‡Œé¢çš„baseMethodListã€baseProtocolsã€ivarsã€basePropertiesæ˜¯ä¸€ç»´æ•°ç»„ï¼Œæ˜¯åªè¯»çš„ï¼ŒåŒ…å«äº†ç±»çš„åˆå§‹å†…å®¹","text":"class_rw_té‡Œé¢çš„methodsã€propertiesã€protocolsæ˜¯äºŒç»´æ•°ç»„ï¼Œæ˜¯å¯è¯»å¯å†™çš„ï¼ŒåŒ…å«äº†ç±»çš„åˆå§‹å†…å®¹ã€åˆ†ç±»çš„å†…å®¹ class_ro_té‡Œé¢çš„baseMethodListã€baseProtocolsã€ivarsã€basePropertiesæ˜¯ä¸€ç»´æ•°ç»„ï¼Œæ˜¯åªè¯»çš„ï¼ŒåŒ…å«äº†ç±»çš„åˆå§‹å†…å®¹ ç„¶åçœ‹ä¸‹æ–¹æ³•çš„ç»“æ„123456struct method_t&#123; SEL name; // æ–¹æ³•å const char *types; // å‚æ•°å’Œè¿”å›ç±»å‹encode IMP imp; // å‡½æ•°æŒ‡é’ˆ&#125;;typedef struct method_t *Method; çœ‹ä¸‹class_rw_t methods çš„åˆå§‹åŒ–, class_ro_t çš„ç»“æ„åœ¨ç¼–è¯‘æœŸé—´å·²ç»å†³å®šï¼Œæ— æ³•æ›´æ”¹12345678910111213141516171819202122232425262728293031static Class realizeClass(Class cls)&#123; const class_ro_t *ro = (const class_ro_t *)cls-&gt;data(); class_rw_t *rw; if(ro-&gt;flags &amp; RO_FUTERE)&#123; // rwå·²ç»åˆ†é…å¥½äº† rw = cls-&gt;data(); ro = cls-&gt;data()-&gt;ro; cls-&gt;changeInfo(RW_REALIZED|RW_REALIZING,RW_FUTURE); &#125;else&#123; // æœªåˆå§‹åŒ– rw = (class_rw_t *)calloc(sizeof(class_rw_t), 1); rw-&gt;ro = ro; rw-&gt;flags = RW_REALIZED|RW_REALIZING; cls-&gt;setData(rw); &#125; // å…¶å®ƒçš„ä¸€äº›åˆå§‹åŒ– // Attach categories methodizeClass(cls);&#125;static void methodizeClass(Class cls)&#123; // å°†roä¸­çš„åŸºæœ¬æ–¹æ³•æ·»åŠ åˆ°rwä¸­å» method_list_t *list = cls-&gt;data()-&gt;ro-&gt;baseMethods(); prepareMethodLists(cls, &amp;list, 1, YES, isBundleClass(cls)); cls-&gt;data()-&gt;methods.attachLists(&amp;list, 1); // åˆå§‹åŒ–å±æ€§ã€åè®®å’Œåˆ†ç±»&#125; å‘ç±»åŠ¨æ€æ·»åŠ æ–¹æ³•class_addMethod è¿™ä¸ªå‡½æ•°å¯ä»¥åœ¨è¿è¡ŒæœŸå¯¹ç±»åŠ¨æ€æ·»åŠ æ–¹æ³•ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹æ˜¯æ€ä¹ˆå®ç°çš„ï¼š 1234567891011121314151617181920212223242526272829BOOL class_addMethod(Class cls, SEL name, IMP imp, const char *types)&#123; return !addMethod(cls, name, imp, types ?:&quot;&quot;, NO);&#125;static IMP addMethod(Class cls, SEL name, IMP imp, const char *types, bool replace)&#123; method_t *m; IMP result; if((m = getMethodNoSuper_nolock(cls, name))&#123; // å·²ç»å­˜åœ¨è¿™ä¸ªæ–¹æ³• if(!replace)&#123; result = m-&gt;imp; &#125;else&#123; result = _method_setImplementation(cls, m, imp); // é‡æ–°è®¾ç½®imp &#125; &#125;else&#123; // æ·»åŠ æ–¹æ³• method_list_t *newlist = (method_list_t *)calloc(sizeof(*newlist), 1); newlist-&gt;first.name = name; newlist-&gt;first.types = types; newlist-&gt;first.imp = imp; prepareMethodsLists(cls, &amp;newlist, 1, NO, NO); cls-&gt;data()-&gt;methods.attachLists(&amp;newlist, 1); flushCaches(cls); result = nil; &#125; return resul;&#125; å‘ä¸€ä¸ªç±»ä¸­æ·»åŠ æ–°æ–¹æ³•ï¼Œcls-&gt;data()-&gt;methods.attachLists(&amp;newlist, 1)ï¼Œä»ç„¶æ˜¯æ·»åŠ åˆ°class_rw_t.methodsåˆ—è¡¨ä¸­ã€‚","categories":[],"tags":[{"name":"Runtime","slug":"Runtime","permalink":"https://kysonyangs.github.io/tags/Runtime/"}]},{"title":"Runtime02 NSObjectä¸isa","slug":"Runtime02_NSObjectä¸isa","date":"2018-06-23T08:04:10.000Z","updated":"2020-05-17T08:13:09.767Z","comments":true,"path":"default/Runtime02_NSObjectä¸isa/","link":"","permalink":"https://kysonyangs.github.io/default/Runtime02_NSObjectä¸isa/","excerpt":"NSObjectåº•å±‚çœ‹ä¸‹NSObjectä¸­çš„å®šä¹‰: 123@interface NSObject &lt;NSObject&gt; Class isa;@end å…¶å®NSObjectå°±æ˜¯ä¸€ä¸ªClasså¯¹è±¡ï¼Œä¸è¿‡æ˜¯å¯¹å˜é‡isaå°è£…äº†ä¸€ç³»åˆ—çš„æ“ä½œè€Œå·²ï¼Œé‚£ä¹ˆClassåˆæ˜¯ä»€ä¹ˆç±»å‹å‘¢ï¼Ÿåœ¨objc-runtime-new.hå¯ä»¥æ‰¾åˆ°å…¶å®šä¹‰ï¼Œæ˜¯æŒ‡å‘ç»“æ„ä½“objc_classçš„æŒ‡é’ˆï¼Œå¦‚ä¸‹ï¼š","text":"NSObjectåº•å±‚çœ‹ä¸‹NSObjectä¸­çš„å®šä¹‰: 123@interface NSObject &lt;NSObject&gt; Class isa;@end å…¶å®NSObjectå°±æ˜¯ä¸€ä¸ªClasså¯¹è±¡ï¼Œä¸è¿‡æ˜¯å¯¹å˜é‡isaå°è£…äº†ä¸€ç³»åˆ—çš„æ“ä½œè€Œå·²ï¼Œé‚£ä¹ˆClassåˆæ˜¯ä»€ä¹ˆç±»å‹å‘¢ï¼Ÿåœ¨objc-runtime-new.hå¯ä»¥æ‰¾åˆ°å…¶å®šä¹‰ï¼Œæ˜¯æŒ‡å‘ç»“æ„ä½“objc_classçš„æŒ‡é’ˆï¼Œå¦‚ä¸‹ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152struct objc_class &#123; Class _Nonnull isa OBJC_ISA_AVAILABILITY; //isaæŒ‡é’ˆ&#125; OBJC2_UNAVAILABLE;struct objc_class : objc_object &#123; // Class ISA; Class superclass; // superclassæŒ‡é’ˆ cache_t cache; // æ–¹æ³•ç¼“å­˜ class_data_bits_t bits; // æ•°æ® // é€šè¿‡(bits &amp; FAST_DATA_MASK)è·å– class_rw_t æ•°æ® class_rw_t *data() &#123; return bits.data(); &#125; ...&#125;struct class_rw_t &#123; // Be warned that Symbolication knows the layout of this structure. uint32_t flags; uint32_t version; const class_ro_t *ro; //åªè¯»å±æ€§ method_array_t methods; // æ–¹æ³•åˆ—è¡¨äºŒç»´æ•°ç»„ property_array_t properties; //å±æ€§åˆ—è¡¨ protocol_array_t protocols; //åè®®åˆ—è¡¨ ...&#125;struct class_ro_t &#123; uint32_t flags; uint32_t instanceStart; uint32_t instanceSize; //instanceå¯¹è±¡æ‰€å å†…å­˜å¤§å°#ifdef __LP64__ uint32_t reserved;#endif const uint8_t * ivarLayout; const char * name; // ç±»å method_list_t * baseMethodList; protocol_list_t * baseProtocols; const ivar_list_t * ivars; // æˆå‘˜å˜é‡åˆ—è¡¨ const uint8_t * weakIvarLayout; property_list_t *baseProperties; method_list_t *baseMethods() const &#123; return baseMethodList; &#125;&#125;; å†æ¥çœ‹ä¸€å¼ å›¾ å®ä¾‹ã€ç±»ã€å…ƒç±» å­˜å‚¨ä¿¡æ¯instanceå¯¹è±¡åœ¨å†…å­˜ä¸­å­˜å‚¨çš„ä¿¡æ¯åŒ…æ‹¬ isa æŒ‡é’ˆ å…¶ä»–æˆå‘˜å˜é‡ classç±»å¯¹è±¡åœ¨å†…å­˜ä¸­å­˜å‚¨çš„ä¿¡æ¯ä¸»è¦åŒ…æ‹¬ isa æŒ‡é’ˆ superclass æŒ‡é’ˆ ç±»çš„å±æ€§ä¿¡æ¯ï¼ˆ@propertyï¼‰ ç±»çš„å¯¹è±¡æ–¹å‘æ–¹æ³•ä¿¡æ¯ï¼ˆinstance methodï¼‰ ç±»çš„åè®®ä¿¡æ¯ï¼ˆprotocolï¼‰ ç±»çš„æˆå‘˜å˜é‡ä¿¡æ¯ï¼ˆivarï¼‰ â€¦ meta-classå…ƒç±»å¯¹è±¡å’Œclasså¯¹è±¡çš„å†…å­˜ç»“æ„æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ç”¨é€”ä¸ä¸€æ ·ï¼Œåœ¨å†…å­˜ä¸­å­˜å‚¨çš„ä¿¡æ¯ä¸»è¦åŒ…æ‹¬ isa æŒ‡é’ˆ superclass æŒ‡é’ˆ ç±»çš„ç±»æ–¹å‘æ–¹æ³•ä¿¡æ¯ï¼ˆclass methodï¼‰ â€¦. isaæŒ‡é’ˆåœ¨arm64æ¶æ„ä¹‹å‰ï¼Œisaå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„æŒ‡é’ˆï¼Œå­˜å‚¨ç€Classã€Meta-Classå¯¹è±¡çš„å†…å­˜åœ°å€ ä»arm64æ¶æ„å¼€å§‹ï¼Œå¯¹isaè¿›è¡Œäº†ä¼˜åŒ–ï¼Œå˜æˆäº†ä¸€ä¸ªå…±ç”¨ä½“ï¼ˆunionï¼‰ç»“æ„ï¼Œè¿˜ä½¿ç”¨ä½åŸŸæ¥å­˜å‚¨æ›´å¤šçš„ä¿¡æ¯ 1234567891011121314151617181920union isa_t&#123; isa_t() &#123; &#125; isa_t(uintptr_t value) : bits(value) &#123; &#125; Class cls; uintptr_t bits; // arm64æ¶æ„ä¸‹ uintptr_t nonpointer : 1; // ä»£è¡¨isaçš„ç±»å‹ï¼Œå¦‚æœä¸º0ï¼Œåˆ™isaä¸­åªä¿å­˜ç€classçš„ä¿¡æ¯ï¼Œåˆ™æ˜¯ä¹‹å‰32ä½æœºå™¨æ—¶çš„è®¾è®¡raw isaï¼Œå¦‚æœä¸º1ï¼Œclassä¿¡æ¯ä¿å­˜åœ¨shiftclsä¸­ï¼Œå…¶å®ƒç©ºé—´ç”¨äºä¿å­˜é¢å¤–çš„ä¿¡æ¯ã€‚ uintptr_t has_assoc : 1; // å¯¹è±¡å«æœ‰æˆ–è€…æ›¾ç»å«æœ‰å…³è”å¼•ç”¨ï¼Œæ²¡æœ‰å…³è”å¼•ç”¨çš„å¯ä»¥æ›´å¿«åœ°é‡Šæ”¾å†…å­˜ uintptr_t has_cxx_dtor : 1; // è¿™ä¸€ä½è¡¨ç¤ºå½“å‰å¯¹è±¡æœ‰ C++ æˆ–è€… ObjC çš„ææ„å™¨(destructor)ï¼Œå¦‚æœæ²¡æœ‰ææ„å™¨å°±ä¼šå¿«é€Ÿé‡Šæ”¾å†…å­˜ uintptr_t shiftcls : 44; // ä¿å­˜å¯¹åº”çš„ClassæŒ‡é’ˆä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°å¤åˆ¶ä»£ç æ˜¯è¿™æ ·çš„`newisa.shiftcls = (uintptr_t)cls &gt;&gt; 3`ï¼Œå³ç§»3ä½çš„ç›®çš„æ˜¯ç”¨äºå°† Class æŒ‡é’ˆä¸­æ— ç”¨çš„åä¸‰ä½æ¸…é™¤å‡å°å†…å­˜çš„æ¶ˆè€—ï¼Œå› ä¸ºç±»çš„æŒ‡é’ˆè¦æŒ‰ç…§å­—èŠ‚ï¼ˆ8 bitsï¼‰å¯¹é½å†…å­˜ï¼Œå…¶æŒ‡é’ˆåä¸‰ä½éƒ½æ˜¯æ²¡æœ‰æ„ä¹‰çš„ 0ã€‚ uintptr_t magic : 6; // åˆå§‹åŒ–ä¹‹åå€¼ä¸º0x3dï¼Œç”¨äºè°ƒè¯•å™¨åˆ¤æ–­å½“å‰å¯¹è±¡æ˜¯çœŸçš„å¯¹è±¡è¿˜æ˜¯æ²¡æœ‰åˆå§‹åŒ–çš„ç©ºé—´ uintptr_t weakly_referenced : 1; // å¯¹è±¡è¢«æŒ‡å‘æˆ–è€…æ›¾ç»æŒ‡å‘ä¸€ä¸ª ARC çš„å¼±å˜é‡ï¼Œæ²¡æœ‰å¼±å¼•ç”¨çš„å¯¹è±¡å¯ä»¥æ›´å¿«é‡Šæ”¾ uintptr_t deallocating : 1; // å¯¹è±¡æ­£åœ¨é‡Šæ”¾å†…å­˜ uintptr_t has_sidetable_rc : 1; // å¯¹è±¡çš„å¼•ç”¨è®¡æ•°å¤ªå¤§äº†ï¼Œå­˜ä¸ä¸‹ï¼Œè¦ç”¨è¾…åŠ©çš„sidetableæ¥ä¿å­˜ uintptr_t extra_rc : 8; // å¯¹è±¡çš„å¼•ç”¨è®¡æ•°è¶…è¿‡ 1ï¼Œä¼šå­˜åœ¨è¿™ä¸ªè¿™ä¸ªé‡Œé¢ï¼Œå¦‚æœå¼•ç”¨è®¡æ•°ä¸º 6ï¼Œextra_rc çš„å€¼å°±ä¸º 5....&#125;;","categories":[],"tags":[{"name":"Runtime","slug":"Runtime","permalink":"https://kysonyangs.github.io/tags/Runtime/"}]},{"title":"Runtime01 ç±»ä¸å…ƒç±»","slug":"Runtime01_ç±»ä¸å…ƒç±»","date":"2018-06-23T07:26:30.000Z","updated":"2020-05-16T05:34:22.014Z","comments":true,"path":"default/Runtime01_ç±»ä¸å…ƒç±»/","link":"","permalink":"https://kysonyangs.github.io/default/Runtime01_ç±»ä¸å…ƒç±»/","excerpt":"æ¥çœ‹ä¸€å¼ ç»å…¸çš„æè¿° isa å’Œ superclass æŒ‡å‘çš„å›¾ã€‚ ä»è¿™æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š isa instanceçš„isaæŒ‡å‘class classçš„isaæŒ‡å‘meta-class meta-classçš„isaæŒ‡å‘åŸºç±»çš„meta-class superclass classçš„superclassæŒ‡å‘çˆ¶ç±»çš„class å¦‚æœæ²¡æœ‰çˆ¶ç±»ï¼ŒsuperclassæŒ‡é’ˆä¸ºnil meta-classçš„superclassæŒ‡å‘çˆ¶ç±»çš„meta-class åŸºç±»çš„meta-classçš„superclassæŒ‡å‘åŸºç±»çš„class æ–¹æ³•è°ƒç”¨ instanceè°ƒç”¨å¯¹è±¡æ–¹æ³•çš„è½¨è¿¹ isaæ‰¾åˆ°classï¼Œæ–¹æ³•ä¸å­˜åœ¨ï¼Œå°±é€šè¿‡superclassæ‰¾çˆ¶ç±» classè°ƒç”¨ç±»æ–¹æ³•çš„è½¨è¿¹ isaæ‰¾meta-classï¼Œæ–¹æ³•ä¸å­˜åœ¨ï¼Œå°±é€šè¿‡superclassæ‰¾çˆ¶ç±»","text":"æ¥çœ‹ä¸€å¼ ç»å…¸çš„æè¿° isa å’Œ superclass æŒ‡å‘çš„å›¾ã€‚ ä»è¿™æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š isa instanceçš„isaæŒ‡å‘class classçš„isaæŒ‡å‘meta-class meta-classçš„isaæŒ‡å‘åŸºç±»çš„meta-class superclass classçš„superclassæŒ‡å‘çˆ¶ç±»çš„class å¦‚æœæ²¡æœ‰çˆ¶ç±»ï¼ŒsuperclassæŒ‡é’ˆä¸ºnil meta-classçš„superclassæŒ‡å‘çˆ¶ç±»çš„meta-class åŸºç±»çš„meta-classçš„superclassæŒ‡å‘åŸºç±»çš„class æ–¹æ³•è°ƒç”¨ instanceè°ƒç”¨å¯¹è±¡æ–¹æ³•çš„è½¨è¿¹ isaæ‰¾åˆ°classï¼Œæ–¹æ³•ä¸å­˜åœ¨ï¼Œå°±é€šè¿‡superclassæ‰¾çˆ¶ç±» classè°ƒç”¨ç±»æ–¹æ³•çš„è½¨è¿¹ isaæ‰¾meta-classï¼Œæ–¹æ³•ä¸å­˜åœ¨ï¼Œå°±é€šè¿‡superclassæ‰¾çˆ¶ç±» ä¸‹é¢é€šè¿‡ä»£ç æ¥ç¡®å®šä¸€ä¸‹ 12345678910111213141516171819202122232425262728293031323334353637383940414243@interface Person: NSObject@end...void test1() &#123; NSLog(@&quot;NSObject class:%p metaclass:%p&quot;, [NSObject class], object_getClass([NSObject class])); Person *person = [[Person alloc] init]; Class cls = person; int i = 0; while (i &lt; 4) &#123; NSLog(@&quot;class:%p metaclass:%p&quot;, cls, object_getClass(cls)); cls = object_getClass(cls); i++; &#125;&#125;è¾“å‡ºä¿¡æ¯ï¼šNSObject class:0x7fff991bd118 metaclass:0x7fff991bd0f0---&gt; è¯´æ˜ NSObject çš„isa ç¡®å®æŒ‡å‘å®ƒçš„å…ƒç±»class:0x100659b60 metaclass:0x100002100---&gt; è¯´æ˜ personå¯¹è±¡çš„ isa æŒ‡å‘ Personç±»å¯¹è±¡class:0x100002100 metaclass:0x1000020d8---&gt; è¯´æ˜ Pesonç±»å¯¹è±¡çš„ isa æŒ‡å‘ Personå…ƒå¯¹è±¡class:0x1000020d8 metaclass:0x7fff991bd0f0---&gt; è¯´æ˜ Pesonå…ƒç±»å¯¹è±¡çš„ isa æŒ‡å‘ NSObjectå…ƒç±»å¯¹è±¡class:0x7fff991bd0f0 metaclass:0x7fff991bd0f0---&gt; è¯´æ˜ NSObjectå…ƒç±»å¯¹è±¡ isa æŒ‡å‘ NSObjectå…ƒç±»å¯¹è±¡// æ³¨ï¼š// object_getClass è·å– isa æŒ‡å‘å¯¹è±¡Class object_getClass(id obj)&#123; if (obj) return obj-&gt;getIsa(); else return Nil;&#125; æˆ‘ä»¬å†çœ‹ä¸€ä¸‹ objc_allocateClassPair æ–¹æ³•å†…éƒ¨å®ç° 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657Class objc_allocateClassPair(Class superclass, const char *name, size_t extraBytes)&#123; Class cls, meta; rwlock_writer_t lock(runtimeLock); // Fail if the class name is in use. // Fail if the superclass isn&apos;t kosher. if (getClass(name) || !verifySuperclass(superclass, true/*rootOK*/)) &#123; return nil; &#125; // Allocate new classes. cls = alloc_class_for_subclass(superclass, extraBytes); //åˆ†é… meta = alloc_class_for_subclass(superclass, extraBytes); // fixme mangle the name if it looks swift-y? objc_initializeClassPair_internal(superclass, name, cls, meta); return cls;&#125;static void objc_initializeClassPair_internal(Class superclass, const char *name, Class cls, Class meta)&#123; runtimeLock.assertWriting(); class_ro_t *cls_ro_w, *meta_ro_w; // åˆå§‹åŒ–clså’Œmetaçš„å¤§å°å’Œæ•°æ® cls-&gt;setData((class_rw_t *)calloc(sizeof(class_rw_t), 1)); meta-&gt;setData((class_rw_t *)calloc(sizeof(class_rw_t), 1)); ... cls_ro_w-&gt;flags = 0; // æ™®é€šç±» meta_ro_w-&gt;flags = RO_META; // æ ‡è®°ä¸ºmeta ... // Connect to superclasses and metaclasses cls-&gt;initClassIsa(meta); // å°†clsçš„isaæŒ‡å‘meta if (superclass) &#123; meta-&gt;initClassIsa(superclass-&gt;ISA()-&gt;ISA()); // metaçš„isaæŒ‡å‘æ ¹ç±»çš„meta cls-&gt;superclass = superclass; meta-&gt;superclass = superclass-&gt;ISA(); //// metaçš„çˆ¶ç±»ä¸ºçˆ¶ç±»çš„meta addSubclass(superclass, cls); addSubclass(superclass-&gt;ISA(), meta); &#125; else &#123; meta-&gt;initClassIsa(meta); // æ ¹ç±»çš„isaæŒ‡å‘è‡ªå·± cls-&gt;superclass = Nil; meta-&gt;superclass = cls; // æ ¹ç±»çš„çˆ¶ç±»æŒ‡å‘cls addRootClass(cls); addSubclass(cls, meta); &#125; ....&#125;","categories":[],"tags":[{"name":"Runtime","slug":"Runtime","permalink":"https://kysonyangs.github.io/tags/Runtime/"}]},{"title":"Runtimeç›¸å…³","slug":"Runtimeç›¸å…³","date":"2018-06-22T07:26:30.000Z","updated":"2020-05-13T11:12:38.972Z","comments":true,"path":"default/Runtimeç›¸å…³/","link":"","permalink":"https://kysonyangs.github.io/default/Runtimeç›¸å…³/","excerpt":"Runtime æ˜¯ä»€ä¹ˆï¼ŸRuntime åˆå«è¿è¡Œæ—¶ï¼Œæ˜¯ä¸€å¥—ç”± Cã€C++ ä¼šå’Œç¼–å†™çš„ä¸€å¥— APIï¼Œä¸ºOCåŠ å…¥äº†é¢å‘å¯¹è±¡ä¸è¿è¡Œæ—¶æœºåˆ¶ã€‚ Objective-C æ˜¯ä¸€é—¨åŠ¨æ€è¯­è¨€ï¼Œå®ƒä¼šå°†ä¸€äº›å·¥ä½œæ”¾åœ¨ä»£ç è¿è¡Œæ—¶æ‰å¤„ç†è€Œå¹¶éç¼–è¯‘æ—¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæœ‰å¾ˆå¤šç±»å’Œæˆå‘˜å˜é‡åœ¨æˆ‘ä»¬ç¼–è¯‘çš„æ—¶æ˜¯ä¸çŸ¥é“çš„ï¼Œè€Œåœ¨è¿è¡Œæ—¶ï¼Œæˆ‘ä»¬æ‰€ç¼–å†™çš„ä»£ç ä¼šè½¬æ¢æˆå®Œæ•´çš„ç¡®å®šçš„ä»£ç è¿è¡Œã€‚ KVO å®ç°åŸç†ç®€å•ç†è§£ KVOæ˜¯åŸºäºruntimeæœºåˆ¶å®ç°çš„ å½“æŸä¸ªç±»çš„å±æ€§å¯¹è±¡ç¬¬ä¸€æ¬¡è¢«è§‚å¯Ÿæ—¶ï¼Œç³»ç»Ÿå°±ä¼šåœ¨è¿è¡ŒæœŸåŠ¨æ€åœ°åˆ›å»ºè¯¥ç±»çš„ä¸€ä¸ªæ´¾ç”Ÿç±»ï¼Œåœ¨è¿™ä¸ªæ´¾ç”Ÿç±»ä¸­é‡å†™åŸºç±»ä¸­ä»»ä½•è¢«è§‚å¯Ÿå±æ€§çš„ setter æ–¹æ³•ã€‚æ´¾ç”Ÿç±»åœ¨è¢«é‡å†™çš„ setter æ–¹æ³•å†…å®ç°çœŸæ­£çš„é€šçŸ¥æœºåˆ¶ å¦‚æœåŸç±»ä¸ºPersonï¼Œé‚£ä¹ˆç”Ÿæˆçš„æ´¾ç”Ÿç±»åä¸º NSKVONotifying_Person æ¯ä¸ªç±»å¯¹è±¡ä¸­éƒ½æœ‰ä¸€ä¸ª isa æŒ‡é’ˆæŒ‡å‘å½“å‰ç±»ï¼Œå½“ä¸€ä¸ªç±»å¯¹è±¡çš„ç¬¬ä¸€æ¬¡è¢«è§‚å¯Ÿï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šå·å·å°† isa æŒ‡é’ˆæŒ‡å‘åŠ¨æ€ç”Ÿæˆçš„æ´¾ç”Ÿç±»ï¼Œä»è€Œåœ¨ç»™è¢«ç›‘æ§å±æ€§èµ‹å€¼æ—¶æ‰§è¡Œçš„æ˜¯æ´¾ç”Ÿç±»çš„ setter æ–¹æ³• é”®å€¼è§‚å¯Ÿé€šçŸ¥ä¾èµ–äºNSObject çš„ä¸¤ä¸ªæ–¹æ³•: willChangeValueForKey: å’Œ didChangevlueForKey:ï¼›åœ¨ä¸€ä¸ªè¢«è§‚å¯Ÿå±æ€§å‘ç”Ÿæ”¹å˜ä¹‹å‰ï¼Œ willChangeValueForKey:ä¸€å®šä¼šè¢«è°ƒç”¨ï¼Œè¿™å°± ä¼šè®°å½•æ—§çš„å€¼ã€‚è€Œå½“æ”¹å˜å‘ç”Ÿåï¼ŒdidChangeValueForKey:ä¼šè¢«è°ƒç”¨ï¼Œç»§è€Œ observeValueForKey:ofObject:change:context: ä¹Ÿä¼šè¢«è°ƒç”¨ã€‚","text":"Runtime æ˜¯ä»€ä¹ˆï¼ŸRuntime åˆå«è¿è¡Œæ—¶ï¼Œæ˜¯ä¸€å¥—ç”± Cã€C++ ä¼šå’Œç¼–å†™çš„ä¸€å¥— APIï¼Œä¸ºOCåŠ å…¥äº†é¢å‘å¯¹è±¡ä¸è¿è¡Œæ—¶æœºåˆ¶ã€‚ Objective-C æ˜¯ä¸€é—¨åŠ¨æ€è¯­è¨€ï¼Œå®ƒä¼šå°†ä¸€äº›å·¥ä½œæ”¾åœ¨ä»£ç è¿è¡Œæ—¶æ‰å¤„ç†è€Œå¹¶éç¼–è¯‘æ—¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæœ‰å¾ˆå¤šç±»å’Œæˆå‘˜å˜é‡åœ¨æˆ‘ä»¬ç¼–è¯‘çš„æ—¶æ˜¯ä¸çŸ¥é“çš„ï¼Œè€Œåœ¨è¿è¡Œæ—¶ï¼Œæˆ‘ä»¬æ‰€ç¼–å†™çš„ä»£ç ä¼šè½¬æ¢æˆå®Œæ•´çš„ç¡®å®šçš„ä»£ç è¿è¡Œã€‚ KVO å®ç°åŸç†ç®€å•ç†è§£ KVOæ˜¯åŸºäºruntimeæœºåˆ¶å®ç°çš„ å½“æŸä¸ªç±»çš„å±æ€§å¯¹è±¡ç¬¬ä¸€æ¬¡è¢«è§‚å¯Ÿæ—¶ï¼Œç³»ç»Ÿå°±ä¼šåœ¨è¿è¡ŒæœŸåŠ¨æ€åœ°åˆ›å»ºè¯¥ç±»çš„ä¸€ä¸ªæ´¾ç”Ÿç±»ï¼Œåœ¨è¿™ä¸ªæ´¾ç”Ÿç±»ä¸­é‡å†™åŸºç±»ä¸­ä»»ä½•è¢«è§‚å¯Ÿå±æ€§çš„ setter æ–¹æ³•ã€‚æ´¾ç”Ÿç±»åœ¨è¢«é‡å†™çš„ setter æ–¹æ³•å†…å®ç°çœŸæ­£çš„é€šçŸ¥æœºåˆ¶ å¦‚æœåŸç±»ä¸ºPersonï¼Œé‚£ä¹ˆç”Ÿæˆçš„æ´¾ç”Ÿç±»åä¸º NSKVONotifying_Person æ¯ä¸ªç±»å¯¹è±¡ä¸­éƒ½æœ‰ä¸€ä¸ª isa æŒ‡é’ˆæŒ‡å‘å½“å‰ç±»ï¼Œå½“ä¸€ä¸ªç±»å¯¹è±¡çš„ç¬¬ä¸€æ¬¡è¢«è§‚å¯Ÿï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šå·å·å°† isa æŒ‡é’ˆæŒ‡å‘åŠ¨æ€ç”Ÿæˆçš„æ´¾ç”Ÿç±»ï¼Œä»è€Œåœ¨ç»™è¢«ç›‘æ§å±æ€§èµ‹å€¼æ—¶æ‰§è¡Œçš„æ˜¯æ´¾ç”Ÿç±»çš„ setter æ–¹æ³• é”®å€¼è§‚å¯Ÿé€šçŸ¥ä¾èµ–äºNSObject çš„ä¸¤ä¸ªæ–¹æ³•: willChangeValueForKey: å’Œ didChangevlueForKey:ï¼›åœ¨ä¸€ä¸ªè¢«è§‚å¯Ÿå±æ€§å‘ç”Ÿæ”¹å˜ä¹‹å‰ï¼Œ willChangeValueForKey:ä¸€å®šä¼šè¢«è°ƒç”¨ï¼Œè¿™å°± ä¼šè®°å½•æ—§çš„å€¼ã€‚è€Œå½“æ”¹å˜å‘ç”Ÿåï¼ŒdidChangeValueForKey:ä¼šè¢«è°ƒç”¨ï¼Œç»§è€Œ observeValueForKey:ofObject:change:context: ä¹Ÿä¼šè¢«è°ƒç”¨ã€‚ æ·±å…¥ç†è§£ Apple ä½¿ç”¨äº† isa æ··å†™ï¼ˆisa-swizzlingï¼‰æ¥å®ç° KVO ã€‚å½“è§‚å¯Ÿå¯¹è±¡Aæ—¶ï¼ŒKVOæœºåˆ¶åŠ¨æ€åˆ›å»ºä¸€ä¸ªæ–°çš„åä¸ºï¼š NSKVONotifying_Açš„æ–°ç±»ï¼Œè¯¥ç±»ç»§æ‰¿è‡ªå¯¹è±¡Açš„æœ¬ç±»ï¼Œä¸”KVOä¸ºNSKVONotifying_Aé‡å†™è§‚å¯Ÿå±æ€§çš„setter æ–¹æ³•ï¼Œsetter æ–¹æ³•ä¼šè´Ÿè´£åœ¨è°ƒç”¨åŸ setter æ–¹æ³•ä¹‹å‰å’Œä¹‹åï¼Œé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿå¯¹è±¡å±æ€§å€¼çš„æ›´æ”¹æƒ…å†µã€‚ NSKVONotifying_Aç±»å‰–æï¼šåœ¨è¿™ä¸ªè¿‡ç¨‹ï¼Œè¢«è§‚å¯Ÿå¯¹è±¡çš„ isa æŒ‡é’ˆä»æŒ‡å‘åŸæ¥çš„Aç±»ï¼Œè¢«KVOæœºåˆ¶ä¿®æ”¹ä¸ºæŒ‡å‘ç³»ç»Ÿæ–°åˆ›å»ºçš„å­ç±» NSKVONotifying_Aç±»ï¼Œæ¥å®ç°å½“å‰ç±»å±æ€§å€¼æ”¹å˜çš„ç›‘å¬ï¼› æ‰€ä»¥å½“æˆ‘ä»¬ä»åº”ç”¨å±‚é¢ä¸Šçœ‹æ¥ï¼Œå®Œå…¨æ²¡æœ‰æ„è¯†åˆ°æœ‰æ–°çš„ç±»å‡ºç°ï¼Œè¿™æ˜¯ç³»ç»Ÿâ€œéšç’â€äº†å¯¹KVOçš„åº•å±‚å®ç°è¿‡ç¨‹ï¼Œè®©æˆ‘ä»¬è¯¯ä»¥ä¸ºè¿˜æ˜¯åŸæ¥çš„ç±»ã€‚ä½†æ˜¯æ­¤æ—¶å¦‚æœæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„åä¸ºâ€œNSKVONotifying_Aâ€çš„ç±»()ï¼Œå°±ä¼šå‘ç°ç³»ç»Ÿè¿è¡Œåˆ°æ³¨å†ŒKVOçš„é‚£æ®µä»£ç æ—¶ç¨‹åºå°±å´©æºƒï¼Œå› ä¸ºç³»ç»Ÿåœ¨æ³¨å†Œç›‘å¬çš„æ—¶å€™åŠ¨æ€åˆ›å»ºäº†åä¸ºNSKVONotifying_Açš„ä¸­é—´ç±»ï¼Œå¹¶æŒ‡å‘è¿™ä¸ªä¸­é—´ç±»äº†ã€‚ ï¼ˆisa æŒ‡é’ˆçš„ä½œç”¨ï¼šæ¯ä¸ªå¯¹è±¡éƒ½æœ‰isa æŒ‡é’ˆï¼ŒæŒ‡å‘è¯¥å¯¹è±¡çš„ç±»ï¼Œå®ƒå‘Šè¯‰ Runtime ç³»ç»Ÿè¿™ä¸ªå¯¹è±¡çš„ç±»æ˜¯ä»€ä¹ˆã€‚æ‰€ä»¥å¯¹è±¡æ³¨å†Œä¸ºè§‚å¯Ÿè€…æ—¶ï¼ŒisaæŒ‡é’ˆæŒ‡å‘æ–°å­ç±»ï¼Œé‚£ä¹ˆè¿™ä¸ªè¢«è§‚å¯Ÿçš„å¯¹è±¡å°±ç¥å¥‡åœ°å˜æˆæ–°å­ç±»çš„å¯¹è±¡ï¼ˆæˆ–å®ä¾‹ï¼‰äº†ã€‚ï¼‰ å› è€Œåœ¨è¯¥å¯¹è±¡ä¸Šå¯¹ setter çš„è°ƒç”¨å°±ä¼šè°ƒç”¨å·²é‡å†™çš„ setterï¼Œä»è€Œæ¿€æ´»é”®å€¼é€šçŸ¥æœºåˆ¶. å­ç±»setteræ–¹æ³•å‰–æï¼šKVOçš„é”®å€¼è§‚å¯Ÿé€šçŸ¥ä¾èµ–äº NSObject çš„ä¸¤ä¸ªæ–¹æ³•:willChangeValueForKey:å’Œ didChangevlueForKey:ï¼Œåœ¨å­˜å–æ•°å€¼çš„å‰ååˆ†åˆ«è°ƒç”¨2ä¸ªæ–¹æ³•ï¼š è¢«è§‚å¯Ÿå±æ€§å‘ç”Ÿæ”¹å˜ä¹‹å‰ï¼ŒwillChangeValueForKey:è¢«è°ƒç”¨ï¼Œé€šçŸ¥ç³»ç»Ÿè¯¥ keyPath çš„å±æ€§å€¼å³å°†å˜æ›´ï¼›å½“æ”¹å˜å‘ç”Ÿåï¼Œ didChangeValueForKey: è¢«è°ƒç”¨ï¼Œé€šçŸ¥ç³»ç»Ÿè¯¥ keyPath çš„å±æ€§å€¼å·²ç»å˜æ›´ï¼›ä¹‹åï¼Œ observeValueForKey:ofObject:change:context: ä¹Ÿä¼šè¢«è°ƒç”¨ã€‚ä¸”é‡å†™è§‚å¯Ÿå±æ€§çš„setter æ–¹æ³•è¿™ç§ç»§æ‰¿æ–¹å¼çš„æ³¨å…¥æ˜¯åœ¨è¿è¡Œæ—¶è€Œä¸æ˜¯ç¼–è¯‘æ—¶å®ç°çš„ã€‚ æ¶ˆæ¯å‘é€åŸç†å¦‚ä¸‹è¿™ä¸ªæ–¹æ³•ï¼š1[lisi read:huozhe]; ä¼šè¢«ç¼–è¯‘æˆ1objc_sgSend(lisi, @selector(read:), huozhe); objc_msgSendçš„å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š é€šè¿‡isaæŒ‡é’ˆæ‰¾åˆ°æ‰€å±ç±» æŸ¥æ‰¾ç±»çš„cacheåˆ—è¡¨, å¦‚æœæ²¡æœ‰åˆ™ä¸‹ä¸€æ­¥ æŸ¥æ‰¾ç±»çš„â€æ–¹æ³•åˆ—è¡¨â€ å¦‚æœèƒ½æ‰¾åˆ°ä¸é€‰æ‹©å­åç§°ç›¸ç¬¦çš„æ–¹æ³•, å°±è·³è‡³å…¶å®ç°ä»£ç  æ‰¾ä¸åˆ°, å°±æ²¿ç€ç»§æ‰¿ä½“ç³»ç»§ç»­å‘ä¸ŠæŸ¥æ‰¾ å¦‚æœèƒ½æ‰¾åˆ°ä¸é€‰æ‹©å­åç§°ç›¸ç¬¦çš„æ–¹æ³•, å°±è·³è‡³å…¶å®ç°ä»£ç  æ‰¾ä¸åˆ°, æ‰§è¡Œâ€æ¶ˆæ¯è½¬å‘â€. æ¶ˆæ¯è½¬å‘æœºåˆ¶åŸç†æ¶ˆæ¯è½¬å‘æœºåˆ¶åŸºæœ¬åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š åŠ¨æ€æ–¹æ³•è§£æ å¤‡ç”¨æ¥å—è€… å®Œæ•´è½¬å‘ åŠ¨æ€æ–¹æ³•è§£æå¯¹è±¡åœ¨æ¥æ”¶åˆ°æœªçŸ¥çš„æ¶ˆæ¯æ—¶ï¼Œé¦–å…ˆä¼šè°ƒç”¨æ‰€å±ç±»çš„ç±»æ–¹æ³• +resolveInstanceMethod:(å®ä¾‹æ–¹æ³•)æˆ–è€… +resolveClassMethod:(ç±»æ–¹æ³•)ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬æœ‰æœºä¼šä¸ºè¯¥æœªçŸ¥æ¶ˆæ¯æ–°å¢ä¸€ä¸ªâ€å¤„ç†æ–¹æ³•â€â€œã€‚ä¸è¿‡ä½¿ç”¨è¯¥æ–¹æ³•çš„å‰ææ˜¯æˆ‘ä»¬å·²ç»å®ç°äº†è¯¥â€å¤„ç†æ–¹æ³•â€ï¼Œåªéœ€è¦åœ¨è¿è¡Œæ—¶é€šè¿‡ class_addMethod å‡½æ•°åŠ¨æ€æ·»åŠ åˆ°ç±»é‡Œé¢å°±å¯ä»¥äº†ã€‚ 1234567891011121314151617181920@interface HiClass: NSObject- (void)hello;@end@implementation HiClassvoid functionForMethod(id self, SEL _cmd) &#123; NSLog(@&quot;hello!&quot;);&#125;// selector : é‚£ä¸ªæœªçŸ¥çš„é€‰æ‹©å­// è¿”å›YESåˆ™ç»“æŸæ¶ˆæ¯è½¬å‘// è¿”å›NOåˆ™è¿›å…¥å¤‡ç”¨æ¥å—è€…+ (BOOL)resolveInstanceMethod:(SEL)sel &#123; NSLog(@&quot;resolveInstanceMethod&quot;); NSString *selString = NSStringFromSelector(sel); if ([selString isEqualToString:@&quot;hello&quot;]) &#123; class_addMethod(self, @selector(hello), (IMP)functionForMethod, &quot;v@:&quot;); return YES; &#125; return [super resolveInstanceMethod:sel];&#125;@end å¤‡ç”¨æ¥å—è€…åŠ¨æ€æ–¹æ³•è§£ææ— æ³•å¤„ç†æ¶ˆæ¯ï¼Œåˆ™ä¼šèµ°å¤‡ç”¨æ¥å—è€…ã€‚è¿™ä¸ªå¤‡ç”¨æ¥å—è€…åªèƒ½æ˜¯ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œä¸èƒ½æ˜¯selfæœ¬èº«ï¼Œå¦åˆ™å°±ä¼šå‡ºç°æ— é™å¾ªç¯ã€‚å¦‚æœæˆ‘ä»¬æ²¡æœ‰æŒ‡å®šç›¸åº”çš„å¯¹è±¡æ¥å¤„ç†aSelectorï¼Œåˆ™åº”è¯¥è°ƒç”¨çˆ¶ç±»çš„å®ç°æ¥è¿”å›ç»“æœã€‚123456789101112131415161718192021222324252627@interface RuntimeMethodHelper: NSObject@end@implementation RuntimeMethodHelper- (void)hello &#123; NSLog(@&quot;%@, %p -&gt; hello&quot;, self, _cmd);&#125;@end@interface HiClass: NSObject&#123; RuntimeMethodHelper *_helper;&#125;- (void)hello;@end@implementation HiClass// selector : é‚£ä¸ªæœªçŸ¥çš„æ¶ˆæ¯// è¿”å›ä¸€ä¸ªèƒ½å“åº”è¯¥æœªçŸ¥é€‰æ‹©å­çš„å¤‡ç”¨å¯¹è±¡- (id)forwardingTargetForSelector:(SEL)aSelector &#123; NSLog(@&quot;forwardingTargetForSelector&quot;); NSString *selectorString = NSStringFromSelector(aSelector); // å°†æ¶ˆæ¯äº¤ç»™_helperæ¥å¤„ç† if ([selectorString isEqualToString:@&quot;hello&quot;]) &#123; return _helper; &#125; return [super forwardingTargetForSelector:aSelector];&#125;@end å®Œæ•´æ¶ˆæ¯è½¬å‘å¦‚æœåŠ¨æ€æ–¹æ³•è§£æå’Œå¤‡ç”¨æ¥å—è€…éƒ½æ²¡æœ‰å¤„ç†è¿™ä¸ªæ¶ˆæ¯ï¼Œé‚£ä¹ˆå°±ä¼šèµ°å®Œæ•´æ¶ˆæ¯è½¬å‘ï¼š 123456789101112131415161718192021222324252627282930313233343536@interface RuntimeMethodHelper: NSObject@end@implementation RuntimeMethodHelper- (void)hello &#123; NSLog(@&quot;%@, %p -&gt; hello&quot;, self, _cmd);&#125;@end@interface HiClass: NSObject&#123; RuntimeMethodHelper *_helper;&#125;- (void)hello;@end@implementation HiClass// invocation : å°è£…äº†ä¸é‚£æ¡å°šæœªå¤„ç†çš„æ¶ˆæ¯ç›¸å…³çš„æ‰€æœ‰ç»†èŠ‚çš„å¯¹è±¡- (void)forwardInvocation:(NSInvocation *)anInvocation &#123; NSLog(@&quot;forwardInvocation&quot;); if ([RuntimeMethodHelper instancesRespondToSelector:anInvocation.selector]) &#123; [anInvocation invokeWithTarget:_helper]; &#125;&#125;// å¿…é¡»é‡æ–°è¿™ä¸ªæ–¹æ³•ï¼Œæ¶ˆæ¯è½¬å‘æœºåˆ¶ä½¿ç”¨ä»è¿™ä¸ªæ–¹æ³•ä¸­è·å–çš„ä¿¡æ¯æ¥åˆ›å»ºNSInvocationå¯¹è±¡// NSMethodSignature : è¯¥selectorå¯¹åº”çš„æ–¹æ³•ç­¾å- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector &#123; NSLog(@&quot;methodSignatureForSelector&quot;); NSMethodSignature *signature = [super methodSignatureForSelector:aSelector]; if (!signature) &#123; if ([RuntimeMethodHelper instancesRespondToSelector:aSelector]) &#123; signature = [RuntimeMethodHelper instanceMethodSignatureForSelector:aSelector]; &#125; &#125; return signature;&#125;@end weakå®ç°åŸç†Runtimeç»´æŠ¤äº†ä¸€ä¸ªweakè¡¨ï¼Œç”¨äºå­˜å‚¨æŒ‡å‘æŸä¸ªå¯¹è±¡çš„æ‰€æœ‰weakæŒ‡é’ˆã€‚weakè¡¨å…¶å®æ˜¯ä¸€ä¸ªhashï¼ˆå“ˆå¸Œï¼‰è¡¨ï¼ŒKeyæ˜¯æ‰€æŒ‡å¯¹è±¡çš„åœ°å€ï¼ŒValueæ˜¯weakæŒ‡é’ˆçš„åœ°å€ï¼ˆè¿™ä¸ªåœ°å€çš„å€¼æ˜¯æ‰€æŒ‡å¯¹è±¡çš„åœ°å€ï¼‰æ•°ç»„ã€‚ åˆå§‹åŒ–æ—¶ï¼šruntimeä¼šè°ƒç”¨objc_initWeakå‡½æ•°ï¼Œåˆå§‹åŒ–ä¸€ä¸ªæ–°çš„weakæŒ‡é’ˆæŒ‡å‘å¯¹è±¡çš„åœ°å€ã€‚ æ·»åŠ å¼•ç”¨æ—¶ï¼šobjc_initWeakå‡½æ•°ä¼šè°ƒç”¨ objc_storeWeak() å‡½æ•°ï¼Œ objc_storeWeak() çš„ä½œç”¨æ˜¯æ›´æ–°æŒ‡é’ˆæŒ‡å‘ï¼Œåˆ›å»ºå¯¹åº”çš„å¼±å¼•ç”¨è¡¨ã€‚ é‡Šæ”¾æ—¶ï¼Œè°ƒç”¨ clearDeallocating å‡½æ•°ã€‚clearDeallocating å‡½æ•°é¦–å…ˆæ ¹æ®å¯¹è±¡åœ°å€è·å–æ‰€æœ‰ weak æŒ‡é’ˆåœ°å€çš„æ•°ç»„ï¼Œç„¶åéå†è¿™ä¸ªæ•°ç»„æŠŠå…¶ä¸­çš„æ•°æ®è®¾ä¸º nilï¼Œæœ€åæŠŠè¿™ä¸ª entry ä» weak è¡¨ä¸­åˆ é™¤ï¼Œæœ€åæ¸…ç†å¯¹è±¡çš„è®°å½•ã€‚ é™„åŠ ï¼š å®ç°weakåï¼Œä¸ºä»€ä¹ˆå¯¹è±¡é‡Šæ”¾åä¼šè‡ªåŠ¨ä¸ºnilï¼Ÿ runtime å¯¹æ³¨å†Œçš„ç±»ï¼Œ ä¼šè¿›è¡Œå¸ƒå±€ï¼Œå¯¹äº weak å¯¹è±¡ä¼šæ”¾å…¥ä¸€ä¸ª hash è¡¨ä¸­ã€‚ ç”¨ weak æŒ‡å‘çš„å¯¹è±¡å†…å­˜åœ°å€ä½œä¸º keyï¼Œå½“æ­¤å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¸º 0 çš„æ—¶å€™ä¼š deallocï¼Œå‡å¦‚ weak æŒ‡å‘çš„å¯¹è±¡å†…å­˜åœ°å€æ˜¯ a ï¼Œé‚£ä¹ˆå°±ä¼šä»¥ a ä¸ºé”®ï¼Œ åœ¨è¿™ä¸ª weak è¡¨ä¸­æœç´¢ï¼Œæ‰¾åˆ°æ‰€æœ‰ä»¥ a ä¸ºé”®çš„ weak å¯¹è±¡ï¼Œä»è€Œè®¾ç½®ä¸º nil ã€‚ å½“weakå¼•ç”¨æŒ‡å‘çš„å¯¹è±¡è¢«é‡Šæ”¾æ—¶ï¼Œåˆæ˜¯å¦‚ä½•å»å¤„ç†weakæŒ‡é’ˆçš„å‘¢ï¼Ÿ è°ƒç”¨objc_release å› ä¸ºå¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¸º0ï¼Œæ‰€ä»¥æ‰§è¡Œdealloc åœ¨deallocä¸­ï¼Œè°ƒç”¨äº†_objc_rootDeallocå‡½æ•° åœ¨_objc_rootDeallocä¸­ï¼Œè°ƒç”¨äº†object_disposeå‡½æ•° è°ƒç”¨objc_destructInstance æœ€åè°ƒç”¨objc_clear_deallocating,è¯¦ç»†è¿‡ç¨‹å¦‚ä¸‹ï¼š a. ä»weakè¡¨ä¸­è·å–åºŸå¼ƒå¯¹è±¡çš„åœ°å€ä¸ºé”®å€¼çš„è®°å½• b. å°†åŒ…å«åœ¨è®°å½•ä¸­çš„æ‰€æœ‰é™„æœ‰ weakä¿®é¥°ç¬¦å˜é‡çš„åœ°å€ï¼Œèµ‹å€¼ä¸º nil c. å°†weakè¡¨ä¸­è¯¥è®°å½•åˆ é™¤ d. ä»å¼•ç”¨è®¡æ•°è¡¨ä¸­åˆ é™¤åºŸå¼ƒå¯¹è±¡çš„åœ°å€ä¸ºé”®å€¼çš„è®°å½•","categories":[],"tags":[{"name":"Runtime","slug":"Runtime","permalink":"https://kysonyangs.github.io/tags/Runtime/"}]},{"title":"çº¿ç¨‹å®‰å…¨ã€é”","slug":"çº¿ç¨‹å®‰å…¨ã€é”","date":"2018-06-20T07:23:23.000Z","updated":"2020-05-17T08:16:01.535Z","comments":true,"path":"default/çº¿ç¨‹å®‰å…¨ã€é”/","link":"","permalink":"https://kysonyangs.github.io/default/çº¿ç¨‹å®‰å…¨ã€é”/","excerpt":"nonatomic ä¸ atomic nonatomic: ä¸ä¼šå¯¹ç”Ÿæˆçš„ getterã€setter æ–¹æ³•åŠ åŒæ­¥é”ï¼ˆéåŸå­æ€§ï¼‰ atomic: ä¼šå¯¹ç”Ÿæˆçš„ getterã€setter åŠ åŒæ­¥é”ï¼ˆåŸå­æ€§ï¼‰setter / getter è¢« atomic ä¿®é¥°çš„å±æ€§æ—¶ï¼Œè¯¥å±æ€§æ˜¯è¯»å†™å®‰å…¨çš„ã€‚ç„¶è€Œè¯»å†™å®‰å…¨å¹¶ä¸ä»£è¡¨çº¿ç¨‹å®‰å…¨ã€‚","text":"nonatomic ä¸ atomic nonatomic: ä¸ä¼šå¯¹ç”Ÿæˆçš„ getterã€setter æ–¹æ³•åŠ åŒæ­¥é”ï¼ˆéåŸå­æ€§ï¼‰ atomic: ä¼šå¯¹ç”Ÿæˆçš„ getterã€setter åŠ åŒæ­¥é”ï¼ˆåŸå­æ€§ï¼‰setter / getter è¢« atomic ä¿®é¥°çš„å±æ€§æ—¶ï¼Œè¯¥å±æ€§æ˜¯è¯»å†™å®‰å…¨çš„ã€‚ç„¶è€Œè¯»å†™å®‰å…¨å¹¶ä¸ä»£è¡¨çº¿ç¨‹å®‰å…¨ã€‚ çº¿ç¨‹å®‰å…¨æ¦‚å¿µï¼ˆthread safetyï¼‰ çº¿ç¨‹å®‰å…¨å°±æ˜¯å¤šçº¿ç¨‹è®¿é—®æ—¶ï¼Œé‡‡ç”¨äº†åŠ é”æœºåˆ¶ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®è¯¥ç±»çš„æŸä¸ªæ•°æ®æ—¶ï¼Œè¿›è¡Œä¿æŠ¤ï¼Œå…¶ä»–çº¿ç¨‹ä¸èƒ½è¿›è¡Œè®¿é—®ç›´åˆ°è¯¥çº¿ç¨‹è¯»å–å®Œï¼Œå…¶ä»–çº¿ç¨‹æ‰å¯ä½¿ç”¨ã€‚ä¸ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´æˆ–è€…æ•°æ®æ±¡æŸ“ã€‚ çº¿ç¨‹ä¸å®‰å…¨å°±æ˜¯ä¸æä¾›æ•°æ®è®¿é—®ä¿æŠ¤ï¼Œæœ‰å¯èƒ½å‡ºç°å¤šä¸ªçº¿ç¨‹å…ˆåæ›´æ”¹æ•°æ®é€ æˆæ‰€å¾—åˆ°çš„æ•°æ®æ˜¯è„æ•°æ®ã€‚ éªŒè¯ atomic éçº¿ç¨‹å®‰å…¨å¦‚ä¸‹ä»£ç 12345678910111213141516171819202122232425@interface ViewController ()@property (atomic, copy) NSString *name;@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; while (1) &#123; self.name = @&quot;kyson&quot;; NSLog(@&quot;kyson == %@&quot;, self.name); &#125; &#125;); dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; while (1) &#123; self.name = @&quot;shen&quot;; NSLog(@&quot;shen == %@&quot;, self.name); &#125; &#125;);&#125;@end è¾“å‡ºç»“æœ123456782018-07-09 15:28:05.681759+0800 YSThreadSafetyTest[3186:1387832] kyson == kyson2018-07-09 15:28:05.681857+0800 YSThreadSafetyTest[3186:1387942] shen == shen2018-07-09 15:28:05.681956+0800 YSThreadSafetyTest[3186:1387832] kyson == kyson2018-07-09 15:28:05.721291+0800 YSThreadSafetyTest[3186:1387942] shen == shen2018-07-09 15:28:05.721291+0800 YSThreadSafetyTest[3186:1387832] kyson == shen2018-07-09 15:28:06.347283+0800 YSThreadSafetyTest[3186:1387942] shen == shen2018-07-09 15:28:06.386894+0800 YSThreadSafetyTest[3186:1387832] kyson == kyson2018-07-09 15:28:06.386894+0800 YSThreadSafetyTest[3186:1387942] shen == kyson ç¬¬äº”è¡Œå’Œç¬¬8è¡Œå¯ä»¥çœ‹å‡ºï¼Œ atomic éçº¿ç¨‹å®‰å…¨ã€‚ ä¹Ÿå°±æ˜¯è¯´ atomic åªèƒ½åšåˆ°è¯»å†™å®‰å…¨å¹¶ä¸èƒ½åšåˆ°çº¿ç¨‹å®‰å…¨ï¼Œè‹¥è¦å®ç°çº¿ç¨‹å®‰å…¨è¿˜éœ€è¦é‡‡ç”¨æ›´ä¸ºæ·±å±‚çš„é”å®šæœºåˆ¶æ‰è¡Œã€‚ iOSå¼€å‘æ—¶ä¸€èˆ¬éƒ½ä¼šä½¿ç”¨ nonatomic å±æ€§ï¼Œå› ä¸ºåœ¨iOSä¸­ä½¿ç”¨åŒæ­¥é”çš„å¼€é”€è¾ƒå¤§ï¼Œè¿™ä¼šå¸¦æ¥æ€§èƒ½é—®é¢˜ï¼Œä½†æ˜¯åœ¨Mac OS Xç¨‹åºæ—¶ï¼Œä½¿ç”¨ atomic å±æ€§é€šå¸¸éƒ½ä¸ä¼šæœ‰æ€§èƒ½ç“¶é¢ˆã€‚ é”çš„æ¦‚å¿µåœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œé”æ˜¯ä¸€ç§åŒæ­¥æœºåˆ¶ï¼Œç”¨äºåœ¨å­˜åœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸­å®æ–½å¯¹èµ„æºçš„è®¿é—®é™åˆ¶ã€‚ é”çš„ä½œç”¨ é€šä¿—æ¥è®²ï¼šå°±æ˜¯ä¸ºäº†é˜²æ­¢åœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹å¯¹å…±äº«èµ„æºçš„è„è¯»æˆ–è€…è„å†™ã€‚ ä¹Ÿå¯ä»¥ç†è§£ä¸ºï¼šæ‰§è¡Œå¤šçº¿ç¨‹æ—¶ç”¨äºå¼ºè¡Œé™åˆ¶èµ„æºè®¿é—®çš„åŒæ­¥æœºåˆ¶ï¼Œå³å¹¶å‘æ§åˆ¶ä¸­ä¿è¯äº’æ–¥çš„è¦æ±‚ã€‚ iOSå¼€å‘ä¸­å¸¸ç”¨çš„é” @synchronized NSLock å¯¹è±¡é” NSRecursiveLock é€’å½’é” NSConditionLock æ¡ä»¶é” pthread_mutex äº’æ–¥é”ï¼ˆCè¯­è¨€ï¼‰ dispatch_semaphore ä¿¡å·é‡å®ç°åŠ é”ï¼ˆGCDï¼‰ OSSpinLock è‡ªæ—‹é” æ€§èƒ½ï¼šibireme å¤§ç¥åšå®¢ç›—çš„æ€§èƒ½å›¾ =-= @synchronized@synchronized å…¶å®æ˜¯ä¸€ä¸ª OC å±‚é¢çš„é”ï¼Œ ä¸»è¦æ˜¯é€šè¿‡ç‰ºç‰²æ€§èƒ½æ¢æ¥è¯­æ³•ä¸Šçš„ç®€æ´ä¸å¯è¯»æ€§ã€‚@synchronized æ˜¯æˆ‘ä»¬å¹³å¸¸ä½¿ç”¨æœ€å¤šçš„ä½†æ˜¯æ€§èƒ½æœ€å·®çš„ã€‚123456789// OC@synchronized(self) &#123; // éœ€è¦æ‰§è¡Œçš„ä»£ç å—&#125;// Swiftobjc_sync_enter(self)// éœ€è¦æ‰§è¡Œçš„ä»£ç å—objc_sync_exit(self) å¦‚ä¸‹ä»£ç ç¤ºä¾‹1234567891011121314dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; @synchronized(self) &#123; NSLog(@&quot;ç¬¬ä¸€ä¸ªçº¿ç¨‹åŒæ­¥æ“ä½œå¼€å§‹&quot;); sleep(3); NSLog(@&quot;ç¬¬ä¸€ä¸ªçº¿ç¨‹åŒæ­¥æ“ä½œç»“æŸ&quot;); &#125;&#125;);dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; sleep(1); @synchronized(self) &#123; NSLog(@&quot;ç¬¬äºŒä¸ªçº¿ç¨‹åŒæ­¥æ“ä½œ&quot;); &#125;&#125;); è¾“å‡ºç»“æœ1232018-07-09 15:42:06.226069+0800 YSThreadSafetyTest[3294:1487479] ç¬¬ä¸€ä¸ªçº¿ç¨‹åŒæ­¥æ“ä½œå¼€å§‹2018-07-09 15:42:09.226758+0800 YSThreadSafetyTest[3294:1487479] ç¬¬ä¸€ä¸ªçº¿ç¨‹åŒæ­¥æ“ä½œç»“æŸ2018-07-09 15:42:09.226942+0800 YSThreadSafetyTest[3294:1487480] ç¬¬äºŒä¸ªçº¿ç¨‹åŒæ­¥æ“ä½œ @synchronized(self) æŒ‡ä»¤ä½¿ç”¨çš„ self ä¸ºè¯¥é”çš„å”¯ä¸€æ ‡è¯†ï¼Œåªæœ‰å½“æ ‡è¯†ç›¸åŒæ—¶ï¼Œæ‰ä¸ºæ»¡è¶³äº’æ–¥ï¼Œå¦‚æœçº¿ç¨‹2ä¸­çš„ self æ”¹æˆå…¶å®ƒå¯¹è±¡ï¼Œçº¿ç¨‹2å°±ä¸ä¼šè¢«é˜»å¡ã€‚ @synchronized æŒ‡ä»¤å®ç°é”çš„ä¼˜ç‚¹å°±æ˜¯æˆ‘ä»¬ä¸éœ€è¦åœ¨ä»£ç ä¸­æ˜¾å¼çš„åˆ›å»ºé”å¯¹è±¡ï¼Œä¾¿å¯ä»¥å®ç°é”çš„æœºåˆ¶ï¼Œä½†ä½œä¸ºä¸€ç§é¢„é˜²æªæ–½ï¼Œ@synchronized å—ä¼šéšå¼çš„æ·»åŠ ä¸€ä¸ªå¼‚å¸¸å¤„ç†æ¥ä¿æŠ¤ä»£ç ï¼Œè¯¥å¤„ç†ä¼šåœ¨å¼‚å¸¸æŠ›å‡ºçš„æ—¶å€™è‡ªåŠ¨çš„é‡Šæ”¾äº’æ–¥é”ã€‚æ‰€ä»¥å¦‚æœä¸æƒ³è®©éšå¼çš„å¼‚å¸¸å¤„ç†ä¾‹ç¨‹å¸¦æ¥é¢å¤–çš„å¼€é”€ï¼Œä½ å¯ä»¥è€ƒè™‘ä½¿ç”¨é”å¯¹è±¡ã€‚ å¦‚æœåœ¨ @sychronized(object){} å†…éƒ¨ object è¢«é‡Šæ”¾æˆ–è¢«è®¾ä¸º nilï¼Œä»æˆ‘åšçš„æµ‹è¯•çš„ç»“æœæ¥çœ‹ï¼Œçš„ç¡®æ²¡æœ‰é—®é¢˜ï¼Œä½†å¦‚æœ object ä¸€å¼€å§‹å°±æ˜¯ nilï¼Œåˆ™å¤±å»äº†é”çš„åŠŸèƒ½ã€‚ä¸è¿‡è™½ç„¶ nil ä¸è¡Œï¼Œä½† @synchronized([NSNull null]) æ˜¯å®Œå…¨å¯ä»¥çš„ã€‚ NSLock å¯¹è±¡é” NSLock ä¸­å®ç°äº†ä¸€ä¸ªç®€å•çš„äº’æ–¥é”ã€‚é€šè¿‡ NSLocking åè®®å®šä¹‰äº† lock å’Œ unlock æ–¹æ³•ã€‚ 1234@protocol NSLocking- (void)lock;- (void)unlock;@end ä»£ç ç¤ºä¾‹ï¼šé“¶è¡Œå–é’±1234567891011121314151617181920212223242526272829- (void)nslockTest &#123; _money = 1000; _lock = [[NSLock alloc] init]; dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; [self drawMoney:@&quot;å°æ˜&quot;]; &#125;); dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; [self drawMoney:@&quot;å°çº¢&quot;]; &#125;);&#125;- (void)drawMoney:(NSString *)person &#123; while (1) &#123; sleep(1); // åŠ é” [_lock lock]; if (_money &gt; 0) &#123; _money -= 200; NSLog(@&quot;%@ å–å‡º200å…ƒï¼Œå‰©ä½™ï¼š%zdå…ƒ&quot;, person, _money); &#125; else &#123; NSLog(@&quot;%@ å°æ˜ æ²¡é’±äº†ï¼Œå‹¿å–&quot;, person); break; &#125; // è§£é” [_lock unlock]; &#125;&#125; åŠ é”ç»“æœï¼š1234562018-07-09 16:04:06.603614+0800 YSThreadSafetyTest[3547:1618383] å°çº¢ å–å‡º200å…ƒï¼Œå‰©ä½™ï¼š800å…ƒ2018-07-09 16:04:06.603813+0800 YSThreadSafetyTest[3547:1618389] å°æ˜ å–å‡º200å…ƒï¼Œå‰©ä½™ï¼š600å…ƒ2018-07-09 16:04:07.608957+0800 YSThreadSafetyTest[3547:1618383] å°çº¢ å–å‡º200å…ƒï¼Œå‰©ä½™ï¼š400å…ƒ2018-07-09 16:04:07.609166+0800 YSThreadSafetyTest[3547:1618389] å°æ˜ å–å‡º200å…ƒï¼Œå‰©ä½™ï¼š200å…ƒ2018-07-09 16:04:08.611343+0800 YSThreadSafetyTest[3547:1618389] å°æ˜ å–å‡º200å…ƒï¼Œå‰©ä½™ï¼š0å…ƒ2018-07-09 16:04:08.611538+0800 YSThreadSafetyTest[3547:1618383] å°çº¢ å°æ˜ æ²¡é’±äº†ï¼Œå‹¿å– ä¸åŠ é”ç»“æœï¼š12345672018-07-09 16:05:10.608726+0800 YSThreadSafetyTest[3565:1624593] å°çº¢ å–å‡º200å…ƒï¼Œå‰©ä½™ï¼š600å…ƒ2018-07-09 16:05:10.608736+0800 YSThreadSafetyTest[3565:1624590] å°æ˜ å–å‡º200å…ƒï¼Œå‰©ä½™ï¼š800å…ƒ2018-07-09 16:05:11.612305+0800 YSThreadSafetyTest[3565:1624593] å°çº¢ å–å‡º200å…ƒï¼Œå‰©ä½™ï¼š200å…ƒ2018-07-09 16:05:11.612305+0800 YSThreadSafetyTest[3565:1624590] å°æ˜ å–å‡º200å…ƒï¼Œå‰©ä½™ï¼š400å…ƒ2018-07-09 16:05:12.616221+0800 YSThreadSafetyTest[3565:1624593] å°çº¢ å°æ˜ æ²¡é’±äº†ï¼Œå‹¿å–2018-07-09 16:05:12.616220+0800 YSThreadSafetyTest[3565:1624590] å°æ˜ å–å‡º200å…ƒï¼Œå‰©ä½™ï¼š0å…ƒ2018-07-09 16:05:13.617584+0800 YSThreadSafetyTest[3565:1624590] å°æ˜ å°æ˜ æ²¡é’±äº†ï¼Œå‹¿å– NSLock ç±»è¿˜å¢åŠ äº† tryLock å’Œ lockBeforeDate: æ–¹æ³• 12- (BOOL)tryLock;- (BOOL)lockBeforeDate:(NSDate *)limit; tryLock å°è¯•åŠ é”ï¼Œå®ƒä¸ä¼šé˜»å¡çº¿ç¨‹ï¼Œå¤±è´¥è¿”å›NOã€‚ lockBeforeDate: åœ¨æŒ‡å®šDateä¹‹å‰å°è¯•åŠ é”ï¼Œå¦‚æœåœ¨æŒ‡å®šæ—¶é—´ä¹‹å‰éƒ½ä¸èƒ½åŠ é”ï¼Œåˆ™è¿”å›NOã€‚ç¤ºä¾‹ä»£ç ï¼š 123456789101112131415161718192021222324252627282930- (void)nslockTest2 &#123; _lock = [[NSLock alloc] init]; dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; [_lock lock]; NSLog(@&quot;çº¿ç¨‹1åŒæ­¥å¼€å§‹&quot;); sleep(5); NSLog(@&quot;çº¿ç¨‹1åŒæ­¥ç»“æŸ&quot;); [_lock unlock]; &#125;); dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; sleep(1); NSLog(@&quot;å°è¯•åŠ é”&quot;); if ([_lock tryLock]) &#123;//å°è¯•åŠ é”ï¼Œå¦‚æœä¸è¡Œè¿”å›NOï¼Œä¸ä¼šé˜»å¡è¯¥çº¿ç¨‹ NSLog(@&quot;åŠ é”æˆåŠŸ&quot;); [_lock unlock]; &#125; else &#123; NSLog(@&quot;åŠ é”å¤±è´¥ï¼Œå·²ç»æœ‰é”äº†&quot;); &#125; NSDate *date = [[NSDate alloc] initWithTimeIntervalSinceNow:3]; NSLog(@&quot;3såå°è¯•åŠ é”&quot;); if ([_lock lockBeforeDate:date]) &#123;//å°è¯•åœ¨æœªæ¥çš„3så†…åŠ é”ï¼Œå¹¶é˜»å¡è¯¥çº¿ç¨‹ï¼Œå¦‚æœ3så†…ä¸è¡Œæ¢å¤çº¿ç¨‹, è¿”å›NO,ä¸ä¼šé˜»å¡è¯¥çº¿ç¨‹ NSLog(@&quot;æ²¡æœ‰è¶…æ—¶ï¼ŒåŠ é”æˆåŠŸ&quot;); [_lock unlock]; &#125; else &#123; NSLog(@&quot;è¶…æ—¶ï¼ŒåŠ é”å¤±è´¥&quot;); &#125; NSLog(@&quot;çº¿ç¨‹2 OK&quot;); &#125;);&#125; è¾“å‡ºç»“æœï¼š12345672018-07-09 16:33:51.939314+0800 YSThreadSafetyTest[3874:1773831] çº¿ç¨‹1åŒæ­¥å¼€å§‹2018-07-09 16:33:52.944446+0800 YSThreadSafetyTest[3874:1773854] å°è¯•åŠ é”2018-07-09 16:33:52.944671+0800 YSThreadSafetyTest[3874:1773854] åŠ é”å¤±è´¥ï¼Œå·²ç»æœ‰é”äº†2018-07-09 16:33:52.944826+0800 YSThreadSafetyTest[3874:1773854] 3såå°è¯•åŠ é”2018-07-09 16:33:55.946002+0800 YSThreadSafetyTest[3874:1773854] è¶…æ—¶ï¼ŒåŠ é”å¤±è´¥2018-07-09 16:33:55.946176+0800 YSThreadSafetyTest[3874:1773854] çº¿ç¨‹2 OK2018-07-09 16:33:56.944367+0800 YSThreadSafetyTest[3874:1773831] çº¿ç¨‹1åŒæ­¥ç»“æŸ NSRecursiveLock é€’å½’é”æœ‰æ—¶å€™â€œåŠ é”ä»£ç â€ä¸­å­˜åœ¨é€’å½’è°ƒç”¨ï¼Œé€’å½’å¼€å§‹å‰åŠ é”ï¼Œé€’å½’è°ƒç”¨å¼€å§‹åä¼šé‡å¤æ‰§è¡Œæ­¤æ–¹æ³•ä»¥è‡³äºåå¤æ‰§è¡ŒåŠ é”ä»£ç æœ€ç»ˆé€ æˆæ­»é”ã€‚ å¦‚ä¸‹ä»£ç ï¼š12345678910111213141516171819- (void)recursiveLockTest &#123; _lock = [[NSLock alloc] init]; dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; NSLog(@&quot;é€’å½’å¼€å§‹&quot;); static void(^TestMethod)(int); TestMethod = ^(int value)&#123; [_lock lock]; if (value &gt; 0) &#123; sleep(1); value--; NSLog(@&quot;é€’å½’ä¸­ %zd&quot;, value); TestMethod(value); &#125; [_lock unlock]; &#125;; TestMethod(5); NSLog(@&quot;ç»“æŸ&quot;); &#125;);&#125; è¾“å‡ºç»“æœï¼š122018-07-09 16:39:52.833302+0800 YSThreadSafetyTest[3947:1804640] é€’å½’å¼€å§‹2018-07-09 16:39:53.834239+0800 YSThreadSafetyTest[3947:1804640] é€’å½’ä¸­ 4 å¯ä»¥çœ‹åˆ°æ°¸è¿œéƒ½ä¸ä¼šç»“æŸï¼Œè¿™æ˜¯ä¸€ä¸ªæ­»é”æƒ…å†µã€‚åœ¨è¿™ä¸ªçº¿ç¨‹ä¸­ï¼ŒTestMethod é€’å½’è°ƒç”¨ï¼Œæ¯æ¬¡è¿›å…¥Block éƒ½ä¼šå»åŠ ä¸€æ¬¡é”ï¼Œè€Œä»ç¬¬äºŒæ¬¡å¼€å§‹ï¼Œç”±äºé”å·²ç»ä½¿ç”¨äº†ä¸”æ²¡æœ‰è§£é”ï¼Œæ‰€ä»¥ä»–éœ€è¦ç­‰å¾…é”è¢«è§£é™¤ï¼Œè¿™æ ·å°±å¯¼è‡´æ­»é”ï¼Œçº¿ç¨‹è¢«é˜»å¡ä½ã€‚ è¿™é‡Œå¯ä»¥ä½¿ç”¨ NSRecursiveLock é€’å½’é”æ¥è§£å†³ã€‚é€’å½’é”å¯ä»¥åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­åå¤è·å–é”è€Œä¸é€ æˆæ­»é”ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šè®°å½•è·å–é”å’Œé‡Šæ”¾é”çš„æ¬¡æ•°ï¼Œåªæœ‰æœ€åä¸¤è€…å¹³è¡¡é”æ‰è¢«æœ€ç»ˆé‡Šæ”¾ã€‚ NSConditionLock æ¡ä»¶é”NSCoditionLock åšå¤šçº¿ç¨‹ä¹‹é—´çš„ä»»åŠ¡ç­‰å¾…è°ƒç”¨ï¼Œè€Œä¸”æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ NSConditionLock æºç ï¼š123456789101112131415161718@interface NSConditionLock : NSObject &lt;NSLocking&gt; &#123;@private void *_priv;&#125;- (instancetype)initWithCondition:(NSInteger)condition NS_DESIGNATED_INITIALIZER;@property (readonly) NSInteger condition;- (void)lockWhenCondition:(NSInteger)condition;- (BOOL)tryLock;- (BOOL)tryLockWhenCondition:(NSInteger)condition;- (void)unlockWithCondition:(NSInteger)condition;- (BOOL)lockBeforeDate:(NSDate *)limit;- (BOOL)lockWhenCondition:(NSInteger)condition beforeDate:(NSDate *)limit;@property (nullable, copy) NSString *name NS_AVAILABLE(10_5, 2_0);@end NSConditionLock å’Œ NSLock ç±»ä¼¼ï¼Œéƒ½éµå¾ª NSLocking åè®®ï¼Œæ–¹æ³•éƒ½ç±»ä¼¼ï¼Œåªæ˜¯å¤šäº†ä¸€ä¸ª condition å±æ€§ï¼Œä»¥åŠæ¯ä¸ªæ“ä½œéƒ½å¤šäº†ä¸€ä¸ªå…³äº condition å±æ€§çš„æ–¹æ³•ï¼Œä¾‹å¦‚ tryLockï¼ŒtryLockWhenCondition:ï¼ŒNSConditionLock å¯ä»¥ç§°ä¸ºæ¡ä»¶é”ï¼Œåªæœ‰ condition å‚æ•°ä¸åˆå§‹åŒ–æ—¶å€™çš„ condition ç›¸ç­‰ï¼Œlock æ‰èƒ½æ­£ç¡®è¿›è¡ŒåŠ é”æ“ä½œã€‚è€Œ unlockWithCondition: å¹¶ä¸æ˜¯å½“ conditionç¬¦åˆæ¡ä»¶æ—¶æ‰è§£é”ï¼Œè€Œæ˜¯è§£é”ä¹‹åï¼Œä¿®æ”¹ Condition çš„å€¼ã€‚ å¦‚ä¸‹ä»£ç ï¼š1234567891011121314151617181920212223242526- (void)conditionLockTest &#123; NSMutableArray *products = [NSMutableArray array]; NSInteger HAS_DATA = 1; NSInteger NO_DATA = 0; _conditionLock = [[NSConditionLock alloc] initWithCondition:NO_DATA]; // åˆå§‹åŒ–ä¸€ä¸ªæ¡ä»¶ dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; while (1) &#123; [_conditionLock lockWhenCondition:NO_DATA]; // å½“æ¡ä»¶ä¸ºNO_DATAæ—¶åŠ é” [products addObject:[[NSObject alloc] init]]; NSLog(@&quot;ç”Ÿäº§&quot;); [_conditionLock unlockWithCondition:HAS_DATA]; // è§£é”å¹¶å°†æ¡ä»¶ç½®ä¸ºHAS_DATA sleep(5); &#125; &#125;); dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; while (1) &#123; NSLog(@&quot;ç­‰å¾…&quot;); [_conditionLock lockWhenCondition:HAS_DATA]; // å½“æ¡ä»¶ä¸ºHAS_DATAæ—¶åŠ é” [products removeObjectAtIndex:0]; NSLog(@&quot;å”®å–&quot;); [_conditionLock unlockWithCondition:NO_DATA]; // è§£é”å¹¶å°†æ¡ä»¶ç½®ä¸ºNO_DATA &#125; &#125;);&#125; è¾“å‡ºç»“æœï¼š123452018-07-09 16:55:54.080428+0800 YSThreadSafetyTest[4077:1872496] ç­‰å¾…2018-07-09 16:55:54.080425+0800 YSThreadSafetyTest[4077:1872434] ç”Ÿäº§2018-07-09 16:55:54.080664+0800 YSThreadSafetyTest[4077:1872496] å”®å–2018-07-09 16:55:54.080751+0800 YSThreadSafetyTest[4077:1872496] ç­‰å¾…... NSConditionä¸€ç§æœ€åŸºæœ¬çš„æ¡ä»¶é”ã€‚æ‰‹åŠ¨æ§åˆ¶çº¿ç¨‹waitå’Œsignalã€‚ NSCondition æºç ï¼š12345678910111213@interface NSCondition : NSObject &lt;NSLocking&gt; &#123;@private void *_priv;&#125;- (void)wait;- (BOOL)waitUntilDate:(NSDate *)limit;- (void)signal;- (void)broadcast;@property (nullable, copy) NSString *name NS_AVAILABLE(10_5, 2_0);@end NSCondition çš„å¯¹è±¡å®é™…ä¸Šä½œä¸ºä¸€ä¸ªé”å’Œä¸€ä¸ªçº¿ç¨‹æ£€æŸ¥å™¨ï¼Œé”ä¸Šä¹‹åå…¶å®ƒçº¿ç¨‹ä¹Ÿèƒ½ä¸Šé”ï¼Œè€Œä¹‹åå¯ä»¥æ ¹æ®æ¡ä»¶å†³å®šæ˜¯å¦ç»§ç»­è¿è¡Œçº¿ç¨‹ï¼Œå³çº¿ç¨‹æ˜¯å¦è¦è¿›å…¥ waiting çŠ¶æ€ï¼Œç»æµ‹è¯•ï¼ŒNSCondition å¹¶ä¸ä¼šåƒä¸Šæ–‡çš„é‚£äº›é”ä¸€æ ·ï¼Œå…ˆè½®è¯¢ï¼Œè€Œæ˜¯ç›´æ¥è¿›å…¥ waiting çŠ¶æ€ï¼Œå½“å…¶å®ƒçº¿ç¨‹ä¸­çš„è¯¥é”æ‰§è¡Œ signal æˆ–è€… broadcast æ–¹æ³•æ—¶ï¼Œçº¿ç¨‹è¢«å”¤é†’ï¼Œç»§ç»­è¿è¡Œä¹‹åçš„æ–¹æ³•ã€‚ ç¤ºä¾‹ä»£ç ï¼š1234567891011121314151617181920212223242526- (void)conditionTest &#123; NSCondition *condition = [[NSCondition alloc] init]; NSMutableArray *products = [NSMutableArray array]; dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; while (1) &#123; [condition lock]; if ([products count] == 0) &#123; NSLog(@&quot;ç­‰å¾…æ·»åŠ &quot;); [condition wait]; // waitUntilDate: æ–¹æ³•æœ‰ä¸ªç­‰å¾…æ—¶é—´é™åˆ¶ï¼ŒæŒ‡å®šçš„æ—¶é—´åˆ°äº†ï¼Œåˆ™æ”¾å› NOï¼Œç»§ç»­è¿è¡Œæ¥ä¸‹æ¥çš„ä»»åŠ¡ &#125; [products removeObjectAtIndex:0]; NSLog(@&quot;åˆ é™¤ç¬¬ä¸€ä¸ª&quot;); [condition unlock]; &#125; &#125;); dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; while (1) &#123; [condition lock]; [products addObject:[[NSObject alloc] init]]; NSLog(@&quot;æ•°ç»„ æ€»é‡:%zi&quot;,products.count); [condition signal]; [condition unlock]; sleep(1); &#125; &#125;);&#125; è¾“å‡ºç»“æœï¼š12342018-07-09 17:08:52.504797+0800 YSThreadSafetyTest[4144:1951113] ç­‰å¾…æ·»åŠ 2018-07-09 17:08:52.504920+0800 YSThreadSafetyTest[4144:1951112] æ•°ç»„ æ€»é‡:12018-07-09 17:08:52.505196+0800 YSThreadSafetyTest[4144:1951113] åˆ é™¤ç¬¬ä¸€ä¸ª... waitUntilDate: æ–¹æ³•æœ‰ä¸ªç­‰å¾…æ—¶é—´é™åˆ¶ï¼ŒæŒ‡å®šçš„æ—¶é—´åˆ°äº†ï¼Œåˆ™æ”¾å› NOï¼Œç»§ç»­è¿è¡Œæ¥ä¸‹æ¥çš„ä»»åŠ¡ å…¶ä¸­ signal å’Œ broadcast æ–¹æ³•çš„åŒºåˆ«åœ¨äºï¼Œsignal åªæ˜¯ä¸€ä¸ªä¿¡å·é‡ï¼Œåªèƒ½å”¤é†’ä¸€ä¸ªç­‰å¾…çš„çº¿ç¨‹ï¼Œæƒ³å”¤é†’å¤šä¸ªå°±å¾—å¤šæ¬¡è°ƒç”¨ï¼Œè€Œ broadcast å¯ä»¥å”¤é†’æ‰€æœ‰åœ¨ç­‰å¾…çš„çº¿ç¨‹ã€‚å¦‚æœæ²¡æœ‰ç­‰å¾…çš„çº¿ç¨‹ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ²¡æœ‰ä½œç”¨ã€‚ pthread_mutex äº’æ–¥é”ï¼ˆCè¯­è¨€ï¼‰cè¯­è¨€å®šä¹‰ä¸‹å¤šçº¿ç¨‹åŠ é”æ–¹å¼ã€‚ pthread_mutex_init(pthread_mutex_t mutex,const pthread_mutexattr_t attr); åˆå§‹åŒ–é”å˜é‡mutexã€‚atträ¸ºé”å±æ€§ï¼ŒNULLå€¼ä¸ºé»˜è®¤å±æ€§ã€‚ pthread_mutex_lock(pthread_mutex_t mutex); åŠ é” pthread_mutex_tylock(*pthread_mutex_t *mutex); åŠ é”ï¼Œä½†æ˜¯ä¸2ä¸ä¸€æ ·çš„æ˜¯å½“é”å·²ç»åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œè¿”å›ä¸ºEBUSYï¼Œè€Œä¸æ˜¯æŒ‚èµ·ç­‰å¾…ã€‚ pthread_mutex_unlock(pthread_mutex_t *mutex); é‡Šæ”¾é” pthread_mutex_destroy(pthread_mutex_t* mutex); ä½¿ç”¨å®Œåé‡Šæ”¾ ç¤ºä¾‹ä»£ç :123456789101112131415161718#import &lt;pthread.h&gt;- (void)pthread_mutex_test &#123; __block pthread_mutex_t theLock; pthread_mutex_init(&amp;theLock, NULL); dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; pthread_mutex_lock(&amp;theLock); NSLog(@&quot;çº¿ç¨‹1åŒæ­¥å¼€å§‹&quot;); sleep(3); NSLog(@&quot;çº¿ç¨‹1åŒæ­¥ç»“æŸ&quot;); pthread_mutex_unlock(&amp;theLock); &#125;); dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; sleep(1); pthread_mutex_lock(&amp;theLock); NSLog(@&quot;çº¿ç¨‹2åŒæ­¥æ“ä½œ&quot;); pthread_mutex_unlock(&amp;theLock); &#125;);&#125; è¾“å‡ºç»“æœï¼š1232018-07-09 17:18:39.172501+0800 YSThreadSafetyTest[4201:2003796] çº¿ç¨‹1åŒæ­¥å¼€å§‹2018-07-09 17:18:42.177652+0800 YSThreadSafetyTest[4201:2003796] çº¿ç¨‹1åŒæ­¥ç»“æŸ2018-07-09 17:18:42.177872+0800 YSThreadSafetyTest[4201:2004380] çº¿ç¨‹2åŒæ­¥æ“ä½œ pthread_mutex è¿˜å¯ä»¥åˆ›å»ºæ¡ä»¶é”ï¼Œæä¾›äº†å’Œ NSCondition ä¸€æ ·çš„æ¡ä»¶æ§åˆ¶ï¼Œåˆå§‹åŒ–äº’æ–¥é”åŒæ—¶ä½¿ç”¨ pthread_cond_init æ¥åˆå§‹åŒ–æ¡ä»¶æ•°æ®ç»“æ„ 123456789101112// åˆå§‹åŒ–int pthread_cond_init (pthread_cond_t *cond, pthread_condattr_t *attr);// ç­‰å¾…ï¼ˆä¼šé˜»å¡ï¼‰int pthread_cond_wait (pthread_cond_t *cond, pthread_mutex_t *mut);// å®šæ—¶ç­‰å¾…int pthread_cond_timedwait (pthread_cond_t *cond, pthread_mutex_t *mut, const struct timespec *abstime);// å”¤é†’int pthread_cond_signal (pthread_cond_t *cond);// å¹¿æ’­å”¤é†’int pthread_cond_broadcast (pthread_cond_t *cond);// é”€æ¯int pthread_cond_destroy (pthread_cond_t *cond); pthread_mutex è¿˜æä¾›äº†å¾ˆå¤šå‡½æ•°ï¼Œæœ‰ä¸€å¥—å®Œæ•´çš„APIï¼ŒåŒ…å« Pthreadsçº¿ç¨‹çš„åˆ›å»ºæ§åˆ¶ç­‰ç­‰ï¼Œéå¸¸åº•å±‚ï¼Œå¯ä»¥æ‰‹åŠ¨å¤„ç†çº¿ç¨‹çš„å„ä¸ªçŠ¶æ€çš„è½¬æ¢å³ç®¡ç†ç”Ÿå‘½å‘¨æœŸï¼Œç”šè‡³å¯ä»¥å®ç°ä¸€å¥—è‡ªå·±çš„å¤šçº¿ç¨‹ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥ç»§ç»­æ·±å…¥äº†è§£ã€‚ dispatch_semaphore ä¿¡å·é‡å®ç°åŠ é”ï¼ˆGCDï¼‰dispatch_semaphore_t GCD ä¸­ä¿¡å·é‡ï¼Œä¹Ÿå¯ä»¥è§£å†³èµ„æºæŠ¢å é—®é¢˜,æ”¯æŒä¿¡å·é€šçŸ¥å’Œä¿¡å·ç­‰å¾…ã€‚æ¯å½“å‘é€ä¸€ä¸ªä¿¡å·é€šçŸ¥ï¼Œåˆ™ä¿¡å·é‡ +1ï¼›æ¯å½“å‘é€ä¸€ä¸ªç­‰å¾…ä¿¡å·æ—¶ä¿¡å·é‡ -1,ï¼›å¦‚æœä¿¡å·é‡ä¸º 0 åˆ™ä¿¡å·ä¼šå¤„äºç­‰å¾…çŠ¶æ€ï¼Œç›´åˆ°ä¿¡å·é‡å¤§äº 0(æˆ–è€…è¶…æ—¶) å¼€å§‹æ‰§è¡Œä¹‹åä»£ç ã€‚ æºç å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930/*! * @param value * ä¿¡å·é‡çš„èµ·å§‹å€¼ï¼Œå½“ä¼ å…¥çš„å€¼å°äºé›¶æ—¶è¿”å›NULL * @result * æˆåŠŸè¿”å›ä¸€ä¸ªæ–°çš„ä¿¡å·é‡ï¼Œå¤±è´¥è¿”å›NULL */dispatch_semaphore_t dispatch_semaphore_create(long value)/*! * @discussion * ä¿¡å·é‡å‡1ï¼Œå¦‚æœç»“æœå°äº0ï¼Œé‚£ä¹ˆç­‰å¾…é˜Ÿåˆ—ä¸­ä¿¡å·å¢é‡åˆ°æ¥ç›´åˆ°timeout * @param dsema * ä¿¡å·é‡ * @param timeout * ç­‰å¾…æ—¶é—´ * ç±»å‹ä¸ºdispatch_time_tï¼Œè¿™é‡Œæœ‰ä¸¤ä¸ªå®DISPATCH_TIME_NOWã€DISPATCH_TIME_FOREVER * @result * è‹¥ç­‰å¾…æˆåŠŸè¿”å›0ï¼Œtimeoutè¿”å›é0 */long dispatch_semaphore_wait(dispatch_semaphore_t dsema, dispatch_time_t timeout);/*! * @discussion * ä¿¡å·é‡åŠ 1ï¼Œå¦‚æœä¹‹å‰çš„ä¿¡å·é‡å°äº0ï¼Œå°†å”¤é†’ä¸€æ¡ç­‰å¾…çº¿ç¨‹ * @param dsema * ä¿¡å·é‡ * @result * å”¤é†’ä¸€æ¡çº¿ç¨‹è¿”å›é0ï¼Œå¦åˆ™è¿”å›0 */long dispatch_semaphore_signal(dispatch_semaphore_t dsema) ç¤ºä¾‹ä»£ç :12345678910111213141516171819202122- (void)semaphoreTest &#123; // åˆ›å»ºä¿¡å·é‡ dispatch_semaphore_t semaphore = dispatch_semaphore_create(1); dispatch_time_t overTime = dispatch_time(DISPATCH_TIME_NOW, 3 * NSEC_PER_SEC); //çº¿ç¨‹1 dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; dispatch_semaphore_wait(semaphore, overTime); // DISPATCH_TIME_FOREVER NSLog(@&quot;ä»»åŠ¡1å¼€å§‹&quot;); sleep(3); NSLog(@&quot;ä»»åŠ¡1ç»“æŸ&quot;); dispatch_semaphore_signal(semaphore); &#125;); //çº¿ç¨‹2 dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; sleep(1); dispatch_semaphore_wait(semaphore, overTime); NSLog(@&quot;ä»»åŠ¡2&quot;); dispatch_semaphore_signal(semaphore); &#125;);&#125; è¾“å‡ºç»“æœï¼š1232018-07-09 17:30:16.753036+0800 YSThreadSafetyTest[4309:2092729] ä»»åŠ¡1å¼€å§‹2018-07-09 17:30:19.755907+0800 YSThreadSafetyTest[4309:2092729] ä»»åŠ¡1ç»“æŸ2018-07-09 17:30:19.755907+0800 YSThreadSafetyTest[4309:2092656] ä»»åŠ¡2 å°†è¶…æ—¶ä»£ç è®¾ç½®ä¸º1ï¼Œåˆ™è¾“å‡ºï¼š1232018-07-09 17:28:41.082817+0800 YSThreadSafetyTest[4286:2081073] ä»»åŠ¡1å¼€å§‹2018-07-09 17:28:42.085262+0800 YSThreadSafetyTest[4286:2081075] ä»»åŠ¡22018-07-09 17:28:44.084425+0800 YSThreadSafetyTest[4286:2081073] ä»»åŠ¡1ç»“æŸ OSSpinLock è‡ªæ—‹é”ç¤ºä¾‹ä»£ç ï¼š12345678910111213141516171819#import &lt;libkern/OSAtomic.h&gt;- (void)osspinlockTest &#123; __block OSSpinLock theLock = OS_SPINLOCK_INIT; dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; OSSpinLockLock(&amp;theLock); NSLog(@&quot;çº¿ç¨‹1åŒæ­¥æ“ä½œå¼€å§‹&quot;); sleep(3); NSLog(@&quot;çº¿ç¨‹1åŒæ­¥æ“ä½œç»“æŸ&quot;); OSSpinLockUnlock(&amp;theLock); &#125;); dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; OSSpinLockLock(&amp;theLock); sleep(1); NSLog(@&quot;çº¿ç¨‹2åŒæ­¥æ“ä½œ&quot;); OSSpinLockUnlock(&amp;theLock); &#125;);&#125; è¾“å‡ºç»“æœï¼š1232018-07-09 17:33:04.759875+0800 YSThreadSafetyTest[4349:2110976] çº¿ç¨‹1åŒæ­¥æ“ä½œå¼€å§‹2018-07-09 17:33:07.762309+0800 YSThreadSafetyTest[4349:2110976] çº¿ç¨‹1åŒæ­¥æ“ä½œç»“æŸ2018-07-09 17:33:08.817638+0800 YSThreadSafetyTest[4349:2110977] çº¿ç¨‹2åŒæ­¥æ“ä½œ OSSpinLock è‡ªæ—‹é”ï¼Œæ€§èƒ½æœ€é«˜çš„é”ã€‚å®ƒçš„ç¼ºç‚¹æ˜¯å½“ç­‰å¾…æ—¶ä¼šæ¶ˆè€—å¤§é‡ CPU èµ„æºï¼Œä¸å¤ªé€‚ç”¨äºè¾ƒé•¿æ—¶é—´çš„ä»»åŠ¡ã€‚ YYå¤§ç¥åœ¨åšå®¢ ä¸å†å®‰å…¨çš„ OSSpinLock ä¸­è¯´æ˜äº†OSSpinLock å·²ç»ä¸å†å®‰å…¨ï¼Œæš‚ä¸å»ºè®®ä½¿ç”¨ã€‚ iOS 10 ä¹‹åï¼Œè‹¹æœç»™å‡ºäº†è§£å†³æ–¹æ¡ˆï¼Œå°±æ˜¯ç”¨ os_unfair_lock ä»£æ›¿ OSSpinLockã€‚1&apos;OSSpinLockLock&apos; is deprecated: first deprecated in iOS 10.0 - Use os_unfair_lock_lock() from &lt;os/lock.h&gt; instead ç¤ºä¾‹ä»£ç 1234567891011121314151617#import &lt;os/lock.h&gt;__block os_unfair_lock lock = OS_UNFAIR_LOCK_INIT;dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; os_unfair_lock_lock(&amp;lock); NSLog(@&quot;çº¿ç¨‹1åŒæ­¥æ“ä½œå¼€å§‹&quot;); sleep(8); NSLog(@&quot;çº¿ç¨‹1åŒæ­¥æ“ä½œç»“æŸ&quot;); os_unfair_lock_unlock(&amp;lock);&#125;);dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; sleep(1); os_unfair_lock_lock(&amp;lock); NSLog(@&quot;çº¿ç¨‹2åŒæ­¥æ“ä½œ&quot;); os_unfair_lock_unlock(&amp;lock);&#125;); è¾“å‡ºç»“æœï¼š1232018-07-09 17:33:04.759875+0800 YSThreadSafetyTest[4349:2110976] çº¿ç¨‹1åŒæ­¥æ“ä½œå¼€å§‹2018-07-09 17:33:07.762309+0800 YSThreadSafetyTest[4349:2110976] çº¿ç¨‹1åŒæ­¥æ“ä½œç»“æŸ2018-07-09 17:33:08.817638+0800 YSThreadSafetyTest[4349:2110977] çº¿ç¨‹2åŒæ­¥æ“ä½œ æ€»ç»“ @synchronizedï¼šé€‚ç”¨çº¿ç¨‹ä¸å¤šï¼Œä»»åŠ¡é‡ä¸å¤§çš„å¤šçº¿ç¨‹åŠ é” NSLockï¼šæ€§èƒ½ä¸ç®—å·®ï¼Œä½†æ„Ÿè§‰ç”¨çš„äººä¸å¤šã€‚ dispatch_semaphore_tï¼šä½¿ç”¨ä¿¡å·æ¥åšåŠ é”ï¼Œæ€§èƒ½å¾ˆé«˜å’Œ OSSpinLock å·®ä¸å¤šã€‚æ¨è NSConditionLockï¼šå¤šçº¿ç¨‹å¤„ç†ä¸åŒä»»åŠ¡çš„é€šä¿¡å»ºè®®æ—¶ç”¨ï¼Œ åªåŠ é”çš„è¯æ€§èƒ½å¾ˆä½ã€‚ NSRecursiveLockï¼šæ€§èƒ½ä¸é”™ï¼Œä½¿ç”¨åœºæ™¯é™åˆ¶äºé€’å½’ã€‚ POSIX(pthread_mutex)ï¼šCè¯­è¨€çš„åº•å±‚apiï¼Œå¤æ‚çš„å¤šçº¿ç¨‹å¤„ç†å»ºè®®ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å°è£…è‡ªå·±çš„å¤šçº¿ç¨‹ã€‚ OSSpinLockï¼šæ€§èƒ½éå¸¸é«˜ï¼Œå¯æƒœä¸å®‰å…¨äº†ï¼Œä½¿ç”¨ os_unfair_lock æ¥ä»£æ›¿ã€‚","categories":[],"tags":[{"name":"iOS","slug":"iOS","permalink":"https://kysonyangs.github.io/tags/iOS/"}]},{"title":"iOSè®¾å¤‡ä¿¡æ¯","slug":"iOSè®¾å¤‡ä¿¡æ¯","date":"2018-06-13T07:24:15.000Z","updated":"2020-05-17T08:14:44.599Z","comments":true,"path":"default/iOSè®¾å¤‡ä¿¡æ¯/","link":"","permalink":"https://kysonyangs.github.io/default/iOSè®¾å¤‡ä¿¡æ¯/","excerpt":"ä¸ºäº†ç»Ÿè®¡ç”¨æˆ·ä¿¡æ¯ã€ä¸‹å‘å¹¿å‘Šï¼ŒæœåŠ¡å™¨ç«¯å¾€å¾€éœ€è¦æ‰‹æœºç”¨æˆ·è®¾å¤‡åŠappçš„å„ç§ä¿¡æ¯ï¼Œæ•´ç†ä¸€ä¸‹å„ç§ä¿¡æ¯çš„è·å–æ–¹å¼ï¼š","text":"ä¸ºäº†ç»Ÿè®¡ç”¨æˆ·ä¿¡æ¯ã€ä¸‹å‘å¹¿å‘Šï¼ŒæœåŠ¡å™¨ç«¯å¾€å¾€éœ€è¦æ‰‹æœºç”¨æˆ·è®¾å¤‡åŠappçš„å„ç§ä¿¡æ¯ï¼Œæ•´ç†ä¸€ä¸‹å„ç§ä¿¡æ¯çš„è·å–æ–¹å¼ï¼š è®¾å¤‡å‹å·123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990// è·å–è®¾å¤‡å‹å·ç„¶åæ‰‹åŠ¨è½¬åŒ–ä¸ºå¯¹åº”åç§°- (NSString *)getDeviceName&#123; // éœ€è¦#import &quot;sys/utsname.h&quot; #warning é¢˜ä¸»å‘•å¿ƒæ²¥è¡€æ€»ç»“ï¼ï¼æœ€å…¨é¢ï¼äº²æµ‹ï¼å…¨ç½‘ç‹¬æ­¤ä¸€ä»½ï¼ï¼ struct utsname systemInfo; uname(&amp;systemInfo); NSString *deviceString = [NSString stringWithCString:systemInfo.machine encoding:NSUTF8StringEncoding]; if ([deviceString isEqualToString:@&quot;iPhone3,1&quot;]) return @&quot;iPhone 4&quot;; if ([deviceString isEqualToString:@&quot;iPhone3,2&quot;]) return @&quot;iPhone 4&quot;; if ([deviceString isEqualToString:@&quot;iPhone3,3&quot;]) return @&quot;iPhone 4&quot;; if ([deviceString isEqualToString:@&quot;iPhone4,1&quot;]) return @&quot;iPhone 4S&quot;; if ([deviceString isEqualToString:@&quot;iPhone5,1&quot;]) return @&quot;iPhone 5&quot;; if ([deviceString isEqualToString:@&quot;iPhone5,2&quot;]) return @&quot;iPhone 5 (GSM+CDMA)&quot;; if ([deviceString isEqualToString:@&quot;iPhone5,3&quot;]) return @&quot;iPhone 5c (GSM)&quot;; if ([deviceString isEqualToString:@&quot;iPhone5,4&quot;]) return @&quot;iPhone 5c (GSM+CDMA)&quot;; if ([deviceString isEqualToString:@&quot;iPhone6,1&quot;]) return @&quot;iPhone 5s (GSM)&quot;; if ([deviceString isEqualToString:@&quot;iPhone6,2&quot;]) return @&quot;iPhone 5s (GSM+CDMA)&quot;; if ([deviceString isEqualToString:@&quot;iPhone7,1&quot;]) return @&quot;iPhone 6 Plus&quot;; if ([deviceString isEqualToString:@&quot;iPhone7,2&quot;]) return @&quot;iPhone 6&quot;; if ([deviceString isEqualToString:@&quot;iPhone8,1&quot;]) return @&quot;iPhone 6s&quot;; if ([deviceString isEqualToString:@&quot;iPhone8,2&quot;]) return @&quot;iPhone 6s Plus&quot;; if ([deviceString isEqualToString:@&quot;iPhone8,4&quot;]) return @&quot;iPhone SE&quot;; // æ—¥è¡Œä¸¤æ¬¾æ‰‹æœºå‹å·å‡ä¸ºæ—¥æœ¬ç‹¬å ï¼Œå¯èƒ½ä½¿ç”¨ç´¢å°¼FeliCaæ”¯ä»˜æ–¹æ¡ˆè€Œä¸æ˜¯è‹¹æœæ”¯ä»˜ if ([deviceString isEqualToString:@&quot;iPhone9,1&quot;]) return @&quot;å›½è¡Œã€æ—¥ç‰ˆã€æ¸¯è¡ŒiPhone 7&quot;; if ([deviceString isEqualToString:@&quot;iPhone9,2&quot;]) return @&quot;æ¸¯è¡Œã€å›½è¡ŒiPhone 7 Plus&quot;; if ([deviceString isEqualToString:@&quot;iPhone9,3&quot;]) return @&quot;ç¾ç‰ˆã€å°ç‰ˆiPhone 7&quot;; if ([deviceString isEqualToString:@&quot;iPhone9,4&quot;]) return @&quot;ç¾ç‰ˆã€å°ç‰ˆiPhone 7 Plus&quot;; if ([deviceString isEqualToString:@&quot;iPhone10,1&quot;]) return @&quot;å›½è¡Œ(A1863)ã€æ—¥è¡Œ(A1906)iPhone 8&quot;; if ([deviceString isEqualToString:@&quot;iPhone10,4&quot;]) return @&quot;ç¾ç‰ˆ(Global/A1905)iPhone 8&quot;; if ([deviceString isEqualToString:@&quot;iPhone10,2&quot;]) return @&quot;å›½è¡Œ(A1864)ã€æ—¥è¡Œ(A1898)iPhone 8 Plus&quot;; if ([deviceString isEqualToString:@&quot;iPhone10,5&quot;]) return @&quot;ç¾ç‰ˆ(Global/A1897)iPhone 8 Plus&quot;; if ([deviceString isEqualToString:@&quot;iPhone10,3&quot;]) return @&quot;å›½è¡Œ(A1865)ã€æ—¥è¡Œ(A1902)iPhone X&quot;; if ([deviceString isEqualToString:@&quot;iPhone10,6&quot;]) return @&quot;ç¾ç‰ˆ(Global/A1901)iPhone X&quot;; if ([deviceString isEqualToString:@&quot;iPod1,1&quot;]) return @&quot;iPod Touch 1G&quot;; if ([deviceString isEqualToString:@&quot;iPod2,1&quot;]) return @&quot;iPod Touch 2G&quot;; if ([deviceString isEqualToString:@&quot;iPod3,1&quot;]) return @&quot;iPod Touch 3G&quot;; if ([deviceString isEqualToString:@&quot;iPod4,1&quot;]) return @&quot;iPod Touch 4G&quot;; if ([deviceString isEqualToString:@&quot;iPod5,1&quot;]) return @&quot;iPod Touch (5 Gen)&quot;; if ([deviceString isEqualToString:@&quot;iPad1,1&quot;]) return @&quot;iPad&quot;; if ([deviceString isEqualToString:@&quot;iPad1,2&quot;]) return @&quot;iPad 3G&quot;; if ([deviceString isEqualToString:@&quot;iPad2,1&quot;]) return @&quot;iPad 2 (WiFi)&quot;; if ([deviceString isEqualToString:@&quot;iPad2,2&quot;]) return @&quot;iPad 2&quot;; if ([deviceString isEqualToString:@&quot;iPad2,3&quot;]) return @&quot;iPad 2 (CDMA)&quot;; if ([deviceString isEqualToString:@&quot;iPad2,4&quot;]) return @&quot;iPad 2&quot;; if ([deviceString isEqualToString:@&quot;iPad2,5&quot;]) return @&quot;iPad Mini (WiFi)&quot;; if ([deviceString isEqualToString:@&quot;iPad2,6&quot;]) return @&quot;iPad Mini&quot;; if ([deviceString isEqualToString:@&quot;iPad2,7&quot;]) return @&quot;iPad Mini (GSM+CDMA)&quot;; if ([deviceString isEqualToString:@&quot;iPad3,1&quot;]) return @&quot;iPad 3 (WiFi)&quot;; if ([deviceString isEqualToString:@&quot;iPad3,2&quot;]) return @&quot;iPad 3 (GSM+CDMA)&quot;; if ([deviceString isEqualToString:@&quot;iPad3,3&quot;]) return @&quot;iPad 3&quot;; if ([deviceString isEqualToString:@&quot;iPad3,4&quot;]) return @&quot;iPad 4 (WiFi)&quot;; if ([deviceString isEqualToString:@&quot;iPad3,5&quot;]) return @&quot;iPad 4&quot;; if ([deviceString isEqualToString:@&quot;iPad3,6&quot;]) return @&quot;iPad 4 (GSM+CDMA)&quot;; if ([deviceString isEqualToString:@&quot;iPad4,1&quot;]) return @&quot;iPad Air (WiFi)&quot;; if ([deviceString isEqualToString:@&quot;iPad4,2&quot;]) return @&quot;iPad Air (Cellular)&quot;; if ([deviceString isEqualToString:@&quot;iPad4,4&quot;]) return @&quot;iPad Mini 2 (WiFi)&quot;; if ([deviceString isEqualToString:@&quot;iPad4,5&quot;]) return @&quot;iPad Mini 2 (Cellular)&quot;; if ([deviceString isEqualToString:@&quot;iPad4,6&quot;]) return @&quot;iPad Mini 2&quot;; if ([deviceString isEqualToString:@&quot;iPad4,7&quot;]) return @&quot;iPad Mini 3&quot;; if ([deviceString isEqualToString:@&quot;iPad4,8&quot;]) return @&quot;iPad Mini 3&quot;; if ([deviceString isEqualToString:@&quot;iPad4,9&quot;]) return @&quot;iPad Mini 3&quot;; if ([deviceString isEqualToString:@&quot;iPad5,1&quot;]) return @&quot;iPad Mini 4 (WiFi)&quot;; if ([deviceString isEqualToString:@&quot;iPad5,2&quot;]) return @&quot;iPad Mini 4 (LTE)&quot;; if ([deviceString isEqualToString:@&quot;iPad5,3&quot;]) return @&quot;iPad Air 2&quot;; if ([deviceString isEqualToString:@&quot;iPad5,4&quot;]) return @&quot;iPad Air 2&quot;; if ([deviceString isEqualToString:@&quot;iPad6,3&quot;]) return @&quot;iPad Pro 9.7&quot;; if ([deviceString isEqualToString:@&quot;iPad6,4&quot;]) return @&quot;iPad Pro 9.7&quot;; if ([deviceString isEqualToString:@&quot;iPad6,7&quot;]) return @&quot;iPad Pro 12.9&quot;; if ([deviceString isEqualToString:@&quot;iPad6,8&quot;]) return @&quot;iPad Pro 12.9&quot;; if ([machineString isEqualToString:@&quot;iPad6,11&quot;]) return @&quot;iPad 5 (WiFi)&quot;; if ([machineString isEqualToString:@&quot;iPad6,12&quot;]) return @&quot;iPad 5 (Cellular)&quot;; if ([machineString isEqualToString:@&quot;iPad7,1&quot;]) return @&quot;iPad Pro 12.9 inch 2nd gen (WiFi)&quot;; if ([machineString isEqualToString:@&quot;iPad7,2&quot;]) return @&quot;iPad Pro 12.9 inch 2nd gen (Cellular)&quot;; if ([machineString isEqualToString:@&quot;iPad7,3&quot;]) return @&quot;iPad Pro 10.5 inch (WiFi)&quot;; if ([machineString isEqualToString:@&quot;iPad7,4&quot;]) return @&quot;iPad Pro 10.5 inch (Cellular)&quot;; if ([deviceString isEqualToString:@&quot;AppleTV2,1&quot;]) return @&quot;Apple TV 2&quot;; if ([deviceString isEqualToString:@&quot;AppleTV3,1&quot;]) return @&quot;Apple TV 3&quot;; if ([deviceString isEqualToString:@&quot;AppleTV3,2&quot;]) return @&quot;Apple TV 3&quot;; if ([deviceString isEqualToString:@&quot;AppleTV5,3&quot;]) return @&quot;Apple TV 4&quot;; if ([deviceString isEqualToString:@&quot;i386&quot;]) return @&quot;Simulator&quot;; if ([deviceString isEqualToString:@&quot;x86_64&quot;]) return @&quot;Simulator&quot;; return deviceString;&#125; iPhoneåç§°1[UIDevice currentDevice].name; appç‰ˆæœ¬å·1[[[NSBundle mainBundle] infoDictionary] objectForKey:@&quot;CFBundleShortVersionString&quot;]; ç”µæ± ç”µé‡1[[UIDevice currentDevice] batteryLevel]; localizedModel1[UIDevice currentDevice].localizedModel; å½“å‰ç³»ç»Ÿåç§°1[UIDevice currentDevice].systemName; å½“å‰ç³»ç»Ÿç‰ˆæœ¬å·1[UIDevice currentDevice].systemVersion; device_model123struct utsname systemInfo;uname(&amp;systemInfo);NSString *device_model = [NSString stringWithCString:systemInfo.machine encoding:NSUTF8StringEncoding]; mac åœ°å€12345678910111213141516171819202122232425262728293031323334353637383940414243- (NSString *)getMacAddress &#123; int mib[6]; size_t len; char *buf; unsigned char *ptr; struct if_msghdr *ifm; struct sockaddr_dl *sdl; mib[0] = CTL_NET; mib[1] = AF_ROUTE; mib[2] = 0; mib[3] = AF_LINK; mib[4] = NET_RT_IFLIST; if ((mib[5] = if_nametoindex(&quot;en0&quot;)) == 0) &#123; printf(&quot;Error: if_nametoindex error/n&quot;); return NULL; &#125; if (sysctl(mib, 6, NULL, &amp;len, NULL, 0) &lt; 0) &#123; printf(&quot;Error: sysctl, take 1/n&quot;); return NULL; &#125; if ((buf = malloc(len)) == NULL) &#123; printf(&quot;Could not allocate memory. error!/n&quot;); return NULL; &#125; if (sysctl(mib, 6, buf, &amp;len, NULL, 0) &lt; 0) &#123; printf(&quot;Error: sysctl, take 2&quot;); return NULL; &#125; ifm = (struct if_msghdr *)buf; sdl = (struct sockaddr_dl *)(ifm + 1); ptr = (unsigned char *)LLADDR(sdl); NSString *outstring = [NSString stringWithFormat:@&quot;%02x%02x%02x%02x%02x%02x&quot;, *ptr, *(ptr+1), *(ptr+2), *(ptr+3), *(ptr+4), *(ptr+5)]; free(buf); return [outstring uppercaseString];&#125; IP åœ°å€123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354- (NSString *)getDeviceIPAddresses &#123; int sockfd = socket(AF_INET, SOCK_DGRAM, 0); NSMutableArray *ips = [NSMutableArray array]; int BUFFERSIZE = 4096; struct ifconf ifc; char buffer[BUFFERSIZE], *ptr, lastname[IFNAMSIZ], *cptr; struct ifreq *ifr, ifrcopy; ifc.ifc_len = BUFFERSIZE; ifc.ifc_buf = buffer; if (ioctl(sockfd, SIOCGIFCONF, &amp;ifc) &gt;= 0)&#123; for (ptr = buffer; ptr &lt; buffer + ifc.ifc_len; )&#123; ifr = (struct ifreq *)ptr; int len = sizeof(struct sockaddr); if (ifr-&gt;ifr_addr.sa_len &gt; len) &#123; len = ifr-&gt;ifr_addr.sa_len; &#125; ptr += sizeof(ifr-&gt;ifr_name) + len; if (ifr-&gt;ifr_addr.sa_family != AF_INET) continue; if ((cptr = (char *)strchr(ifr-&gt;ifr_name, &apos;:&apos;)) != NULL) *cptr = 0; if (strncmp(lastname, ifr-&gt;ifr_name, IFNAMSIZ) == 0) continue; memcpy(lastname, ifr-&gt;ifr_name, IFNAMSIZ); ifrcopy = *ifr; ioctl(sockfd, SIOCGIFFLAGS, &amp;ifrcopy); if ((ifrcopy.ifr_flags &amp; IFF_UP) == 0) continue; NSString *ip = [NSString stringWithFormat:@&quot;%s&quot;, inet_ntoa(((struct sockaddr_in *)&amp;ifr-&gt;ifr_addr)-&gt;sin_addr)]; [ips addObject:ip]; &#125; &#125; close(sockfd); NSString *deviceIP = @&quot;&quot;; for (int i=0; i &lt; ips.count; i++) &#123; if (ips.count &gt; 0) &#123; deviceIP = [NSString stringWithFormat:@&quot;%@&quot;,ips.lastObject]; &#125; &#125; return deviceIP;&#125; è®¾å¤‡ä¸Šæ¬¡é‡å¯çš„æ—¶é—´12NSTimeInterval time = [[NSProcessInfo processInfo] systemUptime];NSDate *lastRestartDate = [[NSDate alloc] initWithTimeIntervalSinceNow:(0 - time)]; å¹¿å‘Šä½æ ‡è¯†ç¬¦åœ¨åŒä¸€ä¸ªè®¾å¤‡ä¸Šçš„æ‰€æœ‰Appéƒ½ä¼šå–åˆ°ç›¸åŒçš„å€¼ï¼Œæ˜¯è‹¹æœä¸“é—¨ç»™å„å¹¿å‘Šæä¾›å•†ç”¨æ¥è¿½è¸ªç”¨æˆ·è€Œè®¾çš„ï¼Œç”¨æˆ·å¯ä»¥åœ¨ è®¾ç½® | éšç§ | å¹¿å‘Šè¿½è¸ªé‡Œé‡ç½®æ­¤idçš„å€¼ï¼Œæˆ–é™åˆ¶æ­¤idçš„ä½¿ç”¨ï¼Œæ•…æ­¤idæœ‰å¯èƒ½ä¼šå–ä¸åˆ°å€¼ï¼Œä½†å¥½åœ¨Appleé»˜è®¤æ˜¯å…è®¸è¿½è¸ªçš„ï¼Œè€Œä¸”ä¸€èˆ¬ç”¨æˆ·éƒ½ä¸çŸ¥é“æœ‰è¿™ä¹ˆä¸ªè®¾ç½®ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šç”¨æ¥ç›‘æµ‹æ¨å¹¿æ•ˆæœï¼Œæ˜¯æˆ³æˆ³æœ‰ä½™äº† 1NSString *idfa = [[[ASIdentifierManager sharedManager] advertisingIdentifier] UUIDString]; UUIDé€šç”¨å”¯ä¸€è¯†åˆ«ç ã€‚å®ƒæ˜¯è®©åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œéƒ½èƒ½æœ‰å”¯ä¸€çš„è¾¨è¯†èµ„è®¯ï¼Œè€Œä¸éœ€è¦é€è¿‡ä¸­å¤®æ§åˆ¶ç«¯æ¥åšè¾¨è¯†èµ„è®¯çš„æŒ‡ å®šã€‚è¿™æ ·ï¼Œæ¯ä¸ªäººéƒ½å¯ä»¥å»ºç«‹ä¸ä¸å…¶å®ƒäººå†²çªçš„ UUIDã€‚åœ¨æ­¤æƒ…å†µä¸‹ï¼Œå°±ä¸éœ€è€ƒè™‘æ•°æ®åº“å»ºç«‹æ—¶çš„åç§°é‡å¤é—®é¢˜ã€‚è‹¹æœå…¬å¸å»ºè®®ä½¿ç”¨UUIDä¸ºåº”ç”¨ç”Ÿæˆå”¯ä¸€æ ‡è¯†å­—ç¬¦ä¸²ã€‚12NSString *uuid = [[[UIDevice currentDevice] identifierForVendor] UUIDString];NSLog(@&quot;å”¯ä¸€è¯†åˆ«ç uuid--&gt;%@&quot;, uuid); CPU12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061// CPUæ€»æ•°ç›®- (NSUInteger)getCPUCount &#123; return [NSProcessInfo processInfo].activeProcessorCount;&#125;// å·²ä½¿ç”¨çš„CPUæ¯”ä¾‹- (float)getCPUUsage &#123; float cpu = 0; NSArray *cpus = [self getPerCPUUsage]; if (cpus.count == 0) return -1; for (NSNumber *n in cpus) &#123; cpu += n.floatValue; &#125; return cpu;&#125;// è·å–æ¯ä¸ªcpuçš„ä½¿ç”¨æ¯”ä¾‹- (NSArray *)getPerCPUUsage &#123; processor_info_array_t _cpuInfo, _prevCPUInfo = nil; mach_msg_type_number_t _numCPUInfo, _numPrevCPUInfo = 0; unsigned _numCPUs; NSLock *_cpuUsageLock; int _mib[2U] = &#123; CTL_HW, HW_NCPU &#125;; size_t _sizeOfNumCPUs = sizeof(_numCPUs); int _status = sysctl(_mib, 2U, &amp;_numCPUs, &amp;_sizeOfNumCPUs, NULL, 0U); if (_status) _numCPUs = 1; _cpuUsageLock = [[NSLock alloc] init]; natural_t _numCPUsU = 0U; kern_return_t err = host_processor_info(mach_host_self(), PROCESSOR_CPU_LOAD_INFO, &amp;_numCPUsU, &amp;_cpuInfo, &amp;_numCPUInfo); if (err == KERN_SUCCESS) &#123; [_cpuUsageLock lock]; NSMutableArray *cpus = [NSMutableArray new]; for (unsigned i = 0U; i &lt; _numCPUs; ++i) &#123; Float32 _inUse, _total; if (_prevCPUInfo) &#123; _inUse = ( (_cpuInfo[(CPU_STATE_MAX * i) + CPU_STATE_USER] - _prevCPUInfo[(CPU_STATE_MAX * i) + CPU_STATE_USER]) + (_cpuInfo[(CPU_STATE_MAX * i) + CPU_STATE_SYSTEM] - _prevCPUInfo[(CPU_STATE_MAX * i) + CPU_STATE_SYSTEM]) + (_cpuInfo[(CPU_STATE_MAX * i) + CPU_STATE_NICE] - _prevCPUInfo[(CPU_STATE_MAX * i) + CPU_STATE_NICE]) ); _total = _inUse + (_cpuInfo[(CPU_STATE_MAX * i) + CPU_STATE_IDLE] - _prevCPUInfo[(CPU_STATE_MAX * i) + CPU_STATE_IDLE]); &#125; else &#123; _inUse = _cpuInfo[(CPU_STATE_MAX * i) + CPU_STATE_USER] + _cpuInfo[(CPU_STATE_MAX * i) + CPU_STATE_SYSTEM] + _cpuInfo[(CPU_STATE_MAX * i) + CPU_STATE_NICE]; _total = _inUse + _cpuInfo[(CPU_STATE_MAX * i) + CPU_STATE_IDLE]; &#125; [cpus addObject:@(_inUse / _total)]; &#125; [_cpuUsageLock unlock]; if (_prevCPUInfo) &#123; size_t prevCpuInfoSize = sizeof(integer_t) * _numPrevCPUInfo; vm_deallocate(mach_task_self(), (vm_address_t)_prevCPUInfo, prevCpuInfoSize); &#125; return cpus; &#125; else &#123; return nil; &#125;&#125; Disk ç£ç›˜123456789101112131415161718192021222324252627// è·å–ç£ç›˜æ€»ç©ºé—´- (int64_t)getTotalDiskSpace &#123; NSError *error = nil; NSDictionary *attrs = [[NSFileManager defaultManager] attributesOfFileSystemForPath:NSHomeDirectory() error:&amp;error]; if (error) return -1; int64_t space = [[attrs objectForKey:NSFileSystemSize] longLongValue]; if (space &lt; 0) space = -1; return space;&#125;// è·å–æœªä½¿ç”¨çš„ç£ç›˜ç©ºé—´- (int64_t)getFreeDiskSpace &#123; NSError *error = nil; NSDictionary *attrs = [[NSFileManager defaultManager] attributesOfFileSystemForPath:NSHomeDirectory() error:&amp;error]; if (error) return -1; int64_t space = [[attrs objectForKey:NSFileSystemFreeSize] longLongValue]; if (space &lt; 0) space = -1; return space;&#125;// è·å–å·²ä½¿ç”¨çš„ç£ç›˜ç©ºé—´- (int64_t)getUsedDiskSpace &#123; int64_t totalDisk = [self getTotalDiskSpace]; int64_t freeDisk = [self getFreeDiskSpace]; if (totalDisk &lt; 0 || freeDisk &lt; 0) return -1; int64_t usedDisk = totalDisk - freeDisk; if (usedDisk &lt; 0) usedDisk = -1; return usedDisk;&#125; å†…å­˜123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596// ç³»ç»Ÿæ€»å†…å­˜ç©ºé—´- (int64_t)getTotalMemory &#123; int64_t totalMemory = [[NSProcessInfo processInfo] physicalMemory]; if (totalMemory &lt; -1) totalMemory = -1; return totalMemory;&#125;// æ´»è·ƒçš„å†…å­˜,æ­£åœ¨ä½¿ç”¨æˆ–è€…å¾ˆçŸ­æ—¶é—´å†…è¢«ä½¿ç”¨è¿‡- (int64_t)getActiveMemory &#123; mach_port_t host_port = mach_host_self(); mach_msg_type_number_t host_size = sizeof(vm_statistics_data_t) / sizeof(integer_t); vm_size_t page_size; vm_statistics_data_t vm_stat; kern_return_t kern; kern = host_page_size(host_port, &amp;page_size); if (kern != KERN_SUCCESS) return -1; kern = host_statistics(host_port, HOST_VM_INFO, (host_info_t)&amp;vm_stat, &amp;host_size); if (kern != KERN_SUCCESS) return -1; return vm_stat.active_count * page_size;&#125;// æœ€è¿‘ä½¿ç”¨è¿‡,ä½†æ˜¯ç›®å‰å¤„äºä¸æ´»è·ƒçŠ¶æ€çš„å†…å­˜- (int64_t)getInActiveMemory &#123; mach_port_t host_port = mach_host_self(); mach_msg_type_number_t host_size = sizeof(vm_statistics_data_t) / sizeof(integer_t); vm_size_t page_size; vm_statistics_data_t vm_stat; kern_return_t kern; kern = host_page_size(host_port, &amp;page_size); if (kern != KERN_SUCCESS) return -1; kern = host_statistics(host_port, HOST_VM_INFO, (host_info_t)&amp;vm_stat, &amp;host_size); if (kern != KERN_SUCCESS) return -1; return vm_stat.inactive_count * page_size;&#125;// ç©ºé—²çš„å†…å­˜ç©ºé—´- (int64_t)getFreeMemory &#123; mach_port_t host_port = mach_host_self(); mach_msg_type_number_t host_size = sizeof(vm_statistics_data_t) / sizeof(integer_t); vm_size_t page_size; vm_statistics_data_t vm_stat; kern_return_t kern; kern = host_page_size(host_port, &amp;page_size); if (kern != KERN_SUCCESS) return -1; kern = host_statistics(host_port, HOST_VM_INFO, (host_info_t)&amp;vm_stat, &amp;host_size); if (kern != KERN_SUCCESS) return -1; return vm_stat.free_count * page_size;&#125;// å·²ä½¿ç”¨çš„å†…å­˜ç©ºé—´- (int64_t)getUsedMemory &#123; mach_port_t host_port = mach_host_self(); mach_msg_type_number_t host_size = sizeof(vm_statistics_data_t) / sizeof(integer_t); vm_size_t page_size; vm_statistics_data_t vm_stat; kern_return_t kern; kern = host_page_size(host_port, &amp;page_size); if (kern != KERN_SUCCESS) return -1; kern = host_statistics(host_port, HOST_VM_INFO, (host_info_t)&amp;vm_stat, &amp;host_size); if (kern != KERN_SUCCESS) return -1; return page_size * (vm_stat.active_count + vm_stat.inactive_count + vm_stat.wire_count);&#125;// ç”¨æ¥å­˜æ”¾å†…æ ¸å’Œæ•°æ®ç»“æ„çš„å†…å­˜,frameworkã€ç”¨æˆ·çº§åˆ«çš„åº”ç”¨æ— æ³•åˆ†é…- (int64_t)getWiredMemory &#123; mach_port_t host_port = mach_host_self(); mach_msg_type_number_t host_size = sizeof(vm_statistics_data_t) / sizeof(integer_t); vm_size_t page_size; vm_statistics_data_t vm_stat; kern_return_t kern; kern = host_page_size(host_port, &amp;page_size); if (kern != KERN_SUCCESS) return -1; kern = host_statistics(host_port, HOST_VM_INFO, (host_info_t)&amp;vm_stat, &amp;host_size); if (kern != KERN_SUCCESS) return -1; return vm_stat.wire_count * page_size;&#125;// å¯é‡Šæ”¾çš„å†…å­˜ç©ºé—´ï¼šå†…å­˜åƒç´§è‡ªåŠ¨é‡Šæ”¾ï¼Œé’ˆå¯¹å¤§å¯¹è±¡å­˜æ”¾æ‰€éœ€çš„å¤§å—å†…å­˜ç©ºé—´- (int64_t)getPurgableMemory &#123; mach_port_t host_port = mach_host_self(); mach_msg_type_number_t host_size = sizeof(vm_statistics_data_t) / sizeof(integer_t); vm_size_t page_size; vm_statistics_data_t vm_stat; kern_return_t kern; kern = host_page_size(host_port, &amp;page_size); if (kern != KERN_SUCCESS) return -1; kern = host_statistics(host_port, HOST_VM_INFO, (host_info_t)&amp;vm_stat, &amp;host_size); if (kern != KERN_SUCCESS) return -1; return vm_stat.purgeable_count * page_size;&#125;","categories":[],"tags":[{"name":"iOS","slug":"iOS","permalink":"https://kysonyangs.github.io/tags/iOS/"}]},{"title":"Playgroundä½¿ç”¨","slug":"Playgroundä½¿ç”¨","date":"2018-06-08T07:25:50.000Z","updated":"2020-05-17T08:13:31.513Z","comments":true,"path":"default/Playgroundä½¿ç”¨/","link":"","permalink":"https://kysonyangs.github.io/default/Playgroundä½¿ç”¨/","excerpt":"Sources ç›®å½•é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨ Playground ä¸Šé¢å†™ä»£ç ï¼Œç„¶åç¼–è¯‘å™¨ä¼šå®æ—¶ç¼–è¯‘æˆ‘ä»¬ä»£ç ï¼Œå¹¶å°†ç»“æœæ˜¾ç¤ºå‡ºæ¥ã€‚è¿™å¾ˆå¥½ï¼Œæˆ‘ä»¬å¯ä»¥å®æ—¶å¾—åˆ°ä»£ç çš„åé¦ˆã€‚ ä½†æ˜¯è¿™ä¹Ÿä¼šäº§ç”Ÿä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæˆ‘ä»¬å†™äº†ä¸€ä¸ªå‡½æ•°ï¼Œæˆ–è€…è‡ªå®šä¹‰äº†ä¸€ä¸ª viewï¼Œè¿™éƒ¨åˆ†ä»£ç ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ä¸ä¼šå˜çš„ï¼Œè€Œç¼–è¯‘å™¨å´ä¼šä¸€æ¬¡åˆä¸€æ¬¡åœ°å»ç¼–è¯‘è¿™äº›ä»£ç ï¼Œæœ€ç»ˆçš„ç»“æœå°±æ˜¯å¯¼è‡´æ•ˆç‡çš„ä½ä¸‹ã€‚ è¿™æ—¶ï¼ŒSources ç›®å½•å°±æ´¾ä¸Šç”¨åœºäº†ï¼Œä½¿ç”¨ Cmd + 1 æ‰“å¼€é¡¹ç›®å¯¼èˆªæ (Project Navigator)ï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ª Sources ç›®å½•ã€‚æ”¾åˆ°æ­¤ç›®å½•ä¸‹çš„æºæ–‡ä»¶ä¼šè¢«ç¼–è¯‘æˆæ¨¡å—(module)å¹¶è‡ªåŠ¨å¯¼å…¥åˆ° Playground ä¸­ï¼Œå¹¶ä¸”è¿™ä¸ªç¼–è¯‘åªä¼šè¿›è¡Œä¸€æ¬¡(æˆ–è€…æˆ‘ä»¬å¯¹è¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶è¿›è¡Œä¿®æ”¹çš„æ—¶å€™)ï¼Œè€Œéæ¯æ¬¡ä½ æ•²å…¥ä¸€ä¸ªå­—æ¯çš„æ—¶å€™å°±ç¼–è¯‘ä¸€æ¬¡ã€‚ è¿™å°†ä¼šå¤§å¤§æé«˜ä»£ç æ‰§è¡Œçš„æ•ˆç‡ã€‚ æ³¨æ„ï¼šç”±äºæ­¤ç›®å½•ä¸‹çš„æ–‡ä»¶éƒ½æ˜¯è¢«ç¼–è¯‘æˆæ¨¡å—å¯¼å…¥çš„ï¼Œåªæœ‰è¢«è®¾ç½®æˆ public çš„ç±»å‹ï¼Œå±æ€§æˆ–æ–¹æ³•æ‰èƒ½åœ¨ Playground ä¸­ä½¿ç”¨ã€‚","text":"Sources ç›®å½•é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨ Playground ä¸Šé¢å†™ä»£ç ï¼Œç„¶åç¼–è¯‘å™¨ä¼šå®æ—¶ç¼–è¯‘æˆ‘ä»¬ä»£ç ï¼Œå¹¶å°†ç»“æœæ˜¾ç¤ºå‡ºæ¥ã€‚è¿™å¾ˆå¥½ï¼Œæˆ‘ä»¬å¯ä»¥å®æ—¶å¾—åˆ°ä»£ç çš„åé¦ˆã€‚ ä½†æ˜¯è¿™ä¹Ÿä¼šäº§ç”Ÿä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæˆ‘ä»¬å†™äº†ä¸€ä¸ªå‡½æ•°ï¼Œæˆ–è€…è‡ªå®šä¹‰äº†ä¸€ä¸ª viewï¼Œè¿™éƒ¨åˆ†ä»£ç ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ä¸ä¼šå˜çš„ï¼Œè€Œç¼–è¯‘å™¨å´ä¼šä¸€æ¬¡åˆä¸€æ¬¡åœ°å»ç¼–è¯‘è¿™äº›ä»£ç ï¼Œæœ€ç»ˆçš„ç»“æœå°±æ˜¯å¯¼è‡´æ•ˆç‡çš„ä½ä¸‹ã€‚ è¿™æ—¶ï¼ŒSources ç›®å½•å°±æ´¾ä¸Šç”¨åœºäº†ï¼Œä½¿ç”¨ Cmd + 1 æ‰“å¼€é¡¹ç›®å¯¼èˆªæ (Project Navigator)ï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ª Sources ç›®å½•ã€‚æ”¾åˆ°æ­¤ç›®å½•ä¸‹çš„æºæ–‡ä»¶ä¼šè¢«ç¼–è¯‘æˆæ¨¡å—(module)å¹¶è‡ªåŠ¨å¯¼å…¥åˆ° Playground ä¸­ï¼Œå¹¶ä¸”è¿™ä¸ªç¼–è¯‘åªä¼šè¿›è¡Œä¸€æ¬¡(æˆ–è€…æˆ‘ä»¬å¯¹è¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶è¿›è¡Œä¿®æ”¹çš„æ—¶å€™)ï¼Œè€Œéæ¯æ¬¡ä½ æ•²å…¥ä¸€ä¸ªå­—æ¯çš„æ—¶å€™å°±ç¼–è¯‘ä¸€æ¬¡ã€‚ è¿™å°†ä¼šå¤§å¤§æé«˜ä»£ç æ‰§è¡Œçš„æ•ˆç‡ã€‚ æ³¨æ„ï¼šç”±äºæ­¤ç›®å½•ä¸‹çš„æ–‡ä»¶éƒ½æ˜¯è¢«ç¼–è¯‘æˆæ¨¡å—å¯¼å…¥çš„ï¼Œåªæœ‰è¢«è®¾ç½®æˆ public çš„ç±»å‹ï¼Œå±æ€§æˆ–æ–¹æ³•æ‰èƒ½åœ¨ Playground ä¸­ä½¿ç”¨ã€‚ èµ„æºç”±äº Playground å¹¶æ²¡æœ‰ä½¿ç”¨æ²™ç›’æœºåˆ¶ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•ç›´æ¥ä½¿ç”¨æ²™ç›’æ¥å­˜å‚¨èµ„æºæ–‡ä»¶ã€‚ ä½†æ˜¯ï¼Œè¿™å¹¶ä¸æ„å‘³ç€åœ¨ Playground ä¸­æ²¡åŠæ³•ä½¿ç”¨èµ„æºæ–‡ä»¶ï¼ŒPlayground æä¾›äº†ä¸¤ä¸ªåœ°æ–¹æ¥å­˜å‚¨èµ„æºï¼Œä¸€ä¸ªæ˜¯æ¯ä¸ª Playground éƒ½ç‹¬ç«‹çš„èµ„æºï¼Œè€Œå¦ä¸€ä¸ªæ˜¯æ‰€æœ‰ Playground éƒ½å…±äº«çš„èµ„æºã€‚ ç‹¬ç«‹èµ„æºåœ¨æ‰“å¼€çš„é¡¹ç›®å¯¼èˆªæ ä¸­å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ª Resources ç›®å½•ï¼Œæ”¾ç½®åˆ°æ­¤ç›®å½•ä¸‹çš„èµ„æºæ˜¯æ¯ä¸ª Playground ç‹¬ç«‹çš„ã€‚ è¿™ä¸ªç›®å½•çš„èµ„æºæ˜¯ç›´æ¥æ”¾åˆ° mainBundle ä¸­çš„ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç æ¥è·å–èµ„æºè·¯å¾„ï¼š1234if let path = NSBundle.mainBundle().pathForResource(&quot;example&quot;, ofType: &quot;json&quot;) &#123; // do something with json // ...&#125; å¦‚æœæ˜¯å›¾ç‰‡æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨UIImage(named:)æ¥è·å–ã€‚ å…±äº«èµ„æºå…±äº«èµ„æºçš„ç›®å½•æ˜¯æ”¾åœ¨ç”¨æˆ·ç›®å½•çš„ Documents ç›®å½•ä¸‹çš„ã€‚åœ¨ä»£ç ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨XCPlaygroundSharedDataDirectoryURLæ¥è·å–å…±äº«èµ„æºç›®å½•çš„ URL(éœ€è¦å…ˆå¯¼å…¥ XCPlayground æ¨¡å—)ã€‚123import XCPlaygroudlet sharedFileURL = XCPlaygroundSharedDataDirectoryURL.URLByAppendingPathComponent(&quot;example.json&quot;) æ³¨æ„ï¼šä½ éœ€è¦åˆ›å»º~/Documents/Shared Playground Dataç›®å½•ï¼Œå¹¶å°†èµ„æºæ”¾åˆ°æ­¤ç›®å½•ä¸‹ï¼Œæ‰èƒ½åœ¨ Playground ä¸­è·å–åˆ° å¼‚æ­¥æ‰§è¡ŒPlayground ä¸­çš„ä»£ç æ˜¯é¡¶å±‚ä»£ç (top-level code)ï¼Œä¹Ÿå°±æ˜¯å®ƒæ˜¯åœ¨äºå…¨å±€ä½œç”¨åŸŸä¸­çš„ã€‚è¿™äº›ä»£ç å°†ä¼šä»ä¸Šåˆ°ä¸‹æ‰§è¡Œï¼Œå¹¶åœ¨æ‰§è¡Œå®Œæ¯•ä¹‹åç«‹å³åœæ­¢ã€‚ æˆ‘ä»¬çš„å¼‚æ­¥å›è°ƒä»£ç ä¸€èˆ¬éƒ½æ— æ³•åœ¨ç¨‹åºç»“æŸä¹‹å‰è·å¾—æ‰§è¡Œï¼Œå› æ­¤å¦‚æœæˆ‘ä»¬åœ¨ Playground æ‰§è¡Œç½‘ç»œï¼Œæˆ–è€…å…¶å®ƒè€—æ—¶çš„å¼‚æ­¥æ“ä½œï¼Œéƒ½æ— æ³•è·å¾—æˆ‘ä»¬æƒ³è¦çš„ç»“æœ(ä¹‹å‰æˆ‘åœ¨ Playgroud ä¸­å­¦ä¹ ç½‘ç»œæ“ä½œçš„æ—¶å€™ï¼Œå°±è¢«è¿™ä¸ªç‰¹æ€§æŠ˜ç£¨åˆ°å‘ç‹‚ï¼Œæˆ‘ä¸€ç›´ä»¥ä¸ºæ˜¯è‡ªå·±çš„ç½‘ç»œä»£ç å†™é”™äº†)ã€‚ ä¸ºäº†è®©ç¨‹åºåœ¨ä»£ç æ‰§è¡Œç»“æŸåç»§ç»­æ‰§è¡Œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç ï¼š1XCPlaygroundPage.currentPage.needsIndefiniteExecution = true è¿™å¥ä»£ç ä¼šè®© Playground æ°¸è¿œæ‰§è¡Œä¸‹å» ï¼Œå½“æˆ‘ä»¬è·å–äº†éœ€è¦çš„ç»“æœåï¼Œå¯ä»¥ä½¿ç”¨ XCPlaygroundPage.currentPage.finishExecution() åœæ­¢ Playground çš„æ‰§è¡Œï¼š123456789101112import XCPlaygroundXCPlaygroundPage.currentPage.needsIndefiniteExecution = truelet url = NSURL(string: &quot;http://httpbin.org/image/png&quot;)!let task = NSURLSession.sharedSession().dataTaskWithURL(url) &#123; data, _, _ in let image = UIImage(data: data!) XCPlaygroundPage.currentPage.finishExecution()&#125;task.resume() æ”¯æŒ MarkdownPlayground å·²ç»åŸç”Ÿæ”¯æŒ markdown æ³¨é‡Šæ¸²æŸ“ï¼Œåªéœ€è¦åœ¨å•è¡Œæˆ–å¤šè¡Œæ³¨é‡Šçš„åé¢æ·»åŠ å†’å· :ï¼Œæ ‡è®°è¿™æ˜¯ä¸€ä¸ª markdown æ³¨é‡Šã€‚1234567891011//: This line will have **bold** and *italic* text./*:## Headers of All Sizes### Lists of Links- [NSHipster](http://nshipster.com)- [ASCIIwwdc](http://asciiwwdc.com)- [SwiftDoc](http://swiftdoc.org)*/ å¯ä»¥åˆ°èœå• Editor â†’ Show Rendered Markup ä¸‹åˆ‡æ¢æ˜¯å¦è¿›è¡Œ markdown æ¸²æŸ“ã€‚ å¤šé¡µé¢Playground æ”¯æŒå¤šé¡µé¢ï¼Œè¿™å¯ä»¥è®©æˆ‘ä»¬å°†ä¸åŒç±»åˆ«çš„ä»£ç åˆ†åˆ«å†™åˆ°ä¸åŒçš„é¡µé¢ä¸‹ï¼Œå¹¶å¯ä»¥åœ¨å¤šä¸ªé¡µé¢ä¹‹é—´è¿›è¡Œè·³è½¬ã€‚åœ¨é¡¹ç›®å¯¼èˆªæ ä¸­ï¼Œé€‰æ‹© File &gt; New &gt; Playground Pageï¼Œ å°±å¯ä»¥æ–°å»ºä¸€ä¸ªé¡µé¢ï¼Œæˆ–è€…é€‰æ‹©é¡¹ç›®å¯¼èˆªæ å·¦ä¸‹è§’çš„ + å·é€‰æ‹© New Pageã€‚æ³¨æ„ï¼šå¦‚æœæœ¬ Playground æ˜¯ç¬¬ä¸€æ¬¡æ–°å»º Pageï¼Œåˆ™ç³»ç»Ÿä¼šäº§ç”Ÿä¸¤ä¸ª Pageï¼Œä¸€ä¸ªä»£è¡¨ä½ å½“å‰çš„é¡µé¢ï¼Œä¸€ä¸ªæ˜¯æ–°å»ºçš„é¡µé¢ã€‚ é¡µé¢è·³è½¬Playground æ”¯æŒä¸‰ç§æ–¹å¼çš„é¡µé¢è·³è½¬ï¼š ä¸Šä¸€é¡µ ä¸‹ä¸€é¡µ è·³è½¬åˆ°æŒ‡å®šé¡µ é¡µé¢é¡ºåºéƒ½æ˜¯æ ¹æ®å®ƒä»¬åœ¨é¡¹ç›®æ–‡ä»¶ä¸­çš„æ’åºæ¥å†³å®šçš„ã€‚ ä¸Šä¸€é¡µä¸ä¸‹ä¸€é¡µçš„è¯­æ³•ï¼š123//: [&quot;Go to Next Page&quot;](@next)//: [&quot;Go to Previous Page&quot;](@previous) ä¸ markdown ä¸­çš„è¶…é“¾æ¥ç±»ä¼¼ï¼Œæ–¹æ‹¬å·ä¸­çš„ä»£ç è¦æ˜¾ç¤ºçš„æ–‡å­—ï¼Œè€Œå°æ‹¬å·åˆ™ä»£è¡¨è·³è½¬çš„ç›®çš„åœ°ã€‚ æŒ‡å®šé¡µè·³è½¬ï¼š1//: [&quot;Go to The End&quot;](PageName) PageName ä»£è¡¨ç›®æ ‡é¡µé¢çš„åç§°ï¼Œå¦‚æœé¡µé¢åç§°ä¸­æœ‰ç©ºæ ¼ï¼Œåˆ™éœ€è¦ä½¿ç”¨%20æ¥ä»£æ›¿ï¼Œè¿™æ˜¯ ASCII ä¸­ç©ºæ ¼çš„ç¬¦å·ã€‚å¦‚ä¸‹ï¼š1//: [&quot;Go to The End&quot;](Last%20Page) å®˜æ–¹æ–‡æ¡£","categories":[],"tags":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://kysonyangs.github.io/tags/å·¥å…·/"}]},{"title":"LLDBè°ƒè¯•","slug":"LLDBè°ƒè¯•","date":"2018-05-25T07:25:19.000Z","updated":"2020-05-17T08:13:56.299Z","comments":true,"path":"default/LLDBè°ƒè¯•/","link":"","permalink":"https://kysonyangs.github.io/default/LLDBè°ƒè¯•/","excerpt":"LLDBæ˜¯XCodeå†…ç½®çš„ä¸ºæˆ‘ä»¬å¼€å‘è€…æä¾›çš„è°ƒè¯•å·¥å…·ï¼Œå®ƒä¸LLVMç¼–è¯‘å™¨ä¸€èµ·ï¼Œå­˜åœ¨äºä¸»çª—å£åº•éƒ¨çš„æ§åˆ¶å°ä¸­ï¼Œèƒ½å¤Ÿå¸¦ç»™æˆ‘ä»¬æ›´ä¸°å¯Œçš„æµç¨‹æ§åˆ¶å’Œæ•°æ®æ£€æµ‹çš„è°ƒè¯•åŠŸèƒ½ã€‚åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­ç†Ÿç»ƒä½¿ç”¨LLDBï¼Œå¯ä»¥è®©ä½ debugäº‹åŠåŠŸå€ã€‚ LLDBå¯ä»¥å¸¦æ¥ä»¥ä¸‹ä½“éªŒï¼š å…è®¸ä½ åœ¨ç¨‹åºè¿è¡Œçš„ç‰¹å®šæ—¶æš‚åœå®ƒ æŸ¥çœ‹å˜é‡çš„å€¼ æ‰§è¡Œè‡ªå®šçš„æŒ‡ä»¤ æŒ‰ç…§ä½ æ‰€è®¤ä¸ºåˆé€‚çš„æ­¥éª¤æ¥æ“ä½œç¨‹åºçš„è¿›å±• More","text":"LLDBæ˜¯XCodeå†…ç½®çš„ä¸ºæˆ‘ä»¬å¼€å‘è€…æä¾›çš„è°ƒè¯•å·¥å…·ï¼Œå®ƒä¸LLVMç¼–è¯‘å™¨ä¸€èµ·ï¼Œå­˜åœ¨äºä¸»çª—å£åº•éƒ¨çš„æ§åˆ¶å°ä¸­ï¼Œèƒ½å¤Ÿå¸¦ç»™æˆ‘ä»¬æ›´ä¸°å¯Œçš„æµç¨‹æ§åˆ¶å’Œæ•°æ®æ£€æµ‹çš„è°ƒè¯•åŠŸèƒ½ã€‚åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­ç†Ÿç»ƒä½¿ç”¨LLDBï¼Œå¯ä»¥è®©ä½ debugäº‹åŠåŠŸå€ã€‚ LLDBå¯ä»¥å¸¦æ¥ä»¥ä¸‹ä½“éªŒï¼š å…è®¸ä½ åœ¨ç¨‹åºè¿è¡Œçš„ç‰¹å®šæ—¶æš‚åœå®ƒ æŸ¥çœ‹å˜é‡çš„å€¼ æ‰§è¡Œè‡ªå®šçš„æŒ‡ä»¤ æŒ‰ç…§ä½ æ‰€è®¤ä¸ºåˆé€‚çš„æ­¥éª¤æ¥æ“ä½œç¨‹åºçš„è¿›å±• More å¸¸ç”¨åŸºæœ¬å‘½ä»¤exprå¯ä»¥åœ¨è°ƒè¯•æ—¶åŠ¨æ€æ‰§è¡ŒæŒ‡å®šè¡¨è¾¾å¼ï¼Œå¹¶å°†ç»“æœæ‰“å°å‡ºæ¥ã€‚å¸¸ç”¨äºåœ¨è°ƒè¯•è¿‡ç¨‹ä¸­ä¿®æ”¹å˜é‡çš„å€¼ã€‚å¦‚å›¾è®¾ç½®æ–­ç‚¹ï¼Œç„¶åè¿è¡Œç¨‹åºã€‚ç¨‹åºä¸­æ–­åè¾“å…¥ä¸‹é¢çš„å‘½ä»¤ï¼š btæ‰“å°è°ƒç”¨å †æ ˆï¼ŒåŠ allå¯æ‰“å°æ‰€æœ‰threadçš„å †æ ˆ æ‰“å°æ‰“å°å˜é‡çš„å€¼å¯ä»¥ä½¿ç”¨printå‘½ä»¤ï¼Œprintå‘½ä»¤çš„ç®€åŒ–æ–¹å¼æœ‰prin pri pï¼Œå¹¸è¿çš„æ˜¯pè¢«lldbå®ç°ä¸ºç‰¹æŒ‡printã€‚è¯¥å‘½ä»¤å¦‚æœæ‰“å°çš„æ˜¯ç®€å•ç±»å‹ï¼Œåˆ™ä¼šåˆ—å‡ºç®€å•ç±»å‹çš„ç±»å‹å’Œå€¼ã€‚å¦‚æœæ˜¯å¯¹è±¡ï¼Œè¿˜ä¼šæ‰“å°å‡ºå¯¹è±¡æŒ‡é’ˆåœ°å€ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š123456789101112(lldb) print a(NSInteger) $0 = 0(lldb) print b(NSInteger) $1 = 0(lldb) print str(NSString *) $2 = 0x0000000100001048 @&quot;abc&quot;(lldb) print url(NSURL *) $3 = 0x0000000100206cc0 @&quot;abc&quot; åœ¨è¾“å‡ºç»“æœä¸­æˆ‘ä»¬è¿˜èƒ½çœ‹åˆ°ç±»ä¼¼äº$0,$1è¿™æ ·çš„ç¬¦å·ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶çœ‹ä½œæ˜¯æŒ‡å‘å¯¹è±¡çš„ä¸€ä¸ªå¼•ç”¨ï¼Œæˆ‘ä»¬åœ¨æ§åˆ¶é¢æ¿ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªç¬¦å·æ¥æ“ä½œå¯¹åº”çš„å¯¹è±¡ï¼Œè¿™äº›ä¸œè¥¿å­˜åœ¨äºLLDBçš„å…¨åç©ºé—´ä¸­ï¼Œç›®çš„æ˜¯ä¸ºäº†è¾…åŠ©è°ƒè¯•ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š1234(lldb) exp $0 = 100(NSInteger) $9 = 100(lldb) p a(NSInteger) $10 = 100 å¦å¤–$åé¢çš„æ•°å€¼æ˜¯é€’å¢çš„ï¼Œæ¯æ‰“å°ä¸€ä¸ªä¸å¯¹è±¡ç›¸å…³çš„å‘½ä»¤ï¼Œè¿™ä¸ªå€¼éƒ½ä¼šåŠ 1ã€‚ ä¸Šé¢çš„printå‘½ä»¤ä¼šæ‰“å°å‡ºå¯¹è±¡çš„å¾ˆå¤šä¿¡æ¯ï¼Œå¦‚æœæˆ‘ä»¬åªæƒ³æŸ¥çœ‹å¯¹è±¡çš„å€¼çš„ä¿¡æ¯ï¼Œåˆ™å¯ä»¥ä½¿ç”¨po(print objectçš„ç¼©å†™)å‘½ä»¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š12(lldb) po strabc å½“ç„¶ï¼Œpoå‘½ä»¤æ˜¯â€exp -O â€”â€œå‘½ä»¤çš„åˆ«åï¼Œä½¿ç”¨â€exp -O â€”â€èƒ½è¾¾åˆ°åŒæ ·çš„æ•ˆæœã€‚ å¯¹äºç®€å•ç±»å‹ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä¸ºå…¶æŒ‡å®šä¸åŒçš„æ‰“å°æ ¼å¼ï¼Œå…¶å‘½ä»¤æ ¼å¼æ˜¯print/ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š12(lldb) p/x a(NSInteger) $13 = 0x0000000000000064 æ ¼å¼çš„å®Œæ•´æ¸…å•å¯ä»¥å‚è€ƒOutput Formatsã€‚ expressionåœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°è¿™æ ·ä¸€ç§æƒ…å†µï¼šæˆ‘ä»¬è®¾ç½®ä¸€ä¸ªè§†å›¾çš„èƒŒæ™¯é¢œè‰²ï¼Œè¿è¡Œåå‘ç°é¢œè‰²ä¸å¥½çœ‹ã€‚å—¯ï¼Œå¥½å§ï¼Œåœ¨ä»£ç é‡Œé¢ä¿®æ”¹ä¸€ä¸‹ï¼Œå†ç¼–è¯‘è¿è¡Œä¸€ä¸‹ï¼Œå—¯ï¼Œè¿˜æ˜¯ä¸å¥½çœ‹ï¼Œç„¶åå†ä¿®æ”¹å§ï½ï½è¿™æ ·æ— å½¢ä¸­æµªè´¹äº†æˆ‘ä»¬å¤§æŠŠçš„æ—¶é—´ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œexpressionå‘½ä»¤å¼ºå¤§çš„åŠŸèƒ½å°±èƒ½ä½“ç°å‡ºæ¥äº†ï¼Œå®ƒä¸ä»…ä¼šæ”¹å˜è°ƒè¯•å™¨ä¸­çš„å€¼ï¼Œè¿˜æ”¹å˜äº†ç¨‹åºä¸­çš„å®é™…å€¼ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å®é™…æ•ˆæœï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š12345(lldb) exp a = 10(NSInteger) $0 = 10(lldb) exp b = 100(NSInteger) $1 = 1002015-01-25 14:00:41.313 test[18064:71466] a + b = 110, abc expressionå‘½ä»¤çš„åŠŸèƒ½ä¸ä»…äºæ­¤ï¼Œæ­£å¦‚ä¸Šé¢çš„poå‘½ä»¤ï¼Œå…¶å®é™…ä¹Ÿæ˜¯â€expression -O â€”â€œå‘½ä»¤çš„åˆ«åã€‚æ›´è¯¦ç»†ä½¿ç”¨å¯ä»¥å‚è€ƒEvaluating Expressionsã€‚","categories":[],"tags":[{"name":"Xcode","slug":"Xcode","permalink":"https://kysonyangs.github.io/tags/Xcode/"}]},{"title":"YYModelä½¿ç”¨","slug":"YYModelä½¿ç”¨","date":"2018-04-25T07:27:25.000Z","updated":"2020-05-17T08:12:32.792Z","comments":true,"path":"default/YYModelä½¿ç”¨/","link":"","permalink":"https://kysonyangs.github.io/default/YYModelä½¿ç”¨/","excerpt":"ç®€å•çš„ Model ä¸ JSON ç›¸äº’è½¬æ¢12345678910111213// JSON:&#123; &quot;uid&quot;:123456, &quot;name&quot;:&quot;Harry&quot;, &quot;created&quot;:&quot;1965-07-31T00:00:00+0000&quot;&#125;// Model:@interface User : NSObject@property UInt64 uid;@property NSString *name;@property NSDate *created;@end JSON Model12345// å°† JSON (NSData,NSString,NSDictionary) è½¬æ¢ä¸º Model:User *user = [User yy_modelWithJSON:json];// å°† Model è½¬æ¢ä¸º JSON å¯¹è±¡:NSDictionary *json = [user yy_modelToJSONObject];","text":"ç®€å•çš„ Model ä¸ JSON ç›¸äº’è½¬æ¢12345678910111213// JSON:&#123; &quot;uid&quot;:123456, &quot;name&quot;:&quot;Harry&quot;, &quot;created&quot;:&quot;1965-07-31T00:00:00+0000&quot;&#125;// Model:@interface User : NSObject@property UInt64 uid;@property NSString *name;@property NSDate *created;@end JSON Model12345// å°† JSON (NSData,NSString,NSDictionary) è½¬æ¢ä¸º Model:User *user = [User yy_modelWithJSON:json];// å°† Model è½¬æ¢ä¸º JSON å¯¹è±¡:NSDictionary *json = [user yy_modelToJSONObject]; å½“ JSON/Dictionary ä¸­çš„å¯¹è±¡ç±»å‹ä¸ Model å±æ€§ä¸ä¸€è‡´æ—¶ï¼ŒYYModel å°†ä¼šè¿›è¡Œå¦‚ä¸‹è‡ªåŠ¨è½¬æ¢ã€‚è‡ªåŠ¨è½¬æ¢ä¸æ”¯æŒçš„å€¼å°†ä¼šè¢«å¿½ç•¥ï¼Œä»¥é¿å…å„ç§æ½œåœ¨çš„å´©æºƒé—®é¢˜ã€‚ JSON/Dictionary Model NSString NSNumber, NSURL, SEL, Class NSNumber NSString NSString/NSNumber C number (BOOL, int, float, NSUInteger, UInt64, â€¦) NaN and Inf will be ignored NSString NSDate parsed with these formats: yyyy-MM-dd yyyy-MM-dd HH:mm:ss yyyy-MM-ddâ€™Tâ€™HH:mm:ss yyyy-MM-ddâ€™Tâ€™HH:mm:ssZ EEE MMM dd HH:mm:ss Z yyyy NSDate NSString formatted with ISO8601: â€œYYYY-MM-ddâ€™Tâ€™HH:mm:ssZâ€ NSValue struct (CGRect,CGSize,â€¦) NSNull nil, 0 â€œnoâ€, â€œfalseâ€, â€¦ @(NO), 0 â€œyesâ€, â€œtrueâ€, â€¦ @(YES), 1 Model å±æ€§åå’Œ JSON ä¸­çš„ Key ä¸ç›¸åŒ1234567891011121314151617181920212223242526// JSON:&#123; &quot;n&quot;:&quot;Harry Pottery&quot;, &quot;p&quot;: 256, &quot;ext&quot; : &#123; &quot;desc&quot; : &quot;A book written by J.K.Rowing.&quot; &#125;, &quot;ID&quot; : 100010&#125;// Model:@interface Book : NSObject@property NSString *name;@property NSInteger page;@property NSString *desc;@property NSString *bookID;@end@implementation Book//è¿”å›ä¸€ä¸ª Dictï¼Œå°† Model å±æ€§åå¯¹æ˜ å°„åˆ° JSON çš„ Keyã€‚+ (NSDictionary *)modelCustomPropertyMapper &#123; return @&#123;@&quot;name&quot; : @&quot;n&quot;, @&quot;page&quot; : @&quot;p&quot;, @&quot;desc&quot; : @&quot;ext.desc&quot;, @&quot;bookID&quot; : @[@&quot;id&quot;,@&quot;ID&quot;,@&quot;book_id&quot;]&#125;;&#125;@end ä½ å¯ä»¥æŠŠä¸€ä¸ªæˆ–ä¸€ç»„ json key (key path) æ˜ å°„åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§ã€‚å¦‚æœä¸€ä¸ªå±æ€§æ²¡æœ‰æ˜ å°„å…³ç³»ï¼Œé‚£é»˜è®¤ä¼šä½¿ç”¨ç›¸åŒå±æ€§åä½œä¸ºæ˜ å°„ã€‚ åœ¨ json-&gt;model çš„è¿‡ç¨‹ä¸­ï¼šå¦‚æœä¸€ä¸ªå±æ€§å¯¹åº”äº†å¤šä¸ª json keyï¼Œé‚£ä¹ˆè½¬æ¢è¿‡ç¨‹ä¼šæŒ‰é¡ºåºæŸ¥æ‰¾ï¼Œå¹¶ä½¿ç”¨ç¬¬ä¸€ä¸ªä¸ä¸ºç©ºçš„å€¼ã€‚ åœ¨ model-&gt;json çš„è¿‡ç¨‹ä¸­ï¼šå¦‚æœä¸€ä¸ªå±æ€§å¯¹åº”äº†å¤šä¸ª json key (key path)ï¼Œé‚£ä¹ˆè½¬æ¢è¿‡ç¨‹ä»…ä¼šå¤„ç†ç¬¬ä¸€ä¸ª json key (key path)ï¼›å¦‚æœå¤šä¸ªå±æ€§å¯¹åº”äº†åŒä¸€ä¸ª json keyï¼Œåˆ™è½¬æ¢è¿‡è¿‡ç¨‹ä¼šä½¿ç”¨å…¶ä¸­ä»»æ„ä¸€ä¸ªä¸ä¸ºç©ºçš„å€¼ã€‚ Model åŒ…å«å…¶ä»–çš„ Model12345678910111213141516171819202122232425// JSON&#123; &quot;author&quot;:&#123; &quot;name&quot;:&quot;J.K.Rowling&quot;, &quot;birthday&quot;:&quot;1965-07-31T00:00:00+0000&quot; &#125;, &quot;name&quot;:&quot;Harry Potter&quot;, &quot;pages&quot;:256&#125;// Model: ä»€ä¹ˆéƒ½ä¸ç”¨åšï¼Œè½¬æ¢ä¼šè‡ªåŠ¨å®Œæˆ@interface Author : NSObject@property NSString *name;@property NSDate *birthday;@end@implementation Author@end@interface Book : NSObject@property NSString *name;@property NSUInteger pages;@property Author *author; //Book åŒ…å« Author å±æ€§@end@implementation Book@end å®¹å™¨ç±»å±æ€§12345678910111213141516@class Shadow, Border, Attachment;@interface Attributes@property NSString *name;@property NSArray *shadows; //Array&lt;Shadow&gt;@property NSSet *borders; //Set&lt;Border&gt;@property NSMutableDictionary *attachments; //Dict&lt;NSString,Attachment&gt;@end@implementation Attributes// è¿”å›å®¹å™¨ç±»ä¸­çš„æ‰€éœ€è¦å­˜æ”¾çš„æ•°æ®ç±»å‹ (ä»¥ Class æˆ– Class Name çš„å½¢å¼)ã€‚+ (NSDictionary *)modelContainerPropertyGenericClass &#123; return @&#123;@&quot;shadows&quot; : [Shadow class], @&quot;borders&quot; : Border.class, @&quot;attachments&quot; : @&quot;Attachment&quot; &#125;;&#125;@end åœ¨å®é™…ä½¿ç”¨è¿‡è¿‡ç¨‹ä¸­ï¼Œ[Shadow class]ï¼Œ Border.classï¼Œ @&quot;Attachment&quot; æ²¡æœ‰æ˜æ˜¾çš„åŒºåˆ«ã€‚ é»‘åå•ä¸ç™½åå•123456789101112131415@interface User@property NSString *name;@property NSUInteger age;@end@implementation Attributes// å¦‚æœå®ç°äº†è¯¥æ–¹æ³•ï¼Œåˆ™å¤„ç†è¿‡ç¨‹ä¸­ä¼šå¿½ç•¥è¯¥åˆ—è¡¨å†…çš„æ‰€æœ‰å±æ€§+ (NSArray *)modelPropertyBlacklist &#123; return @[@&quot;test1&quot;, @&quot;test2&quot;];&#125;// å¦‚æœå®ç°äº†è¯¥æ–¹æ³•ï¼Œåˆ™å¤„ç†è¿‡ç¨‹ä¸­ä¸ä¼šå¤„ç†è¯¥åˆ—è¡¨å¤–çš„å±æ€§ã€‚+ (NSArray *)modelPropertyWhitelist &#123; return @[@&quot;name&quot;];&#125;@end æ•°æ®æ ¡éªŒä¸è‡ªå®šä¹‰è½¬æ¢å®é™…è¿™ä¸ªåˆ†ç±»çš„ç›®çš„æ¯”è¾ƒç®€å•å’Œæ˜ç¡®ã€‚ å°±æ˜¯å¯¹åˆ¤æ–­æ˜¯å¦ä¸ºæ—¶é—´æˆ³ï¼Œç„¶åå¯¹æ—¶é—´æˆ³è¿›è¡Œå¤„ç†ï¼Œè°ƒç”¨ _createdAt = [NSDate dateWithTimeIntervalSince1970:timestamp.floatValue]; è·å–æ—¶é—´ã€‚ 1234567891011121314151617181920212223242526272829303132// JSON:&#123; &quot;name&quot;:&quot;Harry&quot;, &quot;timestamp&quot; : 1445534567 //æ—¶é—´æˆ³&#125;// Model:@interface User@property NSString *name;@property NSDate *createdAt;@end@implementation User// å½“ JSON è½¬ä¸º Model å®Œæˆåï¼Œè¯¥æ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚// ä½ å¯ä»¥åœ¨è¿™é‡Œå¯¹æ•°æ®è¿›è¡Œæ ¡éªŒï¼Œå¦‚æœæ ¡éªŒä¸é€šè¿‡ï¼Œå¯ä»¥è¿”å› NOï¼Œåˆ™è¯¥ Model ä¼šè¢«å¿½ç•¥ã€‚// ä½ ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œåšä¸€äº›è‡ªåŠ¨è½¬æ¢ä¸èƒ½å®Œæˆçš„å·¥ä½œã€‚- (BOOL)modelCustomTransformFromDictionary:(NSDictionary *)dic &#123; NSNumber *timestamp = dic[@&quot;timestamp&quot;]; if (![timestamp isKindOfClass:[NSNumber class]]) return NO; _createdAt = [NSDate dateWithTimeIntervalSince1970:timestamp.floatValue]; return YES;&#125;// å½“ Model è½¬ä¸º JSON å®Œæˆåï¼Œè¯¥æ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚// ä½ å¯ä»¥åœ¨è¿™é‡Œå¯¹æ•°æ®è¿›è¡Œæ ¡éªŒï¼Œå¦‚æœæ ¡éªŒä¸é€šè¿‡ï¼Œå¯ä»¥è¿”å› NOï¼Œåˆ™è¯¥ Model ä¼šè¢«å¿½ç•¥ã€‚// ä½ ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œåšä¸€äº›è‡ªåŠ¨è½¬æ¢ä¸èƒ½å®Œæˆçš„å·¥ä½œã€‚- (BOOL)modelCustomTransformToDictionary:(NSMutableDictionary *)dic &#123; if (!_createdAt) return NO; dic[@&quot;timestamp&quot;] = @(n.timeIntervalSince1970); return YES;&#125;@end Coding/Copying/hash/equal/descriptionä»¥ä¸‹æ–¹æ³•éƒ½æ˜¯YYModelçš„ç®€å•å°è£…ï¼Œå®é™…ä½¿ç”¨è¿‡ç¨‹å’Œç³»ç»Ÿæ–¹æ³•åŒºåˆ«ä¸å¤§ã€‚å¯¹å…¶æ„Ÿå…´è¶£çš„å¯ä»¥ç‚¹è¿›æ–¹æ³•å†…éƒ¨æŸ¥çœ‹ã€‚ 123456789101112131415161718192021222324252627@interface YYShadow :NSObject &lt;NSCoding, NSCopying&gt;@property (nonatomic, copy) NSString *name;@property (nonatomic, assign) CGSize size;@end@implementation YYShadow// ç›´æ¥æ·»åŠ ä»¥ä¸‹ä»£ç å³å¯è‡ªåŠ¨å®Œæˆ- (void)encodeWithCoder:(NSCoder *)aCoder &#123; [self yy_modelEncodeWithCoder:aCoder];&#125;- (id)initWithCoder:(NSCoder *)aDecoder &#123; self = [super init]; return [self yy_modelInitWithCoder:aDecoder];&#125;- (id)copyWithZone:(NSZone *)zone &#123; return [self yy_modelCopy];&#125;- (NSUInteger)hash &#123; return [self yy_modelHash];&#125;- (BOOL)isEqual:(id)object &#123; return [self yy_modelIsEqual:object];&#125;- (NSString *)description &#123; return [self yy_modelDescription];&#125;@end","categories":[],"tags":[{"name":"æºç ","slug":"æºç ","permalink":"https://kysonyangs.github.io/tags/æºç /"}]},{"title":"iPhoneXé€‚é…","slug":"iPhoneX+ç‰ˆæœ¬é€‚é…","date":"2018-01-20T07:12:36.000Z","updated":"2020-05-17T08:14:27.314Z","comments":true,"path":"default/iPhoneX+ç‰ˆæœ¬é€‚é…/","link":"","permalink":"https://kysonyangs.github.io/default/iPhoneX+ç‰ˆæœ¬é€‚é…/","excerpt":"","text":"iPhoneXé€‚é…push å’Œ popæ—¶ï¼Œé¡µé¢åç§»åœ¨æœ‰ UIScrollView æˆ– UIScrollView å­ç±»ï¼ˆå¦‚tableViewï¼‰çš„æ§åˆ¶å™¨ä¸­ï¼Œpush åˆ°ç¬¬äºŒä¸ªå‡ é¢å’Œ pop å›å»ï¼ŒscrollView éƒ½ä¼šå¾€ä¸‹åç§»ã€‚ åœ¨ AppDelegate ä¸­ç”¨ UISCrollView çš„ UIAppearance ä¿®æ”¹1234// AppDelegate è¿›è¡Œå…¨å±€è®¾ç½® ä¸ç„¶iOS 11 pushæ—¶ç•Œé¢ä¼šæœ‰ä¸ªä¸‹æ»‘çš„æ•ˆæœï¼Œpopå›å»ä¼šæœ‰ä¸ªä¸Šåˆ’çš„æ•ˆæœif (@available(iOS 11.0, *)) &#123; [[UIScrollView appearance] setContentInsetAdjustmentBehavior:UIScrollViewContentInsetAdjustmentNever];&#125; TabBar åœ¨ push çš„æ—¶å€™ä¼šå‘ä¸Šå¼¹ï¼Œç„¶åè¿˜ä¼šæœ‰é»‘å—è‡ªå®šä¹‰ navigationController é‡å†™çš„ push æ–¹æ³•é‡Œé¢ä¿®æ”¹ tabbar çš„ frame12345678910// ä¿®æ”¹tabBarçš„frame ä¸ç„¶iPhone X pushçš„æ—¶å€™tabBarä¸Šä¼šå‘ä¸Šå¼¹- (void)pushViewController:(UIViewController *)viewController animated:(BOOL)animated &#123; if (self.viewControllers.count &gt; 0) &#123; viewController.hidesBottomBarWhenPushed = YES; &#125; [super pushViewController:viewController animated:animated]; CGRect frame = self.tabBarController.tabBar.frame; frame.origin.y = [UIScreen mainScreen].bounds.size.height - frame.size.height; self.tabBarController.tabBar.frame = frame;&#125; TableView æ·»åŠ  MJFooter æ—¶ï¼Œåº•éƒ¨æ˜¾ç¤º MJFooterä¿®æ”¹ MJFooter åç§»ä½ç½®1self.tableView.mj_footer.ignoredScrollViewContentInsetBottom = kSalfBottomSpace;","categories":[],"tags":[{"name":"iOS","slug":"iOS","permalink":"https://kysonyangs.github.io/tags/iOS/"}]},{"title":"CocoaPods/Carthage","slug":"CocoaPods-Carthage","date":"2017-12-05T07:21:48.000Z","updated":"2020-05-17T08:15:33.430Z","comments":true,"path":"default/CocoaPods-Carthage/","link":"","permalink":"https://kysonyangs.github.io/default/CocoaPods-Carthage/","excerpt":"CocoaPods (é»˜è®¤)è‡ªåŠ¨å»ºç«‹å’Œæ›´æ–°ä¸€ä¸ª Xcode workspaceï¼Œç”¨æ¥ç®¡ç†ä½ çš„é¡¹ç›®å’Œæ‰€æœ‰ä¾èµ–ã€‚Carthage ä½¿ç”¨ xcodebuild æ¥ç¼–è¯‘å‡ºäºŒè¿›åˆ¶åº“ï¼Œå‰©ä¸‹çš„é›†æˆå·¥ä½œå®Œå…¨äº¤ç»™å¼€å‘äººå‘˜ã€‚ CocoaPods ä½¿ç”¨èµ·æ¥æ–¹ä¾¿ï¼Œ Carthage æ›´åŠ çµæ´»å¹¶ä¸”å¯¹ç°æœ‰é¡¹ç›®æ²¡æœ‰å¤ªå¤šçš„ä¾µç•¥æ€§ã€‚ CocoaPods å¸Œæœ›å»ºç«‹ä¸€ä¸ªç”Ÿæ€ç³»ç»Ÿï¼Œå¯ä»¥æ›´åŠ æ–¹ä¾¿çš„å‘ç°å’Œé›†æˆç¬¬ä¸‰æ–¹ä»£ç åº“ã€‚ Carthage å¸Œæœ›å˜æˆä¸€ä¸ªå»ä¸­å¿ƒåŒ–çš„ä¾èµ–ç®¡ç†ç³»ç»Ÿï¼Œä¸æä¾›ä¸­å¿ƒåŒ–çš„é¡¹ç›®åˆ—è¡¨ï¼Œå‡å°‘ç»´æŠ¤æˆæœ¬å’Œå•ç‚¹å¤±è´¥çš„æ¦‚ç‡ã€‚ä¸è¿‡è¿™æ ·ç»™å¼€å‘äººå‘˜å¯»æ‰¾é¡¹ç›®å¸¦æ¥ä¸ä¾¿ã€‚ CocoaPods çš„é¡¹ç›®éœ€è¦é…ç½® podspec æ–‡ä»¶ï¼ŒåŒ…å«äº†é¡¹ç›®å’Œç¬¬ä¸‰æ–¹åº“çš„ä¿¡æ¯ã€‚ Carthage å¹¶ä¸ä½¿ç”¨ç±»ä¼¼çš„é…ç½®æ–‡ä»¶ï¼Œç¬¬ä¸‰æ–¹åº“çš„ä¾èµ–å…³ç³»æ˜¯é€šè¿‡ Xcode é¡¹ç›®æ¥é…ç½®çš„ã€‚","text":"CocoaPods (é»˜è®¤)è‡ªåŠ¨å»ºç«‹å’Œæ›´æ–°ä¸€ä¸ª Xcode workspaceï¼Œç”¨æ¥ç®¡ç†ä½ çš„é¡¹ç›®å’Œæ‰€æœ‰ä¾èµ–ã€‚Carthage ä½¿ç”¨ xcodebuild æ¥ç¼–è¯‘å‡ºäºŒè¿›åˆ¶åº“ï¼Œå‰©ä¸‹çš„é›†æˆå·¥ä½œå®Œå…¨äº¤ç»™å¼€å‘äººå‘˜ã€‚ CocoaPods ä½¿ç”¨èµ·æ¥æ–¹ä¾¿ï¼Œ Carthage æ›´åŠ çµæ´»å¹¶ä¸”å¯¹ç°æœ‰é¡¹ç›®æ²¡æœ‰å¤ªå¤šçš„ä¾µç•¥æ€§ã€‚ CocoaPods å¸Œæœ›å»ºç«‹ä¸€ä¸ªç”Ÿæ€ç³»ç»Ÿï¼Œå¯ä»¥æ›´åŠ æ–¹ä¾¿çš„å‘ç°å’Œé›†æˆç¬¬ä¸‰æ–¹ä»£ç åº“ã€‚ Carthage å¸Œæœ›å˜æˆä¸€ä¸ªå»ä¸­å¿ƒåŒ–çš„ä¾èµ–ç®¡ç†ç³»ç»Ÿï¼Œä¸æä¾›ä¸­å¿ƒåŒ–çš„é¡¹ç›®åˆ—è¡¨ï¼Œå‡å°‘ç»´æŠ¤æˆæœ¬å’Œå•ç‚¹å¤±è´¥çš„æ¦‚ç‡ã€‚ä¸è¿‡è¿™æ ·ç»™å¼€å‘äººå‘˜å¯»æ‰¾é¡¹ç›®å¸¦æ¥ä¸ä¾¿ã€‚ CocoaPods çš„é¡¹ç›®éœ€è¦é…ç½® podspec æ–‡ä»¶ï¼ŒåŒ…å«äº†é¡¹ç›®å’Œç¬¬ä¸‰æ–¹åº“çš„ä¿¡æ¯ã€‚ Carthage å¹¶ä¸ä½¿ç”¨ç±»ä¼¼çš„é…ç½®æ–‡ä»¶ï¼Œç¬¬ä¸‰æ–¹åº“çš„ä¾èµ–å…³ç³»æ˜¯é€šè¿‡ Xcode é¡¹ç›®æ¥é…ç½®çš„ã€‚ CocoaPods å®‰è£…ä¸ä½¿ç”¨å®‰è£… å®‰è£…éœ€è¦ç”¨åˆ° Rubyï¼Œä½†æ˜¯ Mac è‡ªå¸¦äº† Rubyï¼Œå¦‚æœå«Œå¼ƒç‰ˆæœ¬è¿‡ä½ï¼Œå¯ä»¥æ›´æ–°ä¸€ä¸‹ rubyã€‚ a. å®‰è£… RVMï¼Œcurl -L https://get.rvm.io | bash -s stable b. æŸ¥çœ‹ rvm ç‰ˆæœ¬ï¼Œrvm -v c. rvm å®‰è£… rubya. åˆ—å‡ºå·²çŸ¥çš„rubyç‰ˆæœ¬ï¼Œ`rvm list known` b. é€‰æ‹©ç‰ˆæœ¬å®‰è£…ï¼Œ`rvm install 2.0.0` c. æŸ¥è¯¢å·²ç»å®‰è£…çš„ rubyï¼Œ`rvm list` d. å¸è½½ä¸€ä¸ªå·²å®‰è£…ç‰ˆæœ¬ï¼Œ`rvm remove 1.9.2` d. è®¾ç½®é»˜è®¤ ruby ç‰ˆæœ¬ï¼Œrvm 2.0.0 --default å®‰è£… CocoaPods1sudo gem install cocoapods ç„¶åä½ ä¼šå‘ç°æ— æ¯”çš„æ…¢ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡æ¢æºæ¥æé«˜é‚£ä¹ˆä¸€ç‚¹é€Ÿåº¦a. gem sources -l æŸ¥çœ‹ç°æœ‰çš„æºb. gem sources --remove https://rubygems.org/ åˆ é™¤åŸæ¥çš„æºc. gem sources -a http://ruby.taobao.org/ æ›´æ¢ä¸ºæ·˜å®çš„æº ä½¿ç”¨example: ä½¿ç”¨CocoaPods å¯¼å…¥ AFNetworking åº“ åœ¨é¡¹ç›®(CocosPodsDemo)åœ°å€ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶ podfile, åŸºæœ¬ä½¿ç”¨å¦‚ä¸‹ï¼š 12345678source &apos;https://github.com/CocoaPods/Specs.git&apos;platform :ios, &apos;8.0&apos;target &quot;CocosPodsDemo&quot; dopod &apos;AFNetworking&apos;end é¡¹ç›®è·¯å¾„ä¸‹ä½¿ç”¨ pod install å®Œæˆåæ‰“å¼€ CocosPodsDemo.xcworkspace å®Œæˆé¡¹ç›®å¼€å‘. æ›´å¤šä½¿ç”¨æ–¹æ³•è‡ªè¡Œç™¾åº¦ Carthage å®‰è£…ä¸ä½¿ç”¨å®‰è£…12brew updatebrew install carthage æ³¨æ„ å¦‚æœæŠ¥é”™æç¤ºéœ€è¦å®‰è£… Xcode æ’ä»¶ï¼Œxcode-select --install æŸ¥çœ‹ç‰ˆæœ¬1carthage version ä½¿ç”¨example: ä½¿ç”¨ Carthage å¯¼å…¥ AFNetworking åº“ åœ¨é¡¹ç›®(CarthageDemo)åœ°å€ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶ Cartfile, åŸºæœ¬ä½¿ç”¨å¦‚ä¸‹ï¼š 1github &quot;AFNetworking/AFNetworking&quot; ~&gt; 3.0 åœ¨é¡¹ç›®(CarthageDemo)åœ°å€ä¸‹ï¼Œæ‰§è¡Œå‘½ä»¤ 1carthage update --platform iOS æ‰“å¼€ Carthage æŸ¥çœ‹ç”Ÿæˆçš„æ–‡ä»¶ç›®å½• 1open Carthage é…ç½®é¡¹ç›® a. æ‰“å¼€é¡¹ç›®ï¼Œç‚¹å‡» Target -&gt; Build Phases -&gt; Link Library with Libraries é€‰æ‹© Carthage/Build ç›®å½•ä¸­çš„ framework b. æ·»åŠ ç¼–è¯‘çš„è„šæœ¬ï¼ˆè¯¥è„šæœ¬æ–‡ä»¶ä¿è¯åœ¨æäº¤å½’æ¡£æ—¶ä¼šå¯¹ç›¸å…³æ–‡ä»¶å’ŒdSYMsè¿›è¡Œå¤åˆ¶ï¼‰ï¼Œç‚¹å‡» Target -&gt; Build Phases -&gt; + -&gt; New Run Script Phase c. æ·»åŠ è„šæœ¬ï¼Œ/usr/local/bin/carthage copy-frameworks d. æ·»åŠ  &quot;Input Files&quot; $(SRCROOT)/Carthage/Build/iOS/AFNetworking.framework","categories":[],"tags":[{"name":"CocoaPods","slug":"CocoaPods","permalink":"https://kysonyangs.github.io/tags/CocoaPods/"}]},{"title":"Alfredä½¿ç”¨","slug":"Alfredä½¿ç”¨","date":"2017-10-16T07:22:32.000Z","updated":"2020-05-17T08:15:56.590Z","comments":true,"path":"default/Alfredä½¿ç”¨/","link":"","permalink":"https://kysonyangs.github.io/default/Alfredä½¿ç”¨/","excerpt":"è®¾ç½®Alfred å¯åŠ¨åï¼Œç‚¹å‡»å¸½å­å›¾æ ‡ï¼Œé€‰æ‹© Preferences... æ‰“å¼€è®¾ç½®é¢æ¿","text":"è®¾ç½®Alfred å¯åŠ¨åï¼Œç‚¹å‡»å¸½å­å›¾æ ‡ï¼Œé€‰æ‹© Preferences... æ‰“å¼€è®¾ç½®é¢æ¿ General: é€šç”¨è®¾ç½® Startup: æ˜¯å¦åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªå¯åŠ¨Alfredã€‚ç¥å™¨ï¼Œé»˜è®¤å‹¾ä¸Šï¼Œä¸è§£é‡Šã€‚ Alfred Hotkey: è°ƒå‡ºAlfredæ“ä½œç•Œé¢çš„çƒ­é”®ã€‚é»˜è®¤ä¸º Alt + ç©ºæ ¼ã€‚ Where are you: ä½ åœ¨å“ªä¸ªå›½å®¶ã€‚Alfredå†…ç½®äº†å¸¸ç”¨ç½‘ç«™æœç´¢åŠŸèƒ½ï¼Œåœ¨æœç´¢æ—¶æ‰“å¼€å¯¹åº”å›½å®¶çš„ç½‘ç«™ã€‚ Features: ç‰¹æ€§ç•Œé¢ Alfredå‡ ä¹æ‰€æœ‰æœç´¢åŠŸèƒ½éƒ½åœ¨è¿™ä¸ªç•Œé¢è®¾ç½®ã€‚å…è´¹ç”¨æˆ·(æ²¡æœ‰è´­ä¹°Powerpackå¼€å¯Workflows)é‡ç‚¹å…³æ³¨çš„åœ°æ–¹äº†ã€‚ FeaturesåŒ…å«çš„æ‰€æœ‰åŠŸèƒ½ï¼Œæœ¬æ–‡ä¸æ‰“ç®—è®²è§£æ‰€æœ‰çš„åŠŸèƒ½ï¼Œåªè®²è§£æœ€å¸¸ç”¨çš„ã€‚å¦‚ï¼šDefault Resultsã€File Searchã€Web Searchã€Calculatorç­‰ã€‚ Default Results: é»˜è®¤ç»“æœ Essentials: å¯è®¾ç½®æœç´¢â€œåº”ç”¨ç¨‹åºâ€ã€â€œè”ç³»äººâ€ã€â€œè®¾ç½®â€ã€â€œSafariä¹¦ç­¾â€ã€‚ Extras: å¯è®¾ç½®æœç´¢â€œæ–‡ä»¶å¤¹â€ã€â€œæ–‡æœ¬æ–‡ä»¶â€ã€â€œå‹ç¼©æ–‡ä»¶â€ã€â€œä¸ªäººæ–‡æ¡£ç›®å½•â€ã€â€œå›¾ç‰‡â€ã€â€œAppleScriptâ€ç­‰å…¶ä»–æ–‡ä»¶ã€‚ Unintelligent: Search all file types æœç´¢æ‰€æœ‰æ–‡ä»¶ç±»å‹ã€‚è‹¥å‹¾é€‰æ­¤é¡¹ä¸ä½†å½±å“å·¡æŸ¥é€Ÿåº¦ï¼Œè¿˜æ··æ·†é»˜è®¤æœç´¢ç»“æœã€‚Alfredå»ºè®®ç”¨æˆ·ä½¿ç”¨ Find+ç©ºæ ¼+æ–‡ä»¶å æ¥æŸ¥è¯¢æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼›ä½¿ç”¨ Open+ç©ºæ ¼+æ–‡ä»¶å ä¹Ÿå¯ä»¥ã€‚ Search Scope: è®¾ç½®AlfredæŸ¥è¯¢æ—¶ ä¼šæœç´¢çš„æ–‡ä»¶å¤¹èŒƒå›´ï¼Œå¯è‡ªå·±æ·»åŠ å’Œåˆ é™¤ã€‚ Fallbacks: è‹¥ä¸Šé¢çš„æŸ¥è¯¢æœç´¢ä¸åˆ°ç»“æœæ—¶ï¼Œå°±ä¼šè°ƒç”¨è¿™é‡Œè®¾ç½®çš„ç½‘ç«™æˆ–æœç´¢å¼•æ“æ¥è¿›è¡Œè¿›ä¸€æ­¥çš„æŸ¥è¯¢ã€‚ é»˜è®¤åé¦ˆç»“æœä¸º Google ã€Amazonã€Wikipedia ç½‘é¡µæœç´¢ã€‚ å¯ä»¥è‡ªå·±æ·»åŠ æœç´¢å¼•æ“ã€‚ Web Search: ç½‘é¡µæœç´¢ Keyword ä¸º Alfredå‘½ä»¤/å…³é”®å­—ï¼›DisplayText ä¸ºæ­¤æœç´¢åŠŸèƒ½çš„æ ‡é¢˜ï¼›Custom æœ‰å›¾æ ‡è¡¨ç¤ºè¿™ä¸ªä¸ºç”¨æˆ·è‡ªå®šä¹‰ï¼›Enabled ä¸ºæ˜¯å¦å¯ç”¨ã€‚ Alfredç½‘ç«™æœç´¢çš„è®¾ç½®ï¼Œè¿™æ˜¯æœ¬äººä½¿ç”¨æœ€é¢‘ç¹çš„åŠŸèƒ½ã€‚åœ¨å›¾ä¸­å¯çœ‹åˆ°Alfredé»˜è®¤è®¾ç½®äº†å¾ˆå¤šæœç´¢ç½‘ç«™ï¼Œä½†å‡ ä¹éƒ½æ˜¯å›½å¤–ç½‘ç«™ï¼Œå› ä¸ºå¤©æœç‰¹è‰²ï¼Œå¾ˆå¤šéƒ½æ˜¯æˆ‘ä»¬ç”¨ä¸ä¸Šï¼Œå› æ­¤éœ€è¦æ·»åŠ è‡ªå®šä¹‰çš„æœç´¢è®¾ç½®ã€‚ ç‚¹å‡»å³ä¸‹è§’çš„ Add Custom Searchã€‚ æ ¹æ®ä¸‹é¢çš„ç¤ºæ„å›¾åœ¨å¼¹å‡ºç•Œé¢ä¸­è¾“å…¥å¯¹åº”ä¿¡æ¯ï¼Œå…¶ä¸­ç½‘ç«™å›¾æ ‡å¯å¿½ç•¥ï¼Œç„¶åä¿å­˜å³å¯ã€‚ æ¯”å¦‚æˆ‘è‡ªå®šä¹‰çš„ç™¾åº¦æœç´¢ï¼Œä¿¡æ¯å¦‚ä¸‹ï¼š Search URL: https://www.baidu.com/s?ie=utf-8&amp;f=8&amp;rsv_bp=1&amp;ch=&amp;tn=baiduerr&amp;bar=&amp;wd={query} Title: baiduã€‚ Keyword: bdã€‚ Validation: ä¸ºçƒ­çˆ±ç¥–å›½ï¼Œæ­¤é¡¹å¯éšæ„ã€‚ Alfred è¾“å…¥ bd+ç©ºæ ¼+æŸ¥è¯¢å†…å®¹, å›è½¦å³è‡ªåŠ¨æ‰“å¼€ç™¾åº¦è¿›è¡Œæœç´¢ã€‚ åªè¦åœ¨å¯¹åº”çš„ç½‘ç«™ä¸Šæœç´¢ä¸€æ¬¡ï¼Œè®°ä¸‹å½“æ—¶çš„ç½‘å€ï¼Œå¹¶æŠŠå…·ä½“çš„æœç´¢å†…å®¹æ”¹ä¸º {query} å°±å¯ä»¥æ‰¾åˆ°æˆ‘ä»¬è‡ªå®šä¹‰æœç´¢è®¾ç½®ä¸­æ‰€éœ€è¦çš„ Search URL ä¿¡æ¯äº†ã€‚ Calculator: è®¡ç®—å™¨ ç›´æ¥åœ¨Alfred è¾“å…¥ 1+1 å¯ä»¥ç«‹å³å¾—åˆ°ç»“æœ è¾“å…¥ = æ¥è¿›è¡Œå¤æ‚è¿ç®—ï¼ŒAlfredæ”¯æŒå¾ˆå¤šé«˜çº§çš„æ•°å­¦å‡½æ•°ã€‚eg: =sin(1) Clipboard: å‰ªåˆ‡æ¿ å¼€å¯Alfredçš„å‰ªåˆ‡æ¿åŠŸèƒ½ã€‚ æŸ¥çœ‹Alfredå‰ªåˆ‡æ¿å†å²è®°å½•ã€‚é»˜è®¤çƒ­é”®ä¸º Command + Alt + Cã€‚ æ¸…ç©ºAlfredå‰ªåˆ‡æ¿ã€‚åœ¨Alfredæ“ä½œç•Œé¢ä¸­è¾“å…¥ clearã€‚ Advanced: é«˜çº§è®¾ç½® é…ç½®åŒæ­¥ ç‚¹å‡» Set sync folder... è®¾ç½®Alfredé…ç½®å¯¼å‡ºçš„ç›®å½•ã€‚ç‚¹å‡» Reveal in Finder æŸ¥çœ‹Alfredé…ç½®æ‰€åœ¨çš„ç›®å½•ã€‚ åªè¦å°†Alfredé…ç½®å¯¼å‡ºçš„ç›®å½•è®¾ç½®ä¸º Dropbox åŒæ­¥ç›®å½•ï¼Œå°±å¯ä»¥å®ç°äº‘åŒæ­¥ã€‚ Workflow: ç¥å™¨å•Š, è¿™é‡Œæ”¶è—è‡ªå·±ä½¿ç”¨çš„Workflowã€‚Workflow ListWorkflow ListWorkflow packal Github: æ›´ä¾¿æ·åœ°ä½¿ç”¨Github Github Search: åœ¨Alfredä¸Šåˆ—å‡ºGithubçš„æœç´¢ç»“æœ ä½¿ç”¨ï¼šgithub è¦æœç´¢çš„åº“å eg: github YYKit å¯¹æœç´¢ç»“æœæŒ‰å›è½¦ï¼Œæ‰“å¼€Githubç½‘é¡µã€‚ å¯¹æœç´¢ç»“æœæŒ‰Cmd + cï¼Œå¤åˆ¶é“¾æ¥ã€‚ æŒ‰ä½Cmdå†ç‚¹å‡»æœç´¢ç»“æœï¼Œæ‰“å¼€pullè¯·æ±‚ã€‚ æŒ‰ä½Altå†ç‚¹å‡»æœç´¢ç»“æœï¼Œæ‰“å¼€issuesé¡µé¢ã€‚ Stackoverflow: Stackoverflow çš„æŸ¥è¯¢ç»“æœ ä½¿ç”¨ï¼š.so è¦æŸ¥è¯¢çš„é—®é¢˜ eg: .so ios Hash: å“ˆå¸Œå·¥å…·ï¼Œå¯¹å­—ç¬¦ä¸²å’Œæ–‡ä»¶è¿›è¡ŒMD5ã€SHA1ç­‰å¸¸ç”¨å“ˆå¸Œï¼Œå¦å¤–æ”¯æŒBase64ç­‰ã€‚ å¯¹å­—ç¬¦ä¸²è¿›è¡ŒSHA1ï¼šsha1 kyson Copy Path: å°†Finderä¸­æ–‡ä»¶çš„è·¯å¾„å¤åˆ¶åˆ°å‰ªåˆ‡æ¿ä¸­ã€‚(è¯¥ç½‘å€ä¸‹åŒ…å«ä¼—å¤šworkflow) ç‚¹å‡» workflow -&gt; copy path -&gt; hotkey ä¿®æ”¹æ­¤Workflowçš„çƒ­é”®ä¸º Ctrl + Command + Cã€‚ åœ¨Finderä¸­é€‰ä¸­æ–‡ä»¶åæ‰§è¡Œæ­¤çƒ­é”®å³å¯å¤åˆ¶è¯¥æ–‡ä»¶çš„è·¯å¾„ã€‚ CodeVar: ç”Ÿæˆå¯ç”¨çš„ä»£ç å˜é‡ å°é©¼å³°å‘½åæ³•: xt å¤§é©¼å³°å‘½åæ³•: dt ä¸‹åˆ’çº¿å‘½åæ³•: xh å¸¸é‡å‘½åæ³•: cl æœ‰é“è¯å…¸: æœ‰é“è¯å…¸ å¹¶åŒæ­¥åˆ°å•è¯æœ¬ æ”¹å˜é»˜è®¤ç»ˆç«¯ä¸º iTerm é¦–å…ˆå°† Terminal çš„ Application æ”¹å˜ä¸º Customï¼š ç„¶ååœ¨è¾“å…¥æ ä¸­è¾“å…¥ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657on write_to_file(this_data, target_file, append_data) try set the target_file to the target_file as string set the open_target_file to open for access file target_file with write permission if append_data is false then set eof of the open_target_file to 0 write this_data to the open_target_file starting at eof close access the open_target_file return true on error try close access file target_file end try return false end tryend write_to_fileon alfred_script(q) -- Write the command to run to a file. This is done because Applescript quoting is impossible to get right, esp. for backslashes. set tmp_dir to path to temporary items as string from user domain set applescript_alfred_file to tmp_dir &amp; &quot;alfredscript&quot; set alfred_file to POSIX path of applescript_alfred_file write_to_file(q &amp; return, applescript_alfred_file, false) -- Create this file, which prevents iTerm2 from restoring a saved window arrangement. do shell script &quot;touch ~/Library/Application&apos; Support/iTerm/quiet&apos;&quot; -- Test cases: -- 1. iTerm2 running, has windows open. Should open a new window for Alfred command. -- 2. iTerm2 running, no windows open. Should open a new window for Alfred command. -- 3. iTerm2 not running, set to restores arrangement. Should not restore arrangement but open a new window for the Afred command. -- 4. iTerm2 not running. No windows to restore. Should open a single window for the Alfred command. -- 5. iTerm2 not running. Has windows to restore. Restores windows and then opens a new window for the Alfred command. -- Compose a script. This is necessary because compiling in a &apos;tell application&apos; command causes the app to be launched, which would happen prior to the creation of the quiet file. set theScript to &quot;tell application \\&quot;iTerm2.app\\&quot; if (exists current window) then tell current window to create tab with default profile tell current session of current window write contents of file \\&quot;&quot; &amp; alfred_file &amp; &quot;\\&quot; end tell else create window with default profile tell current session of current window write contents of file \\&quot;&quot; &amp; alfred_file &amp; &quot;\\&quot; end tell end if activateend tell&quot; -- Invoke the script. run script theScript -- Clean up-- do shell script &quot;rm -f ~/Library/Application&apos; Support/iTerm/quiet&apos; /tmp/alfredscript&quot;end alfred_script","categories":[],"tags":[{"name":"Mac","slug":"Mac","permalink":"https://kysonyangs.github.io/tags/Mac/"}]},{"title":"iOS MVCã€MVPã€MVVM","slug":"iOSè®¾è®¡æ¨¡å¼","date":"2017-10-16T07:22:32.000Z","updated":"2020-05-16T05:34:17.934Z","comments":true,"path":"default/iOSè®¾è®¡æ¨¡å¼/","link":"","permalink":"https://kysonyangs.github.io/default/iOSè®¾è®¡æ¨¡å¼/","excerpt":"MVC Modelï¼šè´Ÿè´£å°è£…æ•°æ®ï¼Œå­˜å‚¨å’Œå¤„ç†æ•°æ®è¿ç®—ç­‰å·¥ä½œ Viewï¼šè´Ÿè´£æ•°æ®å±•ç¤ºã€ç›‘å¬ç”¨æˆ·è§¦æ‘¸ç­‰æ“ä½œ Controllerï¼šè´Ÿè´£ä¸šåŠ¡é€»è¾‘ã€äº‹ä»¶å“åº”ã€æ•°æ®åŠ å·¥ç­‰å·¥ä½œ ç”¨æˆ·æ“ä½œViewï¼Œåœ¨Controllerå±‚å®Œæˆä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œæ›´æ–°Modelå±‚ï¼Œå°†æ•°æ®æ˜¾ç¤ºåœ¨Viewå±‚ã€‚ ViewæŠŠæ§åˆ¶æƒäº¤ç»™Controllerå±‚ï¼Œè‡ªå·±ä¸æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼›Controllerå±‚æ‰§è¡Œä¸šåŠ¡é€»è¾‘å¹¶ä¸”æ“ä½œModelå±‚ï¼Œä½†ä¸ä¼šç›´æ¥æ“ä½œViewå±‚ï¼›Viewå’ŒModelå±‚çš„åŒæ­¥æ¶ˆæ¯æ˜¯é€šè¿‡è§‚å¯Ÿè€…æ¨¡å¼è¿›è¡Œï¼Œè€ŒåŒæ­¥æ“ä½œæ˜¯ç”±Viewå±‚è‡ªå·±è¯·æ±‚Modelå±‚çš„æ•°æ®ï¼Œç„¶åå¯¹è§†å›¾è¿›è¡Œæ›´æ–°ï¼Œè§‚å¯Ÿè€…æ¨¡å¼å¯ä»¥åšåˆ°å¤šè§†å›¾åŒæ—¶æ›´æ–°ã€‚ ä¼˜ç‚¹ï¼šViewã€Modelå¯ä»¥é‡å¤åˆ©ç”¨ ç¼ºç‚¹ï¼šå¯¼è‡´Controllerè‡ƒè‚¿ï¼Œä»£ç ç‰¹åˆ«å¤šï¼Œè§†å›¾ä¸€å¤æ‚èµ·æ¥ï¼Œä»£ç é‡è¿‡é•¿ï¼Œä¸å¥½ç»´æŠ¤ï¼›å†™åœ¨Controlleré‡ŒViewçš„ä»£ç æ— æ³•å¤ç”¨ï¼›","text":"MVC Modelï¼šè´Ÿè´£å°è£…æ•°æ®ï¼Œå­˜å‚¨å’Œå¤„ç†æ•°æ®è¿ç®—ç­‰å·¥ä½œ Viewï¼šè´Ÿè´£æ•°æ®å±•ç¤ºã€ç›‘å¬ç”¨æˆ·è§¦æ‘¸ç­‰æ“ä½œ Controllerï¼šè´Ÿè´£ä¸šåŠ¡é€»è¾‘ã€äº‹ä»¶å“åº”ã€æ•°æ®åŠ å·¥ç­‰å·¥ä½œ ç”¨æˆ·æ“ä½œViewï¼Œåœ¨Controllerå±‚å®Œæˆä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œæ›´æ–°Modelå±‚ï¼Œå°†æ•°æ®æ˜¾ç¤ºåœ¨Viewå±‚ã€‚ ViewæŠŠæ§åˆ¶æƒäº¤ç»™Controllerå±‚ï¼Œè‡ªå·±ä¸æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼›Controllerå±‚æ‰§è¡Œä¸šåŠ¡é€»è¾‘å¹¶ä¸”æ“ä½œModelå±‚ï¼Œä½†ä¸ä¼šç›´æ¥æ“ä½œViewå±‚ï¼›Viewå’ŒModelå±‚çš„åŒæ­¥æ¶ˆæ¯æ˜¯é€šè¿‡è§‚å¯Ÿè€…æ¨¡å¼è¿›è¡Œï¼Œè€ŒåŒæ­¥æ“ä½œæ˜¯ç”±Viewå±‚è‡ªå·±è¯·æ±‚Modelå±‚çš„æ•°æ®ï¼Œç„¶åå¯¹è§†å›¾è¿›è¡Œæ›´æ–°ï¼Œè§‚å¯Ÿè€…æ¨¡å¼å¯ä»¥åšåˆ°å¤šè§†å›¾åŒæ—¶æ›´æ–°ã€‚ ä¼˜ç‚¹ï¼šViewã€Modelå¯ä»¥é‡å¤åˆ©ç”¨ ç¼ºç‚¹ï¼šå¯¼è‡´Controllerè‡ƒè‚¿ï¼Œä»£ç ç‰¹åˆ«å¤šï¼Œè§†å›¾ä¸€å¤æ‚èµ·æ¥ï¼Œä»£ç é‡è¿‡é•¿ï¼Œä¸å¥½ç»´æŠ¤ï¼›å†™åœ¨Controlleré‡ŒViewçš„ä»£ç æ— æ³•å¤ç”¨ï¼› MVPMVPæ¨¡å¼æ˜¯MVCæ¨¡å¼çš„ä¸€ä¸ªæ¼”åŒ–ç‰ˆæœ¬ Modelï¼šä¸MVCä¸­çš„modelæ²¡æœ‰å¤ªå¤§çš„åŒºåˆ«ã€‚ä¸»è¦æä¾›æ•°æ®çš„å­˜å‚¨åŠŸèƒ½ï¼Œä¸€èˆ¬éƒ½æ˜¯ç”¨æ¥å°è£…ç½‘ç»œè·å–çš„jsonæ•°æ®çš„é›†åˆã€‚Presenteré€šè¿‡è°ƒç”¨Modelè¿›è¡Œå¯¹è±¡äº¤äº’ã€‚ Viewï¼šè¿™ä¸ªViewå¯ä»¥æ˜¯viewcontrollerã€viewç­‰æ§ä»¶ã€‚Viewè´Ÿè´£ç•Œé¢å±•ç¤ºå’Œå¸ƒå±€ç®¡ç†ï¼Œå‘Presenteræš´éœ²è§†å›¾æ›´æ–°å’Œæ•°æ®è·å–çš„æ¥å£ Presenterï¼šä½œä¸ºmodelå’Œviewçš„ä¸­é—´äººï¼Œä»modelå±‚è·å–æ•°æ®ä¹‹åä¼ ç»™viewï¼Œä½¿å¾—Viewå’Œmodelè§£è€¦ã€‚Presentä¸­é—´å±‚è´Ÿè´£UIæ”¹å˜åŠæ—¶æ›´æ–°æ•°æ®ï¼›æ•°æ®çš„æ”¹å˜åŠæ—¶çš„æ›´æ–°UI ç”¨æˆ·æ“ä½œViewï¼Œåœ¨Presenterå±‚å®Œæˆä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œæ›´æ–°Modelå±‚ï¼Œé€šè¿‡Presenterå°†æ•°æ®æ˜¾ç¤ºåœ¨Viewå±‚ï¼Œå®Œå…¨éš”æ–­Modelå’ŒViewä¹‹é—´çš„é€šä¿¡ã€‚ é€šè¿‡æ¥å£çš„æ–¹å¼æ¥è¿æ¥viewå’Œpresenterå±‚ï¼Œè¿™æ ·å¯¼è‡´çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœé¡µé¢è¿‡äºå¤æ‚ï¼Œæˆ‘ä»¬çš„æ¥å£å°±ä¼šå¾ˆå¤šï¼Œä¸ºäº†æ›´å¥½çš„å¤„ç†ç±»ä¼¼çš„é—®é¢˜ï¼Œéœ€è¦å®šä¹‰ä¸€äº›åŸºç±»æ¥å£ï¼ŒæŠŠä¸€äº›å…¬å…±çš„é€»è¾‘ï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚ï¼Œtoastï¼Œæç¤ºæ¡†ç­‰æ”¾åœ¨é‡Œé¢ã€‚å› ä¸ºMVPä¸ä¾èµ–Modelï¼Œæ‰€ä»¥å¯ä»¥æ›´å¥½çš„è¿›è¡Œç»„ä»¶åŒ–ï¼ŒæŠŠå®ƒä»ç‰¹å®šçš„åœºæ™¯ä¸­è„±ç¦»å‡ºæ¥ï¼Œåšåˆ°é«˜åº¦å¤ç”¨ã€‚MVPä¸­çš„Presenteræ›´å¤šçš„ä½œä¸ºæ¡†æ¶çš„æ§åˆ¶è€…ï¼Œæ‰¿æ‹…äº†å¤§é‡çš„é€»è¾‘æ“ä½œã€‚ Controllerå…¶å®å°†viewå’ŒviewControllerä¼ é€’ç»™äº†På±‚, è¿™æ ·På±‚å…¶å®å°±æ‹¥æœ‰äº†æ§åˆ¶å™¨çš„æƒåˆ©, å®Œå…¨å¯ä»¥è¡Œä½¿æ§åˆ¶å™¨çš„èŒè´£. ControlleråˆæŒæœ‰Presenter, é‚£ä¹ˆå®ƒåªéœ€è¦è°ƒç”¨På±‚æš´éœ²å‡ºçš„æ¥å£, å°±å®Œå…¨å¯ä»¥å®Œæˆæ•´ä¸ªä¸šåŠ¡é€»è¾‘å’Œé¡µé¢å±•ç¤º å…³äºCç«¯å’ŒPç«¯çš„å¾ªç¯å¼•ç”¨çš„é—®é¢˜, ç›´æ¥ç”¨weakå…³é”®å­—å°±å¯ä»¥è§£å†³äº† ä¼˜ç‚¹ï¼š æ¨¡å‹ä¸è§†å›¾å®Œå…¨åˆ†ç¦»ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹è§†å›¾è€Œä¸å½±å“æ¨¡å‹ å¯ä»¥æ›´é«˜æ•ˆçš„ä½¿ç”¨æ¨¡å‹ï¼Œå› ä¸ºæ‰€æœ‰çš„äº¤äº’éƒ½åœ¨Presenterå†…éƒ¨ ç¼ºç‚¹ï¼š ç”±äºå¯¹è§†å›¾çš„æ¸²æŸ“éƒ½åœ¨Presenterä¸­ï¼Œæ‰€ä»¥è§†å›¾å’ŒPersenterçš„äº¤äº’ä¼šè¿‡äºé¢‘ç¹ã€‚ MVVMMVVMå’ŒMVPçš„æœ€å¤§åŒºåˆ«æ˜¯é‡‡ç”¨äº†åŒå‘ç»‘å®šæœºåˆ¶ï¼ŒViewçš„å˜åŠ¨ï¼Œè‡ªåŠ¨åæ˜ åœ¨ViewModelä¸Šã€‚ Mï¼šModel: ä½œä¸ºæ•°æ®çš„å®¹å™¨ã€‚ Vï¼šViewã€éƒ¨åˆ†ViewControllerç»„æˆã€‚è´Ÿè´£ç•Œé¢çš„å±•ç¤ºä»¥åŠç”¨æˆ·äº¤äº’çš„å¤„ç†ã€‚ VMï¼šViewModel: è´Ÿè´£ä¸šåŠ¡é€»è¾‘å¤„ç†ã€‚å°±æ˜¯æŠŠåŸæ¥ViewControllerå±‚çš„ä¸šåŠ¡é€»è¾‘å’Œé¡µé¢é€»è¾‘ç­‰å‰¥ç¦»å‡ºæ¥æ”¾åˆ°ViewModelå±‚ ViewæŒæœ‰ViewModelï¼šåœ¨Viewä¸­é€šè¿‡ç»‘å®šçš„æ–¹å¼å…³è”UIå…ƒç´ å’ŒViewModelçš„å±æ€§ï¼ŒUIå…ƒç´ çš„å±æ€§å˜åŒ–å’ŒViewModeçš„æ•°æ®å±æ€§è¿›è¡ŒåŒå‘å½±å“ã€‚ ViewModelæŒæœ‰Modelï¼šModelä¸ºViewModelæä¾›æ•°æ®æ”¯æŒï¼ŒåŒæ—¶ViewModelçš„æ•°æ®å±æ€§å˜åŒ–ä¹Ÿä¼šå½±å“Modelä¸Šï¼Œç”¨äºæ•°æ®æäº¤ç­‰ã€‚ Modelå’ŒViewModelçš„åŠŸèƒ½åŒºåˆ«åœ¨äºï¼ŒViewModelæ˜¯Viewæä¾›æ•°æ®æ”¯æŒçš„ï¼Œå…¶ç»“æ„å’ŒViewä¿æŒä¸€è‡´ã€‚Modelæ¥æºäºä¸šåŠ¡å¤„ç†ï¼Œä¿æŒä¸šåŠ¡æ•°æ®çš„åŸºæœ¬å…³è”å’Œå®Œæ•´æ€§ã€‚ å½“Modelå±‚ç»“æŸæŸ¥è¯¢æˆ–è€…è¿ç®—æ—¶å°†ç»“æœæ›´æ–°åˆ°ViewModelå±‚ï¼ŒViewModelå±‚å› ä¸ºå­˜åœ¨å’ŒViewçš„ç»‘å®šï¼Œä½¿å¾—UIå±‚å¾—åˆ°é€šçŸ¥æ›´æ–°ï¼Œä½“ç°äº†æ•°æ®é©±åŠ¨ç•Œé¢çš„æ€æƒ³ã€‚ ä¼˜ç‚¹ï¼š æ–¹ä¾¿æµ‹è¯• ä¾¿äºä»£ç çš„ç§»æ¤ã€‚ å…¼å®¹MVCã€‚ ç¼ºç‚¹ï¼š ç±»ä¼šå¢å¤šï¼ŒViewModelä¼šè¶Šæ¥è¶Šåºå¤§ï¼Œè°ƒç”¨å¤æ‚åº¦å¢åŠ ã€‚","categories":[],"tags":[]},{"title":"æ–¹æ³•æ›¿æ¢","slug":"iOS æ–¹æ³•æ›¿æ¢","date":"2017-10-05T07:12:36.000Z","updated":"2020-05-17T08:15:03.241Z","comments":true,"path":"default/iOS æ–¹æ³•æ›¿æ¢/","link":"","permalink":"https://kysonyangs.github.io/default/iOS æ–¹æ³•æ›¿æ¢/","excerpt":"","text":"AspectsAspects æ˜¯ä¸€ä¸ªåŸºäº Method Swizzle çš„å‡½æ•°æ›¿æ¢çš„ç¬¬ä¸‰æ–¹åº“ï¼Œæ”¯æŒåœ¨æ–¹æ³•æ‰§è¡Œå‰ï¼ˆAspectPositionBeforeï¼‰/æ‰§è¡Œåï¼ˆAspectPositionAfterï¼‰æˆ–æ›¿ä»£åŸæ–¹æ³•æ‰§è¡Œï¼ˆAspectPositionInsteadï¼‰ ä½¿ç”¨ HOOKä¸€ä¸ªç±»çš„æ‰€æœ‰å®ä¾‹çš„æŒ‡å®šæ–¹æ³• 12345678910111213/// ä¸ºä¸€ä¸ªæŒ‡å®šçš„ç±»çš„æŸä¸ªæ–¹æ³•æ‰§è¡Œå‰/æ›¿æ¢/å,æ·»åŠ ä¸€æ®µä»£ç å—.å¯¹è¿™ä¸ªç±»çš„æ‰€æœ‰å¯¹è±¡éƒ½ä¼šèµ·ä½œç”¨.////// @param block æ–¹æ³•è¢«æ·»åŠ é’©å­æ—¶,Aspectesä¼šæ‹·è´æ–¹æ³•çš„ç­¾åä¿¡æ¯./// ç¬¬ä¸€ä¸ªå‚æ•°å°†ä¼šæ˜¯ `id&lt;AspectInfo&gt;`,ä½™ä¸‹çš„å‚æ•°æ˜¯æ­¤è¢«è°ƒç”¨çš„æ–¹æ³•çš„å‚æ•°./// è¿™äº›å‚æ•°æ˜¯å¯é€‰çš„,å¹¶å°†è¢«ç”¨äºä¼ é€’ç»™blockä»£ç å—å¯¹åº”ä½ç½®çš„å‚æ•°./// ä½ ç”šè‡³ä½¿ç”¨ä¸€ä¸ªæ²¡æœ‰ä»»ä½•å‚æ•°æˆ–åªæœ‰ä¸€ä¸ª`id&lt;AspectInfo&gt;`å‚æ•°çš„blockä»£ç å—.////// @æ³¨æ„ ä¸æ”¯æŒç»™é™æ€æ–¹æ³•æ·»åŠ é’©å­./// @return è¿”å›ä¸€ä¸ªå”¯ä¸€å€¼,ç”¨äºå–æ¶ˆæ­¤é’©å­.+ (id&lt;AspectToken&gt;)aspect_hookSelector:(SEL)selector withOptions:(AspectOptions)options usingBlock:(id)block error:(NSError **)error; HOOKä¸€ä¸ªç±»å®ä¾‹çš„æŒ‡å®šæ–¹æ³• 12345/// ä¸ºä¸€ä¸ªæŒ‡å®šçš„å¯¹è±¡çš„æŸä¸ªæ–¹æ³•æ‰§è¡Œå‰/æ›¿æ¢/å,æ·»åŠ ä¸€æ®µä»£ç å—.åªä½œç”¨äºå½“å‰å¯¹è±¡.- (id&lt;AspectToken&gt;)aspect_hookSelector:(SEL)selector withOptions:(AspectOptions)options usingBlock:(id)block error:(NSError **)error; Example 123456789101112131415161718192021222324252627+(void)Aspect &#123; // åœ¨ç±»UIViewControlleræ‰€æœ‰çš„å®ä¾‹æ‰§è¡ŒviewWillAppear:æ–¹æ³•å®Œæ¯•ååšä¸€äº›äº‹æƒ… [UIViewController aspect_hookSelector:@selector(viewWillAppear:) withOptions:AspectPositionAfter usingBlock:^(id&lt;AspectInfo&gt; info) &#123; NSString *className = NSStringFromClass([[info instance] class]); NSLog(@&quot;%@&quot;, className); &#125; error:NULL]; // åœ¨å®ä¾‹myVcæ‰§è¡ŒviewWillAppear:æ–¹æ³•å®Œæ¯•ååšä¸€äº›äº‹æƒ… UIViewController* myVc = [[UIViewController alloc] init]; [myVc aspect_hookSelector:@selector(viewWillAppear:) withOptions:AspectPositionAfter usingBlock:^(id&lt;AspectInfo&gt; info) &#123; id instance = info.instance; //è°ƒç”¨çš„å®ä¾‹å¯¹è±¡ id invocation = info.originalInvocation; //åŸå§‹çš„æ–¹æ³• id arguments = info.arguments; //å‚æ•° [invocation invoke]; //åŸå§‹çš„æ–¹æ³•ï¼Œå†æ¬¡è°ƒç”¨ &#125; error:NULL]; // HOOKç±»æ–¹æ³• Class metalClass = objc_getMetaClass(NSStringFromClass(UIViewController.class).UTF8String); [metalClass aspect_hookSelector:@selector(ClassMethod) withOptions:AspectPositionAfter usingBlock:^(id&lt;AspectInfo&gt; info) &#123; NSLog(@&quot;%@&quot;, HOOKç±»æ–¹æ³•); &#125; error:NULL];&#125;","categories":[],"tags":[{"name":"Runtime","slug":"Runtime","permalink":"https://kysonyangs.github.io/tags/Runtime/"}]},{"title":"SwiftæŠ€å·§","slug":"SwiftæŠ€å·§","date":"2017-10-03T07:33:46.000Z","updated":"2020-05-17T08:12:07.679Z","comments":true,"path":"default/SwiftæŠ€å·§/","link":"","permalink":"https://kysonyangs.github.io/default/SwiftæŠ€å·§/","excerpt":"cellåˆ†å‰²çº¿ç½®é¡¶1tableView.separatorInset = UIEdgeInsets.zero Swiftä¸­lazyä½œæƒ°æ€§æ±‚å€¼å‡½æ•°å¼ç¼–ç¨‹ä¸­æœ‰æƒ°æ€§æ±‚å€¼çš„æ¦‚å¿µï¼Œå³ä¸€æ¬¡è®¡ç®—åœ¨çœŸæ­£éœ€è¦æ—¶æ‰æ‰§è¡Œï¼Œå°½å¯èƒ½æ¨è¿Ÿæ±‚è§£è¡¨è¾¾å¼ã€‚å‡å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œæˆ‘ä»¬å¯¹æ¯ä¸ªå…ƒç´ ä½œ element*2 çš„ map æ“ä½œï¼Œè·å–å…¶ä¸­æŸä¸€ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬ä¼šå¦‚ä¸‹ä»£ç å¤„ç†:123let array = [1, 2, 4, 5, 3, 7]let element = array.map&#123; $0 * 2 &#125;[3]print(element) è¿™ä¸ªè®¡ç®—å¯¹æ¯ä¸ªå…ƒç´ éƒ½*2ï¼Œæœ€åæˆ‘ä»¬åªå–äº†å…¶ä¸­ä¸€ä¸ªå€¼ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨è¿™ä¸ªåœºæ™¯ä¸­å¦å¤–5æ¬¡è®¡ç®—æ˜¯æ— æ„ä¹‰çš„ã€‚ è¿™æ—¶ä½¿ç”¨æƒ°æ€§æ±‚å€¼å°±å¯ä»¥é¿å…è¿™ç®—æµªè´¹ã€‚æˆ‘ä»¬çŸ¥é“Swiftä¸­æœ‰ä¸ªlazyå…³é”®å­—ï¼Œå¦‚æœç”¨æ¥ä¿®é¥°å±æ€§ä¹‹ç±»çš„ï¼Œå¯ä»¥å®ç°å±æ€§çš„æƒ°æ€§æ±‚å€¼ã€‚åŒæ ·ï¼ŒSwiftæ‰©å±•äº†LazySequenceProtocolåè®®ï¼Œæä¾›äº†ä¸€ä¸ªlazyå±æ€§ï¼Œç”¨äºå¤„ç†mapï¼Œfilterç­‰æ“ä½œçš„æƒ°æ€§æ±‚å€¼ï¼Œå®šä¹‰å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š1234extension LazySequenceProtocol &#123; /// Identical to `self`. public var lazy: Self &#123; get &#125;&#125; æ‰€ä»¥ï¼Œä¸Šé¢è¿™ä¸ªä¾‹å­å¦‚æœè¦å®ç°æƒ°æ€§æ±‚å€¼ï¼Œåˆ™å¯ä»¥å¦‚ä¸‹ä»£ç å¤„ç†ï¼š123let array = [1, 2, 4, 5, 3, 7]let element = array.lazy.map&#123; $0 * 2 &#125;[3]print(element)","text":"cellåˆ†å‰²çº¿ç½®é¡¶1tableView.separatorInset = UIEdgeInsets.zero Swiftä¸­lazyä½œæƒ°æ€§æ±‚å€¼å‡½æ•°å¼ç¼–ç¨‹ä¸­æœ‰æƒ°æ€§æ±‚å€¼çš„æ¦‚å¿µï¼Œå³ä¸€æ¬¡è®¡ç®—åœ¨çœŸæ­£éœ€è¦æ—¶æ‰æ‰§è¡Œï¼Œå°½å¯èƒ½æ¨è¿Ÿæ±‚è§£è¡¨è¾¾å¼ã€‚å‡å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œæˆ‘ä»¬å¯¹æ¯ä¸ªå…ƒç´ ä½œ element*2 çš„ map æ“ä½œï¼Œè·å–å…¶ä¸­æŸä¸€ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬ä¼šå¦‚ä¸‹ä»£ç å¤„ç†:123let array = [1, 2, 4, 5, 3, 7]let element = array.map&#123; $0 * 2 &#125;[3]print(element) è¿™ä¸ªè®¡ç®—å¯¹æ¯ä¸ªå…ƒç´ éƒ½*2ï¼Œæœ€åæˆ‘ä»¬åªå–äº†å…¶ä¸­ä¸€ä¸ªå€¼ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨è¿™ä¸ªåœºæ™¯ä¸­å¦å¤–5æ¬¡è®¡ç®—æ˜¯æ— æ„ä¹‰çš„ã€‚ è¿™æ—¶ä½¿ç”¨æƒ°æ€§æ±‚å€¼å°±å¯ä»¥é¿å…è¿™ç®—æµªè´¹ã€‚æˆ‘ä»¬çŸ¥é“Swiftä¸­æœ‰ä¸ªlazyå…³é”®å­—ï¼Œå¦‚æœç”¨æ¥ä¿®é¥°å±æ€§ä¹‹ç±»çš„ï¼Œå¯ä»¥å®ç°å±æ€§çš„æƒ°æ€§æ±‚å€¼ã€‚åŒæ ·ï¼ŒSwiftæ‰©å±•äº†LazySequenceProtocolåè®®ï¼Œæä¾›äº†ä¸€ä¸ªlazyå±æ€§ï¼Œç”¨äºå¤„ç†mapï¼Œfilterç­‰æ“ä½œçš„æƒ°æ€§æ±‚å€¼ï¼Œå®šä¹‰å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š1234extension LazySequenceProtocol &#123; /// Identical to `self`. public var lazy: Self &#123; get &#125;&#125; æ‰€ä»¥ï¼Œä¸Šé¢è¿™ä¸ªä¾‹å­å¦‚æœè¦å®ç°æƒ°æ€§æ±‚å€¼ï¼Œåˆ™å¯ä»¥å¦‚ä¸‹ä»£ç å¤„ç†ï¼š123let array = [1, 2, 4, 5, 3, 7]let element = array.lazy.map&#123; $0 * 2 &#125;[3]print(element) Swiftçš„strideæ“ä½œåˆ›å»ºä¸€ä¸ªä¸€å®šæ­¥é•¿çš„æ•°ç»„, Swiftæä¾›äº†ä¸€ä¸ªä¾¿æ·å‡½æ•°ï¼šstrideï¼Œå¯ä»¥åœ¨æŸä¸ªåŒºé—´å†…åˆ›å»ºä¸€ä¸ªä»»æ„å¯å˜æ­¥é•¿çš„åºåˆ—ï¼Œè¿™ä¸ªæ­¥é•¿å¯ä»¥æ˜¯ä»»æ„å€¼ã€‚123let array = stride(from: 0, to: 3, by: 0.3).map &#123; $0&#125; strideæœ‰ä¸¤ä¸ªå˜ç§ï¼š stride(from:to:by)ï¼Œå¼€åŒºé—´å¤„ç†ï¼Œæœ€åä¸€ä¸ªå€¼ä¸¥æ ¼å°äºæœ€å¤§å€¼ï¼› stride(from:through:by)ï¼Œé—­åŒºé—´å¤„ç†ï¼Œæœ€åä¸€ä¸ªå€¼å°äºæˆ–ç­‰äºæœ€å¤§å€¼ staticæ–¹æ³•ä¸classæ–¹æ³•çš„åŒºåˆ«staticå’Œclassè¿™ä¸¤ä¸ªå…³é”®å­—éƒ½å¯ä»¥ä¿®é¥°ç±»çš„æ–¹æ³•ï¼Œä»¥è¡¨æ˜è¿™ä¸ªæ–¹æ³•æ˜¯ä¸€ä¸ªç±»æ–¹æ³•ã€‚ä¸è¿‡è¿™ä¸¤è€…ç¨å¾®æœ‰ä¸€äº›åŒºåˆ«ï¼šclassä¿®é¥°çš„ç±»æ–¹æ³•å¯ä»¥è¢«å­ç±»é‡å†™ï¼Œè€Œstaticä¿®é¥°çš„ç±»æ–¹æ³•åˆ™ä¸èƒ½ã€‚ Swiftä¸­çš„å‡½æ•°å€¼åœ¨Swiftä¸­ï¼Œå‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œå³å‡½æ•°ä¹Ÿæ˜¯ä¸€ç§ç±»å‹ï¼Œå¯å……å½“å‚æ•°ã€è¿”å›å€¼ç­‰è§’è‰²ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å®šä¹‰å‡½æ•°ç±»å‹çš„å¸¸é‡/å˜é‡ã€‚åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹å¯ä»¥ç®€åŒ–æˆ‘ä»¬çš„ä»£ç ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š12345let setInt: (Int, String) -&gt; Void = UserDefaults.standard.setlet getInt: (String) -&gt; Int = UserDefaults.standard.integersetInt(10, &quot;key&quot;)print(getInt(&quot;key&quot;)) Array.containsæ“ä½œSwiftä¸­åˆ¤æ–­ä¸€ä¸ªArrayä¸­æ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨containsæ–¹æ³•ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š12let array = [2, 5, 6, 7, 19, 40]array.contains(10) // false ä¸è¿‡è¿™ä¸ªæ–¹æ³•è¦æ±‚æ•°ç»„ä¸­çš„å…ƒç´ ç±»å‹å®ç°äº†Equatableåè®®ï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š1234567enum Animal &#123; case dog case cat(Int)&#125;let animals: [Animal] = [.dog, .dog]let hasCat = animals.contains(.cat(100)) // ç¼–è¯‘å™¨é”™è¯¯ è¿˜å¥½Swiftä¸ºæˆ‘ä»¬æä¾›äº†å¦ä¸€ä¸ªcontainsæ–¹æ³•ï¼Œå¯ä»¥è‡ªå®šä¹‰è°“è¯æ¡ä»¶ä½œä¸ºåˆ¤æ–­ä¾æ®ï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š1public func contains(where predicate: (Element) throws -&gt; Bool) rethrows -&gt; Bool è¿™ä¸ªæ–¹æ³•ä¼šæŸ¥çœ‹æ•°ç»„æ˜¯å¦åŒ…å«æ»¡è¶³ç»™å®šçš„è°“è¯æ¡ä»¶çš„å…ƒç´ ã€‚å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ–¹æ³•æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œå…¶å‚æ•°æ˜¯ä¸€ä¸ªå°¾éšé—­åŒ…ï¼Œåœ¨é—­åŒ…å†…æˆ‘ä»¬å¯ä»¥æ ¹æ®å®é™…éœ€è¦æ¥å®ç°æˆ‘ä»¬è‡ªå·±çš„åˆ¤æ–­ã€‚æ‰€ä»¥ä¸Šé¢çš„åˆ¤æ–­å¯ä»¥å¦‚ä¸‹ä»£ç å®ç°ï¼š1234567891011121314enum Animal &#123; case dog case cat(Int)&#125;let animals: [Animal] = [.dog, .dog]let hasCat = animals.contains &#123; animal in if case .cat = animal &#123; return true &#125; else &#123; return false &#125;&#125; å½“ç„¶ï¼Œå¯¹äºå…ƒç´ ç±»å‹å®ç°äº†Equatableåè®®çš„æ•°ç»„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ã€‚å¯ä»¥è‡ªå®šä¹‰è°“è¯æ¡ä»¶ï¼ŒæŸ¥çœ‹æ•°ç»„æ˜¯å¦æœ‰æ»¡è¶³æ­¤æ¡ä»¶çš„å…ƒç´ ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š12345let array = [2, 5, 6, 7, 19, 40]array.contains &#123; (element) -&gt; Bool in element % 7 == 0&#125; filterä¸flatMapè¿‡æ»¤nilä½¿ç”¨é«˜é˜¶å‡½æ•°è¿‡æ»¤ä¸€ä¸ªæ•°ç»„ä¸­çš„nilå¯ä»¥æœ‰ä¸¤ç§æ–¹æ³•ï¼šfilterå’ŒflatMapã€‚filteræ–¹æ³•å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š1234567let array: [Int?] = [1, 2, 3, 5, nil, 9]let result = array.filter &#123; element in element != nil&#125;print(result) // [Optional(1), Optional(2), Optional(3), Optional(5), Optional(9)] flatMapæ–¹æ³•å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š123456let array: [Int?] = [1, 2, 3, 5, nil, 9]let result: [Int] = array.flatMap &#123; $0&#125;print(result) // [1, 2, 3, 5, 9] ä»è¾“å‡ºå¯ä»¥çœ‹å‡ºï¼Œfilterè¿”å›çš„ä»ç„¶æ˜¯ä¸€ä¸ªOptionalæ•°ç»„ï¼Œè€ŒflatMapè¿”å›çš„æ˜¯ä¸€ä¸ªéOptionalæ•°ç»„ã€‚ä¸€èˆ¬æ¨èä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•ã€‚ Extension-Selectoråœ¨Swiftä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨#selectorè®¾ç½®target-actionæ¨¡å¼ä¸­çš„actionæ“ä½œï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š1button.addTarget(self, action: #selector(buttonTapped), for: .touchUpInside) å¦‚æœä½ æœ‰ä»£ç æ´ç™–ï¼Œæƒ³æŠŠ#selectoré›†ä¸­èµ·æ¥ç®¡ç†ï¼Œåˆ™å¯ä»¥å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ï¼Œæ¥ç»Ÿä¸€å½’é›†è¿™æ ·çš„ä»£ç ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚è¿™æ ·çœ‹ç€æ˜¯ä¸æ˜¯ä¼šæ›´æ•´æ´ä¸€äº›ï¼Ÿ1234fileprivate struct Action &#123; static let buttonTapped = #selector(ViewController.buttonTapped)&#125;button.addTarget(self, action: Action.buttonTapped, for: .touchUpInside) ä¸è¿‡ï¼Œè¿˜æœ‰ç§æ›´å¥½çš„æ–¹å¼ï¼Œå°±æ˜¯ç›´æ¥æ‰©å±•Selectorç»“æ„ä½“ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼Œè¿™æ ·å¯ä»¥åœ¨ä½¿ç”¨æ—¶ç›´æ¥ç”¨.buttonTappedè¿™ç§æ–¹å¼æ¥å¼•ç”¨ï¼Œå°±åƒæˆ‘ä»¬ä½¿ç”¨.redè¿™æ ·çš„UIColorå±æ€§ä¸€æ ·ç®€æ´ã€‚1234extension Selector &#123; static let buttonTapped = #selector(ViewController.buttonTapped)&#125;button.addTarget(self, action: .buttonTapped, for: .touchUpInside) typealiasæ³›å‹é—­åŒ…åœ¨ Swift ä¸­æˆ‘ä»¬å¯ä»¥ç”¨ typealias æ¥ä¸ºå·²ç»å­˜åœ¨çš„ç±»å‹é‡æ–°å®šä¹‰åå­—çš„,é€šè¿‡å‘½åå¯ä»¥ä½¿ä»£ç å˜å¾—æ›´åŠ æ¸…æ™°ã€‚å½“ç„¶ä¹Ÿå¯ä»¥ç»™é—­åŒ…ç±»å‹å®šä¹‰ä¸€ä¸ªæ–°åå­—ï¼Œç»™å¸¦æœ‰æ³›å‹çš„é—­åŒ…é‡æ–°å®šä¹‰åå­—çš„æ–¹å¼å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š123456789typealias Block&lt;U&gt; = (U, U) -&gt; Boolfunc compare&lt;T: Comparable&gt;(number1: T, number2: T, algorithm: Block&lt;T&gt;) -&gt; Bool &#123; return algorithm(number1, number2)&#125;compare(number1: 10, number2: 20) &#123; $0 &lt; $1&#125; Swiftè‡ªå®šä¹‰æ“ä½œç¬¦åœ¨Swiftä¸­ï¼Œè‡ªå®šä¹‰æ“ä½œç¬¦å°±æ˜¯ç®€å•çš„äºŒæ­¥ï¼šé¦–å…ˆåœ¨å…¨å±€ä½¿ç”¨operatorå…³é”®å­—æ¥å£°æ˜æ“ä½œç¬¦ï¼ŒåŒæ—¶ç”¨prefixã€infixæˆ–postfixæ¥å£°æ˜æ“ä½œç¬¦çš„ä½ç½®ï¼›ç„¶ååœ¨æ‰€éœ€è¦çš„ç±»/ç»“æ„ä½“ä¸­å®ç°æ“ä½œç¬¦ã€‚å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š123456789101112postfix operator &gt;?postfix operator &gt;!extension MIType &#123; public static postfix func &gt;?(type: MIType) -&gt; MIType &#123; return MIType(&quot;Optional&lt;\\(type.name)&gt;&quot;) &#125; public static postfix func &gt;!(type: MIType) -&gt; MIType &#123; return MIType(&quot;ImplicitlyUnwrappedOptional&lt;\\(type.name)&gt;&quot;) &#125;&#125; è‡ªå®šä¹‰æ“ä½œç¬¦éœ€è¦ä»¥ä¸¤ç±»å­—ç¬¦å¼€å¤´ï¼š ASCIIå­—ç¬¦ä¸­çš„ /, =, -, +, !, *, %, &lt;, &gt;, &amp;, |, ^, ?, ~ Unicode ä¸­çš„ Mathematical Operators, Miscellaneous Symbolså’ŒDingbats Unicode blocksè¿™äº›å­—ç¬¦ä¸­çš„å­—ç¬¦ ç„¶ååé¢å…è®¸ä½¿ç”¨ç»„åˆçš„Unicodeå­—ç¬¦ã€‚å¦‚ä¸‹ä»£ç æ˜¯ä»¥ä¸€ä¸ªMiscellaneous Symbolså¼€å¤´çš„å®ç°å‘é‡åŠ æ³•çš„æ“ä½œç¬¦ã€‚1234567891011121314151617181920infix operator â˜…+struct Vector2D &#123; var x: CGFloat var y: CGFloat&#125;extension Vector2D &#123; static func â˜…+ (left: Vector2D, right: Vector2D) -&gt; Vector2D &#123; return Vector2D(x: left.x + right.x, y: left.y + right.y) &#125;&#125;let vector1 = Vector2D(x: 10, y: 20)let vector2 = Vector2D(x: 30, y: 10)let vector = vector1 â˜…+ vector2vector.x // 40.0vector.y // 30.0 è‡ªå®šä¹‰æ“ä½œç¬¦ä¸­çš„.åœ¨è‡ªå®šä¹‰æ“ä½œç¬¦æ—¶ï¼Œå¯ä»¥ä»¥dot(.)å¼€å¤´ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œæ“ä½œç¬¦åé¢è¿˜å¯ä»¥åŒ…å«å…¶å®ƒçš„dot(.)ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š1234567891011121314151617181920infix operator .+.struct Vector2D &#123; var x: CGFloat var y: CGFloat&#125;extension Vector2D &#123; static func .+.(left: Vector2D, right: Vector2D) -&gt; Vector2D &#123; return Vector2D(x: left.x + right.x, y: left.y + right.y) &#125;&#125;let vector1 = Vector2D(x: 10, y: 20)let vector2 = Vector2D(x: 30, y: 10)let vector = vector1 .+. vector2vector.xvector.y ä½†å¦‚æœæ“ä½œç¬¦ä¸æ˜¯ä»¥dotå¼€å¤´ï¼Œåˆ™åé¢ä¸èƒ½å†åŒ…å«dotï¼Œå¦‚operator +.+è¿™ä¸ªå£°æ˜ä¼šè¢«çœ‹æˆæ˜¯â€+â€æ“ä½œç¬¦åé¢è·Ÿäº†ä¸ªâ€.+â€æ“ä½œç¬¦ã€‚ç¼–è¯‘å™¨ä¼šç»™å‡ºå¦‚ä¸‹é”™è¯¯æç¤ºï¼š1infix operator +.+ // error: operator with postfix spacing cannot start a subexpression Swiftä¸­æ“ä½œç¬¦ä¼˜å…ˆçº§Swift 3ä¸­æ”¹è¿›äº†æ“ä½œç¬¦çš„ä¼˜å…ˆçº§åŠç»“åˆæ€§çš„å£°æ˜æ–¹å¼ã€‚åœ¨Swift 3ä¹‹å‰ï¼Œæ˜¯ä½¿ç”¨magic numbers(é­”æ•°)çš„æ–¹å¼æ¥å£°æ˜æ“ä½œç¬¦çš„ä¼˜å…ˆçº§ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š1234infix operator &lt;~ &#123; associativity left precedence 125&#125; magic numbersæ€»å½’æ˜¯ä¸€ä¸ªä¸å¥½çš„ä¸œè¥¿ï¼Œæ‰€ä»¥Swift 3æ”¹ç”¨precedence groups(ä¼˜å…ˆçº§ç»„)çš„æ–¹å¼æ¥å£°æ˜æ“ä½œç¬¦çš„ä¼˜å…ˆçº§ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š1234567precedencegroup Equivalence &#123; associativity: left higherThan: LogicalConjunctionPrecedence lowerThan: ComparisonPrecedence&#125;infix operator ~ : Equivalence ç³»ç»Ÿä¸ºæˆ‘ä»¬æä¾›äº†ä¸€äº›é»˜è®¤çš„precedence groupsï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243precedencegroup AssignmentPrecedence &#123; assignment: true associativity: right&#125;precedencegroup TernaryPrecedence &#123; associativity: right higherThan: AssignmentPrecedence&#125;precedencegroup DefaultPrecedence &#123; higherThan: TernaryPrecedence&#125;precedencegroup LogicalDisjunctionPrecedence &#123; associativity: left higherThan: TernaryPrecedence&#125;precedencegroup LogicalConjunctionPrecedence &#123; associativity: left higherThan: LogicalDisjunctionPrecedence&#125;precedencegroup ComparisonPrecedence &#123; higherThan: LogicalConjunctionPrecedence&#125;precedencegroup NilCoalescingPrecedence &#123; associativity: right higherThan: ComparisonPrecedence&#125;precedencegroup CastingPrecedence &#123; higherThan: NilCoalescingPrecedence&#125;precedencegroup RangeFormationPrecedence &#123; higherThan: CastingPrecedence&#125;precedencegroup AdditionPrecedence &#123; associativity: left higherThan: RangeFormationPrecedence&#125;precedencegroup MultiplicationPrecedence &#123; associativity: left higherThan: AdditionPrecedence&#125;precedencegroup BitwiseShiftPrecedence &#123; higherThan: MultiplicationPrecedence&#125; wiftæ‰“å°å¯¹è±¡çš„åœ°å€åœ¨Swiftä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ withUnsafePointer(to:_:) å‡½æ•°æ¥è·å–ä¸€ä¸ªå˜é‡çš„æŒ‡é’ˆï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š123456789101112131415var x = 42var y = 3.14var z = &quot;foo&quot;var obj = NSObject()withUnsafePointer(to: &amp;x) &#123;ptr in print(ptr)&#125;withUnsafePointer(to: &amp;y) &#123;ptr in print(ptr)&#125;withUnsafePointer(to: &amp;z) &#123;ptr in print(ptr)&#125;withUnsafePointer(to: &amp;obj) &#123;ptr in print(ptr)&#125;// è¾“å‡º// 0x000000011a145660// 0x000000011a145668// 0x000000011a145670// 0x000000011a145688 withUnsafePointer(to:_:) å°†ç¬¬ä¸€ä¸ªå‚æ•°è½¬æ¢ä¸ºæŒ‡é’ˆï¼Œç„¶åå°†è¿™ä¸ªæŒ‡é’ˆä½œä¸ºå‚æ•°å»è°ƒç”¨ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šçš„é—­åŒ…ã€‚å¦‚æœé—­åŒ…æœ‰è¿”å›å€¼ï¼Œå®ƒå°†ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œï¿½ç”Ÿæˆçš„æŒ‡é’ˆçš„ç”Ÿå‘½å‘¨æœŸé™å®šäºé—­åŒ…å†…éƒ¨ï¼Œä¸èƒ½å°†å…¶æŒ‡å®šç»™å¤–éƒ¨çš„å˜é‡ã€‚ ç¬¬äºŒç§æ‰“å°å˜é‡çš„æŒ‡é’ˆçš„æ–¹å¼å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š12345678910111213141516171819var x = 42var y = 3.14var z = &quot;foo&quot;var obj = NSObject()func printPointer&lt;T&gt;(ptr: UnsafePointer&lt;T&gt;) &#123; print(ptr)&#125;printPointer(ptr: &amp;x)printPointer(ptr: &amp;y)printPointer(ptr: &amp;z)printPointer(ptr: &amp;obj)// è¾“å‡º// 0x000000011a145660// 0x000000011a145668// 0x000000011a145670// 0x000000011a145688 ArraySliceçš„ç”¨é€”Swiftæä¾›äº†ArraySliceæ¥æ‰§è¡Œæ•°ç»„çš„åˆ‡ç‰‡æ“ä½œã€‚ç±»ä¼¼äºå…¶å®ƒè¯­è¨€ä¸­çš„åˆ‡ç‰‡(å¦‚Python)ï¼ŒArraySliceå¯¹è±¡å¤ç”¨äº†åŸå§‹æ•°ç»„çš„å­˜å‚¨ç»“æ„ï¼Œè€Œä¸æ˜¯æ–°å¼€è¾Ÿä¸€å—å†…å­˜åŒºåŸŸæ¥å°†æ•°ç»„ç‰‡æ–­çš„å…ƒç´ æ‹·è´è¿‡æ¥ã€‚å› æ­¤ï¼Œå®ƒèƒ½è®©æˆ‘ä»¬å¿«é€Ÿé«˜æ•ˆåœ°å¯¹å¤§æ•°ç»„çš„ç‰‡æ®µæ‰§è¡Œæ“ä½œã€‚å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š1234567891011121314var array: [Int] = []for i in 0..&lt;1000 &#123; array.append(i)&#125;let slice = array[100..&lt;300]let result = slice.map &#123; $0 * 2&#125;.reduce(0) &#123; $0 + $1&#125;print(result) // 79800 ArraySliceä¸Arrayæœ‰ç›¸åŒçš„æ¥å£ï¼Œæ‰€ä»¥é€šå¸¸å¯ä»¥åœ¨åˆ‡ç‰‡æ•°ç»„ä¸Šæ‰§è¡Œä¸åŸå§‹æ•°ç»„ç›¸åŒçš„æ“ä½œã€‚æ³¨æ„ ArraySliceä¼šç»´æŒå¯¹åŸå§‹æ•°ç»„çš„ä¸€ä¸ªå¼ºå¼•ç”¨ï¼Œè€Œä¸ä»…ä»…æ˜¯å®ƒæ‰€è¡¨ç¤ºçš„ç‰‡æ–­ã€‚è¿™æ ·å³ä½¿åŸå§‹æ•°ç»„å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç»“æŸäº†ï¼Œä¹Ÿå¯èƒ½æ— æ³•é‡Šæ”¾ã€‚æ‰€ä»¥ä¸å»ºè®®é•¿æœŸå­˜å‚¨ArraySliceå¯¹è±¡ï¼Œä»…ç”¨äºä¸´æ—¶æ“ä½œã€‚ ä¸Arrayä¸åŒçš„æ˜¯ï¼ŒArraySliceèµ·å§‹ç´¢å¼•ä¸ä¸€å®šæ˜¯0ï¼Œè€Œæ˜¯å–å†³äºå…¶åˆ›å»ºæ–¹å¼ã€‚ä¸€èˆ¬æ˜¯é‡‡ç”¨å…±äº«ç´¢å¼•çš„æ–¹å¼ï¼Œå³ArraySliceå¯¹è±¡çš„èµ·å§‹ç´¢å¼•å°±æ˜¯åˆ‡ç‰‡çš„å¼€å§‹ä½ç½®ï¼Œå¦‚ä»£ç æ¸…å•8-2-2æ‰€ç¤ºï¼Œåˆ‡ç‰‡æ˜¯ä»100å¼€å§‹ï¼Œæ‰€ä»¥slice[100]æ˜¯OKçš„ï¼Œè€Œslice[99]ä¼šæŠ¥è¶Šç•Œé”™è¯¯ã€‚é€šå¸¸å»ºè®®ä½¿ç”¨startIndexå’ŒendIndexæ¥å–ä»£æŒ‡å®šçš„ç´¢å¼•å€¼.","categories":[],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://kysonyangs.github.io/tags/Swift/"}]},{"title":"å¯¼å‡ºp12æ–‡ä»¶","slug":"å¯¼å‡ºp12æ–‡ä»¶","date":"2017-06-20T07:12:36.000Z","updated":"2020-05-17T08:16:24.590Z","comments":true,"path":"default/å¯¼å‡ºp12æ–‡ä»¶/","link":"","permalink":"https://kysonyangs.github.io/default/å¯¼å‡ºp12æ–‡ä»¶/","excerpt":"","text":"ä¸ºä»€ä¹ˆè¦å¯¼å‡º.p12æ–‡ä»¶ï¼Ÿå½“æˆ‘ä»¬ç”¨å¤§äºç­‰äºä¸‰ä¸ªMACè®¾å¤‡å¼€å‘åº”ç”¨æ—¶ï¼Œæƒ³è¦ç”³è¯·æ–°çš„è¯ä¹¦ï¼Œå¦‚æœåœ¨æˆ‘ä»¬çš„è¯ä¹¦é‡Œï¼ŒåŒ…å«äº†2ä¸ªå‘å¸ƒè¯ä¹¦ï¼Œ2ä¸ªå¼€å‘è¯ä¹¦ï¼Œå¯ä»¥å‘ç°å†ä¹Ÿç”³è¯·ä¸äº†å¼€å‘è¯ä¹¦å’Œå‘å¸ƒè¯ä¹¦äº†ï¼ˆä¸€èˆ¬åœ¨æˆ‘ä»¬çš„è¯ä¹¦ç•Œé¢ä¸­åº”è¯¥åªæœ‰ä¸€ä¸ªå¼€å‘è¯ä¹¦ï¼Œä¸€ä¸ªå‘å¸ƒè¯ä¹¦ï¼Œæ²¡å¿…è¦ç”Ÿæˆé‚£ä¹ˆå¤šçš„è¯ä¹¦ï¼Œè¯ä¹¦ä¸€èˆ¬åœ¨è¿‡æœŸä¹‹åæ‰ä¼šé‡æ–°æ·»åŠ ã€‚ï¼‰ å¯¼å‡º.p12æ–‡ä»¶æˆ‘ä»¬çš„æ¯ä¸€ä¸ªè¯ä¹¦éƒ½å¯ä»¥ç”Ÿæˆä¸€ä¸ª.p12æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯ä¸€ä¸ªåŠ å¯†çš„æ–‡ä»¶ï¼Œåªè¦çŸ¥é“å…¶å¯†ç ï¼Œå°±å¯ä»¥ä¾›ç»™æ‰€æœ‰çš„macè®¾å¤‡ä½¿ç”¨ï¼Œä½¿è®¾å¤‡ä¸éœ€è¦åœ¨è‹¹æœå¼€å‘è€…ç½‘ç«™é‡æ–°ç”³è¯·å¼€å‘å’Œå‘å¸ƒè¯ä¹¦ï¼Œå°±èƒ½ä½¿ç”¨ã€‚â€‹â€‹ æ³¨æ„ï¼šä¸€èˆ¬.p12æ–‡ä»¶æ˜¯ç»™ä¸åˆ«äººä½¿ç”¨çš„ï¼Œæœ¬æœºå¿…é¡»å·²ç»æœ‰ä¸€ä¸ªå¸¦ç§˜é’¥çš„è¯ä¹¦æ‰å¯ä»¥ç”Ÿæˆ.p12æ–‡ä»¶ å¦‚æœä½ å‘ç°è¯¥è¯ä¹¦æ²¡æœ‰ç§˜é’¥ï¼Œåˆ™åˆ é™¤é’¥åŒ™ä¸²ä¸­çš„è¯¥è¯ä¹¦ï¼Œé‡æ–°ä¸‹è½½å¹¶åŒå‡»æ‰“å¼€åŠ å…¥åˆ°é’¥åŒ™ä¸²å³å¯ï¼â€‹ æ‰“å¼€é’¥åŒ™ä¸²,å…ˆé€‰æ‹©å·¦ä¾§é’¥åŒ™ä¸²ä¸­çš„ç™»å½•ï¼ˆä¸æ˜¯ç³»ç»Ÿï¼ï¼ï¼ï¼‰ï¼Œå†ç‚¹å‡»ç§ç±»ä¸­çš„è¯ä¹¦ï¼Œé€‰æ‹©æˆ‘ä»¬éœ€è¦çš„è¯ä¹¦ï¼Œå³å‡»ï¼Œé€‰æ‹©â€œå¯¼å‡ºâ€œiPhone Distribition/Developer:ä¸º.p12æ–‡ä»¶å¡«ä¸€ä¸ªåå­—ï¼Œè®¾ç½®å¯†ç  ä½¿ç”¨æè¿°æ–‡ä»¶ æ‹¿åˆ°è¿™ä¸¤ä¸ªæ–‡ä»¶åï¼Œä¾æ¬¡åŒå‡»â€œè¯ä¹¦â€ï¼Œâ€œ.p12â€œæ–‡ä»¶ï¼ˆéœ€è¦è¾“å…¥å¯†ç ï¼Œå¯†ç å°±æ˜¯å½“æ—¶ç”Ÿæˆ.p12æ—¶è®¾å®šçš„å¯†ç ï¼Œï¼‰ï¼Œä½œç”¨æ˜¯åŠ å…¥é’¥åŒ™ä¸²ä¸­ï¼Œä½¿æˆ‘ä»¬çš„ç”µè„‘å…·å¤‡å¼€å‘çš„è¯æ˜ï¼Œâ€æè¿°æ–‡ä»¶â€œï¼ˆä½œç”¨æ˜¯ç½®äºXcodeä¸­ï¼Œè®©XcodeçŸ¥é“æˆ‘ä»¬å¼€å‘çš„åˆæ³•æ€§ï¼‰ï¼Œæ·»åŠ å®Œåå°±å¯ä»¥ä½¿ç”¨äº†ã€‚","categories":[],"tags":[{"name":"Xcode","slug":"Xcode","permalink":"https://kysonyangs.github.io/tags/Xcode/"}]},{"title":"Macç»ˆç«¯","slug":"Macç»ˆç«¯","date":"2017-02-10T12:37:52.000Z","updated":"2020-05-17T08:13:51.115Z","comments":true,"path":"default/Macç»ˆç«¯/","link":"","permalink":"https://kysonyangs.github.io/default/Macç»ˆç«¯/","excerpt":"å¤åˆ¶ç²˜è´´æ— æ•ˆè§£å†³1234launchctl list | grep com.apple.pboardlaunchctl stop com.apple.pboardlaunchctl start com.apple.pboard","text":"å¤åˆ¶ç²˜è´´æ— æ•ˆè§£å†³1234launchctl list | grep com.apple.pboardlaunchctl stop com.apple.pboardlaunchctl start com.apple.pboard macOS Mojave å‡çº§ä¹‹å oh-my-zsh åœ¨ç»ˆç«¯ä¸‹æ‰“å¼€ç¼“æ…¢ï¼Œæ¸…ç†ç»ˆç«¯ log å°±ä¼šå˜å¿«å“¦sudo rm -rf /private/var/log/asl/*.asl â€‹â€‹â€‹â€‹ è§£å†³Alfredæ¯æ¬¡å¼€æœºåï¼Œéƒ½ä¼šæç¤ºâ€œæ˜¯å¦å…è®¸è®¿é—®é€šè®¯å½•â€1sudo codesign -f -d -s - /Applications/Alfred\\ 3.app/Contents/Frameworks/Alfred\\ Framework.framework/Versions/A/Alfred\\ Framework è®¾ç½®åˆ«å é¦–å…ˆï¼Œä½ çš„åˆ«åå¾—ä¸å­˜åœ¨ï¼Œåœ¨ç»ˆç«¯è¾“å…¥ä½ æƒ³è¦è®¾ç½®çš„åˆ«åï¼Œæç¤ºä¸èƒ½æ‰¾åˆ°å‘½ä»¤ï¼Œåˆ™åˆ«åä¸å­˜åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥æ”¾å¿ƒä½¿ç”¨ã€‚ aliaså¯ä»¥æŸ¥çœ‹å½“å‰å·²è®¾ç½®çš„æ‰€æœ‰çš„åˆ«å æ°¸ä¹…åŒ–çš„åˆ«åè®¾ç½®123456vim ~/.bash_profile// åœ¨æœ€ä¸‹é¢æ·»åŠ ä½ æƒ³è¦è®¾ç½®çš„åˆ«åï¼Œæ¯”å¦‚alias cdg=&quot;cd ~/Desktop/GG&quot;// ç„¶å wqä¿å­˜é€€å‡ºï¼Œåœ¨ç»ˆç«¯è¾“å…¥source ~/.bash_profile// ç°åœ¨ï¼Œä½ å¯ä»¥ä½¿ç”¨ä½ è®¾ç½®çš„åˆ«åäº† ä¿®æ”¹ç»ˆç«¯å‰é¢çš„æ˜¾ç¤º ä¿®æ”¹ç»ˆç«¯çš„æ˜¾ç¤ºæˆ çœç•¥å‰é¢çš„ç”µè„‘å ç»ˆç«¯è¾“å…¥open /etc æ‰¾åˆ°bashrc-&gt;æ˜¾ç¤ºç®€ä»‹-&gt;å°†åªè¯»æ”¹æˆè¯»ä¸å†™ï¼Œé…ç½®å®Œæˆåæ”¹å›å» ç»ˆç«¯è¾“å…¥sudo vim /etc/bashrc æ‰¾åˆ°PS1=â€™\\h:\\W \\u\\$ â€˜ï¼Œå°†å…¶æ³¨é‡Šæ‰ï¼ˆä¸ºäº†å¤‡ä»½ï¼‰ æ¢è¡Œæ·»åŠ PS1=â€™ \\W \\u\\$â€™ï¼ŒOKï¼ï¼ï¼","categories":[],"tags":[{"name":"Mac","slug":"Mac","permalink":"https://kysonyangs.github.io/tags/Mac/"}]},{"title":"Info.plistå±æ€§","slug":"Info-plistå±æ€§","date":"2017-01-05T12:00:03.000Z","updated":"2020-05-17T08:15:11.080Z","comments":true,"path":"default/Info-plistå±æ€§/","link":"","permalink":"https://kysonyangs.github.io/default/Info-plistå±æ€§/","excerpt":"","text":"Application does not run in background: é»˜è®¤ NOï¼Œ è‡ªä»iOS4.0ä¹‹åï¼Œå½“ä½ åœ¨åº”ç”¨ç¨‹åºæ‰§è¡Œçš„æ—¶å€™æŒ‰ä¸‹Homeé”®ï¼Œåº”ç”¨ç¨‹åºå¹¶ä¸ä¼šä¸­æ–­ç›®å‰çš„åº”ç”¨ï¼Œè€Œæ˜¯æ”¾åˆ°åå°å»äº†ã€‚å› æ­¤å¸Œæœ›ä½¿ç”¨è€…åœ¨æŒ‰ä¸‹Homeé”®ä¹‹åå°±è¦é€€å‡ºå½“å‰åº”ç”¨çš„è¯·å‹¾é€‰è¿™ä¸ªé€‰é¡¹ã€‚ Localization native development region: æœ¬åœ°åŒ–ç›¸å…³ Bundle display name: åº”ç”¨ç¨‹åºæœ¬åœ°åŒ–çš„æ˜¾ç¤ºåç§°ï¼Œé¢„è®¾å€¼ä¸º${PRODUCT_NAME}ã€‚ Bundle name: åº”ç”¨ç¨‹åºçš„çŸ­åç§°ï¼Œé€šå¸¸å°±æ˜¯ä½ çš„åº”ç”¨ç¨‹åºåç§°ã€‚ Executable file: ç¨‹åºå®‰è£…åŒ…çš„åç§°, ä¸€èˆ¬ä¸ç”¨æ”¹ Bundle identifier: ç”¨æ¥æ ‡ç¤ºåº”ç”¨ç¨‹åºçš„å”¯ä¸€IDï¼Œé€šå¸¸æ˜¯ä»¥åå‘çš„DNSæ–¹å¼å‘½åçš„ï¼Œä¾‹å¦‚ï¼šcom.myCompany.myApp InfoDictionary version: info.plistæ ¼å¼çš„ç‰ˆæœ¬ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬ä¸ä¼šå˜åŠ¨è¿™ä¸ªæ•°å€¼ã€‚ Bundle versions string, short: åº”ç”¨ç¨‹åºçš„ç‰ˆæœ¬ï¼Œé€šå¸¸æ˜¯ä»¥ä¸‰ä¸ªæ•°å­—ä¾†è¡¨ç¤ºç‰ˆæœ¬å·ï¼Œä¾‹å¦‚ï¼š1.0.1ã€‚ Bundle version: æ ‡è¯†ç¼–è¯‘ç‰ˆæœ¬(Bundle number)ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»»ä½•å­—ä¸²æ ¼å¼æ¥è¡¨ç¤ºè¿™ä¸ªç‰ˆæœ¬ã€‚ä¾‹å¦‚ä½¿ç”¨ä¸€ä¸ªæ•°å­—æ¥è¡¨ç¤ºç¼–è¯‘æ¬¡æ•°ã€‚ Bundle OS Type code: ç”¨ç”¨æ¥æ ‡è¯†æ•´ä¸ªå°åŒ…çš„(bundle)çš„ç±»å‹ã€‚åœ¨Macè£¡é¢ï¼Œä¸€ä¸ªå°åŒ…å¯èƒ½æ˜¯ä¸€ä¸ªæ¡£æ¡ˆæˆ–ç›®å½•ï¼Œå…¶ç›®çš„åœ¨äºå°†è½¯ä½“ä½¿ç”¨åˆ°çš„èµ„æºåŒ…åœ¨ä¸€èµ·ã€‚ä¾‹å¦‚åº”ç”¨ç¨‹åºåº”æ ‡è¯†ä¸ºAPPLã€‚ Bundle creator OS Type code: å¼€å‘è€…å¯¹åº”ç”¨ç¨‹åºçš„æ ‡è¯† Application requires iPhone environment: å¦‚æœåº”ç”¨ç¨‹åºä¸èƒ½åœ¨iPadã€Touchä¸Šè¿è¡Œï¼Œè®¾ç½®æ­¤é¡¹ä¸ºtrue; Application uses WIFI: å¦‚æœåº”ç”¨ç¨‹åºéœ€è¦WiFiæ‰èƒ½å·¥ä½œï¼Œåº”è¯¥å°†æ­¤å±æ€§è®¾ç½®ä¸ºtrueã€‚è¿™ä¹ˆåšä¼šæç¤ºç”¨æˆ·ï¼Œå¦‚æœæ²¡æœ‰ä»£å¼€WiFiçš„è¯ï¼Œæ‰“å¼€WiFiï¼Œä¸ºäº†èŠ‚çœç”µåŠ›ï¼ŒiPhoneä¼šåœ¨30åˆ†é’Ÿåè‡ªåŠ¨å…³é—­ç¨‹åºä¸­çš„ä»»ä½•WiFiã€‚è®¾ç½®è¿™ä¸€å±æ€§å¯ä»¥é˜²æ­¢è¿™ç§æƒ…å†µå‘ç”Ÿï¼Œå¹¶ä¸”ä¿æŒè¿æ¥å¤„äºæ´»åŠ¨çŠ¶æ€ã€‚ Icon already includes gloss and bevel effects: åº”ç”¨ç¨‹åºè®¾ç½®ç»ç’ƒæ•ˆæœï¼Œè®¾ç½®ä¸ºtrueå¯ä»¥é˜»æ­¢è¿™ä¹ˆåšã€‚ Main nib file base name: åº”ç”¨ç¨‹åºé¦–æ¬¡å¯åŠ¨è½½å…¥çš„xibæ–‡ä»¶ Laumch image: ç”¨ä»¥æŒ‡å®šåº”ç”¨ç¨‹åºå¯åŠ¨æ—¶çš„å›¾ç‰‡æ–‡ä»¶ã€‚ Initial interface orientation: æŒ‡å®šåº”ç”¨ç¨‹åºæ‰“å¼€æ—¶çš„æ–¹å‘ã€‚ Localizations: ç”¨ä»¥æŒ‡å®šåº”ç”¨ç¨‹åºæ‰€æ”¯æŒçš„è¯­è¨€ã€‚ Localization native development region: åº”ç”¨ç¨‹åºåŸå§‹çš„è¯­è¨€ç‰ˆæœ¬ã€‚ Status bar is initially hidden: è®¾ç½®æ˜¯å¦éšè—çŠ¶æ€æ  Status bar style: é€‰æ‹©ä¸‰ç§ä¸åŒæ ¼å¼ä¸­çš„ä¸€ç§ URL types: åº”ç”¨ç¨‹åºæ”¯æŒçš„URLæ ‡è¯†ç¬¦çš„ä¸€ä¸ªæ•°ç»„ï¼ˆç”¨äºç¨‹åºå›è°ƒï¼‰ supported interface orientation: ç¨‹åºçš„é»˜è®¤æ”¯æŒæ–¹å‘ View controller-based status bar appearance: YES/NO 123456// è®¾ä¸º `YES`, è¿™æ—¶ view controllerä¸­å¯¹status barçš„è®¾ç½®ä¼˜å…ˆçº§é«˜äºapplicationçš„è®¾ç½®ï¼Œç”¨ä¸‹é¢çš„æ–¹å¼éšè—status bar:- (BOOL)prefersStatusBarHidden &#123; return YES;&#125;// è®¾ä¸º `NO`, è¿™æ—¶applicationçš„è®¾ç½®ä¼˜å…ˆçº§æœ€é«˜ï¼Œç”¨ä¸‹é¢çš„æ–¹å¼éšè—status bar:[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:NO]; Required background modes: è®¾å®šå½“åº”ç”¨ç¨‹åºè¿›å…¥åå°æ‰§è¡Œåï¼Œå“ªäº›åŠ¨ä½œè¦ç»§ç»­åœ¨èƒŒæ™¯æ‰§è¡Œã€‚è¿™ä¸ªé”®å€¼æ˜¯ä¸€ä¸ªé˜µåˆ—ç±»å‹çš„è®¾å®šï¼Œå¯è®¾å®šåŠ¨ä½œåŒ…æ‹¬ï¼šaudioï¼Œlocateonï¼Œvoipã€‚ App Transport Security Settings: httpsç½‘ç»œï¼Œè¿™æ˜¯ä¸ªå­—å…¸ï¼Œå¦‚æœéœ€è¦è¯·æ±‚ http éœ€è¦è®¾ç½®ä¸‹åˆ—å­—å…¸é¡¹ Allow Arbitrary Loads: YES Privacy ...: ä¸€äº›æƒé™123456789101112131415161718192021222324Privacy - Media Library Usage Description // è·å–ç”¨æˆ·åª’ä½“åº“è¯´æ˜Privacy - Bluetooth Peripheral Usage Description // è“ç‰™å¤–è®¾ä½¿ç”¨æè¿°Privacy - Calendars Usage Description // æ—¥å†çš„ä½¿ç”¨è¯´æ˜Privacy - Camera Usage Description // ç›¸æœºä½¿ç”¨å™è¿°è¯´æ˜Privacy - Contacts Usage Description // è”ç³»äººä½¿ç”¨è¯´æ˜Privacy - Health Share Usage Description // å¥åº·åˆ†äº«ä½¿ç”¨æè¿°Privacy - Location Always Usage Description // åå°å®šä½(åœ¨iOSè®¾ç½®ä¸­ä¸º&apos;æ°¸ä¹…&apos;)Privacy - Location Usage Description // éœ€è¦å®šä½Privacy - Location When In Use Usage Description // å‰å°å®šä½(åœ¨iOSè®¾ç½®ä¸­ä¸º&apos;ä½¿ç”¨æœŸé—´&apos;)Privacy - Health Update Usage Description // å¥åº·æ›´æ–°ä½¿ç”¨æè¿°Privacy - HomeKit Usage Description // HomeKitä½¿ç”¨æè¿°Privacy - Microphone Usage Description // éº¦å…‹é£çš„ä½¿ç”¨è¯´æ˜Privacy - Motion Usage Description // è¿åŠ¨ä½¿ç”¨çš„æè¿°Privacy - Photo Library Usage Description // ç…§ç‰‡åº“ä½¿ç”¨è¯´æ˜Privacy - Reminders Usage Description // æé†’ä½¿ç”¨æè¿°Privacy - TV Provider Usage Description // ç”µè§†æä¾›å•†ä½¿ç”¨çš„æè¿° (è²Œä¼¼å›½å†…ç”¨ä¸åˆ°)Privacy - Speech Recognition Usage Description // è¯­éŸ³è¯†åˆ«æƒé™Privacy - Reminders Usage DescriptionPrivacy - Reminders Usage Description // æé†’äº‹é¡¹æƒé™Privacy - Motion Usage Description // è¿åŠ¨ä¸å¥èº«// iOS11æ–°å¢Privacy - NFC Reader Usage Description //NFCä½¿ç”¨æè¿°Privacy - Face ID Usage Descriptio //ä½¿ç”¨Face IDPrivacy - Photo Library Additions Usage Description // ä¿å­˜å›¾ç‰‡åˆ°å›¾åº“ä¸­ ï¼ˆé‡è¦ï¼‰","categories":[],"tags":[{"name":"Xcode","slug":"Xcode","permalink":"https://kysonyangs.github.io/tags/Xcode/"}]},{"title":"Gitå‘½ä»¤","slug":"Gitå‘½ä»¤","date":"2016-11-05T07:31:46.000Z","updated":"2020-05-17T08:15:15.638Z","comments":true,"path":"default/Gitå‘½ä»¤/","link":"","permalink":"https://kysonyangs.github.io/default/Gitå‘½ä»¤/","excerpt":"ä»Oå¼€å§‹12345git initgit remote add origin xxx.gitgit add .git commit -m &quot;xxx&quot;git push origin master æŸ¥çœ‹è¿œç¨‹ä»“åº“åœ°å€1git remote -v æ”¾å¼ƒä¿®æ”¹ï¼Œå¼ºåˆ¶è¦†ç›–æœ¬åœ°ä»£ç 123git fetch --allgit reset --hard origin/mastergit pull æ‰“æ ‡ç­¾1234git tag -a &apos;0.0.1&apos; -m &quot;xxx&quot;git tag #æŸ¥çœ‹git push --tags #æäº¤æœ¬åœ°æ‰€æœ‰æ ‡ç­¾git push origin 0.0.1 #æäº¤æŸä¸ªæ ‡ç­¾ åˆ é™¤æ ‡ç­¾12git tag -d 0.0.1git push origin :0.0.1 #åˆ é™¤è¿œç¨‹æ ‡ç­¾ git push 403 é”™è¯¯åŸå› ï¼š æœ¬åœ°å‚¨å­˜äº†ç”¨æˆ·åå’Œå¯†ç ï¼Œé‡æ–°è®¾ç½®å°±å¥½äº†1git remote set-url origin ç”¨æˆ·å@git.coding.xxx.git Gitå¸¸ç”¨å‘½ä»¤ git init: åˆå§‹åŒ–ä¸€ä¸ªGitä»“åº“ï¼šæŠŠæŸä¸ªç›®å½•å˜æˆGitå¯ä»¥ç®¡ç†çš„ä»“åº“ git add test.h: æŠŠæ–‡ä»¶test.hæ·»åŠ åˆ°ä»“åº“ git commit -m &quot;æ·»åŠ äº†test.hæ–‡ä»¶&quot;: æŠŠæ–‡ä»¶æäº¤åˆ°ä»“åº“ã€‚(git commitå‘½ä»¤ï¼Œ-måé¢è¾“å…¥çš„æ˜¯æœ¬æ¬¡æäº¤çš„è¯´æ˜) git push (origin master(åˆ†æ”¯åç§°)): æ¨é€åˆ°è¿œç¨‹ä»“åº“,å…¶ä¸­ï¼ˆï¼‰é‡Œé¢æ˜¯å¯é€‰çš„ git pull (origin master(åˆ†æ”¯åç§°)): æ‹‰å–è¿œç¨‹ä»“åº“æœ€æ–°,å…¶ä¸­ï¼ˆï¼‰é‡Œé¢æ˜¯å¯é€‰çš„ git status: æŸ¥çœ‹å·¥ä½œåŒºçš„çŠ¶æ€ git diff test.h: æŸ¥çœ‹test.hæ–‡ä»¶ä¿®æ”¹äº†ä»€ä¹ˆï¼ˆdiffâ€”&gt;differenceï¼‰ git log: æ˜¾ç¤ºä»æœ€è¿‘åˆ°æœ€è¿œçš„æäº¤æ—¥å¿—ã€‚å¦‚æœå«Œè¾“å‡ºä¿¡æ¯å¤ªå¤šï¼Œçœ‹å¾—çœ¼èŠ±ç¼­ä¹±çš„ï¼Œå¯ä»¥è¯•è¯•åŠ ä¸Šâ€“pretty=onelineå‚æ•° git remote add origin git@...: å…³è”ä¸€ä¸ªè¿œç¨‹åº“ git push -u origin master: å½“è¿œç¨‹åº“æ˜¯ç©ºçš„ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ¬¡æ¨é€masteråˆ†æ”¯æ—¶ï¼ŒåŠ ä¸Šäº†-uå‚æ•°ï¼ŒGitä¸ä½†ä¼šæŠŠæœ¬åœ°çš„masteråˆ†æ”¯å†…å®¹æ¨é€çš„è¿œç¨‹æ–°çš„masteråˆ†æ”¯ï¼Œè¿˜ä¼šæŠŠæœ¬åœ°çš„masteråˆ†æ”¯å’Œè¿œç¨‹çš„masteråˆ†æ”¯å…³è”èµ·æ¥ï¼Œåœ¨ä»¥åçš„æ¨é€æˆ–è€…æ‹‰å–æ—¶å°±å¯ä»¥ç®€åŒ–å‘½ä»¤ã€‚ git clone git@...: å…‹éš† git remote: è¦æŸ¥çœ‹è¿œç¨‹åº“çš„åç§° git remote -v: æ˜¾ç¤ºæ›´è¯¦ç»†çš„è¿œç¨‹åº“ä¿¡æ¯ã€‚æ˜¾ç¤ºå¯ä»¥æŠ“å–å’Œæ¨é€çš„originçš„åœ°å€ã€‚å¦‚æœæ²¡æœ‰æ¨é€æƒé™ï¼Œå°±çœ‹ä¸åˆ°pushçš„åœ°å€ git fetch: ä¸ªäººç²—æµ…çš„ç†è§£ä¸ºå°†è¿œç¨‹æ‰€æœ‰çš„åˆ†æ”¯ä¿¡æ¯æ‹‰å–åˆ°æœ¬åœ°1 å›é€€ä¸æ’¤é”€ git reset --hard HEAD^: å›åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ git reset --hard HEAD^^: å›åˆ°ä¸Šä¸Šä¸ªç‰ˆæœ¬ git reset --hard HEAD~100: å›åˆ°ä¸Š100ä¸ªç‰ˆæœ¬ git reset --hard 791c95aa44cc5540d93a146d6d341e5d38936762: æ ¹æ®æäº¤çš„ç‰ˆæœ¬å·è¿›è¡Œç‰ˆæœ¬çš„å›é€€ git reflog: æŸ¥çœ‹å‘½ä»¤å†å²ï¼Œä»¥ä¾¿ç¡®å®šè¦å›åˆ°æœªæ¥çš„å“ªä¸ªç‰ˆæœ¬ã€‚ git checkout -- readme.txt: è®©è¿™ä¸ªæ–‡ä»¶å›åˆ°æœ€è¿‘ä¸€æ¬¡git commitæˆ–git addæ—¶çš„çŠ¶æ€ã€‚è¿™é‡Œæ˜¯æŠŠreadme.txtæ–‡ä»¶åœ¨å·¥ä½œåŒºçš„ä¿®æ”¹å…¨éƒ¨æ’¤é”€ï¼Œè¿™é‡Œæœ‰ä¸¤ç§æƒ…å†µï¼š a. ä¸€ç§æ˜¯readme.txtè‡ªä¿®æ”¹åè¿˜æ²¡æœ‰è¢«æ”¾åˆ°æš‚å­˜åŒºï¼Œç°åœ¨ï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°å’Œç‰ˆæœ¬åº“ä¸€æ¨¡ä¸€æ ·çš„çŠ¶æ€ï¼› b. ä¸€ç§æ˜¯readme.txtå·²ç»æ·»åŠ åˆ°æš‚å­˜åŒºåï¼Œåˆä½œäº†ä¿®æ”¹ï¼Œç°åœ¨ï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°æ·»åŠ åˆ°æš‚å­˜åŒºåçš„çŠ¶æ€ã€‚ git reset HEAD æ–‡ä»¶(readme.txt): a. å¯ä»¥æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹æ’¤é”€æ‰ï¼ˆunstageï¼‰ï¼Œé‡æ–°æ”¾å›å·¥ä½œåŒºã€‚è‹¥è¦ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹ï¼Œè¿˜éœ€è¦git checkout â€“ readme.txt b. git resetå‘½ä»¤æ—¢å¯ä»¥å›é€€ç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹å›é€€åˆ°å·¥ä½œåŒºã€‚å½“æˆ‘ä»¬ç”¨HEADæ—¶ï¼Œè¡¨ç¤ºæœ€æ–°çš„ç‰ˆæœ¬ã€‚ åˆ†æ”¯ä¸åˆå¹¶ git branch dev: åˆ›å»ºä¸€ä¸ªåç§°å«devçš„åˆ†æ”¯ git checkout dev: å½“å‰çš„åˆ†æ”¯åˆ‡æ¢ä¸ºdevåˆ†æ”¯ git checkout -b dev: åˆ›å»ºä¸€ä¸ªdevåˆ†æ”¯ï¼Œå¹¶ä¸”åˆ‡æ¢åˆ°devåˆ†æ”¯ï¼ˆç›¸å½“äºæ˜¯æ˜¯å‰é¢ä¸¤å¥å‘½ä»¤çš„åˆå¹¶ï¼‰ git branch: åˆ—å‡ºæ‰€æœ‰åˆ†æ”¯ï¼Œå½“å‰åˆ†æ”¯å‰é¢ä¼šæ ‡ä¸€ä¸ª*å· git merge dev: æŠŠdevåˆ†æ”¯çš„å·¥ä½œæˆæœåˆå¹¶åˆ°å½“å‰åˆ†æ”¯ä¸Š, git mergeå‘½ä»¤ç”¨äºåˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ git branch -d dev: åˆ é™¤devåˆ†æ”¯ git branch -D dev: è‹¥devåˆ†æ”¯è¿˜æ²¡åˆå¹¶åˆ°æ‰€åˆ‡å‡ºæ¥çš„åˆ†æ”¯ï¼Œåˆ™git branch -d devå°†ä¸èƒ½åˆ é™¤devåˆ†æ”¯ï¼Œå¯ä»¥é€šè¿‡git branch -D devå¼ºè¡Œåˆ é™¤devåˆ†æ”¯ git log --graph: æŸ¥çœ‹åˆ†æ”¯åˆå¹¶å›¾ git log --graph --pretty=oneline --abbrev-commit git merge --no-ff -m &quot;å¤‡æ³¨çš„ä¿¡æ¯&quot; dev: å°†devåˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯çš„æ—¶å€™å¼ºåˆ¶ç¦ç”¨Fast forwardæ¨¡å¼ a. é€šå¸¸ï¼Œåˆå¹¶åˆ†æ”¯æ—¶ï¼Œå¦‚æœå¯èƒ½ï¼ŒGitä¼šç”¨Fast forwardæ¨¡å¼ï¼Œä½†è¿™ç§æ¨¡å¼ä¸‹ï¼Œåˆ é™¤åˆ†æ”¯åï¼Œä¼šä¸¢æ‰åˆ†æ”¯ä¿¡æ¯ã€‚å¦‚æœè¦å¼ºåˆ¶ç¦ç”¨Fast forwardæ¨¡å¼ï¼ŒGitå°±ä¼šåœ¨mergeæ—¶ç”Ÿæˆä¸€ä¸ªæ–°çš„commitï¼Œè¿™æ ·ï¼Œä»åˆ†æ”¯å†å²ä¸Šå°±å¯ä»¥çœ‹å‡ºåˆ†æ”¯ä¿¡æ¯ã€‚ b. åˆå¹¶åˆ†æ”¯æ—¶ï¼ŒåŠ ä¸Šâ€“no-ff å‚æ•°å°±å¯ä»¥ç”¨æ™®é€šæ¨¡å¼åˆå¹¶ï¼Œåˆå¹¶åçš„å†å²æœ‰åˆ†æ”¯ï¼Œèƒ½çœ‹å‡ºæ¥æ›¾ç»åšè¿‡åˆå¹¶ï¼Œè€Œfast forward åˆå¹¶å°±çœ‹ä¸å‡ºæ¥æ›¾ç»åšè¿‡åˆå¹¶ã€‚ git branch -r: æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯ git branch -a: æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯ï¼ˆä¼šæ˜¾ç¤ºæœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯ï¼‰ æ ‡ç­¾ tag git tag: åˆ—å‡ºæ‰€æœ‰ tag git add tag xxxx: æ–°å»ºä¸€ä¸ªtag git push --tags: æ¨é€tagåˆ°è¿œç¨‹ gitå¤šè´¦å·çš„ä½¿ç”¨/ä½“éªŒ ç”Ÿæˆ ssh key 12ssh-keygen -t rsa -C &quot;your-email-address1&quot;ssh-keygen -t rsa -C &quot;your-email-address2&quot; å°†keyæ·»åŠ åˆ°ssh agentä¸Š 1ssh-add ~/.ssh/id_rsa ssh-add ~/.ssh/id_rsa_2","text":"ä»Oå¼€å§‹12345git initgit remote add origin xxx.gitgit add .git commit -m &quot;xxx&quot;git push origin master æŸ¥çœ‹è¿œç¨‹ä»“åº“åœ°å€1git remote -v æ”¾å¼ƒä¿®æ”¹ï¼Œå¼ºåˆ¶è¦†ç›–æœ¬åœ°ä»£ç 123git fetch --allgit reset --hard origin/mastergit pull æ‰“æ ‡ç­¾1234git tag -a &apos;0.0.1&apos; -m &quot;xxx&quot;git tag #æŸ¥çœ‹git push --tags #æäº¤æœ¬åœ°æ‰€æœ‰æ ‡ç­¾git push origin 0.0.1 #æäº¤æŸä¸ªæ ‡ç­¾ åˆ é™¤æ ‡ç­¾12git tag -d 0.0.1git push origin :0.0.1 #åˆ é™¤è¿œç¨‹æ ‡ç­¾ git push 403 é”™è¯¯åŸå› ï¼š æœ¬åœ°å‚¨å­˜äº†ç”¨æˆ·åå’Œå¯†ç ï¼Œé‡æ–°è®¾ç½®å°±å¥½äº†1git remote set-url origin ç”¨æˆ·å@git.coding.xxx.git Gitå¸¸ç”¨å‘½ä»¤ git init: åˆå§‹åŒ–ä¸€ä¸ªGitä»“åº“ï¼šæŠŠæŸä¸ªç›®å½•å˜æˆGitå¯ä»¥ç®¡ç†çš„ä»“åº“ git add test.h: æŠŠæ–‡ä»¶test.hæ·»åŠ åˆ°ä»“åº“ git commit -m &quot;æ·»åŠ äº†test.hæ–‡ä»¶&quot;: æŠŠæ–‡ä»¶æäº¤åˆ°ä»“åº“ã€‚(git commitå‘½ä»¤ï¼Œ-måé¢è¾“å…¥çš„æ˜¯æœ¬æ¬¡æäº¤çš„è¯´æ˜) git push (origin master(åˆ†æ”¯åç§°)): æ¨é€åˆ°è¿œç¨‹ä»“åº“,å…¶ä¸­ï¼ˆï¼‰é‡Œé¢æ˜¯å¯é€‰çš„ git pull (origin master(åˆ†æ”¯åç§°)): æ‹‰å–è¿œç¨‹ä»“åº“æœ€æ–°,å…¶ä¸­ï¼ˆï¼‰é‡Œé¢æ˜¯å¯é€‰çš„ git status: æŸ¥çœ‹å·¥ä½œåŒºçš„çŠ¶æ€ git diff test.h: æŸ¥çœ‹test.hæ–‡ä»¶ä¿®æ”¹äº†ä»€ä¹ˆï¼ˆdiffâ€”&gt;differenceï¼‰ git log: æ˜¾ç¤ºä»æœ€è¿‘åˆ°æœ€è¿œçš„æäº¤æ—¥å¿—ã€‚å¦‚æœå«Œè¾“å‡ºä¿¡æ¯å¤ªå¤šï¼Œçœ‹å¾—çœ¼èŠ±ç¼­ä¹±çš„ï¼Œå¯ä»¥è¯•è¯•åŠ ä¸Šâ€“pretty=onelineå‚æ•° git remote add origin git@...: å…³è”ä¸€ä¸ªè¿œç¨‹åº“ git push -u origin master: å½“è¿œç¨‹åº“æ˜¯ç©ºçš„ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ¬¡æ¨é€masteråˆ†æ”¯æ—¶ï¼ŒåŠ ä¸Šäº†-uå‚æ•°ï¼ŒGitä¸ä½†ä¼šæŠŠæœ¬åœ°çš„masteråˆ†æ”¯å†…å®¹æ¨é€çš„è¿œç¨‹æ–°çš„masteråˆ†æ”¯ï¼Œè¿˜ä¼šæŠŠæœ¬åœ°çš„masteråˆ†æ”¯å’Œè¿œç¨‹çš„masteråˆ†æ”¯å…³è”èµ·æ¥ï¼Œåœ¨ä»¥åçš„æ¨é€æˆ–è€…æ‹‰å–æ—¶å°±å¯ä»¥ç®€åŒ–å‘½ä»¤ã€‚ git clone git@...: å…‹éš† git remote: è¦æŸ¥çœ‹è¿œç¨‹åº“çš„åç§° git remote -v: æ˜¾ç¤ºæ›´è¯¦ç»†çš„è¿œç¨‹åº“ä¿¡æ¯ã€‚æ˜¾ç¤ºå¯ä»¥æŠ“å–å’Œæ¨é€çš„originçš„åœ°å€ã€‚å¦‚æœæ²¡æœ‰æ¨é€æƒé™ï¼Œå°±çœ‹ä¸åˆ°pushçš„åœ°å€ git fetch: ä¸ªäººç²—æµ…çš„ç†è§£ä¸ºå°†è¿œç¨‹æ‰€æœ‰çš„åˆ†æ”¯ä¿¡æ¯æ‹‰å–åˆ°æœ¬åœ°1 å›é€€ä¸æ’¤é”€ git reset --hard HEAD^: å›åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ git reset --hard HEAD^^: å›åˆ°ä¸Šä¸Šä¸ªç‰ˆæœ¬ git reset --hard HEAD~100: å›åˆ°ä¸Š100ä¸ªç‰ˆæœ¬ git reset --hard 791c95aa44cc5540d93a146d6d341e5d38936762: æ ¹æ®æäº¤çš„ç‰ˆæœ¬å·è¿›è¡Œç‰ˆæœ¬çš„å›é€€ git reflog: æŸ¥çœ‹å‘½ä»¤å†å²ï¼Œä»¥ä¾¿ç¡®å®šè¦å›åˆ°æœªæ¥çš„å“ªä¸ªç‰ˆæœ¬ã€‚ git checkout -- readme.txt: è®©è¿™ä¸ªæ–‡ä»¶å›åˆ°æœ€è¿‘ä¸€æ¬¡git commitæˆ–git addæ—¶çš„çŠ¶æ€ã€‚è¿™é‡Œæ˜¯æŠŠreadme.txtæ–‡ä»¶åœ¨å·¥ä½œåŒºçš„ä¿®æ”¹å…¨éƒ¨æ’¤é”€ï¼Œè¿™é‡Œæœ‰ä¸¤ç§æƒ…å†µï¼š a. ä¸€ç§æ˜¯readme.txtè‡ªä¿®æ”¹åè¿˜æ²¡æœ‰è¢«æ”¾åˆ°æš‚å­˜åŒºï¼Œç°åœ¨ï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°å’Œç‰ˆæœ¬åº“ä¸€æ¨¡ä¸€æ ·çš„çŠ¶æ€ï¼› b. ä¸€ç§æ˜¯readme.txtå·²ç»æ·»åŠ åˆ°æš‚å­˜åŒºåï¼Œåˆä½œäº†ä¿®æ”¹ï¼Œç°åœ¨ï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°æ·»åŠ åˆ°æš‚å­˜åŒºåçš„çŠ¶æ€ã€‚ git reset HEAD æ–‡ä»¶(readme.txt): a. å¯ä»¥æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹æ’¤é”€æ‰ï¼ˆunstageï¼‰ï¼Œé‡æ–°æ”¾å›å·¥ä½œåŒºã€‚è‹¥è¦ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹ï¼Œè¿˜éœ€è¦git checkout â€“ readme.txt b. git resetå‘½ä»¤æ—¢å¯ä»¥å›é€€ç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹å›é€€åˆ°å·¥ä½œåŒºã€‚å½“æˆ‘ä»¬ç”¨HEADæ—¶ï¼Œè¡¨ç¤ºæœ€æ–°çš„ç‰ˆæœ¬ã€‚ åˆ†æ”¯ä¸åˆå¹¶ git branch dev: åˆ›å»ºä¸€ä¸ªåç§°å«devçš„åˆ†æ”¯ git checkout dev: å½“å‰çš„åˆ†æ”¯åˆ‡æ¢ä¸ºdevåˆ†æ”¯ git checkout -b dev: åˆ›å»ºä¸€ä¸ªdevåˆ†æ”¯ï¼Œå¹¶ä¸”åˆ‡æ¢åˆ°devåˆ†æ”¯ï¼ˆç›¸å½“äºæ˜¯æ˜¯å‰é¢ä¸¤å¥å‘½ä»¤çš„åˆå¹¶ï¼‰ git branch: åˆ—å‡ºæ‰€æœ‰åˆ†æ”¯ï¼Œå½“å‰åˆ†æ”¯å‰é¢ä¼šæ ‡ä¸€ä¸ª*å· git merge dev: æŠŠdevåˆ†æ”¯çš„å·¥ä½œæˆæœåˆå¹¶åˆ°å½“å‰åˆ†æ”¯ä¸Š, git mergeå‘½ä»¤ç”¨äºåˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ git branch -d dev: åˆ é™¤devåˆ†æ”¯ git branch -D dev: è‹¥devåˆ†æ”¯è¿˜æ²¡åˆå¹¶åˆ°æ‰€åˆ‡å‡ºæ¥çš„åˆ†æ”¯ï¼Œåˆ™git branch -d devå°†ä¸èƒ½åˆ é™¤devåˆ†æ”¯ï¼Œå¯ä»¥é€šè¿‡git branch -D devå¼ºè¡Œåˆ é™¤devåˆ†æ”¯ git log --graph: æŸ¥çœ‹åˆ†æ”¯åˆå¹¶å›¾ git log --graph --pretty=oneline --abbrev-commit git merge --no-ff -m &quot;å¤‡æ³¨çš„ä¿¡æ¯&quot; dev: å°†devåˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯çš„æ—¶å€™å¼ºåˆ¶ç¦ç”¨Fast forwardæ¨¡å¼ a. é€šå¸¸ï¼Œåˆå¹¶åˆ†æ”¯æ—¶ï¼Œå¦‚æœå¯èƒ½ï¼ŒGitä¼šç”¨Fast forwardæ¨¡å¼ï¼Œä½†è¿™ç§æ¨¡å¼ä¸‹ï¼Œåˆ é™¤åˆ†æ”¯åï¼Œä¼šä¸¢æ‰åˆ†æ”¯ä¿¡æ¯ã€‚å¦‚æœè¦å¼ºåˆ¶ç¦ç”¨Fast forwardæ¨¡å¼ï¼ŒGitå°±ä¼šåœ¨mergeæ—¶ç”Ÿæˆä¸€ä¸ªæ–°çš„commitï¼Œè¿™æ ·ï¼Œä»åˆ†æ”¯å†å²ä¸Šå°±å¯ä»¥çœ‹å‡ºåˆ†æ”¯ä¿¡æ¯ã€‚ b. åˆå¹¶åˆ†æ”¯æ—¶ï¼ŒåŠ ä¸Šâ€“no-ff å‚æ•°å°±å¯ä»¥ç”¨æ™®é€šæ¨¡å¼åˆå¹¶ï¼Œåˆå¹¶åçš„å†å²æœ‰åˆ†æ”¯ï¼Œèƒ½çœ‹å‡ºæ¥æ›¾ç»åšè¿‡åˆå¹¶ï¼Œè€Œfast forward åˆå¹¶å°±çœ‹ä¸å‡ºæ¥æ›¾ç»åšè¿‡åˆå¹¶ã€‚ git branch -r: æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯ git branch -a: æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯ï¼ˆä¼šæ˜¾ç¤ºæœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯ï¼‰ æ ‡ç­¾ tag git tag: åˆ—å‡ºæ‰€æœ‰ tag git add tag xxxx: æ–°å»ºä¸€ä¸ªtag git push --tags: æ¨é€tagåˆ°è¿œç¨‹ gitå¤šè´¦å·çš„ä½¿ç”¨/ä½“éªŒ ç”Ÿæˆ ssh key 12ssh-keygen -t rsa -C &quot;your-email-address1&quot;ssh-keygen -t rsa -C &quot;your-email-address2&quot; å°†keyæ·»åŠ åˆ°ssh agentä¸Š 1ssh-add ~/.ssh/id_rsa ssh-add ~/.ssh/id_rsa_2 é…ç½®.ssh/config 123456789101112131415161718192021vi .ssh/config# åŠ ä¸Šä»¥ä¸‹å†…å®¹# github# first.github (first@gmail.com)Host github.comHostName github.comIdentityFile ~/.ssh/id_rsa# second (second@gmail.com)Host secondHostName github.comIdentityFile ~/.ssh/id_rsa_second# gitOSc# default git@oscHost git.oschina.net HostName git.oschina.net IdentityFile ~/.ssh/id_rsaHost second HostName git.oschina.net IdentityFile ~/.ssh/id_rsa_work å°† id_rsa.pub id_rsa_2.pubæ·»åŠ åˆ°å¯¹åº”è´¦å·ä¸Š éªŒè¯æ˜¯å¦æˆåŠŸ 123456//1. GithubéªŒè¯ssh -T git@github.comssh -T git@second//2. Git OscéªŒè¯ssh -T git@git.oschina.netssh -T git@git.second.net(è²Œä¼¼æ˜¯è¿™ä¸ªå§ï¼Œæœ‰ç‚¹å¿˜äº†) ä½¿ç”¨è´¦å·2clone push 123456git clone... ä¸‹æ¥å ä¿®æ”¹// æ–¹æ³•1git remote rm origingit remote add origin git@onemaybe:OneMaybe/OneMaybe.github.io.git// æ–¹æ³•2vi .git/config","categories":[],"tags":[{"name":"Git","slug":"Git","permalink":"https://kysonyangs.github.io/tags/Git/"}]},{"title":"CoreDataä½¿ç”¨","slug":"CoreDataä½¿ç”¨","date":"2016-08-02T07:28:11.000Z","updated":"2020-05-17T08:15:24.006Z","comments":true,"path":"default/CoreDataä½¿ç”¨/","link":"","permalink":"https://kysonyangs.github.io/default/CoreDataä½¿ç”¨/","excerpt":"ç”±äºæœ€è¿‘å†™äº†ä¸ª gank.io å®¢æˆ·ç«¯ï¼Œé¬¼ä½¿ç¥å·®çš„æƒ³æ·»åŠ ä¸€ä¸ªæ”¶è—åŠŸèƒ½ï¼Œå¹¶ä¸”ç§‰ç€åŠªåŠ›å­¦ä¹ æ–°çŸ¥è¯†çš„åŸåˆ™ï¼Œæ‰€ä»¥æˆ‘åœ¨è¯¥é¡¹ç›®ä¸­è¯•äº†ä¸€ä¸‹æ°´ï¼Œæ„Ÿè§‰è¿˜ä¸é”™ï¼Œåœ¨æ­¤ï¼Œåˆ†äº«å‡ºæ¥ï¼Œä¾›æ–°æ‰‹å‚è€ƒå‚è€ƒã€‚ç‰¹åˆ«å£°æ˜: æ„Ÿè°¢å¹²è´§é›†ä¸­è¥å¼€æºçš„æ¥å£ã€‚ å¹²è´§é›†ä¸­è¥æ˜¯ä¸€ä¸ªä¸é”™çš„ç½‘ç«™ï¼Œå¸Œæœ›è¶Šæ¥è¶Šå¥½ã€‚","text":"ç”±äºæœ€è¿‘å†™äº†ä¸ª gank.io å®¢æˆ·ç«¯ï¼Œé¬¼ä½¿ç¥å·®çš„æƒ³æ·»åŠ ä¸€ä¸ªæ”¶è—åŠŸèƒ½ï¼Œå¹¶ä¸”ç§‰ç€åŠªåŠ›å­¦ä¹ æ–°çŸ¥è¯†çš„åŸåˆ™ï¼Œæ‰€ä»¥æˆ‘åœ¨è¯¥é¡¹ç›®ä¸­è¯•äº†ä¸€ä¸‹æ°´ï¼Œæ„Ÿè§‰è¿˜ä¸é”™ï¼Œåœ¨æ­¤ï¼Œåˆ†äº«å‡ºæ¥ï¼Œä¾›æ–°æ‰‹å‚è€ƒå‚è€ƒã€‚ç‰¹åˆ«å£°æ˜: æ„Ÿè°¢å¹²è´§é›†ä¸­è¥å¼€æºçš„æ¥å£ã€‚ å¹²è´§é›†ä¸­è¥æ˜¯ä¸€ä¸ªä¸é”™çš„ç½‘ç«™ï¼Œå¸Œæœ›è¶Šæ¥è¶Šå¥½ã€‚ åˆ›å»ºä¸€ä¸ªæ–°å·¥ç¨‹ï¼Œåœ¨AppDelegateé‡Œé¢å¤šäº†ä¸‹é¢æ–¹æ³•ã€‚ å¦‚æœä½ å·²ç»åˆ›å»ºå¥½å·¥ç¨‹ï¼Œä½†æ˜¯æ²¡å‹¾é€‰ä¸Šé¢é€‰é¡¹ï¼Œæ²¡å…³ç³»ï¼Œæ–°å»ºä¸€ä¸ªCoreDataæ–‡ä»¶ä½†æ˜¯AppDelegateé‡Œé¢æ²¡ä¸œè¥¿ï¼Œæ²¡å…³ç³»ï¼Œæ–°å»ºä¸€ä¸ªæ–°é¡¹ç›®ï¼Œå°†é‡Œé¢çš„å†…å®¹æ‹·è¿›ä½ çš„é¡¹ç›®ï¼Œä½†æ˜¯ä½ å¾—ä¿®æ”¹ä¸€ä¸ªåœ°æ–¹ æ–°å»ºä¸€ä¸ªå®ä½“åŒå‡»ä¿®æ”¹åå­— æ·»åŠ å±æ€§ æ–°å»ºNSManagedObjectï¼Œé€šè¿‡Core Dataä»æ•°æ®åº“å–å‡ºçš„å¯¹è±¡ï¼Œé»˜è®¤æƒ…å†µä¸‹éƒ½æ˜¯NSManagedObjectå¯¹è±¡next -&gt; next -&gt; next OKï¼Œå¤šäº†ä¸¤ä¸ªæ–‡ä»¶ KL_Test+CoreDataProperties.swift ä¸éœ€è¦å˜ KL_Test.swift æ·»åŠ å¢åˆ æŸ¥æ”¹çš„æ–¹æ³•123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128import Foundationimport CoreDataimport UIKit@objc(CollectGank)class KL_Test: NSManagedObject &#123; static let app = UIApplication.sharedApplication().delegate as! AppDelegate static let context = app.managedObjectContext // æ’å…¥ static func insert(model: KL_Test) &#123; let collectGank = NSEntityDescription.insertNewObjectForEntityForName(&quot;KL_Test&quot;,inManagedObjectContext: context) as! KL_Test collectGank.name = model.name collectGank.age = model.age do &#123; try context.save() print(&quot;æˆåŠŸ&quot;) &#125;catch &#123; fatalError(&quot;ä¸èƒ½ä¿å­˜\\(error)&quot;) &#125; &#125; // æŸ¥è¯¢æ‰€æœ‰çš„æ•°æ®å¹¶è¿”å› static func fetch() -&gt; [KL_Test] &#123; var array = [KL_Test]() //å£°æ˜æ•°æ®çš„è¯·æ±‚ let fetchRequest:NSFetchRequest = NSFetchRequest() //å£°æ˜ä¸€ä¸ªå®ä½“ç»“æ„ let entity:NSEntityDescription? = NSEntityDescription.entityForName(&quot;KL_Test&quot;, inManagedObjectContext: context) //è®¾ç½®æ•°æ®è¯·æ±‚çš„å®ä½“ç»“æ„ fetchRequest.entity = entity //æŸ¥è¯¢æ“ä½œ do &#123; let fetchedObjects:[AnyObject]? = try context.executeFetchRequest(fetchRequest) //éå†æŸ¥è¯¢çš„ç»“æœ print(fetchedObjects) array = fetchedObjects as! [KL_Test] &#125;catch &#123; fatalError(&quot;ä¸èƒ½ä¿å­˜ï¼š\\(error)&quot;) &#125; return array &#125; // ä¿®æ”¹ static func update(gank: KL_Test) &#123; //å£°æ˜æ•°æ®çš„è¯·æ±‚ let fetchRequest:NSFetchRequest = NSFetchRequest() fetchRequest.fetchLimit = 1 //é™å®šæŸ¥è¯¢ç»“æœçš„æ•°é‡ fetchRequest.fetchOffset = 0 //æŸ¥è¯¢çš„åç§»é‡ //å£°æ˜ä¸€ä¸ªå®ä½“ç»“æ„ let entity:NSEntityDescription? = NSEntityDescription.entityForName(&quot;KL_Test&quot;, inManagedObjectContext: context) //è®¾ç½®æ•°æ®è¯·æ±‚çš„å®ä½“ç»“æ„ fetchRequest.entity = entity //è®¾ç½®æŸ¥è¯¢æ¡ä»¶ let predicate = NSPredicate(format: &quot;name = &apos;kellen&apos; &quot;) fetchRequest.predicate = predicate //æŸ¥è¯¢æ“ä½œ do &#123; let fetchedObjects:[AnyObject]? = try context.executeFetchRequest(fetchRequest) //éå†æŸ¥è¯¢çš„ç»“æœ print(fetchedObjects) try context.save() &#125;catch &#123; fatalError(&quot;ä¸èƒ½ä¿å­˜ï¼š\\(error)&quot;) &#125; &#125; // æ˜¯å¦å­˜åœ¨ï¼ˆæŸ¥æ‰¾ï¼‰ static func exist(gank: KL_Test) -&gt; Bool &#123; //å£°æ˜æ•°æ®çš„è¯·æ±‚ let fetchRequest:NSFetchRequest = NSFetchRequest() //å£°æ˜ä¸€ä¸ªå®ä½“ç»“æ„ let entity:NSEntityDescription? = NSEntityDescription.entityForName(&quot;KL_Test&quot;, inManagedObjectContext: context) //è®¾ç½®æ•°æ®è¯·æ±‚çš„å®ä½“ç»“æ„ fetchRequest.entity = entity //è®¾ç½®æŸ¥è¯¢æ¡ä»¶ let predicate = NSPredicate(format: &quot;name = &apos;\\(gank.name)&apos; &quot;) fetchRequest.predicate = predicate //æŸ¥è¯¢æ“ä½œ do &#123; let fetchedObjects:[AnyObject]? = try context.executeFetchRequest(fetchRequest) //éå†æŸ¥è¯¢çš„ç»“æœ guard (fetchedObjects != nil &amp;&amp; fetchedObjects!.count &gt; 0) else &#123; return false &#125; return true &#125;catch &#123; fatalError(&quot;ä¸èƒ½ä¿å­˜ï¼š\\(error)&quot;) &#125; &#125; // åˆ é™¤ static func deleted(gank: KL_Test) &#123; //å£°æ˜æ•°æ®çš„è¯·æ±‚ let fetchRequest:NSFetchRequest = NSFetchRequest() //å£°æ˜ä¸€ä¸ªå®ä½“ç»“æ„ let entity:NSEntityDescription? = NSEntityDescription.entityForName(&quot;CollectGank&quot;, inManagedObjectContext: context) //è®¾ç½®æ•°æ®è¯·æ±‚çš„å®ä½“ç»“æ„ fetchRequest.entity = entity //è®¾ç½®æŸ¥è¯¢æ¡ä»¶ let predicate = NSPredicate(format: &quot;name = &apos;\\(gank.name)&apos;&quot;) fetchRequest.predicate = predicate //æŸ¥è¯¢æ“ä½œ do &#123; let fetchedObjects:[AnyObject]? = try context.executeFetchRequest(fetchRequest) print(fetchedObjects) //éå†æŸ¥è¯¢çš„ç»“æœ for info:KL_Test in fetchedObjects as! [KL_Test]&#123; //åˆ é™¤å¯¹è±¡ context.deleteObject(info) &#125; //é‡æ–°ä¿å­˜-æ›´æ–°åˆ°æ•°æ®åº“ try context.save() &#125;catch &#123; fatalError(&quot;ä¸èƒ½ä¿å­˜ï¼š\\(error)&quot;) &#125; &#125;&#125;","categories":[],"tags":[{"name":"iOS","slug":"iOS","permalink":"https://kysonyangs.github.io/tags/iOS/"}]},{"title":"Charlesä½¿ç”¨","slug":"Charlesä½¿ç”¨","date":"2016-06-10T10:15:17.000Z","updated":"2020-05-17T08:15:40.358Z","comments":true,"path":"default/Charlesä½¿ç”¨/","link":"","permalink":"https://kysonyangs.github.io/default/Charlesä½¿ç”¨/","excerpt":"Charles ä¸»è¦çš„åŠŸèƒ½ æˆªå– Http å’Œ Https ç½‘ç»œå°åŒ…ã€‚ æ”¯æŒé‡å‘ç½‘ç»œè¯·æ±‚ï¼Œæ–¹ä¾¿åç«¯è°ƒè¯•ã€‚ æ”¯æŒä¿®æ”¹ç½‘ç»œè¯·æ±‚å‚æ•°ã€‚ æ”¯æŒç½‘ç»œè¯·æ±‚çš„æˆªè·å¹¶åŠ¨æ€ä¿®æ”¹ã€‚ æ”¯æŒæ¨¡æ‹Ÿæ…¢é€Ÿç½‘ç»œã€‚","text":"Charles ä¸»è¦çš„åŠŸèƒ½ æˆªå– Http å’Œ Https ç½‘ç»œå°åŒ…ã€‚ æ”¯æŒé‡å‘ç½‘ç»œè¯·æ±‚ï¼Œæ–¹ä¾¿åç«¯è°ƒè¯•ã€‚ æ”¯æŒä¿®æ”¹ç½‘ç»œè¯·æ±‚å‚æ•°ã€‚ æ”¯æŒç½‘ç»œè¯·æ±‚çš„æˆªè·å¹¶åŠ¨æ€ä¿®æ”¹ã€‚ æ”¯æŒæ¨¡æ‹Ÿæ…¢é€Ÿç½‘ç»œã€‚ å°†Charles è®¾ç½®æˆç³»ç»Ÿä»£ç†é€‰æ‹©èœå•ä¸­çš„â€Proxyâ€ -&gt; â€œMac OX Proxyâ€ å°†Charlesè®¾ç½®æˆç³»ç»Ÿä»£ç†ã€‚è¿™æ ·å°±å¯ä»¥çœ‹åˆ°æœ¬æœºçš„ç½‘ç»œå¼ºæ±‚äº†â€¦ è¿‡æ»¤ç½‘ç»œè¯·æ±‚ åœ¨Filterä¸­å¡«å…¥ä½ æƒ³è¿‡éœ€è¦çš„å…³é”®å­— é€‰æ‹©èœå•â€Proxyâ€ -&gt; â€œRecording Settingâ€ -&gt; â€œIncludeâ€,æ·»åŠ ä¸€ä¸ªé¡¹ç›®ï¼Œå¡«å…¥ç›‘æ§çš„åè®®ï¼Œä¸»æœºåœ°å€ï¼Œç«¯å£å·ï¼Œå°±å¯ä»¥åªæˆªå–ç›®æ ‡ç½‘ç«™çš„å°åŒ…ã€‚ åœ¨æƒ³è¿‡æ»¤çš„ç½‘ç»œè¯·æ±‚ä¸Šå³å‡»ï¼Œé€‰æ‹© â€œFocusâ€ï¼Œä¹‹ååœ¨ Filter ä¸€æ å‹¾é€‰ä¸Š Focussed ä¸€é¡¹ å…¶ä¸­1ã€3æ˜¯ä¸´æ—¶æ€§çš„ï¼Œ 2æ˜¯ç»å¸¸æ€§çš„ã€‚ æˆªå–iPhoneä¸Šçš„ç½‘ç»œå°åŒ… Charles è®¾ç½®å°† Charles çš„ä»£ç†åŠŸèƒ½æ‰“å¼€ï¼Œ é€‰æ‹©èœå•â€Proxyâ€ -&gt; â€œProxy Settingsâ€, åœ¨Portå¡«å…¥ä»£ç†ç«¯å£8080ï¼Œå¹¶ä¸”å‹¾ä¸Šâ€Enable transparent HTTP proxyingâ€ï¼Œå¦‚å›¾ï¼š iPhoneè®¾ç½®2.1 è·å–ç”µè„‘IPåœ°å€ // 192.168.0.127é€‰æ‹©èœå•â€Helpâ€ -&gt; â€œLocal IP Addressâ€æŸ¥çœ‹æœ¬æœºIP2.2 iPhoneè®¾ç½® -&gt; Wi-Fi -&gt; å½“å‰è¿æ¥çš„wifi -&gt; ç‚¹å‡»å³ä¾§è¯¦æƒ…æŒ‰é’® -&gt; åº•éƒ¨HTTPä»£ç†é€‰æ‹©æ‰‹åŠ¨ -&gt; æœåŠ¡å™¨å¡«ä¸Šç”µè„‘çš„IPåœ°å€ -&gt; ç«¯å£å·å¡« 8080 ç”µè„‘Chrolesä¼šå¼¹å‡ºä¸€ä¸ªæ˜¯å¦ç¡®è®¤çš„èœå•ï¼Œé€‰æ‹©Allowï¼ï¼ï¼ OK,å®Œæˆï¼ HTTPæŠ“åŒ… æ‰“å¼€Charlesç¨‹åº æŸ¥çœ‹Macç”µè„‘çš„IPåœ°å€ï¼Œå¦‚192.168.1.7 æ‰“å¼€iOSè®¾ç½®ï¼Œè¿›å…¥å½“å‰wifiè¿æ¥ï¼Œè®¾ç½®HTTPä»£ç†Groupï¼Œå°†æœåŠ¡å™¨å¡«ä¸ºä¸Šä¸€æ­¥ä¸­è·å¾—çš„IPï¼Œå³192.168.1.7ï¼Œç«¯å£å¡«8888 iOSè®¾å¤‡æ‰“å¼€ä½ è¦æŠ“åŒ…çš„appè¿›è¡Œç½‘ç»œæ“ä½œ Charleså¼¹å‡ºç¡®è®¤æ¡†ï¼Œç‚¹å‡»AllowæŒ‰é’®å³å¯ HTTPSæŠ“åŒ… åœ¨ iOS è®¾å¤‡ä¸Šæ‰“å¼€è¿™ä¸ªç½‘å€ http://www.charlesproxy.com/getssl å®‰è£… Charles SSL è¯ä¹¦ åœ¨Charlesçš„å·¥å…·æ ä¸Šç‚¹å‡»è®¾ç½®æŒ‰é’®ï¼Œé€‰æ‹©Proxy Settingsâ€¦3 åˆ‡æ¢åˆ°SSLé€‰é¡¹å¡ï¼Œé€‰ä¸­Enable SSL Proxyingï¼Œåˆ«æ€¥ï¼Œé€‰å®Œå…ˆåˆ«å…³æ‰ï¼Œè¿˜æœ‰ä¸‹ä¸€æ­¥ è¿™ä¸€æ­¥è·ŸFiddlerä¸åŒï¼ŒFiddlerå®‰è£…è¯ä¹¦åå°±å¯ä»¥æŠ“HTTPSç½‘å€çš„åŒ…äº†ï¼ŒCharlesåˆ™éº»çƒ¦ä¸€äº›ï¼Œéœ€è¦åœ¨ä¸Šä¸€æ­¥çš„SSLé€‰é¡¹å¡çš„Locationsè¡¨å•å¡«å†™è¦æŠ“åŒ…çš„åŸŸåå’Œç«¯å£ï¼Œç‚¹å‡»AddæŒ‰é’®ï¼Œåœ¨å¼¹å‡ºçš„è¡¨å•ä¸­Hostå¡«å†™åŸŸåï¼Œæ¯”å¦‚å¡«api.instagram.comï¼ŒPortå¡«443","categories":[],"tags":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://kysonyangs.github.io/tags/å·¥å…·/"}]},{"title":"GCD","slug":"GCD","date":"2016-06-10T07:38:34.000Z","updated":"2020-05-17T08:15:20.433Z","comments":true,"path":"default/GCD/","link":"","permalink":"https://kysonyangs.github.io/default/GCD/","excerpt":"Queue main queue: ä¸»çº¿ç¨‹é˜Ÿåˆ—ï¼Œä¸²è¡Œé˜Ÿåˆ—ã€‚ä¸€èˆ¬ç”¨äºåˆ·æ–°UIã€‚ global queue: å…¨å±€é˜Ÿåˆ—ï¼Œå¹¶è¡Œé˜Ÿåˆ—ã€‚ custom queue: è‡ªå®šä¹‰é˜Ÿåˆ—ã€‚*","text":"Queue main queue: ä¸»çº¿ç¨‹é˜Ÿåˆ—ï¼Œä¸²è¡Œé˜Ÿåˆ—ã€‚ä¸€èˆ¬ç”¨äºåˆ·æ–°UIã€‚ global queue: å…¨å±€é˜Ÿåˆ—ï¼Œå¹¶è¡Œé˜Ÿåˆ—ã€‚ custom queue: è‡ªå®šä¹‰é˜Ÿåˆ—ã€‚* 123456789// ä¸€èˆ¬ç”¨æ³•dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; for (int i = 0; i &lt; 100000; i++) &#123; NSLog(@&quot;%zd&quot;, i); &#125; dispatch_async(dispatch_get_main_queue(), ^&#123; NSLog(@&quot;åˆ·æ–°UI&quot;); &#125;); &#125;); è‡ªå®šä¹‰é˜Ÿåˆ— ä¸²è¡Œé˜Ÿåˆ— åŒæ­¥è¿è¡Œ 123456789101112dispatch_queue_t serialQueue = dispatch_queue_create(&quot;kl.serialQueue&quot;, DISPATCH_QUEUE_SERIAL);for (int j = 0; j &lt; 3; j++) &#123; dispatch_sync(serialQueue, ^&#123; for (int i = 0 ; i &lt; 3; i++) &#123; NSLog(@&quot;current Thread %@ -- concurrentQueue %zd -- dispatch_async %zd&quot;,[NSThread currentThread] ,j, i); &#125; &#125;); NSLog(@&quot;run in mainQueue&quot;);&#125;// è¿è¡Œç»“æœåˆ†æ: çº¿ç¨‹æŒ‡é’ˆåœ°å€ç›¸åŒï¼Œæ˜¯åŒä¸€ä¸ªçº¿ç¨‹ï¼›è¾“å‡ºç»“æœæŒ‰åºè¾“å‡ºï¼Œä¸²è¡Œé˜Ÿåˆ—å…ˆè¿›å…ˆå‡ºã€‚// `run in mainQueue` å‡ºç°åœ¨forå¾ªç¯ä¹‹åå³dispatch_syncä»»åŠ¡æ‰§è¡Œå®Œä¹‹åï¼Œå› ä¸ºä¸²è¡Œé˜Ÿåˆ—åŒæ­¥è¿è¡Œï¼Œé˜»å¡ä¸»çº¿ç¨‹ã€‚// åœ¨è¿™é‡Œå‘ç°åˆ›å»ºçš„çº¿ç¨‹å’Œä¸»çº¿ç¨‹åœ°å€ç›¸åŒï¼Œè¯´æ˜ä¸²è¡Œé˜Ÿåˆ—åŒæ­¥è¿è¡Œæ˜¯ç›´æ¥åœ¨ä¸»çº¿ç¨‹ä¸­è¿è¡Œçš„ï¼ å¼‚æ­¥è¿è¡Œ 1234567891011dispatch_queue_t serialQueue = dispatch_queue_create(&quot;kl.serialQueue&quot;, DISPATCH_QUEUE_SERIAL);for (int j = 0; j &lt; 3; j++) &#123; dispatch_async(serialQueue, ^&#123; for (int i = 0 ; i &lt; 3; i++) &#123; NSLog(@&quot;current Thread %@ -- concurrentQueue %zd -- dispatch_async %zd&quot;,[NSThread currentThread] ,j, i); &#125; &#125;); NSLog(@&quot;run in mainQueue&quot;);&#125;// è¿è¡Œç»“æœåˆ†æ: çº¿ç¨‹æŒ‡é’ˆåœ°å€ç›¸åŒï¼Œæ˜¯åŒä¸€ä¸ªçº¿ç¨‹ï¼›è¾“å‡ºç»“æœæŒ‰åºè¾“å‡ºï¼Œä¸²è¡Œé˜Ÿåˆ—å…ˆè¿›å…ˆå‡ºã€‚// `run in mainQueue` å‡ºç°éšæœºï¼Œå› ä¸ºæ˜¯å¼‚æ­¥è¿è¡Œï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹ã€‚ å¹¶è¡Œé˜Ÿåˆ— åŒæ­¥è¿è¡Œ 12345678910111213dispatch_queue_t concurrentQueue = dispatch_queue_create(&quot;kl.concurrentQueue&quot;, DISPATCH_QUEUE_CONCURRENT);for (int j = 0; j &lt; 3; j++) &#123; dispatch_sync(concurrentQueue, ^&#123; for (int i = 0 ; i &lt; 3; i++) &#123; NSLog(@&quot;current Thread %@ -- concurrentQueue %zd -- dispatch_async %zd&quot;,[NSThread currentThread] ,j, i); &#125; &#125;); NSLog(@&quot;run in mainQueue current Thread %@&quot;, [NSThread currentThread]);&#125;// è¿è¡Œç»“æœåˆ†æ: çº¿ç¨‹åœ°å€ç›¸åŒï¼Œä¸”ä¸ä¸»çº¿ç¨‹é˜Ÿåˆ—åœ°å€ç›¸åŒï¼Œ// ç»“åˆä¸²è¡Œé˜Ÿåˆ—åŒæ­¥è¿è¡Œä¸ä¸²è¡Œé˜Ÿåˆ—å¼‚æ­¥è¿è¡Œç»“æœæ¥çœ‹ï¼ŒåŒæ­¥è¿è¡Œæ—¶çº¿ç¨‹éƒ½æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸Šè¿è¡Œï¼Œä¸å¼€è¾Ÿæ–°çš„çº¿ç¨‹ã€‚// è¿è¡Œç»“æœä¸ä¸²è¡Œé˜Ÿåˆ—åŒæ­¥è¿è¡Œç›¸åŒ å¼‚æ­¥è¿è¡Œ 12345678910111213dispatch_queue_t concurrentQueue = dispatch_queue_create(&quot;kl.concurrentQueue&quot;, DISPATCH_QUEUE_CONCURRENT);for (int j = 0; j &lt; 3; j++) &#123; dispatch_async(concurrentQueue, ^&#123; for (int i = 0 ; i &lt; 3; i++) &#123; NSLog(@&quot;current Thread %@ -- concurrentQueue %zd -- dispatch_async %zd&quot;,[NSThread currentThread] ,j, i); &#125; &#125;); NSLog(@&quot;run in mainQueue current Thread %@&quot;, [NSThread currentThread]);&#125;// è¿è¡Œç»“æœåˆ†æ: è¾“å‡ºç»“æ„ä¹±åºï¼Œå› ä¸ºæ˜¯å¹¶è¡Œçš„å¼‚æ­¥æ‰§è¡Œï¼Œ// ä¸èƒ½å†³å®šè°å…ˆè°åï¼Œä¸”å‘ç°çº¿ç¨‹åœ°å€ä¸åŒï¼Œè¯´æ˜å¼€äº†å¤šæ¡çº¿ç¨‹æ‰§è¡Œé˜Ÿåˆ—ï¼Œ// `run in mainQueue` å‡ºç°éšæœºï¼Œå› ä¸ºæ˜¯å¼‚æ­¥è¿è¡Œï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹ã€‚ æ€»ç»“: dispatch_sync å¹¶ä¸ä¼šå¼€è¾Ÿæ–°çš„çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œæ‰€ä»¥ä¸ç®¡æ˜¯ä¸²è¡Œé˜Ÿåˆ—è¿˜æ˜¯å¹¶è¡Œé˜Ÿåˆ—å…¶å®éƒ½åœ¨ä¸€ä¸ªçº¿ç¨‹(mainQueueä¹Ÿåœ¨ä¸»çº¿ç¨‹)ä¸­è¿è¡Œï¼Œä¸”å®ƒæ˜¯åŒæ­¥çš„ï¼Œæ‰€ä»¥é˜»å¡ä¸»çº¿ç¨‹ï¼Œä¸€å®šå¾—é˜Ÿåˆ—ä»»åŠ¡å®Œæˆä¹‹åæ‰ä¼šæ‰§è¡Œä¹‹åçš„ä»»åŠ¡ï¼ dispatch_async ä¼šå¼‚æ­¥çš„è¿è¡Œé˜Ÿåˆ—ä»»åŠ¡ï¼Œä½†æ˜¯ä¸²è¡Œé˜Ÿåˆ—åªåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­ï¼Œæ‰€ä»¥åªæ˜¯ä¸é˜»å¡ä¸»çº¿ç¨‹ï¼Œä½†æ˜¯è¿˜æ˜¯éµè¡Œä¸²è¡Œé˜Ÿåˆ—FIFO(å…ˆè¿›å…ˆå‡º)æ‰§è¡Œä»»åŠ¡ï¼Œ è€Œå¹¶è¡Œé˜Ÿåˆ—ä¼šå¼€å¤šæ¡çº¿ç¨‹è¿›è¡Œå¼‚æ­¥æ‰§è¡Œä»»åŠ¡ï¼Œæ•ˆç‡æ›´é«˜ï¼ dispatch_barrieråœ¨ dispatch_barrier ä¹‹åçš„ä»»åŠ¡æ€»æ˜¯ä¼šåœ¨ dispatch_barrier ä¹‹å‰çš„ä»»åŠ¡æ‰§è¡Œå®Œä¹‹ååœ¨æ‰§è¡Œ dispatch_barrier_sync 1234567891011121314151617181920212223for (int i = 0; i &lt; 3; i++) &#123; dispatch_async(self.concurrentQueue, ^&#123; NSLog(@&quot;current Thread %@ -- dispatch_async_1 %zd&quot;,[NSThread currentThread], i); &#125;);&#125;NSLog(@&quot;dispatch_async_1_main&quot;);for (int i = 0; i &lt; 3; i++) &#123; dispatch_barrier_sync(self.concurrentQueue, ^&#123; NSLog(@&quot;current Thread %@ -- dispatch_barrier_sync %zd&quot;,[NSThread currentThread], i); if (i == 4) &#123; NSLog(@&quot;dispatch_barrier_sync finished&quot;); &#125; &#125;);&#125;NSLog(@&quot;dispatch_barrier_sync_main&quot;);for (int i = 0; i &lt; 3; i++) &#123; dispatch_async(self.concurrentQueue, ^&#123; NSLog(@&quot;current Thread %@ -- dispatch_async_2 %zd&quot;,[NSThread currentThread], i); &#125;);&#125;NSLog(@&quot;dispatch_async_2_main&quot;);// ç»“æœåˆ†æ å…ˆå¹¶å‘å¼‚æ­¥æ‰§è¡Œ dispatch_async_1,// åœ¨æ‰§è¡Œ dispatch_barrier_sync ,æœ€åå¹¶å‘å¼‚æ­¥æ‰§è¡Œ dispatch_async_2, dispatch_barrier_sync ä¼šé˜»å¡ä¸»çº¿ç¨‹ dispatch_barrier_async 12345678910111213141516171819202122232425for (int i = 0; i &lt; 3; i++) &#123; dispatch_async(self.concurrentQueue, ^&#123; NSLog(@&quot;current Thread %@ -- dispatch_async_1 %zd&quot;,[NSThread currentThread], i); &#125;); &#125; NSLog(@&quot;dispatch_async_1_main&quot;); for (int i = 0; i &lt; 3; i++) &#123; dispatch_barrier_async(self.concurrentQueue, ^&#123; NSLog(@&quot;current Thread %@ -- dispatch_barrier_async %zd&quot;,[NSThread currentThread], i); if (i == 2) &#123; NSLog(@&quot;dispatch_barrier_sync finished&quot;); &#125; &#125;); &#125; NSLog(@&quot;dispatch_barrier_sync_main&quot;); for (int i = 0; i &lt; 3; i++) &#123; dispatch_async(self.concurrentQueue, ^&#123; NSLog(@&quot;current Thread %@ -- dispatch_async_2 %zd&quot;,[NSThread currentThread], i); &#125;); &#125; NSLog(@&quot;dispatch_async_2_main&quot;); // ç»“æœåˆ†æ: é¦–å…ˆå®ƒä»ç„¶ä¼šé˜»æ‹¦ dispatch_barrier_async ä¹‹åçš„ä»»åŠ¡ç­‰ä¹‹å‰ä»»åŠ¡æ‰§è¡Œå®Œä¹‹åå†æ‰§è¡Œï¼Œ // å…¶æ¬¡ä»–ç”±äºæ˜¯å¼‚æ­¥çš„æ‰€ä»¥ä¸é˜»å¡ä¸»çº¿ç¨‹ï¼Œ // ä½†æ˜¯æˆ‘å‘ç° `dispatch_barrier_async`é‡Œé¢æ‰§è¡Œçš„è®¤ä¸ºåœ¨ä¸€æ¡çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œä¸”æŒ‰é¡ºåºæ‰§è¡Œçš„ï¼ // æ‰€ä»¥æˆ‘ä»¬åšè€—æ—¶æ“ä½œçš„æ—¶å€™å°½é‡ä¸è¦æ”¾åœ¨`dispatch_barrier_async`ä¸­æ‰§è¡Œï¼Œå› ä¸ºè™½ç„¶ä»–ä¸é˜»å¡ä¸»çº¿ç¨‹é˜Ÿåˆ—ï¼Œä½†æ˜¯ä¼šé˜»å¡æˆ‘ä»¬è‡ªåˆ›çš„é˜Ÿåˆ—å•Šï¼ æ³¨æ„ï¼š dispatch_barrier ä¸è¦ç”¨åœ¨global queue ä¸­ï¼Œå› ä¸º dispatch_barrier åªä½¿ç”¨åœ¨ä¸€æ¡å¹¶è¡Œé˜Ÿåˆ—ä¸­ï¼Œè€Œglobal queue æ˜¯æ¯æ¬¡ç³»ç»Ÿåˆ†é…ä¸€ä¸ªå¹¶è¡Œé˜Ÿåˆ—(å¯èƒ½æ˜¯ä¸åŒçš„)ï¼Œæ‰€ä»¥æ²¡æœ‰æ„ä¹‰ï¼ dispatch_barrier_asyncé‡Œé¢æ‰§è¡Œçš„è®¤ä¸ºåœ¨ä¸€æ¡çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œä¸”æŒ‰é¡ºåºæ‰§è¡Œçš„ï¼æ‰€ä»¥æˆ‘ä»¬åšè€—æ—¶æ“ä½œçš„æ—¶å€™å°½é‡ä¸è¦æ”¾åœ¨dispatch_barrier_asyncä¸­æ‰§è¡Œï¼Œå› ä¸ºè™½ç„¶ä»–ä¸é˜»å¡ä¸»çº¿ç¨‹é˜Ÿåˆ—ï¼Œä½†æ˜¯ä¼šé˜»å¡æˆ‘ä»¬è‡ªåˆ›çš„é˜Ÿåˆ—ï¼ NSDictionary: çº¿ç¨‹å®‰å…¨, ä½†æ˜¯NSMutableDictionary: ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ dispatch_barrier_async æ¥ä¿è¯ NSMutableDictionary çº¿ç¨‹å®‰å…¨!(Get&amp;&amp;Set) dispatch_semaphone: ä¿¡å·é‡(ç”¨äºå¹¶å‘æ§åˆ¶) dispatch_semaphore_create(3) åˆ›å»ºä¿¡å·é‡ï¼Œä¼ å…¥ä¸€ä¸ªå¤§äºç­‰äº0çš„longå‹æ•´æ•°(æ¯”ä½œåœè½¦ä½ï¼Œæœ‰äº†åœè½¦ä½æ‰èƒ½åœè½¦) dispatch_semaphore_signal(semaphone) ä¼ å…¥ä¸€ä¸ªä¿¡å·é‡ï¼Œæ‰§è¡Œä¸€æ¬¡ï¼Œå¢åŠ ä¸€æ¬¡semaphoneè®¡æ•°(å¯ä»¥è¿™ä¹ˆç†è§£: ä¸€è¾†è½¦å¼€èµ°äº†ï¼Œç„¶åè¿™ä¸ªåœè½¦ä½å°±ç©ºå‡ºæ¥äº†ï¼Œç®—ä½œå¢åŠ ä¸€ä¸ªåœè½¦ä½); è¿”å›å€¼ä¸º0æ—¶è¡¨ç¤ºå½“å‰å¹¶æ²¡æœ‰çº¿ç¨‹ç­‰å¾…å…¶å¤„ç†çš„ä¿¡å·é‡; è¿”å›å€¼ä¸ä¸º0æ—¶ï¼Œè¡¨ç¤ºå…¶å½“å‰æœ‰ï¼ˆä¸€ä¸ªæˆ–å¤šä¸ªï¼‰çº¿ç¨‹ç­‰å¾…å…¶å¤„ç†çš„ä¿¡å·é‡ï¼Œå¹¶ä¸”è¯¥å‡½æ•°å”¤é†’äº†ä¸€ä¸ªç­‰å¾…çš„çº¿ç¨‹(ä¼˜å…ˆçº§é«˜çš„å…ˆè¢«å”¤é†’ï¼Œå¦åˆ™éšæœº) dispatch_semaphore_wait(semaphone, dispatch_time(DISPATCH_TIME_NOW, 5)); æ¯è¿è¡Œä¸€æ¬¡ï¼Œsemaphoneè®¡æ•°-1ï¼Œå¦‚æœsemaphoneè®¡æ•°ä¸º0ï¼Œé‚£ä¹ˆæ ¹æ®ä¼ å…¥çš„ç­‰å¾…æ—¶é—´ç­‰å¾…ï¼Œå¦‚æœç­‰å¾…æ—¶é—´è®¾ç½®ä¸ºDISPATCH_TIME_FOREVER,é‚£ä¹ˆå°±æ°¸è¿œç­‰å¾…ï¼Œæ°¸è¿œä¸ä¼šæ‰§è¡Œä¹‹åçš„äº†ï¼Œ é™¤éä¿¡å·é‡è®¡æ•°&gt;1äº†! (å¯ä»¥è¿™ä¹ˆç†è§£: åœ¨è¿™é‡Œåˆ¤æ–­æ˜¯å¦æœ‰åœè½¦ä½å‰©ä½™ï¼Œå¦‚æœæœ‰å°±åœè½¦ï¼Œæ²¡æœ‰çš„è¯å°±ç­‰å¾…è½¦ä½ç©ºå‡ºå†åœè½¦ï¼Œå¦‚æœè¶…å‡ºç­‰å¾…æ—¶é—´ï¼Œè¿™ä¸ªäººå°±ç­‰ä¸ä¸‹å»äº†ï¼Œå¼€è½¦èµ°äº†); å¦‚æœç­‰å¾…æœŸé—´æ²¡æœ‰è·å–åˆ°ä¿¡å·é‡æˆ–è€…ä¿¡å·é‡çš„å€¼ä¸€ç›´ä¸º0ï¼Œé‚£ä¹ˆç­‰åˆ°timeoutæ—¶ï¼Œå…¶æ‰€å¤„çº¿ç¨‹è‡ªåŠ¨æ‰§è¡Œå…¶åè¯­å¥ 1234567891011121314// sample1:dispatch_semaphore_t semaphone = dispatch_semaphore_create(2); for (int i = 0; i &lt; 10; i++) &#123; if(dispatch_semaphore_wait(semaphone, dispatch_time(DISPATCH_TIME_NOW, 2 *NSEC_PER_SEC)) == 0) &#123; dispatch_async(self.concurrentQueue, ^&#123; NSLog(@&quot;i will sleep 3 second %zd&quot;, i); sleep(3); NSLog(@&quot;i am wake up %zd&quot;, i); NSLog(@&quot;%zd signal %ld&quot;,i, dispatch_semaphore_signal(semaphone)); &#125;); &#125;else&#123; NSLog(@&quot;ç­‰ä¸ä¸‹å»äº†ï¼Œèµ°äºº&quot;); &#125; &#125; 123456789101112// sample2:dispatch_semaphore_t semaphone = dispatch_semaphore_create(0);NSLog(@&quot;Boss: Kellen, wake up! working&quot;);dispatch_async(self.concurrentQueue, ^&#123; NSLog(@&quot;Kellen: I am sleep!&quot;); sleep(5); NSLog(@&quot;Kellen: I am wake up!&quot;); dispatch_semaphore_signal(semaphone);&#125;);dispatch_semaphore_wait(semaphone, DISPATCH_TIME_FOREVER);NSLog(@&quot;Kellen: I am working...&quot;);// ç­‰å¾…æ‰§è¡Œ NSLog(@&quot;Kellen: I am working...&quot;); ä»¥ä¸Šä¸¤ç§æ–¹æ¡ˆçš„è¯ çœ‹ä½ æƒ…å†µä½¿ç”¨ï¼(ä¿¡å·é‡è®¾ä¸º0 ,!0) dispatch_group dispatch_group_notifyç›‘å¬dispatch_queueä¸­æ‰€æœ‰çš„ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œæ‰§è¡ŒæŸäº›æ“ä½œ 1234567891011121314151617dispatch_group_t group = dispatch_group_create();dispatch_group_async(group, self.concurrentQueue, ^&#123; for (int i = 0; i &lt; 3; i++) &#123; NSLog(@&quot;1 %@ %zd&quot;, [NSThread currentThread], i); &#125;&#125;);NSLog(@&quot;haha 1111&quot;);dispatch_group_async(group, self.serialQueue, ^&#123; for (int i = 0; i &lt; 3; i++) &#123; NSLog(@&quot;2 %@ %zd&quot;, [NSThread currentThread], i); &#125;&#125;);NSLog(@&quot;haha 2222&quot;);dispatch_group_notify(group, dispatch_get_main_queue(), ^&#123; // ä»»åŠ¡å…¨éƒ¨å®Œæˆå¤„ç† NSLog(@&quot;ç»„å†…ä»»åŠ¡å…¨éƒ¨å®Œæˆï¼Œè¯·æ£€éªŒ...&quot;);&#125;); enter &amp;&amp; levep dispatch_group_enter(group); è¿›å…¥ç»„ dispatch_group_leave(group); ç¦»å¼€ç»„ dispatch_group_wait(group, DISPATCH_TIME_FOREVER);(ç­‰å¾…ç»„å†…ä»»åŠ¡å®Œæˆ)12345678910111213141516171819dispatch_group_t group = dispatch_group_create();for (int i = 0; i &lt; 3; i++) &#123; dispatch_group_enter(group); dispatch_async(self.concurrentQueue, ^&#123; NSLog(@&quot;è¿›å…¥ç¬¬%zdä¸ªå¼‚æ­¥ sleep 3ç§’&quot;, i); sleep(3); NSLog(@&quot;ç¦»å¼€ç¬¬%zdä¸ªå¼‚æ­¥ sleep å®Œæˆ&quot;, i); dispatch_group_leave(group); &#125;);&#125;// 1 -----dispatch_group_wait(group, DISPATCH_TIME_FOREVER);dispatch_async(dispatch_get_main_queue(), ^&#123; NSLog(@&quot;ç½‘ç»œä¸‹è½½ä»»åŠ¡å…¨éƒ¨å®Œæˆï¼Œè¯·åˆ·æ–°UI&quot;);&#125;);// // 2 ------ 1/2 ä»»é€‰1// dispatch_group_notify(group, dispatch_get_main_queue(), ^&#123;// NSLog(@&quot;ç½‘ç»œä¸‹è½½ä»»åŠ¡å…¨éƒ¨å®Œæˆï¼Œè¯·åˆ·æ–°UI&quot;);// &#125;);","categories":[],"tags":[{"name":"iOS","slug":"iOS","permalink":"https://kysonyangs.github.io/tags/iOS/"}]},{"title":"CoreAniamtion","slug":"CoreAniamtion","date":"2016-05-25T07:34:51.000Z","updated":"2020-05-17T08:15:27.662Z","comments":true,"path":"default/CoreAniamtion/","link":"","permalink":"https://kysonyangs.github.io/default/CoreAniamtion/","excerpt":"UIView vs CALayer æ¯ä¸ª UIView å†…éƒ¨éƒ½æœ‰ä¸€ä¸ª CALayer åœ¨èƒŒåæä¾›å†…å®¹çš„ç»˜åˆ¶å’Œæ˜¾ç¤ºï¼Œä¸¤è€…éƒ½æœ‰æ ‘çŠ¶å±‚çº§ç»“æ„ï¼Œlayer å†…éƒ¨æœ‰ SubLayersï¼ŒView å†…éƒ¨æœ‰ SubViews; åœ¨ Viewæ˜¾ç¤ºçš„æ—¶å€™ï¼ŒUIView åšä¸º Layer çš„ CALayerDelegate,View çš„æ˜¾ç¤ºå†…å®¹ç”±å†…éƒ¨çš„ CALayer çš„ display; View å¯ä»¥æ¥å—äº‹ä»¶ï¼Œè€Œ Layer ä¸è¡Œ å±æ€§è¯´æ˜ @property(nullable, strong) id contents; : å¯ä»¥å°†CGImageèµ‹å€¼ç»™ä»–ï¼Œæ˜¾ç¤ºæˆä¸ºä¸€å¼ å›¾ç‰‡1layerView.layer.contents = (__bridge id _Nullable)(image.CGImage);","text":"UIView vs CALayer æ¯ä¸ª UIView å†…éƒ¨éƒ½æœ‰ä¸€ä¸ª CALayer åœ¨èƒŒåæä¾›å†…å®¹çš„ç»˜åˆ¶å’Œæ˜¾ç¤ºï¼Œä¸¤è€…éƒ½æœ‰æ ‘çŠ¶å±‚çº§ç»“æ„ï¼Œlayer å†…éƒ¨æœ‰ SubLayersï¼ŒView å†…éƒ¨æœ‰ SubViews; åœ¨ Viewæ˜¾ç¤ºçš„æ—¶å€™ï¼ŒUIView åšä¸º Layer çš„ CALayerDelegate,View çš„æ˜¾ç¤ºå†…å®¹ç”±å†…éƒ¨çš„ CALayer çš„ display; View å¯ä»¥æ¥å—äº‹ä»¶ï¼Œè€Œ Layer ä¸è¡Œ å±æ€§è¯´æ˜ @property(nullable, strong) id contents; : å¯ä»¥å°†CGImageèµ‹å€¼ç»™ä»–ï¼Œæ˜¾ç¤ºæˆä¸ºä¸€å¼ å›¾ç‰‡1layerView.layer.contents = (__bridge id _Nullable)(image.CGImage); @property(copy) NSString *contentsGravity; : ç±»ä¼¼äºUIViewçš„contentMode 123456789101112kCAGravityCenterkCAGravityTopkCAGravityBottomkCAGravityLeftkCAGravityRightkCAGravityTopLeftkCAGravityTopRightkCAGravityBottomLeftkCAGravityBottomRightkCAGravityResizekCAGravityResizeAspectkCAGravityResizeAspectFill @property BOOL masksToBounds; : è¶…å‡ºä½ç½®æ˜¯å¦è£åˆ‡ @property CGRect contentsRect;è¿™ä¸ªå±æ€§å†³å®šå›¾ç‰‡çš„æ˜¾ç¤ºä½ç½®ï¼Œé»˜è®¤æ˜¯{0ï¼Œ0ï¼Œ1ï¼Œ1}ä»å·¦ä¸Šè§’åˆ°å·¦ä¸‹è§’æ˜¾ç¤ºï¼Œä½ ä¹Ÿå¯ä»¥è®¾ä¸ºå…¶ä»–çš„,å‰ä¸¤ä¸ªæ˜¯èµ·ç‚¹æ¯”ä¾‹ï¼Œåä¸¤ä¸ªåˆ†åˆ«å¯¹åº”å®½åº¦å’Œé«˜åº¦æ¯”ä¾‹(è¯¥å±æ€§ä¸€èˆ¬ç”¨äºç»™ä½ ä¸€å¼ æœ‰è®¸å¤šå°å›¾çš„å¤§å›¾ï¼Œç„¶åä½ æ ¹æ®è‡ªå·±çš„éœ€è¦å»æ‹¿ä½ éœ€è¦çš„å›¾ç‰‡) @property CGRect contentsCenter; : ç±»ä¼¼äºUIImage resizableImageWithCapInsets å±æ€§ï¼ @property CGPoint position; : ç±»ä¼¼äºUIViewçš„Centerï¼Œ ä½†æ˜¯å®ƒä½œç”¨çš„ä¹Ÿæ˜¯UIViewçš„Centerè€Œä¸æ˜¯Layerçš„Centerå“¦ @property CGPoint anchorPoint; : æˆ‘çš„ç†è§£æ˜¯layerä¸­å¿ƒç‚¹çš„ä½ç½®ï¼Œé»˜è®¤ä¸º{0.5ï¼Œ0.5}ï¼Œæ‰€ä»¥å±…ä¸­æ˜¾ç¤ºï¼Œä½†æ˜¯å°†å®ƒè®¾ç½®ä¸º{0ï¼Œ0}ï¼Œé‚£ä¹ˆlayerä¼šä»¥{0ï¼Œ0}ä¸ºä¸­å¿ƒç‚¹æ˜¾ç¤ºå“¦ï¼è¿™æ—¶positionæ²¡å˜å“¦ï¼ @property CGFloat zPosition; @property CGFloat anchorPointZ;ç”±äºCALayeræ˜¯å­˜åœ¨äº3ç»´ç©ºé—´ä¸­çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ”¹å˜ä»–çš„zè½´(ä½ å¯ä»¥ç†è§£ä¸ºZè½´å°±æ˜¯å‚ç›´ä¸¥ä½ çš„å±å¹•çš„è½´) @property CGFloat cornerRadius; : åœ†è§’åŠå¾„(æˆ‘ä»¬ä¸€èˆ¬ç»™è§†å›¾åšåœ†è§’çš„æ—¶å€™ï¼Œå¦‚æœç•Œé¢ä¸æ˜¯å¤ªå¤šï¼Œå¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•ï¼Œä½†æ˜¯å¦‚æœæ˜¯å¯¹Cellé‡Œé¢çš„è§†å›¾è¿›è¡Œåœ†è§’è®¾ç½®æˆ–è€…å¤ªå¤šè§†å›¾éœ€è¦è¿›è¡Œåœ†è§’è®¾ç½®ï¼Œå°±åˆ«ç”¨è¿™ä¸ªå±æ€§äº†ï¼Œå› ä¸ºlayerçš„æ¸²æŸ“ä¼šè€—èµ„æº) @property CGFloat borderWidth; @property(nullable) CGColorRef borderColor;è¾¹æ¡†çš„Widthå’Œé¢œè‰²ï¼Œä¸å¿…å¤šè¯´ @property CGFloat shadowRadius; é˜´å½±æ¨¡ç³Šåº¦å…³äºé˜´å½±çš„ä¸€äº›å±æ€§ï¼Œå»ºè®®å¦‚cornerRadiusä¸€æ ·ï¼Œä½¿ç”¨é˜´å½±çš„æ—¶å€™åˆ«ç”¨maskToBoundså“¦ï¼å› ä¸ºé˜´å½±åœ¨èŒƒå›´å¤–ï¼Œä½¿ç”¨äº†ä¼šè¢«è£å‰ªæ‰å“¦ï¼shadowPath @property(nullable) CGColorRef shadowColor; é˜´å½±é¢œè‰² @property float shadowOpacity; é˜´å½±é€æ˜åº¦ @property CGSize shadowOffset; é˜´å½±åç§»é‡ @property(nullable) CGPathRef shadowPath; æ„Ÿè§‰è¯¥å±æ€§å°±æ˜¯ä¸ºäº†è§£å†³ä½¿ç”¨ä¸Šè¿°å±æ€§è®¾ç½®é˜´å½±å¥½èµ„æºè¯ç”Ÿçš„ï¼Œæ¨èä½¿ç”¨è¿™ä¸ªå±æ€§è®¾ç½®é˜´å½±å“¦ï¼123456layerView.layer.shadowOpacity = 0.5;layerView.layer.shadowColor = [UIColor redColor].CGColor;layerView.layer.shadowOffset = CGSizeMake(10, 10);// layerView.layer.shadowPath = CGPathCreateWithRect(layerView.layer.bounds, NULL);// layerView.layer.shadowPath = CGPathCreateWithRoundedRect(layerView.layer.bounds, layerView.layer.bounds.size.width * 0.5, layerView.layer.bounds.size.width * 0.5, NULL); (void)setAffineTransform:(CGAffineTransform)m; è¿™ä¸ªå°±æ˜¯UIViewçš„transformå®ç°1234567891011CGAffineTransform æ–¹æ³•CGAffineTransformMakeTranslation(CGFloat tx, CGFloat ty) // ç§»åŠ¨CGAffineTransformMakeScale(CGFloat sx, CGFloat sy) // æ”¾ç¼©CGAffineTransformMakeRotation(CGFloat angle) // æ—‹è½¬CGAffineTransformIdentity // å¤ä½ï¼Œåˆå§‹çŠ¶æ€æ··åˆå˜æ¢CGAffineTransformTranslate(CGAffineTransform t, CGFloat tx, CGFloat ty) // åœ¨tçš„åŸºç¡€ä¸Šç§»åŠ¨CGAffineTransformScale(CGAffineTransform t, CGFloat sx, CGFloat sy) // åœ¨tçš„åŸºç¡€ä¸Šæ”¾ç¼©CGAffineTransformRotate(CGAffineTransform t, CGFloat angle) // åœ¨tçš„åŸºç¡€ä¸Šæ—‹è½¬æ³¨æ„ï¼š æ—‹è½¬æ—¶ä½¿ç”¨çš„æ˜¯å¼§åº¦è€Œä¸æ˜¯è§’åº¦ï¼Œä½ å¯ä»¥åˆ©ç”¨ä¸‹åˆ—å…¬å¼è½¬æ¢è§’åº¦åˆ°å¼§åº¦#define RADIANS_TO_DEGREES(x) ((x)/M_PI*180.0) @property CATransform3D transform; ä»¿å°„å˜æ¢ 3DåŠ¨ç”» 12345CATransform3DMakeRotation(CGFloat angle, CGFloat x, CGFloat y, CGFloat z)CATransform3DMakeScale(CGFloat sx, CGFloat sy, CGFloat sz)CATransform3DMakeTranslation(Gloat tx, CGFloat ty, CGFloat tz)CATransform3Dçš„ m34 å…ƒç´ , ç”¨æ¥åšé€è§†,m34ç”¨äºæŒ‰æ¯”ä¾‹ç¼©æ”¾Xå’ŒYçš„å€¼æ¥è®¡ç®—åˆ°åº•è¦ç¦»è§†è§’å¤šè¿œã€‚ CAShapeLayer æ¸²æŸ“å¿«ï¼Œé«˜æ•ˆå®ç”¨å†…å­˜ï¼Œä¸ä¼šè¢«å›¾å±‚è¾¹ç•Œå‰ªè£æ‰ï¼Œä¸ä¼šå‡ºç°åƒç´ åŒ– ä¸€èˆ¬ç”¨CGPathæ¥ç»˜åˆ¶å½¢çŠ¶12345678910111213141516171819202122UIBezierPath *path = [[UIBezierPath alloc] init]; [path moveToPoint:CGPointMake(200, 100)]; // ç»˜åˆ¶åœ†[path addArcWithCenter:CGPointMake(170, 100) radius:30 startAngle:0 endAngle:2*M_PI clockwise:YES];// ç»˜åˆ¶çº¿æ¡[path moveToPoint:CGPointMake(150, 125)];[path addLineToPoint:CGPointMake(150, 175)];// ç»˜åˆ¶ï¼Œå±•ç¤ºCAShapeLayer *shapeLayer = [CAShapeLayer layer];shapeLayer.strokeColor = [UIColor redColor].CGColor;shapeLayer.fillColor = [UIColor clearColor].CGColor;shapeLayer.lineWidth = 5;shapeLayer.lineJoin = kCALineJoinRound;shapeLayer.lineCap = kCALineCapRound;shapeLayer.path = path.CGPath;[self.view.layer addSublayer:shapeLayer];// å†æä¸€ä¸ª ç»˜åˆ¶åœ†è§’(å¯é€‰4è§’)CGRect rect = CGRectMake(50, 50, 100, 100);CGSize radii = CGSizeMake(20, 20);UIRectCorner corners = UIRectCornerTopRight | UIRectCornerBottomRight | UIRectCornerBottomLeft;UIBezierPath *path = [UIBezierPath bezierPathWithRoundedRect:rect byRoundingCorners:corners cornerRadii:radii]; CATextLabelå›¾å±‚çš„å½¢å¼åŒ…å«äº†UILabelå‡ ä¹æ‰€æœ‰çš„ç»˜åˆ¶ç‰¹æ€§ï¼Œè€Œä¸”æ¯”UILabelæ¸²æŸ“çš„æ›´å¿«å“¦ï¼(å¦‚æœä½ æœ‰éœ€æ±‚åšä¸€ä¸ªè‡ªå®šåˆ¶çš„Label,ä¸é˜²è¯•è¯•è¿™ä¸ª)1234567891011121314151617181920212223242526272829303132333435363738CATextLayer *textLayel = [CATextLayer layer]; textLayel.frame = CGRectMake(100, 100, 200, 300); [self.view.layer addSublayer:textLayel]; textLayel.foregroundColor = [UIColor blackColor].CGColor; textLayel.backgroundColor = [UIColor orangeColor].CGColor; textLayel.alignmentMode = @&quot;justified&quot;; textLayel.wrapped = YES; UIFont *font = [UIFont systemFontOfSize:17]; CFStringRef fontName = (__bridge CFStringRef)(font.fontName); CGFontRef fontRef = CGFontCreateWithFontName(fontName); textLayel.font = fontRef; textLayel.fontSize = font.pointSize; /** * åˆ†è¾¨ç‡ */ textLayel.contentsScale = [UIScreen mainScreen].scale; CGFontRelease(fontRef); NSString *text = @&quot;Kellen is a good boy! Kellen is a good boy! Kellen is a good boy! Kellen is a good boy! Kellen is a good boy! Kellen is a good boy! Kellen is a good boy! Kellen is a good boy! Kellen is a good boy! Kellen is a good boy!&quot;; NSMutableAttributedString *string = [[NSMutableAttributedString alloc] initWithString:text]; //set text attributes NSDictionary *attribs = @&#123; NSForegroundColorAttributeName : [UIColor blackColor], NSFontAttributeName : font &#125;; [string setAttributes:attribs range:NSMakeRange(0, [text length])]; attribs = @&#123;NSForegroundColorAttributeName : [UIColor redColor]&#125;; [string setAttributes:attribs range:NSMakeRange(6, 5)]; textLayel.string = string; CAGradientLayerå¤„ç†é¢œè‰²æ¸å˜1234567CAGradientLayer *gradientLayer = [CAGradientLayer layer];gradientLayer.frame = CGRectMake(100, 100, 100, 100);[self.view.layer addSublayer:gradientLayer];gradientLayer.colors = @[(__bridge id)[UIColor redColor].CGColor, (__bridge id)[UIColor blueColor].CGColor, (__bridge id)[UIColor blackColor].CGColor];gradientLayer.locations = @[@0,@0.5,@1];gradientLayer.startPoint = CGPointMake(0, 0);gradientLayer.endPoint = CGPointMake(1, 1); CAEmitterLayer : ç²’å­å¼•æ“(ç›´æ’­é‚£äº›â¤ï¸åŠ¨ç”»ä¹‹ç±»çš„)123456789101112131415161718192021222324252627282930313233343536373839404142CAEmitterLayer *emitterLayer = [CAEmitterLayer layer];// å‘å°„å™¨åœ¨xyå¹³é¢çš„ä¸­å¿ƒä½ç½®emitterLayer.emitterPosition = CGPointMake(self.view.frame.size.width-50,self.view.frame.size.height-50);// å‘å°„å™¨çš„å°ºå¯¸å¤§å°emitterLayer.emitterSize = CGSizeMake(20, 20);// æ¸²æŸ“æ¨¡å¼emitterLayer.renderMode = kCAEmitterLayerUnordered;// å¼€å¯ä¸‰ç»´æ•ˆæœ// _emitterLayer.preservesDepth = YES;NSMutableArray *array = [NSMutableArray array];// åˆ›å»ºç²’å­for (int i = 0; i&lt;10; i++) &#123; // å‘å°„å•å…ƒ CAEmitterCell *stepCell = [CAEmitterCell emitterCell]; // ç²’å­çš„åˆ›å»ºé€Ÿç‡ï¼Œé»˜è®¤ä¸º1/s stepCell.birthRate = 1; // ç²’å­å­˜æ´»æ—¶é—´ stepCell.lifetime = arc4random_uniform(4) + 1; // ç²’å­çš„ç”Ÿå­˜æ—¶é—´å®¹å·® stepCell.lifetimeRange = 1.5; // é¢œè‰² // fire.color=[[UIColor colorWithRed:0.8 green:0.4 blue:0.2 alpha:0.1]CGColor]; UIImage *image = [UIImage imageNamed:[NSString stringWithFormat:@&quot;good%d_30x30&quot;, i]]; // ç²’å­æ˜¾ç¤ºçš„å†…å®¹ stepCell.contents = (id)[image CGImage]; // ç²’å­çš„åå­— // [fire setName:@&quot;step%d&quot;, i]; // ç²’å­çš„è¿åŠ¨é€Ÿåº¦ stepCell.velocity = arc4random_uniform(100) + 100; // ç²’å­é€Ÿåº¦çš„å®¹å·® stepCell.velocityRange = 80; // ç²’å­åœ¨xyå¹³é¢çš„å‘å°„è§’åº¦ stepCell.emissionLongitude = M_PI+M_PI_2;; // ç²’å­å‘å°„è§’åº¦çš„å®¹å·® stepCell.emissionRange = M_PI_2/6; // ç¼©æ”¾æ¯”ä¾‹ stepCell.scale = 0.3; [array addObject:stepCell];&#125;emitterLayer.emitterCells = array;[self.view.layer addSublayer:emitterLayer]; éšå¼åŠ¨ç”»å°±æ˜¯å½“ä½ æ”¹å˜æŸä¸ªå±æ€§æ˜¯æ—¶ï¼Œä»–ä¼šè‡ªåŠ¨å¹³æ»‘çš„è¿‡æ¸¡åˆ°æ–°çš„å€¼ã€‚è€Œä½ ä¸éœ€è¦å»å¼€å¯åŠ¨ç”»ã€‚æ¯”å¦‚ï¼š CALayerçš„backgroundColor äº‹åŠ¡å®é™…ä¸Šæ˜¯Core Animationç”¨æ¥åŒ…å«ä¸€ç³»åˆ—å±æ€§åŠ¨ç”»é›†åˆçš„æœºåˆ¶ï¼Œä»»ä½•ç”¨æŒ‡å®šäº‹åŠ¡å»æ”¹å˜å¯ä»¥åšåŠ¨ç”»çš„å›¾å±‚å±æ€§éƒ½ä¸ä¼šç«‹åˆ»å‘ç”Ÿå˜åŒ–ï¼Œè€Œæ˜¯å½“äº‹åŠ¡ä¸€æ—¦æäº¤çš„æ—¶å€™å¼€å§‹ç”¨ä¸€ä¸ªåŠ¨ç”»è¿‡æ¸¡åˆ°æ–°å€¼ã€‚äº‹åŠ¡æ˜¯é€šè¿‡CATransactionç±»æ¥åšç®¡ç†ï¼Œè¿™ä¸ªç±»çš„è®¾è®¡æœ‰äº›å¥‡æ€ªï¼Œä¸åƒä½ ä»å®ƒçš„å‘½åé¢„æœŸçš„é‚£æ ·å»ç®¡ç†ä¸€ä¸ªç®€å•çš„äº‹åŠ¡ï¼Œè€Œæ˜¯ç®¡ç†äº†ä¸€å ä½ ä¸èƒ½è®¿é—®çš„äº‹åŠ¡ã€‚CATransactionæ²¡æœ‰å±æ€§æˆ–è€…å®ä¾‹æ–¹æ³•ï¼Œå¹¶ä¸”ä¹Ÿä¸èƒ½ç”¨+allocå’Œ-initæ–¹æ³•åˆ›å»ºå®ƒã€‚ä½†æ˜¯å¯ä»¥ç”¨+beginå’Œ+commitåˆ†åˆ«æ¥å…¥æ ˆæˆ–è€…å‡ºæ ˆã€‚ 123456789101112131415161718// ä½¿ç”¨äº‹åŠ¡æ”¹å˜æ‰§è¡Œæ—¶é—´ï¼ˆé»˜è®¤ 0.25sï¼‰[CATransaction begin];(å…¥æ ˆ)[CATransaction setAnimationDuration:1.0];// å®Œæˆä¹‹ååœ¨æ—‹è½¬90åº¦(0.25så®Œæˆ)[CATransaction setCompletionBlock:^&#123; NSLog(@&quot;æ”¹å˜é¢œè‰²å®Œæˆï¼Œå¼€å§‹æ—‹è½¬&quot;); åœ¨é¢œè‰²æ”¹å˜ä¹‹å(å…¥æ ˆ) CGAffineTransform transform = self.colorLayer.affineTransform; self.colorLayer.affineTransform = CGAffineTransformRotate(transform, M_PI_2); (å‡ºæ ˆ)&#125;];CGFloat red = arc4random() / (CGFloat)INT_MAX;CGFloat green = arc4random() / (CGFloat)INT_MAX;CGFloat blue = arc4random() / (CGFloat)INT_MAX;self.colorLayer.backgroundColor = [UIColor colorWithRed:red green:green blue:blue alpha:1.0].CGColor;[CATransaction commit];(å‡ºæ ˆ) ä½ ä¹Ÿå¯ä»¥æ”¹å˜éšå¼åŠ¨ç”»çš„è¡Œä¸ºï¼ˆå¦‚ä½•æ¸å˜ï¼‰12345 // è¡Œä¸ºCATransition *transition = [CATransition animation];transition.type = kCATransitionPush;transition.subtype = kCATransitionFromLeft;self.colorLayer.actions = @&#123;@&quot;backgroundColor&quot;: transition&#125;; ä½†æ˜¯ä½ æŠŠä¸Šè¿°çš„self.colorLayer.backgroundColor = [UIColor colorWithRed:red green:green blue:blue alpha:1.0].CGColor;æ”¹æˆself.colorLayer.backgroundColor = [UIColor colorWithRed:red green:green blue:blue alpha:1.0].CGColor;ä½ ä¼šå‘ç°å®ƒæ˜¯ç¬é—´æ”¹å˜çš„ï¼Œè€Œä¸æ˜¯å¹³æ»‘çš„åŠ¨ç”»ã€‚å› ä¸ºéšå¼åŠ¨ç”»è¢«UIViewå…³è”å›¾å±‚ç»™ç¦äº†ï¼å› ä¸ºå¤„ç†UIViewåŠ¨ç”»ç”¨UIViewçš„åŠ¨ç”»å‡½æ•°ï¼Œè€Œä¸ä¾èµ–CATransactionã€‚ æ˜¾å¼åŠ¨ç”» CABasicAnimation(åŸºæœ¬åŠ¨ç”») 123456789101112CABasicAnimation *basicA = [CABasicAnimation animation];basicA.keyPath = @&quot;backgroundColor&quot;;basicA.toValue = (__bridge id _Nullable)(color.CGColor);basicA.delegate = self;basicA.duration = 1.0;[self.layerView.layer addAnimation:basicA forKey:nil];// ä»£ç†ï¼Œç›‘å¬åŠ¨ç”»å®Œæˆï¼Œè¿˜æœ‰ä¸ªåŠ¨ç”»å¼€å§‹çš„ç›‘å¬- (void)animationDidStop:(CABasicAnimation *)anim finished:(BOOL)flag &#123; NSLog(@&quot;animation end&quot;); self.layerView.layer.backgroundColor = (__bridge CGColorRef _Nullable)(anim.toValue);&#125; CAKeyframeAnimation (å…³é”®å¸§åŠ¨ç”»)ä¸é™åˆ¶äºè®¾ç½®ä¸€ä¸ªèµ·å§‹å’Œç»“æŸçš„å€¼ï¼Œè€Œæ˜¯å¯ä»¥æ ¹æ®ä¸€è¿ä¸²éšæ„çš„å€¼æ¥åšåŠ¨ç”»ã€‚ 123456789CAKeyframeAnimation *animation = [CAKeyframeAnimation animation];animation.keyPath = @&quot;backgroundColor&quot;;animation.duration = 2.0;animation.values = @[ (__bridge id)[UIColor blueColor].CGColor, (__bridge id)[UIColor redColor].CGColor, (__bridge id)[UIColor greenColor].CGColor, (__bridge id)[UIColor blueColor].CGColor];[self.layerView.layer addAnimation:animation forKey:nil]; 123456789UIBezierPath *bezierPath = [[UIBezierPath alloc] init];[bezierPath moveToPoint:CGPointMake(0, 150)];[bezierPath addCurveToPoint:CGPointMake(300, 150) controlPoint1:CGPointMake(75, 0) controlPoint2:CGPointMake(225, 300)];CAKeyframeAnimation *animation = [CAKeyframeAnimation animation];animation.keyPath = @&quot;position&quot;;animation.duration = 4.0;animation.path = bezierPath.CGPath;animation.rotationMode = kCAAnimationRotateAuto;[shipLayer addAnimation:animation forKey:nil]; åŠ¨ç”»ç»„CABasicAnimationå’ŒCAKeyframeAnimationä»…ä»…ä½œç”¨äºå•ç‹¬çš„å±æ€§ï¼Œè€ŒCAAnimationGroupå¯ä»¥æŠŠè¿™äº›åŠ¨ç”»ç»„åˆåœ¨ä¸€èµ·ã€‚ 12345678910111213141516171819202122232425262728293031UIBezierPath *bezierPath = [[UIBezierPath alloc] init];[bezierPath moveToPoint:CGPointMake(0, 150)];[bezierPath addCurveToPoint:CGPointMake(300, 150) controlPoint1:CGPointMake(75, 0) controlPoint2:CGPointMake(225, 300)];//draw the path using a CAShapeLayerCAShapeLayer *pathLayer = [CAShapeLayer layer];pathLayer.path = bezierPath.CGPath;pathLayer.fillColor = [UIColor clearColor].CGColor;pathLayer.strokeColor = [UIColor redColor].CGColor;pathLayer.lineWidth = 3.0f;[self.view.layer addSublayer:pathLayer];//add a colored layerCALayer *colorLayer = [CALayer layer];colorLayer.frame = CGRectMake(0, 0, 64, 64);colorLayer.position = CGPointMake(0, 150);colorLayer.backgroundColor = [UIColor greenColor].CGColor;[self.view.layer addSublayer:colorLayer];//create the position animationCAKeyframeAnimation *animation1 = [CAKeyframeAnimation animation];animation1.keyPath = @&quot;position&quot;;animation1.path = bezierPath.CGPath;animation1.rotationMode = kCAAnimationRotateAuto;//create the color animationCABasicAnimation *animation2 = [CABasicAnimation animation];animation2.keyPath = @&quot;backgroundColor&quot;;animation2.toValue = (__bridge id)[UIColor redColor].CGColor;//create group animationCAAnimationGroup *groupAnimation = [CAAnimationGroup animation];groupAnimation.animations = @[animation1, animation2];groupAnimation.duration = 4.0;//add the animation to the color layer[colorLayer addAnimation:groupAnimation forKey:nil]; è¿‡åº¦åŠ¨ç”»å±æ€§åŠ¨ç”»åªå¯¹å›¾å±‚çš„å¯åŠ¨ç”»å±æ€§èµ·ä½œç”¨ï¼Œæ‰€ä»¥å¦‚æœè¦æ”¹å˜ä¸€ä¸ªä¸èƒ½åŠ¨ç”»çš„å±æ€§ï¼ˆæ¯”å¦‚å›¾ç‰‡ï¼‰ï¼Œæˆ–è€…ä»å±‚çº§å…³ç³»ä¸­æ·»åŠ æˆ–è€…ç§»é™¤å›¾å±‚ï¼Œå±æ€§åŠ¨ç”»å°†ä¸èµ·ä½œç”¨ã€‚ 1234567891011121314151617181920212223typeå€¼:kCATransitionFade, // å¹³æ»‘è¿‡æ¸¡kCATransitionMoveIn,kCATransitionMoveIn,kCATransitionReveal,subtypeå€¼: æ§åˆ¶æ–¹å‘kCATransitionFromRightï¼ŒkCATransitionFromLeftï¼ŒkCATransitionFromTop,kCATransitionFromBottomCATransition *transition = [CATransition animation];transition.type = kCATransitionFade;[self.imgv.layer addAnimation:transition forKey:nil];UIImage *currentImage = self.imgv.image;NSUInteger index = [arr indexOfObject:currentImage];index = (index + 1) % [arr count];self.imgv.image = arr[index];// è¿‡æ¸¡åŠ¨ç”»å’Œä¹‹å‰çš„å±æ€§åŠ¨ç”»æˆ–è€…åŠ¨ç”»ç»„æ·»åŠ åˆ°å›¾å±‚ä¸Šçš„æ–¹å¼ä¸€è‡´ï¼Œéƒ½æ˜¯é€šè¿‡-addAnimation:forKey:æ–¹æ³•ã€‚// ä½†æ˜¯å’Œå±æ€§åŠ¨ç”»ä¸åŒçš„æ˜¯ï¼Œå¯¹æŒ‡å®šçš„å›¾å±‚ä¸€æ¬¡åªèƒ½ä½¿ç”¨ä¸€æ¬¡CATransitionï¼Œ// å› æ­¤ï¼Œæ— è®ºä½ å¯¹åŠ¨ç”»çš„é”®è®¾ç½®ä»€ä¹ˆå€¼ï¼Œè¿‡æ¸¡åŠ¨ç”»éƒ½ä¼šå¯¹å®ƒçš„é”®è®¾ç½®æˆâ€œtransitionâ€ï¼Œä¹Ÿå°±æ˜¯å¸¸é‡kCATransition","categories":[],"tags":[{"name":"iOS","slug":"iOS","permalink":"https://kysonyangs.github.io/tags/iOS/"}]},{"title":"jsäº¤äº’","slug":"jsäº¤äº’","date":"2016-05-12T12:19:29.000Z","updated":"2018-11-05T07:20:20.979Z","comments":true,"path":"default/jsäº¤äº’/","link":"","permalink":"https://kysonyangs.github.io/default/jsäº¤äº’/","excerpt":"ç°åœ¨è²Œä¼¼å¾ˆå¤šAPPéƒ½æœ‰éœ€æ±‚åˆ©ç”¨HTML5,æ‰€ä»¥æˆ‘ä»¬éœ€è¦äº†è§£iOSä¸­JavaScriptå’ŒOCäº¤äº’çš„å®ç°ã€‚æ–°å»ºä¸€ä¸ªå·¥ç¨‹ï¼Œæ·»åŠ ä¸€ä¸ªç©ºæ–‡ä»¶index.html1234567891011121314151617181920&lt;html&gt; &lt;!-- ç½‘é¡µçš„æè¿°ä¿¡æ¯ --&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Hello World&lt;/title&gt; &lt;script&gt; function event() &#123; alert(&quot;è°ƒç”¨JSæ–¹æ³•æˆåŠŸå“¦~&quot;); &#125; &lt;/script&gt; &lt;/head&gt; &lt;!-- ç½‘é¡µçš„å…·ä½“å†…å®¹ --&gt; &lt;body&gt; JSè°ƒç”¨OCå“¦~~ &lt;button style=&quot;background: blue; width:100px; height:30px;&quot; onclick=&quot;event();&quot;&gt;JSè°ƒç”¨OC&lt;/button&gt; &lt;br&gt; &lt;a href=&quot;http://www.baidu.com&quot;&gt;ç™¾åº¦&lt;/a&gt; &lt;/body&gt;&lt;/html&gt;","text":"ç°åœ¨è²Œä¼¼å¾ˆå¤šAPPéƒ½æœ‰éœ€æ±‚åˆ©ç”¨HTML5,æ‰€ä»¥æˆ‘ä»¬éœ€è¦äº†è§£iOSä¸­JavaScriptå’ŒOCäº¤äº’çš„å®ç°ã€‚æ–°å»ºä¸€ä¸ªå·¥ç¨‹ï¼Œæ·»åŠ ä¸€ä¸ªç©ºæ–‡ä»¶index.html1234567891011121314151617181920&lt;html&gt; &lt;!-- ç½‘é¡µçš„æè¿°ä¿¡æ¯ --&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Hello World&lt;/title&gt; &lt;script&gt; function event() &#123; alert(&quot;è°ƒç”¨JSæ–¹æ³•æˆåŠŸå“¦~&quot;); &#125; &lt;/script&gt; &lt;/head&gt; &lt;!-- ç½‘é¡µçš„å…·ä½“å†…å®¹ --&gt; &lt;body&gt; JSè°ƒç”¨OCå“¦~~ &lt;button style=&quot;background: blue; width:100px; height:30px;&quot; onclick=&quot;event();&quot;&gt;JSè°ƒç”¨OC&lt;/button&gt; &lt;br&gt; &lt;a href=&quot;http://www.baidu.com&quot;&gt;ç™¾åº¦&lt;/a&gt; &lt;/body&gt;&lt;/html&gt; Objective-Cè¯­è¨€è°ƒç”¨JavaScriptè¯­è¨€ é€šè¿‡UIWebViewçš„ - (nullable NSString *)stringByEvaluatingJavaScriptFromString:(NSString *)script; æ–¹æ³•å®ç°ï¼Œåˆ©ç”¨è¯¥æ–¹æ³•æ‰§è¡Œä¸€æ®µJavaScriptä»£ç ã€‚ï¼ˆJavaScript: ä»¥ä¸‹ä½¿ç”¨JSä»£æ›¿ï¼‰ è·å–å½“å‰ç½‘é¡µçš„æ ‡é¢˜ 1self.title = [webView stringByEvaluatingJavaScriptFromString:@&quot;document.title;&quot;]; è·å–å½“å‰ç½‘é¡µçš„ç½‘å€URL 1NSLog(@&quot;%@&quot;, [webView stringByEvaluatingJavaScriptFromString:@&quot;document.location.href;&quot;]); è°ƒç”¨JSçš„æ–¹æ³• 1[webView stringByEvaluatingJavaScriptFromString:@&quot;klevent();&quot;] ä»¥ä¸Šæ‰§è¡Œæƒ…å†µå¦‚ä¸‹ å¦‚æœæ˜¯è‡ªå·±å†™çš„HTML5ç½‘é¡µï¼Œä½ å¯ä»¥æ§åˆ¶é‡Œé¢çš„å…ƒç´ åˆ é™¤æˆ–è€…æ·»åŠ ä¹‹ç±»çš„ï¼Œå½“ç„¶ä½ å¾—å…ˆæ‡‚ç‚¹HTML5-JSçŸ¥è¯†123NSString *str = @&quot;var p = document.getElementsByTagName(&apos;p&apos;)[0];&quot; &quot;p.remove();&quot;;[webView stringByEvaluatingJavaScriptFromString:str]; * JSè°ƒç”¨OCçš„æ–¹æ³• å…ˆæ¥ä¸ªç®€å•çš„ä¸å¸¦å‚æ•°1234567891011121314151617181920// 1. å…ˆæ”¹å˜index.htmlä¸­ function event() &#123; location.href = &apos;kl://&apos;; &#125;// 2. åœ¨webViewçš„ä»£ç†æ–¹æ³•ä¸­å®ç°- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType &#123; // è·å–å°†è¦åŠ è½½çš„URL NSString *url = request.URL.absoluteString; NSString *scheme = @&quot;kl://&quot;; // åˆ¤æ–­æ˜¯å¦åŒ…å« if ([url hasPrefix:scheme]) &#123; [self js1]; return NO; &#125; NSLog(@&quot;åŠ è½½å…¶ä»–è¯·æ±‚ï¼Œä¸æ˜¯è°ƒç”¨OCçš„æ–¹æ³•&quot;); return YES;&#125; æœ‰ä¸€ä¸ªå‚æ•°12345678910111213141516171819202122232425262728// 1. å…ˆæ”¹å˜index.htmlä¸­ function event() &#123; location.href = &apos;kl://one=kellen&apos;; &#125;// 2. åœ¨webViewçš„ä»£ç†æ–¹æ³•ä¸­å®ç°- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType &#123; // è·å–å°†è¦åŠ è½½çš„URL NSString *url = request.URL.absoluteString; NSString *scheme = @&quot;kl://&quot;; if ([url hasPrefix:scheme]) &#123; // è·å¾—åè®®åé¢çš„è·¯å¾„ path == js2?one=kellen NSString *path = [url substringFromIndex:scheme.length]; // åˆ©ç”¨?åˆ‡å‰²è·¯å¾„ NSArray *subpaths = [path componentsSeparatedByString:@&quot;?&quot;]; // æ–¹æ³•å methodName == js2 NSString *methodName = [[subpaths firstObject] stringByAppendingString:@&quot;:&quot;]; // å‚æ•° kellen NSString *param = [subpaths lastObject]; [self performSelector:NSSelectorFromString(methodName) withObject:param]; // å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥åªè·å¾—å‚æ•°ï¼Œè°ƒç”¨çš„æ–¹æ³•åè‡ªå·±å†™ return NO; &#125; NSLog(@&quot;åŠ è½½å…¶ä»–è¯·æ±‚ï¼Œä¸æ˜¯è°ƒç”¨OCçš„æ–¹æ³•&quot;); return YES;&#125; æœ‰ä¸¤ä¸ªæˆ–å¤šä¸ªå‚æ•°1234567891011121314151617181920212223242526272829303132333435// 1. å…ˆæ”¹å˜index.htmlä¸­ function event() &#123; location.href = &apos;kl://js3_two_?one=kellen&amp;two=Yangs&apos;; &#125;// 2. åœ¨webViewçš„ä»£ç†æ–¹æ³•ä¸­å®ç°- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType &#123; // è·å–å°†è¦åŠ è½½çš„URL NSString *url = request.URL.absoluteString; NSString *scheme = @&quot;kl://&quot;; if ([url hasPrefix:scheme]) &#123; // è·å¾—åè®®åé¢çš„è·¯å¾„ path == js3_two_?one=kellen&amp;two=Yangs NSString *path = [url substringFromIndex:scheme.length]; // åˆ©ç”¨?åˆ‡å‰²è·¯å¾„ NSArray *subpaths = [path componentsSeparatedByString:@&quot;?&quot;]; // æ–¹æ³•å methodName == js3_two_ NSString *methodName = [[subpaths firstObject] stringByReplacingOccurrencesOfString:@&quot;_&quot; withString:@&quot;:&quot;]; // å‚æ•° one=kellen&amp;two=Yangs NSString *param = [subpaths lastObject]; NSArray *subparams = nil; if (subpaths.count == 2 || [param containsString:@&quot;&amp;&quot;]) &#123; subparams = [param componentsSeparatedByString:@&quot;&amp;&quot;]; &#125; // å–å‡ºå‰é¢çš„2ä¸ªå‚æ•° NSString *firstParam = [subparams firstObject]; NSString *secondParam = subparams.count &lt;= 1 ? nil : [subparams lastObject]; [self performSelector:NSSelectorFromString(methodName) withObject:firstParam withObject:secondParam]; return NO; &#125; NSLog(@&quot;åŠ è½½å…¶ä»–è¯·æ±‚ï¼Œä¸æ˜¯è°ƒç”¨OCçš„æ–¹æ³•&quot;); return YES;&#125; æœ‰ä¸ªä¸‰æ–¹åº“å¯ä»¥æ–¹ä¾¿å¼€å‘","categories":[],"tags":[]},{"title":"iOSå›½é™…åŒ–","slug":"iOSå›½é™…åŒ–","date":"2016-05-09T03:16:08.000Z","updated":"2018-11-05T07:17:21.544Z","comments":true,"path":"default/iOSå›½é™…åŒ–/","link":"","permalink":"https://kysonyangs.github.io/default/iOSå›½é™…åŒ–/","excerpt":"åº”ç”¨åç§°å›½é™…åŒ– 1.ctrl+n åˆ›å»ºä¸€ä¸ª.stringsæ–‡ä»¶ï¼Œå¦‚å›¾","text":"åº”ç”¨åç§°å›½é™…åŒ– 1.ctrl+n åˆ›å»ºä¸€ä¸ª.stringsæ–‡ä»¶ï¼Œå¦‚å›¾ 2.é€‰ä¸­InfoPlist.stringsï¼Œ ç‚¹å‡»Localizationä¸­çš„Localizedâ€¦æŒ‰é’®ï¼Œé€‰åˆ™English 3.é€‰æ‹©Project -&gt; Localizationï¼Œæ·»åŠ Chinese,å¦‚å›¾ æœ€åï¼Œåœ¨InfoPlist.strings(English)æ·»åŠ ï¼šCFBundleDisplayName = â€œInternationlizationâ€; åœ¨InfoPlist.strings(Chineses)æ·»åŠ ï¼šCFBundleDisplayName = â€œå›½é™…åŒ–â€; å³å¯ï¼Œä½ å¯ä»¥åœ¨æ¨¡æ‹Ÿå™¨åˆ‡æ¢Englishå’Œä¸­æ–‡è®¾ç½®æŸ¥çœ‹æ•ˆæœ åº”ç”¨å­—ç¬¦å›½é™…åŒ– åœ¨InfoPlist.strings(English)æ·»åŠ ï¼šâ€keyâ€ = â€œtestâ€; åœ¨InfoPlist.strings(Chineses)æ·»åŠ ï¼šâ€keyâ€ = â€œæµ‹è¯•â€; åœ¨ä»£ç æ·»åŠ 1self.title = NSLocalizedStringFromTable(@&quot;key&quot;, @&quot;InfoPlist&quot;, @&quot;&quot;); Xib/StoryBoard 1.é€‰ä¸­Main.storyboard,æ‰“å¼€æ–‡ä»¶é€‰æ‹©å™¨ï¼Œå‹¾é€‰Localizationä¸‹é¢çš„base\\chinese\\english 2.åœ¨storyboardæ‹–ä¸€ä¸ªLabel,åœ¨å¦‚å›¾æ‰€ç¤ºçš„åœ°æ–¹äº†çœ‹åˆ°ä»–çš„ID","categories":[],"tags":[]},{"title":"Xcodeæ’ä»¶","slug":"Xcodeæ’ä»¶","date":"2016-04-12T07:18:20.000Z","updated":"2020-05-17T08:12:19.931Z","comments":true,"path":"default/Xcodeæ’ä»¶/","link":"","permalink":"https://kysonyangs.github.io/default/Xcodeæ’ä»¶/","excerpt":"å“ï¼Œæ’ä»¶ä¹…äº†æ²¡ç”¨éƒ½å¿˜äº†å¿«æ·é”®æ˜¯å•¥äº†ï¼Œç‰¹å†™æ­¤æ–‡ï¼Œä»¥å¤‡å¿˜â€¦ å…ˆä¸Šå‡ ä¸ªå¿«æ·é”®å¸¸ç”¨å›¾æ¡ˆï¼š å¿«æ·é”®ä¸­å¸¸ç”¨ç¬¦å·âŒ˜ï¼ˆcommandï¼‰ã€âŒ¥ï¼ˆoptionï¼‰ã€â‡§ï¼ˆshiftï¼‰ã€â‡ªï¼ˆcaps lockï¼‰ã€âŒƒï¼ˆcontrolï¼‰ã€â†©ï¼ˆreturnï¼‰ã€âŒ…ï¼ˆenterï¼‰","text":"å“ï¼Œæ’ä»¶ä¹…äº†æ²¡ç”¨éƒ½å¿˜äº†å¿«æ·é”®æ˜¯å•¥äº†ï¼Œç‰¹å†™æ­¤æ–‡ï¼Œä»¥å¤‡å¿˜â€¦ å…ˆä¸Šå‡ ä¸ªå¿«æ·é”®å¸¸ç”¨å›¾æ¡ˆï¼š å¿«æ·é”®ä¸­å¸¸ç”¨ç¬¦å·âŒ˜ï¼ˆcommandï¼‰ã€âŒ¥ï¼ˆoptionï¼‰ã€â‡§ï¼ˆshiftï¼‰ã€â‡ªï¼ˆcaps lockï¼‰ã€âŒƒï¼ˆcontrolï¼‰ã€â†©ï¼ˆreturnï¼‰ã€âŒ…ï¼ˆenterï¼‰ å¸¸ç”¨æ’ä»¶ä»¥åŠç”¨æ³•ï¼š1.Alcatraz: æ’ä»¶ç®¡ç†123456// å®‰è£…(mkdir -p ~/Library/Application\\ Support/Developer/Shared/Xcode/Plug-ins)curl -fsSL https://raw.githubusercontent.com/supermarin/Alcatraz/deploy/Scripts/install.sh | sh// åˆ é™¤rm -rf ~/Library/Application\\ Support/Developer/Shared/Xcode/Plug-ins/Alcatraz.xcpluginrm -rf ~/Library/Application\\ Support/Alcatraz 2.XcodeColorsï¼šç»™ Xcode æ§åˆ¶å°æ·»åŠ é¢œè‰² ç”¨æ³•è§æˆ‘ä»¥å‰å†™çš„ä¸€ç¯‡ç®€ä¹¦Xcodeå¸¦é¢œè‰²Log å½“ç„¶è¿™ä¸ªæ’ä»¶ä¸CocoaLumberjackæ˜¯ä¸€å¯¹å¥½åŸºå‹ï¼Œæœ‰å…´è¶£çš„å¯ä»¥è‡ªè¡Œäº†è§£â€¦ 3.XToDoï¼šè¿™ä¸ªæ’ä»¶å¯ä»¥ç»™æ³¨é‡ŠåŠ ä¹¦ç­¾ç±»çš„åŠŸèƒ½ï¼Œä½ å¯ä»¥éšæ—¶è·³è½¬åˆ°ä½ åŠ æ­¤ç±»æ³¨é‡Šçš„åœ°æ–¹ æ·»åŠ  TODO ä¹¦ç­¾ â€“ âŒƒâ‡§T æ·»åŠ  FIXME ä¹¦ç­¾ â€“ âŒƒâ‡§X æ·»åŠ  ï¼Ÿï¼Ÿï¼Ÿ ä¹¦ç­¾ â€“ âŒƒâ‡§1 æ·»åŠ  ï¼ï¼ï¼ ä¹¦ç­¾ â€“ âŒƒâ‡§Q ä¹¦ç­¾çª—å£ â€“ âŒƒT 4.KSImageNamedï¼šè‡ªåŠ¨è¡¥å…¨å›¾ç‰‡å5.Peckhamï¼šå¯¼å…¥å¤´æ–‡ä»¶ âŒ˜ + ctrl + P ç„¶åé€‰æ‹©ä½ è¦å¯¼å…¥çš„å¤´æ–‡ä»¶å³å¯ 6.FuzzyAutocompleteï¼šè‡ªåŠ¨è¡¥å…¨ï¼Œæå‡ç¼–å†™æ•ˆç‡7.CodePilot: ä¾¿æ·æŸ¥æ‰¾ä½ æ‰€éœ€è¦çš„æ–‡ä»¶ï¼Œä»£ç â€¦ âŒ˜ + shift + X è¾“å…¥ä½ éœ€è¦æŸ¥æ‰¾çš„å†…å®¹å³å¯ 8.HOStringSenseï¼šå¾ˆæ–¹ä¾¿çš„ç¼–å†™å¤§æ®µæ–‡æœ¬9.XcodeBoost: åŠŸèƒ½ååˆ†å¼ºå¤§ä¹Ÿååˆ†æ–¹ä¾¿ï¼Œå…·ä½“è¯·è¿›githubè‡ªè¡Œè§‚çœ‹10.SCXcodeMiniMap: ç»™Xcodeåˆ›å»ºä¸€ä¸ªè¿·ä½ åœ°å›¾11.XAlignï¼šå¯¹é½ä»£ç  é€‰ä¸­ä½ éœ€è¦å¯¹é½çš„ä»£ç  â€“ âŒ˜ + shift + Z 12.VVDocumenter: è§„èŒƒåŒ–æ³¨é‡Šæ’ä»¶ -&gt; /// â€“ å¿«æ·é”®13.BBUDebuggerTuckAway: è‡ªåŠ¨éšè—åº•éƒ¨çš„è°ƒè¯•æ 14.Backlightï¼šé«˜äº®å½“å‰æ­£åœ¨ç¼–è¾‘çš„é‚£ä¸€è¡Œ15.xcodeè¯­æ³•é«˜äº®æ’ä»¶16.ColorSense: å¯è§†åŒ–é¢œè‰²17.[SCXcodeSwitchExpander(https://github.com/stefanceriu/SCXcodeSwitchExpander):switchæšä¸¾çš„æ—¶å€™ä¼šè‡ªåŠ¨ç”Ÿæˆä»£ç  è¡¥å……ä¸€ç‚¹å¾ˆå®ç”¨çš„ä¸œä¸œ1.æ’ä»¶ç›®å½•ï¼š ~/Library/Application Support/Developer/Shared/Xcode/Plug-ins/2.å½“Xcodeå‡çº§ç‰ˆæœ¬ï¼Œç„¶åæ’ä»¶å¤±æ•ˆåï¼š12341.æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ä»¥ä¸‹ä»£ç è·å–åˆ°DVTPlugInCompatibilityUUID defaults read /Applications/Xcode.app/Contents/Info DVTPlugInCompatibilityUUID2.ç„¶åè¾“å…¥å¦‚ä¸‹å‘½ä»¤ ã€æœ€åä¸€é¡¹æ˜¯è·å–åˆ°çš„DVTPlugInCompatibilityUUIDã€‘ find ~/Library/Application\\ Support/Developer/Shared/Xcode/Plug-ins -name Info.plist -maxdepth 3 | xargs -I&#123;&#125; defaults write &#123;&#125; DVTPlugInCompatibilityUUIDs -array-add 9F75337B-21B4-4ADC-B558-F9CADF7073A7 3.playgroundæ— æ•ˆï¼Œå¯èƒ½æ˜¯è¯¯åˆ æ¨¡æ‹Ÿå™¨çš„ç±»å‹ï¼Œé‡ç½®12rm -rf ~/Library/Developer/CoreSimulator/Devices killall -9 com.apple.CoreSimulator.CoreSimulatorService ç¥ä¸€èˆ¬çš„æ’ä»¶ injectionforxcode å®‰è£…æ’ä»¶ä½¿ç”¨Alcatrazæ’ä»¶ç®¡ç†å™¨ç›´æ¥å®‰è£…injectionforxcode-Githubåœ°å€å½“ä½ çœ‹åˆ°çº¢æ¡†é‡Œé¢çš„ä¸œè¥¿æœ‰äº†ä¹‹åè¯´æ˜ï¼Œæ’ä»¶å®‰è£…æˆåŠŸäº†ï¼ ä½¿ç”¨åœ¨Controlleræ·»åŠ ä»¥ä¸‹æ–¹æ³• 123456789// OC- (void)injected&#123; NSLog(@&quot;I&apos;ve been injected: %@&quot;, self);&#125;// Swiftfunc injected() &#123; print(&quot;I&apos;ve been injected: \\(self)&quot;)&#125; ctrl + = çœ‹ä¸€ä¸‹ä½ çš„æ§åˆ¶å°æœ‰æ²¡æœ‰è¾“å‡º Iâ€™ve been injected æœ‰äº†è¯´æ˜æˆåŠŸäº† åœ¨ injected æ–¹æ³•ä¸­åŠ å…¥ä½ è¦ä¿®æ”¹çš„UIä»£ç ï¼ŒæŒ‰ä¸‹ ctrl + = ä½ å¯ä»¥çœ‹åˆ°æ¨¡æ‹Ÿå™¨ç•Œé¢çš„å˜åŒ– æˆ–è€…æŒ‰ä¸‹ ctrl + shift + = è¿™ä¸ªå¯ä»¥ä¸ç”¨å°†ä»£ç å†™åœ¨injected æ–¹æ³•ä¸­ï¼Œä»–ä¼šé‡æ–°è¿è¡Œä¸€éä½ çš„ç¨‹åºï¼Œè€Œä¸æ˜¯å•ä¸ªController","categories":[],"tags":[{"name":"Xcode","slug":"Xcode","permalink":"https://kysonyangs.github.io/tags/Xcode/"}]},{"title":"æ¡å½¢ç å’ŒäºŒç»´ç ç”Ÿæˆ","slug":"æ¡å½¢ç å’ŒäºŒç»´ç ç”Ÿæˆ","date":"2016-04-11T09:56:06.000Z","updated":"2020-05-17T08:16:05.014Z","comments":true,"path":"default/æ¡å½¢ç å’ŒäºŒç»´ç ç”Ÿæˆ/","link":"","permalink":"https://kysonyangs.github.io/default/æ¡å½¢ç å’ŒäºŒç»´ç ç”Ÿæˆ/","excerpt":"ç”Ÿæˆæ¡å½¢ç 12345678910111213141516- (UIImage *)generateBarCode:(NSString *)code width:(CGFloat)width height:(CGFloat)height &#123; // ç”Ÿæˆæ¡å½¢ç å›¾ç‰‡ CIImage *barcodeImage; NSData *data = [code dataUsingEncoding:NSISOLatin1StringEncoding allowLossyConversion:false]; CIFilter *filter = [CIFilter filterWithName:@&quot;CICode128BarcodeGenerator&quot;]; [filter setValue:data forKey:@&quot;inputMessage&quot;]; barcodeImage = [filter outputImage]; // æ¶ˆé™¤æ¨¡ç³Š CGFloat scaleX = width / barcodeImage.extent.size.width; // extent è¿”å›å›¾ç‰‡çš„frame CGFloat scaleY = height / barcodeImage.extent.size.height; CIImage *transformedImage = [barcodeImage imageByApplyingTransform:CGAffineTransformScale(CGAffineTransformIdentity, scaleX, scaleY)]; return [UIImage imageWithCIImage:transformedImage];&#125;","text":"ç”Ÿæˆæ¡å½¢ç 12345678910111213141516- (UIImage *)generateBarCode:(NSString *)code width:(CGFloat)width height:(CGFloat)height &#123; // ç”Ÿæˆæ¡å½¢ç å›¾ç‰‡ CIImage *barcodeImage; NSData *data = [code dataUsingEncoding:NSISOLatin1StringEncoding allowLossyConversion:false]; CIFilter *filter = [CIFilter filterWithName:@&quot;CICode128BarcodeGenerator&quot;]; [filter setValue:data forKey:@&quot;inputMessage&quot;]; barcodeImage = [filter outputImage]; // æ¶ˆé™¤æ¨¡ç³Š CGFloat scaleX = width / barcodeImage.extent.size.width; // extent è¿”å›å›¾ç‰‡çš„frame CGFloat scaleY = height / barcodeImage.extent.size.height; CIImage *transformedImage = [barcodeImage imageByApplyingTransform:CGAffineTransformScale(CGAffineTransformIdentity, scaleX, scaleY)]; return [UIImage imageWithCIImage:transformedImage];&#125; ç”ŸæˆäºŒç»´ç 123456789101112131415161718- (UIImage *)generateQRCode:(NSString *)code width:(CGFloat)width height:(CGFloat)height &#123; // ç”ŸæˆäºŒç»´ç å›¾ç‰‡ CIImage *qrcodeImage; NSData *data = [_code dataUsingEncoding:NSISOLatin1StringEncoding allowLossyConversion:false]; CIFilter *filter = [CIFilter filterWithName:@&quot;CIQRCodeGenerator&quot;]; [filter setValue:data forKey:@&quot;inputMessage&quot;]; [filter setValue:@&quot;H&quot; forKey:@&quot;inputCorrectionLevel&quot;]; qrcodeImage = [filter outputImage]; // æ¶ˆé™¤æ¨¡ç³Š CGFloat scaleX = width / qrcodeImage.extent.size.width; // extent è¿”å›å›¾ç‰‡çš„frame CGFloat scaleY = height / qrcodeImage.extent.size.height; CIImage *transformedImage = [qrcodeImage imageByApplyingTransform:CGAffineTransformScale(CGAffineTransformIdentity, scaleX, scaleY)]; return [UIImage imageWithCIImage:transformedImage];&#125;","categories":[],"tags":[{"name":"iOS","slug":"iOS","permalink":"https://kysonyangs.github.io/tags/iOS/"}]},{"title":"iOSåŸºç¡€çŸ¥è¯†","slug":"iOSåŸºç¡€çŸ¥è¯†","date":"2016-02-05T11:05:07.000Z","updated":"2018-12-12T08:49:40.151Z","comments":true,"path":"default/iOSåŸºç¡€çŸ¥è¯†/","link":"","permalink":"https://kysonyangs.github.io/default/iOSåŸºç¡€çŸ¥è¯†/","excerpt":"åº”ç”¨æ²™ç›’ Documents: ä¿å­˜åº”ç”¨è¿è¡Œæ—¶ç”Ÿæˆçš„éœ€è¦æŒä¹…åŒ–çš„æ•°æ®ï¼ŒiTunesåŒæ­¥è®¾å¤‡æ—¶ä¼šå¤‡ä»½è¯¥ç›®å½•ã€‚ä¾‹å¦‚ï¼Œæ¸¸æˆåº”ç”¨å¯å°†æ¸¸æˆå­˜æ¡£ä¿å­˜åœ¨è¯¥ç›®å½•. Library: Caches: ä¿å­˜åº”ç”¨è¿è¡Œæ—¶ç”Ÿæˆçš„éœ€è¦æŒä¹…åŒ–çš„æ•°æ®ï¼Œä¸€èˆ¬å­˜å‚¨ä½“ç§¯å¤§ã€ä¸éœ€è¦å¤‡ä»½çš„éé‡è¦æ•°æ®,ç¼“å­˜æ–‡ä»¶å­˜å‚¨åœ°. - Preferences: ä¿å­˜åº”ç”¨çš„æ‰€æœ‰åå¥½è®¾ç½®ï¼ŒiOSçš„Settings(è®¾ç½®)åº”ç”¨ä¼šåœ¨è¯¥ç›®å½•ä¸­æŸ¥æ‰¾åº”ç”¨çš„è®¾ç½®ä¿¡æ¯,iTunesåŒæ­¥è®¾å¤‡æ—¶ä¼šå¤‡ä»½è¯¥ç›®å½•. tmp: ä¿å­˜åº”ç”¨è¿è¡Œæ—¶æ‰€éœ€çš„ä¸´æ—¶æ•°æ®ï¼Œä½¿ç”¨å®Œæ¯•åå†å°†ç›¸åº”çš„æ–‡ä»¶ä»è¯¥ç›®å½•åˆ é™¤;åº”ç”¨æ²¡æœ‰è¿è¡Œæ—¶ï¼Œç³»ç»Ÿä¹Ÿå¯èƒ½ä¼šæ¸…é™¤è¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶;iTunesåŒæ­¥è®¾å¤‡æ—¶ä¸ä¼šå¤‡ä»½è¯¥ç›®å½•.","text":"åº”ç”¨æ²™ç›’ Documents: ä¿å­˜åº”ç”¨è¿è¡Œæ—¶ç”Ÿæˆçš„éœ€è¦æŒä¹…åŒ–çš„æ•°æ®ï¼ŒiTunesåŒæ­¥è®¾å¤‡æ—¶ä¼šå¤‡ä»½è¯¥ç›®å½•ã€‚ä¾‹å¦‚ï¼Œæ¸¸æˆåº”ç”¨å¯å°†æ¸¸æˆå­˜æ¡£ä¿å­˜åœ¨è¯¥ç›®å½•. Library: Caches: ä¿å­˜åº”ç”¨è¿è¡Œæ—¶ç”Ÿæˆçš„éœ€è¦æŒä¹…åŒ–çš„æ•°æ®ï¼Œä¸€èˆ¬å­˜å‚¨ä½“ç§¯å¤§ã€ä¸éœ€è¦å¤‡ä»½çš„éé‡è¦æ•°æ®,ç¼“å­˜æ–‡ä»¶å­˜å‚¨åœ°. - Preferences: ä¿å­˜åº”ç”¨çš„æ‰€æœ‰åå¥½è®¾ç½®ï¼ŒiOSçš„Settings(è®¾ç½®)åº”ç”¨ä¼šåœ¨è¯¥ç›®å½•ä¸­æŸ¥æ‰¾åº”ç”¨çš„è®¾ç½®ä¿¡æ¯,iTunesåŒæ­¥è®¾å¤‡æ—¶ä¼šå¤‡ä»½è¯¥ç›®å½•. tmp: ä¿å­˜åº”ç”¨è¿è¡Œæ—¶æ‰€éœ€çš„ä¸´æ—¶æ•°æ®ï¼Œä½¿ç”¨å®Œæ¯•åå†å°†ç›¸åº”çš„æ–‡ä»¶ä»è¯¥ç›®å½•åˆ é™¤;åº”ç”¨æ²¡æœ‰è¿è¡Œæ—¶ï¼Œç³»ç»Ÿä¹Ÿå¯èƒ½ä¼šæ¸…é™¤è¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶;iTunesåŒæ­¥è®¾å¤‡æ—¶ä¸ä¼šå¤‡ä»½è¯¥ç›®å½•. è·¯å¾„è·å–ï¼š12345678910111213141516// æ²™ç›’æ ¹ç›®å½•NSLog(@&quot;%@&quot;, NSHomeDirectory());// DocumentsNSLog(@&quot;%@&quot;, [NSHomeDirectory() stringByAppendingPathComponent:@&quot;Documents&quot;]);// ORNSLog(@&quot;%@&quot;, [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) firstObject]);// Library - CachesNSLog(@&quot;%@&quot;, [[NSHomeDirectory() stringByAppendingPathComponent:@&quot;Library&quot;] stringByAppendingPathComponent:@&quot;Caches&quot;]);// ORNSLog(@&quot;%@&quot;, [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) firstObject]);Preference[NSUserDefaults standardUserDefaults] ...// tmpNSLog(@&quot;t - %@&quot;, NSTemporaryDirectory()); content Hugging ï¼ content Compression Resistanceä¸æƒ³å˜å¤§/ä¸æƒ³å˜å°çº¦æŸ ç°å¸¸æœ‰ç”¨å“¦ layoutSubviewsæ–¹æ³•è°ƒç”¨ initæ–¹æ³•ä¸ä¼šè°ƒç”¨ addSubviewæ–¹æ³•ç­‰æ—¶å€™ä¼šè°ƒç”¨ boundsæ”¹å˜çš„æ—¶å€™è°ƒç”¨ scrollViewæ»šåŠ¨çš„æ—¶å€™ä¼šè°ƒç”¨scrollViewçš„layoutSubviewsæ–¹æ³•(æ‰€ä»¥ä¸å»ºè®®åœ¨scrollViewçš„layoutSubviewsæ–¹æ³•ä¸­åšå¤æ‚é€»è¾‘) æ—‹è½¬è®¾å¤‡çš„æ—¶å€™è°ƒç”¨ å­è§†å›¾è¢«ç§»é™¤çš„æ—¶å€™è°ƒç”¨ å†…å­˜çš„å‡ å¤§åŒºåŸŸæ ˆåŒºï¼ˆStackï¼‰ç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…å¹¶é‡Šæ”¾ï¼Œå­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼ï¼Œå±€éƒ¨å˜é‡ç­‰ã€‚æ ˆæ˜¯ç³»ç»Ÿæ•°æ®ç»“æ„ï¼Œå¯¹åº”çº¿ç¨‹/è¿›ç¨‹æ˜¯å”¯ä¸€çš„ã€‚ä¼˜ç‚¹æ˜¯å¿«é€Ÿé«˜æ•ˆï¼Œç¼ºç‚¹æ—¶æœ‰é™åˆ¶ï¼Œæ•°æ®ä¸çµæ´»ã€‚ï¼»å…ˆè¿›åå‡ºï¼½ æ ˆç©ºé—´åˆ† é™æ€åˆ†é… å’Œ åŠ¨æ€åˆ†é…ä¸¤ç§ã€‚ é™æ€åˆ†é…æ˜¯ç¼–è¯‘å™¨å®Œæˆçš„ï¼Œæ¯”å¦‚è‡ªåŠ¨å˜é‡ï¼ˆautoï¼‰çš„åˆ†é… åŠ¨æ€å˜é‡æ˜¯ç”± alloc å‡½æ•°å®Œæˆçš„ æ ˆçš„åŠ¨æ€åˆ†é…æ— éœ€é‡Šæ”¾ï¼ˆæ˜¯è‡ªåŠ¨çš„ï¼‰ï¼Œä¹Ÿå°±æ²¡æœ‰é‡Šæ”¾å‡½æ•°ã€‚ ä¸ºå¯ç§»æ¤çš„ç¨‹åºèµ·è§ï¼Œæ ˆçš„åŠ¨æ€åˆ†é…æ˜¯ä¸è¢«é¼“åŠ±çš„ã€‚ å †åŒºï¼ˆheapï¼‰ç”±ç¨‹åºå‘˜åˆ†é…å’Œé‡Šæ”¾ï¼Œå¦‚æœç¨‹åºå‘˜ä¸é‡Šæ”¾ï¼Œç¨‹åºç»“æŸæ—¶ï¼Œå¯èƒ½ä¼šç”±æ“ä½œç³»ç»Ÿå›æ”¶ ï¼Œæ¯”å¦‚åœ¨ ios ä¸­ alloc éƒ½æ˜¯å­˜æ”¾åœ¨å †ä¸­ã€‚ ä¼˜ç‚¹æ˜¯çµæ´»æ–¹ä¾¿ï¼Œæ•°æ®é€‚åº”é¢å¹¿æ³›ï¼Œä½†æ˜¯æ•ˆç‡æœ‰ä¸€å®šé™ä½ã€‚ å †æ˜¯å‡½æ•°åº“å†…éƒ¨æ•°æ®ç»“æ„ï¼Œä¸ä¸€å®šå”¯ä¸€ã€‚ ä¸åŒå †çš„åˆ†é…çš„å†…å­˜æ— æ³•ç›¸äº’æ“ä½œã€‚ å †ç©ºé—´çš„åˆ†é…æ€»æ˜¯åŠ¨æ€çš„ è™½ç„¶ç¨‹åºç»“æŸæ—¶æ‰€æœ‰çš„æ•°æ®ç©ºé—´éƒ½ä¼šè¢«é‡Šæ”¾å›ç³»ç»Ÿï¼Œä½†æ˜¯ç²¾ç¡®çš„ç”³è¯·å†…å­˜ï¼Œé‡Šæ”¾å†…å­˜åŒ¹é…æ˜¯è‰¯å¥½ç¨‹åºçš„åŸºæœ¬è¦ç´ ã€‚ å…¨å±€åŒº(é™æ€åŒº) (static)å…¨å±€å˜é‡å’Œé™æ€å˜é‡çš„å­˜å‚¨æ˜¯æ”¾åœ¨ä¸€èµ·çš„ï¼Œåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡å­˜æ”¾åœ¨ä¸€å—åŒºåŸŸï¼Œæœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡åœ¨ç›¸é‚»çš„å¦ä¸€å—åŒºåŸŸï¼Œç¨‹åºç»“æŸåç”±ç³»ç»Ÿé‡Šæ”¾ã€‚ æ–‡å­—å¸¸é‡åŒºå­˜æ”¾å¸¸é‡å­—ç¬¦ä¸²ï¼Œç¨‹åºç»“æŸåç”±ç³»ç»Ÿé‡Šæ”¾ï¼› ä»£ç åŒºå­˜æ”¾å‡½æ•°çš„äºŒè¿›åˆ¶ä»£ç  CGRectInset ä¸ CGRectOffsetCGRectInset ä¸ CGRectOffset éƒ½æ˜¯é€šè¿‡å‚æ•°æ”¹å˜ CGRect å¹¶è¿”å›ä¸€ä¸ª CGRect ç±»å‹çš„æ•°æ®ã€‚æ€»ç»“å‡ºä¸¤è€…çš„åŒºåˆ«åœ¨äºï¼šCGRectInset ä¼šè¿›è¡Œå¹³ç§»å’Œç¼©æ”¾ä¸¤ä¸ªæ“ä½œã€‚CGRectOffset åšçš„åªæ˜¯å¹³ç§»ã€‚ CGRect CGRectInset(CGRect rect, CGFloat dx, CGFloat dy)é€šè¿‡ç¬¬äºŒä¸ªå‚æ•° dx å’Œç¬¬ä¸‰ä¸ªå‚æ•° dy é‡ç½®ç¬¬ä¸€ä¸ªå‚æ•° rect ä½œä¸ºç»“æœè¿”å›ã€‚é‡ç½®çš„æ–¹å¼ä¸ºï¼Œé¦–å…ˆå°† rect çš„åæ ‡ï¼ˆoriginï¼‰æŒ‰ç…§(dx,dy) è¿›è¡Œå¹³ç§»ï¼Œç„¶åå°† rect çš„å¤§å°ï¼ˆsizeï¼‰ å®½åº¦ç¼©å°2å€çš„ dxï¼Œé«˜åº¦ç¼©å°2å€çš„ dyã€‚æ³¨æ„: dx dy æ­£æ•° å·¦å³ä¸¤è¾¹ç¼©å°ï¼Œè´Ÿæ•°åˆ™æ˜¯æ”¾å¤§ CGRect CGRectOffset(CGRect rect, CGFloat dx, CGFloat dy)rect æŒ‰ç…§ï¼ˆdx,dyï¼‰è¿›è¡Œå¹³ç§»ã€‚ æ–­è¨€ NSAssert() å’Œ NSParameterAssert åŒºåˆ«å’Œç”¨å¤„NSAssert å’Œ assert æ˜¯æ–­è¨€,ä¸»è¦çš„å·®åˆ«æ˜¯ assert åœ¨æ–­è¨€å¤±è´¥çš„æ—¶å€™åªæ˜¯ç®€å•çš„ç»ˆæ­¢ç¨‹åº, è€Œ NSAssert ä¼šæŠ¥å‘Šå‡ºé”™è¯¯ä¿¡æ¯å¹¶ä¸”æ‰“å°å‡ºæ¥. æ‰€ä»¥å°½ç®¡çš„ä½¿ç”¨ NSAssert,å¯ä»¥ä¸å»ä½¿ç”¨ assert. NSAssert/NSCAssert ä¸¤è€…çš„å·®åˆ«, å‰è€…æ˜¯é€‚åˆäºObjective-Cçš„æ–¹æ³•, åè€…æ˜¯é€‚ç”¨äº C çš„å‡½æ•°.NSParameterAssert/NSCparameterAssert ä¸¤è€…çš„åŒºåˆ«ä¹Ÿæ˜¯å‰è€…é€‚ç”¨äº Objective-C çš„æ–¹æ³•, åè€…é€‚ç”¨äº C çš„å‡½æ•°.NSAssert/NSCAssert å’Œ NSParameterAssert/NSCparameterAssert çš„åŒºåˆ«æ˜¯å‰è€…æ˜¯æ‰€æœ‰æ–­è¨€, åè€…åªæ˜¯é’ˆå¯¹å‚æ•°æ˜¯å¦å­˜åœ¨çš„æ–­è¨€, æ‰€ä»¥å¯ä»¥å…ˆè¿›è¡Œå‚æ•°çš„æ–­è¨€,ç¡®è®¤å‚æ•°æ˜¯æ­£ç¡®çš„,å†è¿›è¡Œæ‰€æœ‰çš„æ–­è¨€,ç¡®è®¤å…¶ä»–åŸå› .NSAssertçš„ç”¨æ³•12int a = 4;NSAssert(a == 5, @&quot;a must equal to 5&quot;); //ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ¡ä»¶,å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸æ»¡è¶³æ¡ä»¶,å°±ä¼šè®°å½•å’Œæ‰“å°ç¬¬äºŒä¸ªå‚æ•° NSParameterAssertçš„ç”¨æ³•1NSParameterAssert(str); //åªéœ€è¦ä¸€ä¸ªå‚æ•°,å¦‚æœå‚æ•°å­˜åœ¨ç¨‹åºç»§ç»­è¿è¡Œ,å¦‚æœå‚æ•°ä¸ºç©º,åˆ™ç¨‹åºåœæ­¢æ‰“å°æ—¥å¿— æ³¨: Xcode å·²ç»é»˜è®¤å°†releaseç¯å¢ƒä¸‹çš„æ–­è¨€å–æ¶ˆäº†, å…é™¤äº†å¿˜è®°å…³é—­æ–­è¨€é€ æˆçš„ç¨‹åºä¸ç¨³å®š. iOSæ¨¡æ‹Ÿå™¨çš„Debugèœå•iOSæ¨¡æ‹Ÿå™¨çš„Debugèœå•ä¸­æä¾›äº†å‡ ä¸ªèœå•é¡¹æ¥æ£€æµ‹å½±å“å¸§ç‡çš„ä¸€äº›å› ç´ ï¼š Color Blended Layers: é«˜äº®æ˜¾ç¤ºæœ‰æ··åˆæ“ä½œçš„åŒºåŸŸï¼› Color Copied Images: é«˜äº®æ˜¾ç¤ºè¢«æ‹·è´çš„å›¾ç‰‡ã€‚æ‹·è´å›¾ç‰‡æ„å‘³ç€Core Animationéœ€è¦æ‹·è´ä¸€ä»½å›¾ç‰‡å¹¶å‘é€ç»™render serverï¼Œè¿™å¯¹å†…å­˜å’ŒCPUçš„ä½¿ç”¨éƒ½æ˜¯æ˜‚è´µçš„ï¼› Color Misaligned Images: é«˜äº®æ˜¾ç¤ºç¼©æ”¾æˆ–æ‹‰ä¼¸è¿‡çš„å›¾ç‰‡ï¼Œæˆ–è€…æ²¡æœ‰æ­£ç¡®å¯¹é½å¯¹åˆ°åƒç´ è¾¹ç•Œçš„å›¾ç‰‡ï¼› Color Offscreen-Rendered: é«˜äº®æ˜¾ç¤ºç¦»å±æ¸²æŸ“çš„å±‚å¯¹è±¡ã€‚ nilã€NILã€NULLã€ NSNull çš„åŒºåˆ« nil: æŒ‡å‘ä¸€ä¸ªå¯¹è±¡çš„ç©ºæŒ‡é’ˆ, å¯¹ Objective-C id å¯¹è±¡èµ‹ç©ºå€¼. 1NSString *str = nil; Nil: æŒ‡å‘ä¸€ä¸ªç±»çš„ç©ºæŒ‡é’ˆ, è¡¨ç¤ºå¯¹ç±»è¿›è¡Œèµ‹ç©ºå€¼. 1Class Class1 = Nil; NULL: æŒ‡å‘å…¶ä»–ç±»å‹ï¼ˆå¦‚ï¼šåŸºæœ¬ç±»å‹ã€Cç±»å‹ï¼‰çš„ç©ºæŒ‡é’ˆ, ç”¨äºå¯¹éå¯¹è±¡æŒ‡é’ˆèµ‹ç©ºå€¼. 123int *intA = NULL;char *charC = NULL;struct structStr = NULL; NSNull: åœ¨é›†åˆå¯¹è±¡ä¸­ï¼Œè¡¨ç¤ºç©ºå€¼çš„å¯¹è±¡.NSNullåœ¨Objective-Cä¸­æ˜¯ä¸€ä¸ªç±». NSNullæœ‰ + (NSNull *)null; å•ä¾‹æ–¹æ³•. å¤šç”¨äºé›†åˆ(NSArray,NSDictionary)ä¸­å€¼ä¸ºç©ºçš„å¯¹è±¡. 1234567891011NSArray *array = [NSArray arrayWithObjects: [[NSObject alloc] init], [NSNull null], nil];NSMutableDictionary *mutableDictionary = [[NSMutableDictionary alloc] init];[mutableDictionary setObject:nil forKey:@&quot;Key-nil&quot;]; // ä¼šå¼•èµ·Crash[mutableDictionary setObject:[NSNull null] forKey:@&quot;Key-nil&quot;]; // ä¸ä¼šå¼•èµ·Crash//æ‰€ä»¥åœ¨ä½¿ç”¨æ—¶ï¼Œå¦‚ä¸‹æ–¹æ³•æ˜¯æ¯”è¾ƒå®‰å…¨çš„[mutableDictionary setObject:(nil == value ? [NSNull null] : value) forKey:@&quot;Key&quot;]; property å±æ€§çš„å…³é”®å­— è¡¨ç¤ºåŸå­æ€§ atomicï¼ˆé»˜è®¤ï¼‰: çº¿ç¨‹å®‰å…¨ï¼Œä½†æ˜¯çº¿ç¨‹å¼€é”€å¤§ï¼Œå½±å“æ€§èƒ½æ³¨: atomicä¸ä¸€å®šæ˜¯çº¿ç¨‹å®‰å…¨ï¼Œå› ä¸ºå…¶åªä¿è¯ setter&amp;getter æ˜¯çº¿ç¨‹å®‰å…¨ï¼Œä½†æ˜¯å¦‚æœ threadA è¿›è¡Œå†™ï¼Œè¿™æ—¶å…¶ä»–ç°çº¿ç¨‹çš„è¯»æˆ–è€…å†™ä¼šå› ä¸ºè¯¥æ“ä½œè€Œç­‰å¾…ã€‚ä½†æ˜¯å½“ threadA å†™æ“ä½œå®Œæˆåï¼ŒthreadB è¿›è¡Œå†™æ“ä½œï¼ŒthreadA éœ€è¦è¯»æ“ä½œçš„æ—¶å€™ï¼Œå¯èƒ½ä¼šè·å¾— threadB çº¿ç¨‹çš„å€¼ï¼Œè¿™å°±ç ´åäº†çº¿ç¨‹å®‰å…¨ã€‚è€Œä¸”å¦‚æœ threadC åœ¨ threadA çº¿ç¨‹è¯»æ“ä½œä¹‹å‰ release äº†ï¼Œ ä¼šå¯¼è‡´å´©æºƒã€‚æ‰€ä»¥ atomic æ‰€è¯´çš„çº¿ç¨‹å®‰å…¨åªæ˜¯ä¿è¯äº† getterå’Œsetter å­˜å–æ–¹æ³•çš„çº¿ç¨‹å®‰å…¨ï¼Œå¹¶ä¸èƒ½ä¿è¯æ•´ä¸ªå¯¹è±¡æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ nonatomic: éçº¿ç¨‹å®‰å…¨ è¡¨ç¤ºå¼•ç”¨è®¡æ•° assign: assign ç”¨äºéæŒ‡é’ˆå˜é‡ï¼Œä¸€èˆ¬ç”¨äºåŸºç¡€ç±»å‹å’ŒCæ•°æ®ç±»å‹ï¼Œè¿™äº›ç±»å‹ä¸æ˜¯å¯¹è±¡ï¼Œç»Ÿä¸€ç”±ç³»ç»Ÿæ ˆè¿›è¡Œå†…å­˜ç®¡ç†ã€‚ weak: å¯¹å¯¹è±¡çš„å¼±å¼•ç”¨ï¼Œä¸å¢åŠ å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ï¼Œä¹Ÿä¸æŒæœ‰å¯¹è±¡ï¼Œå½“å¯¹è±¡æ¶ˆå¤±åæŒ‡é’ˆè‡ªåŠ¨æŒ‡å‘nilï¼Œæ‰€ä»¥è¿™é‡Œä¹Ÿå°±é˜²æ­¢äº†é‡æŒ‡é’ˆçš„å­˜åœ¨ã€‚ strong: å¯¹å¯¹è±¡çš„å¼ºå¼•ç”¨ï¼Œä¼šå¢åŠ å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ï¼Œå¦‚æœæŒ‡å‘äº†ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œä¼šé€ æˆé‡æŒ‡é’ˆï¼Œå¹³å¸¸æˆ‘ä»¬ç”¨å¾—æœ€å¤šçš„åº”è¯¥ä¹Ÿæ˜¯strongäº†ã€‚ copy: å»ºç«‹ä¸€ä¸ªå¼•ç”¨è®¡æ•°ä¸º1çš„æ–°å¯¹è±¡ï¼Œèµ‹å€¼æ—¶å¯¹ä¼ å…¥å€¼è¿›è¡Œä¸€ä»½æ‹·è´ï¼Œæ‰€ä»¥ä½¿ç”¨ copy å…³é”®å­—çš„æ—¶å€™ï¼Œä½ å°†ä¸€ä¸ªå¯¹è±¡å¤åˆ¶ç»™è¯¥å±æ€§ï¼Œè¯¥å±æ€§å¹¶ä¸ä¼šæŒæœ‰é‚£ä¸ªå¯¹è±¡ï¼Œè€Œæ˜¯ä¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå¹¶å°†é‚£ä¸ªå¯¹è±¡çš„å€¼æ‹·è´ç»™å®ƒã€‚è€Œä½¿ç”¨ copy å…³é”®å­—çš„å¯¹è±¡å¿…é¡»è¦å®ç° NSCopying åè®®ã€‚ unsafe_unretained: è·Ÿ weak ç±»ä¼¼ï¼Œå£°æ˜ä¸€ä¸ªå¼±å¼•ç”¨ï¼Œä½†æ˜¯å½“å¼•ç”¨è®¡æ•°ä¸º 0 æ—¶ï¼Œå˜é‡ä¸ä¼šè‡ªåŠ¨è®¾ç½®ä¸º nilï¼Œç°åœ¨åŸºæœ¬éƒ½ç”¨ weak äº†ã€‚ è¡¨ç¤ºæƒé™ readwrite: å¯è¯»å¯å†™ readonly: åªè¯»ï¼Œå½“ä½ å¸Œæœ›æš´éœ²å‡ºæ¥çš„å±æ€§ä¸èƒ½è¢«å¤–ç•Œä¿®æ”¹æ—¶å°±éœ€è¦ç”³æ˜ä¸º readonly ã€‚ id å’Œ instanceType instancetype å’Œ id éƒ½æ˜¯ä¸‡èƒ½æŒ‡é’ˆï¼ŒæŒ‡å‘å¯¹è±¡ã€‚ id åœ¨ç¼–è¯‘çš„é€‚åˆä¸èƒ½åˆ¤æ–­å¯¹è±¡çš„çœŸå®ç±»å‹ï¼Œinstancetype åœ¨ç¼–è¯‘çš„æ—¶å€™å¯ä»¥åˆ¤æ–­å¯¹è±¡çš„çœŸå®ç±»å‹ id å¯ä»¥ç”¨æ¥å®šä¹‰å˜é‡ï¼Œå¯ä»¥ä½œä¸ºè¿”å›å€¼ç±»å‹ï¼Œå¯ä»¥ä½œä¸ºå½¢å‚ç±»å‹ï¼›instancetype åªèƒ½ä½œä¸ºè¿”å›å€¼ç±»å‹ instancetype åªé€‚ç”¨äºåˆå§‹åŒ–æ–¹æ³•å’Œä¾¿åˆ©æ„é€ å™¨çš„è¿”å›å€¼ç±»å‹ @synthesize å’Œ @dynamic @property æœ‰ä¸¤ä¸ªå¯¹åº”çš„è¯ï¼Œä¸€ä¸ªæ˜¯ @synthesizeï¼Œä¸€ä¸ªæ˜¯ @dynamicã€‚å¦‚æœ @synthesize å’Œ @dynamic éƒ½æ²¡å†™ï¼Œé‚£ä¹ˆé»˜è®¤çš„å°±æ˜¯ @syntheszie var = _var; @synthesize çš„è¯­ä¹‰æ˜¯å¦‚æœä½ æ²¡æœ‰æ‰‹åŠ¨å®ç° setteræ–¹æ³•å’Œ getteræ–¹æ³•ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ä¸ºä½ åŠ ä¸Šè¿™ä¸¤ä¸ªæ–¹æ³•ã€‚ @dynamic å‘Šè¯‰ç¼–è¯‘å™¨,å±æ€§çš„ setterä¸getter æ–¹æ³•ç”±ç”¨æˆ·è‡ªå·±å®ç°ï¼Œä¸è‡ªåŠ¨ç”Ÿæˆã€‚ï¼ˆå½“ç„¶å¯¹äºreadonlyçš„å±æ€§åªéœ€æä¾›getterå³å¯ï¼‰ã€‚å‡å¦‚ä¸€ä¸ªå±æ€§è¢«å£°æ˜ä¸º @dynamic varï¼Œç„¶åä½ æ²¡æœ‰æä¾› @setteræ–¹æ³•å’Œ@getter æ–¹æ³•ï¼Œç¼–è¯‘çš„æ—¶å€™æ²¡é—®é¢˜ï¼Œä½†æ˜¯å½“ç¨‹åºè¿è¡Œåˆ°instance.var = someVarï¼Œç”±äºç¼ºsetteræ–¹æ³•ä¼šå¯¼è‡´ç¨‹åºå´©æºƒï¼›æˆ–è€…å½“è¿è¡Œåˆ° someVar = varæ—¶ï¼Œç”±äºç¼ºgetteræ–¹æ³•åŒæ ·ä¼šå¯¼è‡´å´©æºƒã€‚ç¼–è¯‘æ—¶æ²¡é—®é¢˜ï¼Œè¿è¡Œæ—¶æ‰æ‰§è¡Œç›¸åº”çš„æ–¹æ³•ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„åŠ¨æ€ç»‘å®šã€‚ UIView å’Œ CALayer UIView å’Œ CALayer ç®—æ˜¯ç›¸äº’è¡¥å……çš„å…³ç³»ã€‚ UIView = CALayer.delegate UIView : è´Ÿè´£ç”¨æˆ·çš„äº¤äº’äº‹ä»¶ã€‚ CALayer: è´Ÿè´£å›¾åƒå’ŒåŠ¨ç”»çš„æ¸²æŸ“ã€‚ Bounds å’Œ Frame Bounds: ä¸€èˆ¬æ˜¯ç›¸å¯¹äºè‡ªèº«æ¥è¯´çš„ï¼Œæ˜¯æ§ä»¶çš„å†…éƒ¨å°ºå¯¸ã€‚å¦‚æœä½ ä¿®æ”¹äº† Boundsï¼Œé‚£ä¹ˆå­æ§ä»¶çš„ç›¸å¯¹ä½ç½®ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ã€‚ Frame: æ˜¯ç›¸å¯¹äºçˆ¶æ§ä»¶æ¥è¯´çš„ï¼Œæ˜¯æ§ä»¶çš„å¤–éƒ¨å°ºå¯¸ã€‚ UIViewController ç”Ÿå‘½å‘¨æœŸ æ·±æ‹·è´ä¸æµ…æ‹·è´æµ…æ‹·è´æŒ‡åªæ˜¯å°†å¯¹è±¡å†…å­˜åœ°å€å¤šäº†ä¸€ä¸ªå¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ‹·è´ç»“æŸä¹‹åï¼Œä¸¤ä¸ªå¯¹è±¡çš„å€¼ä¸ä»…ç›¸åŒï¼Œè€Œä¸”å¯¹è±¡æ‰€æŒ‡çš„å†…å­˜åœ°å€éƒ½æ˜¯ä¸€æ ·çš„ã€‚ å•å±‚æ·±æ‹·è´ å¯¹äºä¸å¯å˜çš„å®¹å™¨ç±»å¯¹è±¡(å¦‚ NSArrayã€NSSetã€NSDictionary)è¿›è¡Œ mutableCopy æ“ä½œï¼Œå†…å­˜åœ°å€å‘ç”Ÿäº†å˜åŒ–ï¼Œä½†æ˜¯å…¶ä¸­çš„å…ƒç´ å†…å­˜åœ°å€å¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œå±äºå•å±‚æ·±æ‹·è´ã€‚ å¯¹äºå¯å˜é›†åˆç±»å¯¹è±¡(å¦‚ NSMutableArrayã€NSMutableSetã€NSMutableDictionary)ï¼Œä¸ç®¡æ˜¯è¿›è¡Œ copy æ“ä½œè¿˜æ˜¯ mutableCopyæ“ä½œï¼Œå…¶å†…å­˜åœ°å€éƒ½å‘ç”Ÿäº†å˜åŒ–ï¼Œä½†æ˜¯å…¶ä¸­çš„å…ƒç´ å†…å­˜åœ°å€éƒ½æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œå±äºå•å±‚æ·±æ‹·è´ã€‚ æ·±æ‹·è´æŒ‡æ‹·è´ä¸€ä¸ªå¯¹è±¡çš„å…·ä½“å†…å®¹ï¼Œæ‹·è´ç»“æŸä¹‹åï¼Œä¸¤ä¸ªå¯¹è±¡çš„å€¼è™½ç„¶æ˜¯ç›¸åŒçš„ï¼Œä½†æ˜¯æŒ‡å‘çš„å†…å­˜åœ°å€æ˜¯ä¸åŒçš„ã€‚ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´ä¹Ÿäº’ä¸å½±å“ï¼Œäº’ä¸å¹²æ‰°ã€‚ éé›†åˆç±»å‹çš„ copy ä¸ mutableCopy NSString copy å†…å­˜åœ°å€ä¸å˜ï¼Œæµ…æ‹·è´ mutableCopy å†…å­˜åœ°å€æ”¹å˜ï¼Œæ·±æ‹·è´ NSMutableString copy å†…å­˜åœ°å€æ”¹å˜ï¼Œæ·±æ‹·è´ mutableCopy å†…å­˜åœ°å€æ”¹å˜ï¼Œæ·±æ‹·è´ é›†åˆç±»å‹çš„ copy ä¸ mutableCopy NSArray copy å†…å­˜åœ°å€ä¸å˜ï¼Œå†…éƒ¨å…ƒç´ åœ°å€ä¸å˜ï¼Œæµ…æ‹·è´ mutableCopy å†…å­˜åœ°å€æ”¹å˜ï¼Œä½†æ˜¯å†…éƒ¨å…ƒç´ åœ°å€ä¸å˜ï¼Œå•å±‚æ·±æ‹·è´ NSMutableArray copy å†…å­˜åœ°å€æ”¹å˜ï¼Œä½†æ˜¯å†…éƒ¨å…ƒç´ åœ°å€ä¸å˜ï¼Œå•å±‚æ·±æ‹·è´ mutableCopy å†…å­˜åœ°å€æ”¹å˜ï¼Œä½†æ˜¯å†…éƒ¨å…ƒç´ åœ°å€ä¸å˜ï¼Œå•å±‚æ·±æ‹·è´ å®ç°é›†åˆç±»å‹çš„æ·±æ‹·è´ é€šè¿‡å½’è§£æ¡£ç”Ÿæˆä¸¤ä»½å®Œå…¨ç‹¬ç«‹çš„å¯¹è±¡ï¼Œä½†æ˜¯å‰ææ˜¯å¯¹è±¡(å­å¯¹è±¡)å¿…é¡»å…¨éƒ¨æ”¯æŒ NSCoding åè®®ã€‚æ¨èä½¿ç”¨ YYModel + NSCopying è¿™æ ·å°±ä¸ç”¨è‡ªå·±å†™é€»è¾‘ä»£ç äº† ğŸ˜ è‡ªå·±å®ç°ä¸€ä¸ªæ·±æ‹·è´åè®® 123@protocol YSDeepCopy &lt;NSObject&gt;- (id)ys_deepCopy;@end @interface NSArray (YSDeepCopy) @end123456789101112131415161718192021222324- (instancetype)ys_deepCopy &#123; NSMutableArray *mArray = [NSMutableArray arrayWithCapacity:self.count]; for (id subObject in self) &#123; id deepCopySubObject = nil; if ([subObject respondsToSelector:@selector(ys_deepCopy)]) &#123; deepCopySubObject = [subObject ys_deepCopy]; &#125; else if ([subObject conformsToProtocol:@protocol(NSCopying)]) &#123; deepCopySubObject = [subObject copy]; &#125; else &#123; NSAssert1(NO, @&quot;Class \\&quot;%s\\&quot; not support YSDeepCopy&quot;, object_getClassName(subObject)); deepCopySubObject = subObject; &#125; [mArray addObject:deepCopySubObject ?: subObject]; &#125; if ([self isKindOfClass:[NSMutableArray class]]) &#123; return mArray; &#125; else &#123; return [NSArray arrayWithArray:mArray]; &#125;&#125; ä½†æ˜¯å¦‚æœ æ•°ç»„é‡Œé¢ æ·»åŠ çš„æ˜¯è‡ªå·±å®šä¹‰çš„Modelï¼Œ åˆ™åº”è¯¥å®ç° Model çš„ NSCopying åè®®ï¼Œ æˆ–è€… YSDeepCopy åè®®æ¨èä½¿ç”¨ YYModel + NSCopying è¿™æ ·å°±ä¸ç”¨è‡ªå·±å†™é€»è¾‘ä»£ç äº† ğŸ˜","categories":[],"tags":[{"name":"iOS","slug":"iOS","permalink":"https://kysonyangs.github.io/tags/iOS/"}]},{"title":"å‘å¸ƒpodsåˆ°CocoaPods","slug":"å‘å¸ƒpodsåˆ°CocoaPods","date":"2016-01-20T07:12:36.000Z","updated":"2020-05-17T08:16:16.849Z","comments":true,"path":"default/å‘å¸ƒpodsåˆ°CocoaPods/","link":"","permalink":"https://kysonyangs.github.io/default/å‘å¸ƒpodsåˆ°CocoaPods/","excerpt":"æ³¨å†Œ pod trunk register é‚®ç®± &#39;ç”¨æˆ·å&#39; --description=&#39;ç”µè„‘æè¿°&#39; pod trunk register xxx@gmail.com &#39;KL&#39; --verbose","text":"æ³¨å†Œ pod trunk register é‚®ç®± &#39;ç”¨æˆ·å&#39; --description=&#39;ç”µè„‘æè¿°&#39; pod trunk register xxx@gmail.com &#39;KL&#39; --verbose æŸ¥æ”¶é‚®ä»¶ å¦‚æœæ˜¯QQé‚®ç®±ï¼Œå¯èƒ½ä¼šè¢«æ”¾åˆ°â€œåƒåœ¾ç®±â€ä¸­ï¼Œå¹¶ä¸ä¸€å®šæ˜¯â€œæ”¶ä»¶ç®±â€ ç‚¹å‡»é‚®ä»¶ä¸­çš„é“¾æ¥ï¼šhttps://trunk.cocoapods.org/sessions/verify/xxxx æ¥ä¸‹æ¥æŸ¥çœ‹ä¸ªäººä¿¡æ¯ pod trunk me 123456- Name: xxx- Email: xxxxxx@qq.com- Since: January 28th, 03:53- Pods: None- Sessions: - January 28th, 04:28 - June 5th, 04:34. IP: xxx.xxx.xxx.xxx Description: Macbook Pro ä¸­é—´å¯èƒ½é‡åˆ°è¿™ç§é”™è¯¯ 1NoMethodError - undefined method &apos;last&apos; for #&lt;Netrc::Entry:0x007fc59c246378&gt; è¿™æ—¶å€™éœ€è¦å°è¯•æ›´æ–°gemæºæˆ–è€…pod sudo gem update --system sudo gem install cocoapods sudo gem install cocospods-trunk åˆ›å»ºpodspecæ–‡ä»¶ æ¥ä¸‹æ¥éœ€è¦åœ¨é¡¹ç›®æ ¹è·¯å¾„åˆ›å»ºä¸€ä¸ªpodspecæ–‡ä»¶æ¥æè¿°ä½ çš„é¡¹ç›®ä¿¡æ¯ pod spec cretae æ–‡ä»¶å æ¯”å¦‚pod spec cretae KLTest å°±ä¼šç”Ÿæˆä¸€ä¸ªKLTest.podspec å¡«å†™podspecå†…å®¹123456789101112Pod::Spec.new do |s| s.name = &quot;KLTest&quot; s.version = &quot;0.0.1&quot; s.summary = &quot;The fastest and most convenient conversion between JSON and model&quot; s.homepage = &quot;https://github.com/xxx/KLTest&quot; s.license = &quot;MIT&quot; s.author = &#123; &quot;KL&quot; =&gt; &quot;xxxxx@qq.com&quot; &#125; s.social_media_url = &quot;http://weibo.com/exceptions&quot; s.source = &#123; :git =&gt; &quot;https://github.com/xxx/KLTest.git&quot;, :tag =&gt; s.version &#125; s.source_files = &quot;KLTestExample/KLTestExample/KLTest&quot; s.requires_arc = trueend å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç°åœ¨çš„podspecå¿…é¡»æœ‰tagï¼Œæ‰€ä»¥æœ€å¥½å…ˆæ‰“ä¸ªtagï¼Œä¼ åˆ°github git tag 0.0.1 git push --tags æ£€æµ‹podspecè¯­æ³• pod spec lint KLTest.podspec pod spec lint KLTest.podspec â€”allow-warnings å¿½ç•¥æ‰€æœ‰è­¦å‘Š å‘å¸ƒpodspec pod trunk push KLTest.podspec å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡å‘å¸ƒpodï¼Œéœ€è¦å»https://trunk.cocoapods.org/claims/newè®¤é¢†pod æ£€æµ‹ pod setup : åˆå§‹åŒ– pod repo update : æ›´æ–°ä»“åº“ pod search MJExtension ä»“åº“æ›´æ–° å¦‚æœä»“åº“æ›´æ–°æ…¢ï¼Œå¯ä»¥è€ƒè™‘æ›´æ¢ä»“åº“é•œåƒ pod repo remove master pod repo add master http://git.oschina.net/akuandev/Specs.git","categories":[],"tags":[{"name":"CocoaPods","slug":"CocoaPods","permalink":"https://kysonyangs.github.io/tags/CocoaPods/"}]},{"title":"iOSæ•°ç»„æ’åº","slug":"iOSæ•°ç»„æ’åº","date":"2015-10-24T07:10:27.000Z","updated":"2018-11-05T07:11:32.218Z","comments":true,"path":"default/iOSæ•°ç»„æ’åº/","link":"","permalink":"https://kysonyangs.github.io/default/iOSæ•°ç»„æ’åº/","excerpt":"iOS æ•°ç»„æ’åºç°åœ¨æœ‰ä¸‹åˆ—ä¸¤ä¸ªæ•°ç»„ï¼Œæˆ‘ä»¬ä»ä»–ä»¬å¼€å§‹æ¥è§¦æ•°ç»„çš„æ’åº 12NSArray *arrayString = @[@&quot;20&quot;, @&quot;30&quot;, @&quot;8&quot;, @&quot;10&quot;, @&quot;9&quot;, @&quot;88&quot;, @&quot;66&quot;];NSArray *arrayNumber = @[@20, @30, @8, @10, @9, @88, @66]; 1ã€sortedArrayUsingSelectorè¿™ä¸ªæ–¹æ³•å¾ˆç®€å•ï¼Œä½¿ç”¨ä¹Ÿå¾ˆä¾¿æ·ï¼Œå®ƒè¿”å›ä¸€ä¸ªæ’å¥½åºçš„æ•°ç»„ [arrayString sortedArrayUsingSelector:@selector(compare:)]ï¼› ä½†æ˜¯å½“ä½ æ‰§è¡Œæ‰“å°ä¼šå‘ç°arrayStringæ‰§è¡Œè¯¥æ–¹æ³•æ’åºåçš„ç»“æœæ˜¯ä¸‹å›¾","text":"iOS æ•°ç»„æ’åºç°åœ¨æœ‰ä¸‹åˆ—ä¸¤ä¸ªæ•°ç»„ï¼Œæˆ‘ä»¬ä»ä»–ä»¬å¼€å§‹æ¥è§¦æ•°ç»„çš„æ’åº 12NSArray *arrayString = @[@&quot;20&quot;, @&quot;30&quot;, @&quot;8&quot;, @&quot;10&quot;, @&quot;9&quot;, @&quot;88&quot;, @&quot;66&quot;];NSArray *arrayNumber = @[@20, @30, @8, @10, @9, @88, @66]; 1ã€sortedArrayUsingSelectorè¿™ä¸ªæ–¹æ³•å¾ˆç®€å•ï¼Œä½¿ç”¨ä¹Ÿå¾ˆä¾¿æ·ï¼Œå®ƒè¿”å›ä¸€ä¸ªæ’å¥½åºçš„æ•°ç»„ [arrayString sortedArrayUsingSelector:@selector(compare:)]ï¼› ä½†æ˜¯å½“ä½ æ‰§è¡Œæ‰“å°ä¼šå‘ç°arrayStringæ‰§è¡Œè¯¥æ–¹æ³•æ’åºåçš„ç»“æœæ˜¯ä¸‹å›¾ åœ¨è¿™é‡Œæˆ‘ä»¬è¦æ³¨æ„çš„æ—¶ï¼Œå®ƒæ’åºçš„æ—¶å€™å¦‚æœå¯¹äºarrayString æ¥è¯´ï¼Œå®ƒæ˜¯æŒ‰å­—æ¯ä¹¦åºæ’åˆ—çš„ï¼Œè€Œä¸æ˜¯æŒ‰ç…§æ•°å­—å¤§å°ï¼Œè¿™ä¸ªè¦æ³¨æ„ï¼Œ arrayNumber è¿™ä¸ªæ•°ç»„åˆ™æ²¡é—®é¢˜ï¼Œå¦‚æœä½ æƒ³è¦æŒ‰ç…§è‡ªå·±çš„è§„åˆ™æ¥æ’åºï¼Œå¯ä»¥è‡ªå·±å†™ä¸ªæ–¹æ³•ï¼Œä¼ åˆ°@selector() é‡Œé¢å°±è¡Œ 2ã€sortedArrayUsingComparatorä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨blocké‡Œé¢å†™å…¥è‡ªå·±å®šä¹‰çš„è§„åˆ™ï¼Œå®ç°èµ·æ¥ä¹Ÿå¬æ–¹ä¾¿çš„ 123[arrayString sortedArrayUsingComparator:^NSComparisonResult(id _Nonnull obj1, id _Nonnull obj2) &#123; return [obj1 integerValue] &gt; [obj2 integerValue];&#125;] ç°åœ¨å°±æ˜¯æ­£ç¡®çš„æŒ‰ç…§æ•°å­—å¤§å°æ’åºäº†ï¼Œå˜¿å˜¿å˜¿~ 3ã€sortedArrayUsingDescriptors &amp; sortUsingDescriptorså‰è€…è¿”å›ä¸€ä¸ªæ’å¥½åºçš„æ•°ç»„ï¼Œåè€…åˆ™æ˜¯å¯¹è‡ªèº«è¿›è¡Œæ’åºï¼Œæ— è¿”å›å€¼~å“²ç†æˆ‘ä»¬è®²ä¸€ä¸‹å‰è€…çš„æ–¹æ³•ï¼Œä¸å¤šè¯´ï¼Œä¸Šä»£ç â€” 12345678910111213141516171819202122232425262728293031323334353637//é¦–å…ˆæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç±»Person@interface Person : NSObject@property NSString *name;@property NSNumber *age;@end@implementation Person- (NSString *)description &#123; return [NSString stringWithFormat:@&quot;name = %@, age = %@&quot;, self.name, self.age];&#125;@end//ç„¶åå®ä¾‹åŒ–ä¸€ä¸ªPersonæ•°ç»„NSArray *name = @[ @&quot;Allen&quot;, @&quot;Kellem&quot;, @&quot;God&quot;, @&quot;Queen&quot;, @&quot;King&quot;, @&quot;Bob&quot;];NSArray *ages = @[@8, @20, @9, @88, @70, @20];NSMutableArray *people = [NSMutableArray array];//è¿™é‡Œæ˜¯ä¸€ä¸ªæ•°ç»„çš„éå†æ–¹æ³•ï¼Œå»ºè®®å¤§å®¶ä½¿ç”¨è¿™ç§æ–¹æ³•è¿›è¡Œæ•°ç»„çš„éå†[name enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) &#123; Person *person = [[Person alloc] init]; person.name = [name objectAtIndex:idx]; person.age = [ages objectAtIndex:idx]; [people addObject:person];&#125;];// åå­—è¿›è¡Œæ’åºï¼Œé™åºè§„åˆ™ï¼Œkeyå¯ä»¥ä¼ nil,æˆ–è€…&quot;self&quot;ï¼Œåœ¨å¯¹å¦‚ä¸‹æ•°ç»„æ’åºæ—¶å¯ç”¨ NSArray *ages = @[@8, @20, @9, @88, @70, @20];//å†å¤šè¯´ä¸€å¥ï¼Œkey è¿™é‡Œç”¨åˆ°çš„ç±»ä¼¼KVCï¼Œå…¶ä¸­ç†å¿µè‡ªå·±ä½“ä¼š =-=NSSortDescriptor *nameSortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@&quot;name&quot; ascending:YES];// å¹´é¾„è¿›è¡Œæ’åºï¼Œå‡åºè§„åˆ™NSSortDescriptor *ageSortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@&quot;age&quot; ascending:NO];//ç„¶åä½¿ç”¨è§„åˆ™è¿›è¡Œæ’åºï¼Œæ‰§è¡Œï¼Œæ‰“å°// è¿™é‡Œè§„åˆ™æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½ å¯ä»¥ä¼ å…¥å¤šä¸ªè§„åˆ™ï¼Œä¾‹å¦‚3NSLog(@&quot;By age: %@&quot;, [people sortedArrayUsingDescriptors:@[ageSortDescriptor]]); NSLog(@&quot;By name name: %@&quot;, [people sortedArrayUsingDescriptors:@[nameSortDescriptor]]);NSLog(@&quot;By name, age: %@&quot;, [people sortedArrayUsingDescriptors:@[nameSortDescriptor, ageSortDescriptor]]); ç»“æœå¦‚ä¸‹å›¾ï¼š æœ€åå†ä½“éªŒä¸€ä¸‹å…¶ä¸­çš„KVCå¥¥å¦™ï¼Œæˆ‘ä»¬ç”¨å­—å…¸æ¥ä½“éªŒä¸€ä¸‹ 123456789NSArray *dict =@[ @&#123;@&quot;age&quot;:@20&#125;, @&#123;@&quot;age&quot;:@5&#125;, @&#123;@&quot;age&quot;:@70&#125;, @&#123;@&quot;age&quot;:@33&#125;];NSSortDescriptor *sort = [NSSortDescriptor sortDescriptorWithKey:@&quot;age&quot; ascending:YES];NSArray *arr = [dict sortedArrayUsingDescriptors:@[sort]];NSLog(@&quot;%@&quot;,arr);","categories":[],"tags":[{"name":"æ•°ç»„","slug":"æ•°ç»„","permalink":"https://kysonyangs.github.io/tags/æ•°ç»„/"}]},{"title":"iOSæŠ€å·§","slug":"iOSæŠ€å·§","date":"2015-10-06T12:00:23.000Z","updated":"2018-11-05T07:43:17.533Z","comments":true,"path":"default/iOSæŠ€å·§/","link":"","permalink":"https://kysonyangs.github.io/default/iOSæŠ€å·§/","excerpt":"åˆ¤æ–­iPhoneX++123456789101112131415static inline BOOL isIPhoneXSeries() &#123; BOOL iPhoneXSeries = NO; if (UIDevice.currentDevice.userInterfaceIdiom != UIUserInterfaceIdiomPhone) &#123; return iPhoneXSeries; &#125; if (@available(iOS 11.0, *)) &#123; UIWindow *mainWindow = [[[UIApplication sharedApplication] delegate] window]; if (mainWindow.safeAreaInsets.bottom &gt; 0.0) &#123; iPhoneXSeries = YES; &#125; &#125; return iPhoneXSeries;&#125;","text":"åˆ¤æ–­iPhoneX++123456789101112131415static inline BOOL isIPhoneXSeries() &#123; BOOL iPhoneXSeries = NO; if (UIDevice.currentDevice.userInterfaceIdiom != UIUserInterfaceIdiomPhone) &#123; return iPhoneXSeries; &#125; if (@available(iOS 11.0, *)) &#123; UIWindow *mainWindow = [[[UIApplication sharedApplication] delegate] window]; if (mainWindow.safeAreaInsets.bottom &gt; 0.0) &#123; iPhoneXSeries = YES; &#125; &#125; return iPhoneXSeries;&#125; Button å¤§å°12345- (CGSize)intrinsicContentSize &#123; CGSize originalSize = [super intrinsicContentSize]; CGSize size = CGSizeMake(originalSize.width+10, originalSize.height); return size;&#125; æˆªå±12345678- (UIImage *)screenshot &#123; UIWindow *window = [UIApplication sharedApplication].keyWindow; UIGraphicsBeginImageContextWithOptions(window.bounds.size, YES, [UIScreen mainScreen].scale); [window.layer renderInContext:UIGraphicsGetCurrentContext()]; UIImage *image = UIGraphicsGetImageFromCurrentImageContext(); UIGraphicsEndImageContext(); return image;&#125; è®¾ç½®pageControlå•é¡µä¸æ˜¾ç¤º1self.pageControl.hidesForSinglePage = YES; è®©æ•°ç»„ä¸­çš„æ‰€æœ‰å¯¹è±¡éƒ½æ‰§è¡Œä¸€ä¸‹æ–¹æ³•1[self.view.subViews makeObjectsPerformSelector:@selecter(removeFromSuperView)]; scrollsToTopscrollsToTopæ˜¯UIScrollViewçš„ä¸€ä¸ªå±æ€§ï¼Œä¸»è¦ç”¨äºç‚¹å‡»è®¾å¤‡çš„çŠ¶æ€æ æ—¶ï¼Œæ˜¯scrollsToTop == YESçš„æ§ä»¶æ»šåŠ¨è¿”å›è‡³é¡¶éƒ¨ã€‚æ¯ä¸€ä¸ªé»˜è®¤çš„UIScrollViewçš„å®ä¾‹ï¼Œä»–çš„scrollsToTopå±æ€§é»˜è®¤ä¸ºYESï¼Œæ‰€ä»¥è¦å®ç°æŸä¸€UIScrollViewçš„å®ä¾‹ç‚¹å‡»è®¾å¤‡çŠ¶æ€æ è¿”å›é¡¶éƒ¨ï¼Œåˆ™éœ€è¦å…³é—­å…¶ä»–çš„UIScrollViewçš„å®ä¾‹çš„scrollsToTopå±æ€§ä¸ºNOã€‚ SBè·³è½¬12345678910// è·³è½¬[self performSegueWithIdentifier:@&quot;login2Contact&quot; sender:nil];// åœ¨æ‰§è¡Œè·³è½¬ä¹‹å‰çš„æ—¶å€™è°ƒç”¨- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender&#123; UIViewController *vc = segue.destinationViewController; vc.title = [NSString stringWithFormat:@&quot;%@çš„è”ç³»äººåˆ—è¡¨&quot;, _accountField.text]; NSLog(@&quot;%@--%@&quot;,segue.sourceViewController,segue.destinationViewController);&#125; iOS 10æ‹¨æ‰“ç³»ç»Ÿç”µè¯å‘ç°å¼¹å‡ºæ¡†ä¼šå»¶è¿Ÿ2så·¦å³è§£å†³æ–¹æ¡ˆä¸€ï¼š12345678910111213+ (void)callPhone:(NSString *)phoneNum &#123; if (phoneNum.length == 0) &#123; return; &#125; NSString *callPhone = [NSString stringWithFormat:@&quot;telprompt://%@&quot;, phoneNum]; NSComparisonResult compare = [[UIDevice currentDevice].systemVersion compare:@&quot;10.0&quot;]; if (compare == NSOrderedDescending || compare == NSOrderedSame) &#123; /// å¤§äºç­‰äº10.0ç³»ç»Ÿä½¿ç”¨æ­¤openURLæ–¹æ³• [[UIApplication sharedApplication] openURL:[NSURL URLWithString:callPhone] options:@&#123;&#125; completionHandler:nil]; &#125; else &#123; [[UIApplication sharedApplication] openURL:[NSURL URLWithString:callPhone]]; &#125;&#125; è§£å†³æ–¹æ¡ˆäºŒï¼š123456789+ (void)callPhone:(NSString *)phoneNum &#123; if (phoneNum.length == 0) &#123; return; &#125; NSString *callPhone = [NSString stringWithFormat:@&quot;telprompt://%@&quot;, phoneNum]; dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; [[UIApplication sharedApplication] openURL:[NSURL URLWithString:callPhone]]; &#125;);&#125; ä¿®æ”¹TableViewHeaderViewå­—ä½“å¤§å°123456- (void)tableView:(UITableView *)tableView willDisplayHeaderView:(UIView *)view forSection:(NSInteger)section &#123; UITableViewHeaderFooterView *header = (UITableViewHeaderFooterView *)view; header.textLabel.textColor = [UIColor grayColor]; header.textLabel.font = [UIFont systemFontOfSize:15]; header.contentView.backgroundColor = [UIColor groupTableViewBackgroundColor];&#125; heightForHeaderInSectionè®¾ç½®é«˜åº¦æ— æ•ˆ1234iOS11é»˜è®¤å¼€å¯Self-Sizingï¼Œå…³é—­Self-Sizingå³å¯ã€‚self.tableView.estimatedRowHeight = 0;self.tableView.estimatedSectionHeaderHeight = 0;self.tableView.estimatedSectionFooterHeight = 0; å±è”½ä¸€äº›æ— çŸ¥çš„è­¦å‘ŠXcode8é‡Œè¾¹ Edit Scheme-&gt; Run -&gt; Arguments, åœ¨Environment Variablesé‡Œè¾¹æ·»åŠ  OS_ACTIVITY_MODE ï¼ Disable Â· å¦‚æœå†™äº†ä¹‹åè¿˜æ˜¯æ‰“å°log,è¯·é‡æ–°å‹¾é€‰å¯¹å‹¾ï¼Œå°±å¯ä»¥è§£å†³äº†ã€‚ UITableViewæ”¶èµ·é”®ç›˜1tableView.keyboardDismissMode = UIScrollViewKeyboardDismissModeOnDrag; é•¿æŒ‰å¤åˆ¶åŠŸèƒ½123456789- (void)viewDidLoad &#123; [self.view addGestureRecognizer:[[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(pasteBoard:)]];&#125;- (void)pasteBoard:(UILongPressGestureRecognizer *)longPress &#123; if (longPress.state == UIGestureRecognizerStateBegan) &#123; UIPasteboard *pasteboard = [UIPasteboard generalPasteboard]; pasteboard.string = @&quot;éœ€è¦å¤åˆ¶çš„æ–‡æœ¬&quot;; &#125;&#125; ç¦æ­¢æ‰‹æœºç¡çœ 1[UIApplication sharedApplication].idleTimerDisabled = YES; ç¦ç”¨buttoné«˜äº®123button.adjustsImageWhenHighlighted = NO;æˆ–è€…åœ¨åˆ›å»ºçš„æ—¶å€™UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom]; æ§åˆ¶å±å¹•æ—‹è½¬ï¼Œåœ¨æ§åˆ¶å™¨ä¸­å†™1234567891011121314/** æ˜¯å¦æ”¯æŒè‡ªåŠ¨è½¬å± */- (BOOL)shouldAutorotate &#123; return YES;&#125;/** æ”¯æŒå“ªäº›å±å¹•æ–¹å‘ */- (UIInterfaceOrientationMask)supportedInterfaceOrientations &#123; return UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight;&#125;/** é»˜è®¤çš„å±å¹•æ–¹å‘ï¼ˆå½“å‰ViewControllerå¿…é¡»æ˜¯é€šè¿‡æ¨¡æ€å‡ºæ¥çš„UIViewControllerï¼ˆæ¨¡æ€å¸¦å¯¼èˆªçš„æ— æ•ˆï¼‰æ–¹å¼å±•ç°å‡ºæ¥çš„ï¼Œæ‰ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼‰ */- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation &#123; return UIInterfaceOrientationLandscapeLeft | UIInterfaceOrientationLandscapeRight;&#125; è·å–appç¼“å­˜å¤§å°123456789101112131415161718- (CGFloat)getCachSize &#123; NSUInteger imageCacheSize = [[SDImageCache sharedImageCache] getSize]; //è·å–è‡ªå®šä¹‰ç¼“å­˜å¤§å° //ç”¨æšä¸¾å™¨éå† ä¸€ä¸ªæ–‡ä»¶å¤¹çš„å†…å®¹ //1.è·å– æ–‡ä»¶å¤¹æšä¸¾å™¨ NSString *myCachePath = [NSHomeDirectory() stringByAppendingPathComponent:@&quot;Library/Caches&quot;]; NSDirectoryEnumerator *enumerator = [[NSFileManager defaultManager] enumeratorAtPath:myCachePath]; __block NSUInteger count = 0; //2.éå† for (NSString *fileName in enumerator) &#123; NSString *path = [myCachePath stringByAppendingPathComponent:fileName]; NSDictionary *fileDict = [[NSFileManager defaultManager] attributesOfItemAtPath:path error:nil]; count += fileDict.fileSize;//è‡ªå®šä¹‰æ‰€æœ‰ç¼“å­˜å¤§å° &#125; // å¾—åˆ°æ˜¯å­—èŠ‚ è½¬åŒ–ä¸ºM CGFloat totalSize = ((CGFloat)imageCacheSize+count)/1024/1024; return totalSize;&#125; UITextViewä¸­æ‰“å¼€æˆ–ç¦ç”¨å¤åˆ¶ï¼Œå‰ªåˆ‡ï¼Œé€‰æ‹©ï¼Œå…¨é€‰ç­‰åŠŸèƒ½12345678910111213141516171819// ç»§æ‰¿UITextViewé‡å†™è¿™ä¸ªæ–¹æ³•- (BOOL)canPerformAction:(SEL)action withSender:(id)sender &#123; // è¿”å›NOä¸ºç¦ç”¨ï¼ŒYESä¸ºå¼€å¯ // ç²˜è´´ if (action == @selector(paste:)) return NO; // å‰ªåˆ‡ if (action == @selector(cut:)) return NO; // å¤åˆ¶ if (action == @selector(copy:)) return NO; // é€‰æ‹© if (action == @selector(select:)) return NO; // é€‰ä¸­å…¨éƒ¨ if (action == @selector(selectAll:)) return NO; // åˆ é™¤ if (action == @selector(delete:)) return NO; // åˆ†äº« if (action == @selector(share)) return NO; return [super canPerformAction:action withSender:sender];&#125; ç¦æ­¢textFieldå’ŒtextViewçš„å¤åˆ¶ç²˜è´´èœå•123456- (BOOL)canPerformAction:(SEL)action withSender:(id)sender&#123; if ([UIMenuController sharedMenuController]) &#123; [UIMenuController sharedMenuController].menuVisible = NO; &#125; return NO;&#125; ä¸ºä¸€ä¸ªviewæ·»åŠ è™šçº¿è¾¹æ¡†1234567 CAShapeLayer *border = [CAShapeLayer layer];border.strokeColor = [UIColor colorWithRed:67/255.0f green:37/255.0f blue:83/255.0f alpha:1].CGColor;border.fillColor = nil;border.lineDashPattern = @[@4, @2];border.path = [UIBezierPath bezierPathWithRect:view.bounds].CGPath;border.frame = view.bounds;[view.layer addSublayer:border]; è®¾ç½®tableViewåˆ†å‰²çº¿é¢œè‰²1[self.tableView setSeparatorColor:[UIColor myColor]]; UIImageå’Œbase64äº’è½¬12345678- (NSString *)encodeToBase64String:(UIImage *)image &#123; return [UIImagePNGRepresentation(image) base64EncodedStringWithOptions:NSDataBase64Encoding64CharacterLineLength];&#125;- (UIImage *)decodeBase64ToImage:(NSString *)strEncodeData &#123; NSData *data = [[NSData alloc]initWithBase64EncodedString:strEncodeData options:NSDataBase64DecodingIgnoreUnknownCharacters]; return [UIImage imageWithData:data];&#125; æ‘‡ä¸€æ‘‡åŠŸèƒ½12345678910111ã€æ‰“å¼€æ‘‡ä¸€æ‘‡åŠŸèƒ½[UIApplication sharedApplication].applicationSupportsShakeToEdit = YES;2ã€è®©éœ€è¦æ‘‡åŠ¨çš„æ§åˆ¶å™¨æˆä¸ºç¬¬ä¸€å“åº”è€…[self becomeFirstResponder];3ã€å®ç°ä»¥ä¸‹æ–¹æ³•// å¼€å§‹æ‘‡åŠ¨- (void)motionBegan:(UIEventSubtype)motion withEvent:(UIEvent *)event// å–æ¶ˆæ‘‡åŠ¨- (void)motionCancelled:(UIEventSubtype)motion withEvent:(UIEvent *)event// æ‘‡åŠ¨ç»“æŸ- (void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event å‘èµ·QQèŠå¤©QQå¼€é€šæ¨å¹¿æœåŠ¡ä»¥æ¥æ”¶é™Œç”Ÿæ¶ˆæ¯12345678//æ˜¯å¦å®‰è£…QQif([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@&quot;mqq://&quot;]]) &#123; //ç”¨æ¥æ¥æ”¶ä¸´æ—¶æ¶ˆæ¯çš„å®¢æœQQå·ç (æ³¨æ„æ­¤QQå·éœ€å¼€é€šQQæ¨å¹¿åŠŸèƒ½,å¦åˆ™é™Œç”Ÿäººå‘ä»–å‘é€æ¶ˆæ¯ä¼šå¤±è´¥) NSString *QQ = @&quot;1099779883&quot;; //è°ƒç”¨QQå®¢æˆ·ç«¯,å‘èµ·QQä¸´æ—¶ä¼šè¯ NSString *url = [NSString stringWithFormat:@&quot;mqq://im/chat?chat_type=wpa&amp;uin=%@&amp;version=1&amp;src_type=web&quot;,QQ]; [[UIApplication sharedApplication] openURL:[NSURL URLWithString:url]];&#125; MJRefresh webviewå»æ‰é•¿æŒ‰åçš„é€‰æ‹©å’Œå¤åˆ¶èœå•12345678910111213141516171819202122231. webview æ‰§è¡Œ js- (void)webView:(WKWebView *)webView didFinishNavigation:(WKNavigation *)navigation &#123; NSLog(@&quot;%s&quot;, __FUNCTION__); // ç¦ç”¨é€‰ä¸­æ•ˆæœ [self.webView evaluateJavaScript:@&quot;document.documentElement.style.webkitUserSelect=&apos;none&apos;&quot; completionHandler:nil]; [self.webView evaluateJavaScript:@&quot;document.documentElement.style.webkitTouchCallout=&apos;none&apos;&quot; completionHandler:nil];&#125;func webViewDidFinishLoad(webView: UIWebView) &#123; //ç¦ç”¨webviewé•¿æŒ‰åæ–‡å­—é€‰æ‹©æ¡†å’Œæ”¾å¤§æ¡† webView.stringByEvaluatingJavaScriptFromString(&quot;document.documentElement.style.webkitUserSelect=&apos;none&apos;&quot;) webView.stringByEvaluatingJavaScriptFromString(&quot;document.documentElement.style.webkitTouchCallout=&apos;none&apos;&quot;) &#125;2. æˆ–è€…å‰ç«¯å†™css&lt;style type=&quot;text/css&quot;&gt;*:not(input,textarea) &#123; -webkit-touch-callout: none; -webkit-user-select: none; /* Disable selection/Copy of UIWebView */&#125;&lt;/style&gt; XIB å¯è§å±æ€§è®¾ç½®ï¼ˆeg: åœ†è§’ï¼‰ OC: IB_DESIGNABLE å’Œ IBInspectable 12345678910111213// .h@property (nonatomic, assign) IBInspectable CGFloat cornerRadius;// .mIB_DESIGNABLE @implementation KLButton- (void)setCornerRadius:(CGFloat)cornerRadius &#123; self.layer.cornerRadius = cornerRadius; self.layer.masksToBounds = (cornerRadius &gt; 0);&#125;- (CGFloat)cornerRadius &#123; return self.layer.cornerRadius;&#125; Swift: IBInspectable å’Œ IBDesignable æ–¹æ³•ä¸ç¡®å®šçš„å‚æ•° va_arg å®çš„ä½¿ç”¨å½“æˆ‘ä»¬æ–¹æ³•éœ€è¦ä¼ å…¥å¤šä¸ªä¸ç¡®å®šçš„å‚æ•°æ—¶(å¦‚ï¼š[NSArray arrayWithObjects]), æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ,â€¦ çš„å½¢å¼è¡¨ç¤º,å½“è¦å–ä¼ å…¥çš„å‚æ•°çš„å€¼æ—¶å°±éœ€è¦ç”¨åˆ° va_arg å®å»å–ã€‚ä¾‹å¦‚ï¼š1234567891011121314151617- (void)viewDidLoad &#123; [super viewDidLoad]; [self testMethod:@&quot;123&quot;,@&quot;456&quot;,@&quot;789&quot;ï¼Œnil];&#125;- (void)testMethod:(NSString *)test,.. NS_REQUIRES_NIL_TERMINATION &#123; va_list argList; va_start(argList, test); &#123; for (id params = test; params != nil; params = va_arg(argList, id))&#123; NSLog(@&quot;id = %@---class = %@&quot;,params,NSStringFromClass([params class])); &#125; &#125; va_end(argList);&#125; å»é™¤æ•°ç»„ä¸­é‡å¤çš„å¯¹è±¡1NSArray *newArr = [oldArr valueForKeyPath:@&quot;@distinctUnionOfObjects.self&quot;]; åˆ é™¤NSUserDefaultsæ‰€æœ‰è®°å½•1234567891011121314//æ–¹æ³•ä¸€NSString *appDomain = [[NSBundle mainBundle] bundleIdentifier];[[NSUserDefaults standardUserDefaults] removePersistentDomainForName:appDomain];//æ–¹æ³•äºŒ- (void)resetDefaults &#123; NSUserDefaults * defs = [NSUserDefaults standardUserDefaults]; NSDictionary * dict = [defs dictionaryRepresentation]; for (id key in dict) &#123; [defs removeObjectForKey:key]; &#125; [defs synchronize]; &#125;// æ–¹æ³•ä¸‰[[NSUserDefaults standardUserDefaults] setPersistentDomain:[NSDictionary dictionary] forName:[[NSBundle mainBundle] bundleIdentifier]]; UITableViewCell åˆ†å‰²çº¿ç½®é¡¶1234567891011121314if ([self.tableView respondsToSelector:@selector(setSeparatorInset:)]) &#123; [self.tableView setSeparatorInset:UIEdgeInsetsMake(0, 10, 0, 0)];&#125;if ([self.tableView respondsToSelector:@selector(setLayoutMargins:)]) &#123; [self.tableView setLayoutMargins:UIEdgeInsetsMake(0, 10, 0, 0)];&#125;// 3. cell ä¸‹if ([cell respondsToSelector:@selector(setSeparatorInset:)]) &#123; [cell setSeparatorInset:UIEdgeInsetsZero];&#125;if ([cell respondsToSelector:@selector(setLayoutMargins:)]) &#123; [cell setLayoutMargins:UIEdgeInsetsZero];&#125; è®¾ç½®UIViewControllerçš„viewçš„topåœ¨navigationBarä¸‹é¢ &amp; bottomä½ç½®åœ¨Tabbarçš„ä¸Šé¢12tabBarController.tabBar.translucent = NO;uiviewController.navigationController.navigationBar.translucent = NO; ç¦ç”¨buttoné«˜äº®,ç‚¹å‡»å˜ç°çš„æ•ˆæœ123button.adjustsImageWhenHighlighted = NO;æˆ–è€…åœ¨åˆ›å»ºçš„æ—¶å€™UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom]; è‡ªå®šä¹‰cellé€‰ä¸­èƒŒæ™¯é¢œè‰²123UIView *bgColorView = [[UIView alloc] init];bgColorView.backgroundColor = [UIColor redColor];[cell setSelectedBackgroundView:bgColorView]; UILabelè®¾ç½®å†…è¾¹è·123456å­ç±»åŒ–UILabelï¼Œé‡å†™drawTextInRectæ–¹æ³•- (void)drawTextInRect:(CGRect)rect &#123; // è¾¹è·ï¼Œä¸Šå·¦ä¸‹å³ UIEdgeInsets insets = &#123;0, 5, 0, 5&#125;; [super drawTextInRect:UIEdgeInsetsInsetRect(rect, insets)];&#125; UILabelè®¾ç½®æ–‡å­—æè¾¹12345678910111213141516å­ç±»åŒ–UILabelï¼Œé‡å†™drawTextInRectæ–¹æ³•- (void)drawTextInRect:(CGRect)rect&#123; CGContextRef c = UIGraphicsGetCurrentContext(); // è®¾ç½®æè¾¹å®½åº¦ CGContextSetLineWidth(c, 1); CGContextSetLineJoin(c, kCGLineJoinRound); CGContextSetTextDrawingMode(c, kCGTextStroke); // æè¾¹é¢œè‰² self.textColor = [UIColor redColor]; [super drawTextInRect:rect]; // æ–‡æœ¬é¢œè‰² self.textColor = [UIColor yellowColor]; CGContextSetTextDrawingMode(c, kCGTextFill); [super drawTextInRect:rect];&#125; æ”¹å˜UISliderçš„è¿›åº¦æ¡é«˜åº¦éœ€è¦ç»§æ‰¿UISliderå¹¶té‡è½½trackRectForBoundsæ–¹æ³•123- (CGRect)trackRectForBounds:(CGRect)bounds &#123; return CGRectMake(0, 0, CGRectGetWidth(self.frame), 5.0);&#125; iOS 11ä¸­éšè—sectionå¤´å°¾çš„å®ç°1234567891011121314- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section &#123; return 0.1f;&#125;- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section &#123; return 0.1f;&#125;- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section &#123; return nil;&#125;- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section &#123; return nil;&#125; æ›´æ”¹UITabBar &amp;&amp; UINavigationBarèƒŒæ™¯é¢œè‰²12[[UITabBar appearance] setBarTintColor:[UIColor redColor]];[[UINavigationBar appearance] setBarTintColor:[UIColor redColor]]; æ›´æ”¹UITabBar &amp;&amp; UINavigationBarå­—ä½“é¢œè‰²1234567//æ”¹å˜æŒ‰é’®navigationBar tintColoré¢œè‰²self.navigationController.navigationBar.tintColor = [UIColor colorWithRed:102/255.0 green:102/255.0 blue:102/255.0 alpha:1.0];//æ”¹å˜tabbar æ­£å¸¸é¢œè‰²ï¼Œé€‰ä¸­è‰²NSDictionary *attributeNormal = @&#123;NSForegroundColorAttributeName:[UIColor grayColor]&#125;;[subVC.tabBarItem setTitleTextAttributes:attributeNormal forState:(UIControlStateNormal)];NSDictionary *attributeSelected = @&#123;NSForegroundColorAttributeName:[UIColor redColor]&#125;;[subVC.tabBarItem setTitleTextAttributes:attributeSelected forState: (UIControlStateSelected)];","categories":[],"tags":[]},{"title":"Bugæ”¶é›†","slug":"Bugæ”¶é›†","date":"2015-10-01T07:29:21.000Z","updated":"2020-05-17T08:15:49.970Z","comments":true,"path":"default/Bugæ”¶é›†/","link":"","permalink":"https://kysonyangs.github.io/default/Bugæ”¶é›†/","excerpt":"CocoaPods BugUse the $(inherited) flag1234567[!] The `MBPeopleBaseApp [Debug]` target overrides the `OTHER_LDFLAGS` build setting defined in `Pods/Target Support Files/Pods-MBPeopleBaseApp/Pods-MBPeopleBaseApp.debug.xcconfig&apos;. This can lead to problems with the CocoaPods installation - Use the `$(inherited)` flag, or - Remove the build settings from the target.[!] The `MBPeopleBaseApp [Release]` target overrides the `OTHER_LDFLAGS` build setting defined in `Pods/Target Support Files/Pods-MBPeopleBaseApp/Pods-MBPeopleBaseApp.release.xcconfig&apos;. This can lead to problems with the CocoaPods installation - Use the `$(inherited)` flag, or - Remove the build settings from the target. è§£å†³æ–¹æ³•ï¼š1Other link flag æ·»åŠ  $(inherited) Xcode Bugè‡ªå®šä¹‰çš„ä»£ç ç‰‡æ®µå­˜æ”¾ä½ç½®1~/Library/Developer/Xcode/UserData/CodeSnippets Xcode 10 Multiple commands produce æŠ¥é”™è§£å†³1target &gt; Build phase &gt; Copy Bundle Resource/Compile Sourcesï¼Œåˆ æ‰ç¬¬ä¸‰æ–¹åº“ä¸­é‡å¤çš„ README.txtï¼ŒLICENSEï¼ŒInfo.plist æ–‡ä»¶ å·¥ç¨‹æ–‡ä»¶ä¹±åºé€‰ä¸­è¦æ•´ç†çš„æ–‡ä»¶å¤¹å³é”®ï¼Œç‚¹ä¸€ä¸‹â€œSort by Nameâ€æˆ–è€…â€œSort by Typeâ€å³å¯æ’åºã€‚ é¡¹ç›®æ‰“ä¸å¼€ Failed to load project at â€˜â€™ â€œ,incompatible project versionæ‰“å¼€ project.pbxproj æ–‡ä»¶ï¼Œä¿®æ”¹ objectVersion = 48; ä¸çŸ¥é“å¡«ä»€ä¹ˆå¾€ä½äº†å¡«ï¼Œæˆ–è€…åœ¨è‡ªå·±æƒ³ä¹°æ‰¾ Xcode ä¸é«˜äº®123cd Library/Developer/Xcode/DerivedDatarm -rf ./*é‡æ–°æ‰“å¼€XCODE æ‰“å¼€Playgroundæç¤ºæ‰“å¼€å¤±è´¥ï¼Œæ‰¾ä¸åˆ°åˆé€‚çš„devices1231. Quit Xcode2. Delete the folder /Users/&lt;username&gt;/Library/Developer/CoreSimulator/Devices. For example, in Terminal: rm -rf ~/Library/Developer/CoreSimulator/Devices3. In Terminal: killall -9 com.apple.CoreSimulator.CoreSimulatorService (or just reboot). OR Add a iOS8.0Device ç¢°åˆ°XibåŠ è½½ä¸å‡ºæ¥ï¼Œä»€ä¹ˆä»€ä¹ˆå·¥ç¨‹æ–‡ä»¶æ‰¾ä¸åˆ°ï¼Œè¯·çœ‹çœ‹å¼•ç”¨æœ‰æ²¡æœ‰ï¼Œæ²¡æœ‰çš„è¯åŠ ä¸Šå°±å¥½äº†ï¼ç”¨Xcode 7.3æ‰“å¼€ä¸€ä¸ªXcode 8åˆ›å»ºçš„å·¥ç¨‹ï¼Œç¼–è¯‘æ—¶æŠ¥é”™ï¼šxxx.storyboard(æˆ–è€…xxx.xib) The document â€œnullâ€ required Xcode 8.0 or later.ç‚¹å‡»xxx.storyboard(æˆ–è€…xxx.xib)æ—¶ï¼Œå¼¹å‡ºå¦‚å›¾æ‰€ç¤ºæç¤ºæ¡†ã€‚è§£å†³æ–¹æ³•æ˜¯ä»¥æºç çš„æ–¹å¼æ‰“å¼€xxx.storyboard(æˆ–è€…xxx.xib)ï¼Œç„¶ååˆ é™¤&lt;capability name=&quot;documents saved in the Xcode 8 format&quot; minToolsVersion=&quot;8.0&quot;/&gt;è¿™ä¸€è¡Œä»£ç ï¼Œå°±OKäº†ã€‚ ç¨‹åºæŠ¥é”™No architectures to compile for (ONLY_ACTIVE_ARCH=YES, active arch=x86_64, VALID_ARCHS=armv7 armv7s)build è¿™ä¸ªtargetçš„æ—¶å€™å‘½ä»¤è¡ŒæŠ¥é”™ã€‚å¯ä»¥åœ¨ build setting ä¸­ï¼Œæœç´¢bitcode,å¹¶å§ enable bitcode è®¾ç½®ä¸º NO. CopyPngFile Error æŠ¥é”™TARGETS -&gt; Build Phases -&gt; Copy Bundle Resources -&gt; åˆ é™¤ç°è‰²æˆ–çº¢è‰²çš„æ–‡ä»¶ Cannot find interface declaration for â€˜xxxxViewControllerâ€™, superclass of â€˜xxxViewControllerâ€™; did you mean â€˜UIViewControllerâ€™è¿™æ˜¯å› ä¸º çˆ¶ç±»æ€»å‡ºç°äº†äº¤å‰å¼•ç”¨ å‰å»çˆ¶ç±»æŸ¥çœ‹ ç„¶åæ”¹æ‰å°±å¥½äº† pathForResource nilçš„æƒ…å†µï¼Œè€Œé¡¹ç›®å‘½åæœ‰è¯¥èµ„æºå¯èƒ½æ²¡æ‹·è´è¿›bundle1Xcode -&gt; TARAGETS -&gt; Build Phases -&gt; Copy Bundle Resources -&gt; æ·»åŠ  â€˜Could not instantiate class named xxxâ€™æ¯”å¦‚ â€˜Could not instantiate class named WKWebViewâ€™ è§£å†³æ–¹æ³•1Xcode -&gt; TARAGETS -&gt; General -&gt; Linked Frameworks and Librarier ï¼Œç‚¹å‡»â€œ+â€å·æ·»åŠ ç›¸åº”çš„ç³»ç»Ÿåº“ webkit.framework æ·»åŠ æ–°å­—ä½“ï¼Œ info.plistä¹Ÿé…ç½®å¥½äº†ï¼Œå°±æ˜¯æ— æ•ˆè¯·æ£€æŸ¥ TARGETS -&gt; Build Phases -&gt; Copy Bundle Resources ä¸­æ˜¯å¦æ·»åŠ æ­¤èµ„æº å…¶ä»–æ·»åŠ èµ„æºåæ— æ•ˆä¹Ÿå¯å‚è€ƒæ­¤æ¡è§£å†³æ–¹æ¡ˆ ld: library not found for -lxxx:ç±»ä¼¼å‡ºç°ä¸Šé¢è¿™ç§é—®é¢˜(æˆ‘çš„é—®é¢˜å‡ºç°åœ¨libWeChatSDKè¿™ä¸ªåŒ…) ld:library not found for -lXXX çš„é—®é¢˜æœ‰å¯èƒ½æ˜¯ä½ çš„æŸä¸ªåº“çš„è¿æ¥å¼•ç”¨æœ‰é—®é¢˜, â€”â€“è§£å†³çš„åŠæ³•å°±æ˜¯åœ¨é¡¹ç›®çš„targeté‡Œ,é€‰ä¸­Link Binary With Libraries é‡Œçš„.aæˆ–framework å–æ¶ˆå†åŠ å…¥,å°±å¯ä»¥äº† â€”â€“å¦‚æœæ˜¯æ‹–æ‹½è¿›å…¥å·¥ç¨‹çš„,é‚£å°±åˆ é™¤,åœ¨æ‹–ä¸€æ¬¡. ld: symbol(s) not found for architecture x86_64ä¾èµ–åº“æœªå¯¼å…¥ tableviewé‡åˆ°è¿™ç§æŠ¥é”™failed to obtain a cell from its dataSourceæ˜¯å› ä¸ºä½ çš„cellè¢«è°ƒç”¨çš„æ—©äº†ã€‚å…ˆå¾ªç¯ä½¿ç”¨äº†cellï¼Œååˆåˆ›å»ºcellã€‚é¡ºåºé”™äº† å¯èƒ½åŸå› ï¼š xibçš„cellæ²¡æœ‰æ³¨å†Œ å†…å­˜ä¸­å·²ç»æœ‰è¿™ä¸ªcellçš„ç¼“å­˜äº†(ä¹Ÿå°±æ˜¯è¯´é€šè¿‡ä½ çš„cellIdæ‰¾åˆ°çš„cellå¹¶ä¸æ˜¯ä½ æƒ³è¦çš„ç±»å‹)ï¼Œè¿™æ—¶å€™éœ€è¦æ”¹ä¸‹cellçš„æ ‡è¯† UIView-Encapsulated-Layout-Width é”™è¯¯ä¿®æ”¹çº¦æŸä¼˜å…ˆçº§å³å¯è§£å†³ Swift åˆ›å»ºæ§åˆ¶å™¨æ—¶è‡ªå¸¦xibåŠ è½½åœ¨iOS8å´©æºƒçš„é—®é¢˜é¡¹ç›®ä¸­æœ‰éƒ¨åˆ†è·Ÿéšæ§åˆ¶å™¨ä¸€èµ·åˆ›å»ºå‡ºæ¥çš„xibï¼Œåœ¨iOS8ä¹‹å¤–çš„ç³»ç»Ÿè¿è¡Œæ­£å¸¸ï¼Œåœ¨iOS8ä¸‹å´©æºƒï¼Œæ‰¾ä¸åˆ°å¯¹åº”å…³ç³»ï¼Œä¸€ç•ªç½‘ä¸Šæœç´¢ï¼Œç»ˆäºæ‰¾åˆ°è§£å†³åŠæ³•1234567override init(nibName nibNameOrNil: String?, bundle nibBundleOrNil: Bundle?) &#123; super.init(nibName: &quot;AddressViewController&quot;, bundle: nil)&#125;required init?(coder aDecoder: NSCoder) &#123; fatalError(&quot;init(coder:) has not been implemented&quot;)&#125; åŸæ¥åœ¨iOS8ä¸‹ï¼Œä¹Ÿéœ€è¦ç»™æ§åˆ¶å™¨çš„xibé‡å†™ä¸€ä¸‹init æ–¹æ³•ï¼Œåªè®°å¾—åœ¨è‡ªå®šä¹‰viewçš„æ˜¯æ—¶å€™ç”¨è¿‡ï¼Œæ²¡æƒ³åˆ°è¿™é‡Œä¹Ÿéœ€è¦ï¼Œç‰¹æ„åŠ ä¸Šï¼Œç®—æ˜¯å…¼å®¹æ‰‹æœºç³»ç»Ÿ ioså¼€å‘ä¸­ï¼ŒxibåŠ è½½viewï¼ŒloadNibNamedæ–¹æ³•å¥”æºƒåŸå› ä¹‹ä¸€xibä¸­æŸä¸€å±æ€§åœ¨ä»£ç ä¸­å·²åˆ é™¤ï¼Œä½†åœ¨xibä¸­æ²¡æœ‰è§£é™¤å…³è” -[__NSArray0 addObject:]: unrecognized selector sent to instance 0x7f8a40d039a0é€ æˆåŸå› æ˜¯ä½ ä½¿ç”¨[NSArray addObject],è€Œä¸æ˜¯[NSMutabeArray addObject];","text":"CocoaPods BugUse the $(inherited) flag1234567[!] The `MBPeopleBaseApp [Debug]` target overrides the `OTHER_LDFLAGS` build setting defined in `Pods/Target Support Files/Pods-MBPeopleBaseApp/Pods-MBPeopleBaseApp.debug.xcconfig&apos;. This can lead to problems with the CocoaPods installation - Use the `$(inherited)` flag, or - Remove the build settings from the target.[!] The `MBPeopleBaseApp [Release]` target overrides the `OTHER_LDFLAGS` build setting defined in `Pods/Target Support Files/Pods-MBPeopleBaseApp/Pods-MBPeopleBaseApp.release.xcconfig&apos;. This can lead to problems with the CocoaPods installation - Use the `$(inherited)` flag, or - Remove the build settings from the target. è§£å†³æ–¹æ³•ï¼š1Other link flag æ·»åŠ  $(inherited) Xcode Bugè‡ªå®šä¹‰çš„ä»£ç ç‰‡æ®µå­˜æ”¾ä½ç½®1~/Library/Developer/Xcode/UserData/CodeSnippets Xcode 10 Multiple commands produce æŠ¥é”™è§£å†³1target &gt; Build phase &gt; Copy Bundle Resource/Compile Sourcesï¼Œåˆ æ‰ç¬¬ä¸‰æ–¹åº“ä¸­é‡å¤çš„ README.txtï¼ŒLICENSEï¼ŒInfo.plist æ–‡ä»¶ å·¥ç¨‹æ–‡ä»¶ä¹±åºé€‰ä¸­è¦æ•´ç†çš„æ–‡ä»¶å¤¹å³é”®ï¼Œç‚¹ä¸€ä¸‹â€œSort by Nameâ€æˆ–è€…â€œSort by Typeâ€å³å¯æ’åºã€‚ é¡¹ç›®æ‰“ä¸å¼€ Failed to load project at â€˜â€™ â€œ,incompatible project versionæ‰“å¼€ project.pbxproj æ–‡ä»¶ï¼Œä¿®æ”¹ objectVersion = 48; ä¸çŸ¥é“å¡«ä»€ä¹ˆå¾€ä½äº†å¡«ï¼Œæˆ–è€…åœ¨è‡ªå·±æƒ³ä¹°æ‰¾ Xcode ä¸é«˜äº®123cd Library/Developer/Xcode/DerivedDatarm -rf ./*é‡æ–°æ‰“å¼€XCODE æ‰“å¼€Playgroundæç¤ºæ‰“å¼€å¤±è´¥ï¼Œæ‰¾ä¸åˆ°åˆé€‚çš„devices1231. Quit Xcode2. Delete the folder /Users/&lt;username&gt;/Library/Developer/CoreSimulator/Devices. For example, in Terminal: rm -rf ~/Library/Developer/CoreSimulator/Devices3. In Terminal: killall -9 com.apple.CoreSimulator.CoreSimulatorService (or just reboot). OR Add a iOS8.0Device ç¢°åˆ°XibåŠ è½½ä¸å‡ºæ¥ï¼Œä»€ä¹ˆä»€ä¹ˆå·¥ç¨‹æ–‡ä»¶æ‰¾ä¸åˆ°ï¼Œè¯·çœ‹çœ‹å¼•ç”¨æœ‰æ²¡æœ‰ï¼Œæ²¡æœ‰çš„è¯åŠ ä¸Šå°±å¥½äº†ï¼ç”¨Xcode 7.3æ‰“å¼€ä¸€ä¸ªXcode 8åˆ›å»ºçš„å·¥ç¨‹ï¼Œç¼–è¯‘æ—¶æŠ¥é”™ï¼šxxx.storyboard(æˆ–è€…xxx.xib) The document â€œnullâ€ required Xcode 8.0 or later.ç‚¹å‡»xxx.storyboard(æˆ–è€…xxx.xib)æ—¶ï¼Œå¼¹å‡ºå¦‚å›¾æ‰€ç¤ºæç¤ºæ¡†ã€‚è§£å†³æ–¹æ³•æ˜¯ä»¥æºç çš„æ–¹å¼æ‰“å¼€xxx.storyboard(æˆ–è€…xxx.xib)ï¼Œç„¶ååˆ é™¤&lt;capability name=&quot;documents saved in the Xcode 8 format&quot; minToolsVersion=&quot;8.0&quot;/&gt;è¿™ä¸€è¡Œä»£ç ï¼Œå°±OKäº†ã€‚ ç¨‹åºæŠ¥é”™No architectures to compile for (ONLY_ACTIVE_ARCH=YES, active arch=x86_64, VALID_ARCHS=armv7 armv7s)build è¿™ä¸ªtargetçš„æ—¶å€™å‘½ä»¤è¡ŒæŠ¥é”™ã€‚å¯ä»¥åœ¨ build setting ä¸­ï¼Œæœç´¢bitcode,å¹¶å§ enable bitcode è®¾ç½®ä¸º NO. CopyPngFile Error æŠ¥é”™TARGETS -&gt; Build Phases -&gt; Copy Bundle Resources -&gt; åˆ é™¤ç°è‰²æˆ–çº¢è‰²çš„æ–‡ä»¶ Cannot find interface declaration for â€˜xxxxViewControllerâ€™, superclass of â€˜xxxViewControllerâ€™; did you mean â€˜UIViewControllerâ€™è¿™æ˜¯å› ä¸º çˆ¶ç±»æ€»å‡ºç°äº†äº¤å‰å¼•ç”¨ å‰å»çˆ¶ç±»æŸ¥çœ‹ ç„¶åæ”¹æ‰å°±å¥½äº† pathForResource nilçš„æƒ…å†µï¼Œè€Œé¡¹ç›®å‘½åæœ‰è¯¥èµ„æºå¯èƒ½æ²¡æ‹·è´è¿›bundle1Xcode -&gt; TARAGETS -&gt; Build Phases -&gt; Copy Bundle Resources -&gt; æ·»åŠ  â€˜Could not instantiate class named xxxâ€™æ¯”å¦‚ â€˜Could not instantiate class named WKWebViewâ€™ è§£å†³æ–¹æ³•1Xcode -&gt; TARAGETS -&gt; General -&gt; Linked Frameworks and Librarier ï¼Œç‚¹å‡»â€œ+â€å·æ·»åŠ ç›¸åº”çš„ç³»ç»Ÿåº“ webkit.framework æ·»åŠ æ–°å­—ä½“ï¼Œ info.plistä¹Ÿé…ç½®å¥½äº†ï¼Œå°±æ˜¯æ— æ•ˆè¯·æ£€æŸ¥ TARGETS -&gt; Build Phases -&gt; Copy Bundle Resources ä¸­æ˜¯å¦æ·»åŠ æ­¤èµ„æº å…¶ä»–æ·»åŠ èµ„æºåæ— æ•ˆä¹Ÿå¯å‚è€ƒæ­¤æ¡è§£å†³æ–¹æ¡ˆ ld: library not found for -lxxx:ç±»ä¼¼å‡ºç°ä¸Šé¢è¿™ç§é—®é¢˜(æˆ‘çš„é—®é¢˜å‡ºç°åœ¨libWeChatSDKè¿™ä¸ªåŒ…) ld:library not found for -lXXX çš„é—®é¢˜æœ‰å¯èƒ½æ˜¯ä½ çš„æŸä¸ªåº“çš„è¿æ¥å¼•ç”¨æœ‰é—®é¢˜, â€”â€“è§£å†³çš„åŠæ³•å°±æ˜¯åœ¨é¡¹ç›®çš„targeté‡Œ,é€‰ä¸­Link Binary With Libraries é‡Œçš„.aæˆ–framework å–æ¶ˆå†åŠ å…¥,å°±å¯ä»¥äº† â€”â€“å¦‚æœæ˜¯æ‹–æ‹½è¿›å…¥å·¥ç¨‹çš„,é‚£å°±åˆ é™¤,åœ¨æ‹–ä¸€æ¬¡. ld: symbol(s) not found for architecture x86_64ä¾èµ–åº“æœªå¯¼å…¥ tableviewé‡åˆ°è¿™ç§æŠ¥é”™failed to obtain a cell from its dataSourceæ˜¯å› ä¸ºä½ çš„cellè¢«è°ƒç”¨çš„æ—©äº†ã€‚å…ˆå¾ªç¯ä½¿ç”¨äº†cellï¼Œååˆåˆ›å»ºcellã€‚é¡ºåºé”™äº† å¯èƒ½åŸå› ï¼š xibçš„cellæ²¡æœ‰æ³¨å†Œ å†…å­˜ä¸­å·²ç»æœ‰è¿™ä¸ªcellçš„ç¼“å­˜äº†(ä¹Ÿå°±æ˜¯è¯´é€šè¿‡ä½ çš„cellIdæ‰¾åˆ°çš„cellå¹¶ä¸æ˜¯ä½ æƒ³è¦çš„ç±»å‹)ï¼Œè¿™æ—¶å€™éœ€è¦æ”¹ä¸‹cellçš„æ ‡è¯† UIView-Encapsulated-Layout-Width é”™è¯¯ä¿®æ”¹çº¦æŸä¼˜å…ˆçº§å³å¯è§£å†³ Swift åˆ›å»ºæ§åˆ¶å™¨æ—¶è‡ªå¸¦xibåŠ è½½åœ¨iOS8å´©æºƒçš„é—®é¢˜é¡¹ç›®ä¸­æœ‰éƒ¨åˆ†è·Ÿéšæ§åˆ¶å™¨ä¸€èµ·åˆ›å»ºå‡ºæ¥çš„xibï¼Œåœ¨iOS8ä¹‹å¤–çš„ç³»ç»Ÿè¿è¡Œæ­£å¸¸ï¼Œåœ¨iOS8ä¸‹å´©æºƒï¼Œæ‰¾ä¸åˆ°å¯¹åº”å…³ç³»ï¼Œä¸€ç•ªç½‘ä¸Šæœç´¢ï¼Œç»ˆäºæ‰¾åˆ°è§£å†³åŠæ³•1234567override init(nibName nibNameOrNil: String?, bundle nibBundleOrNil: Bundle?) &#123; super.init(nibName: &quot;AddressViewController&quot;, bundle: nil)&#125;required init?(coder aDecoder: NSCoder) &#123; fatalError(&quot;init(coder:) has not been implemented&quot;)&#125; åŸæ¥åœ¨iOS8ä¸‹ï¼Œä¹Ÿéœ€è¦ç»™æ§åˆ¶å™¨çš„xibé‡å†™ä¸€ä¸‹init æ–¹æ³•ï¼Œåªè®°å¾—åœ¨è‡ªå®šä¹‰viewçš„æ˜¯æ—¶å€™ç”¨è¿‡ï¼Œæ²¡æƒ³åˆ°è¿™é‡Œä¹Ÿéœ€è¦ï¼Œç‰¹æ„åŠ ä¸Šï¼Œç®—æ˜¯å…¼å®¹æ‰‹æœºç³»ç»Ÿ ioså¼€å‘ä¸­ï¼ŒxibåŠ è½½viewï¼ŒloadNibNamedæ–¹æ³•å¥”æºƒåŸå› ä¹‹ä¸€xibä¸­æŸä¸€å±æ€§åœ¨ä»£ç ä¸­å·²åˆ é™¤ï¼Œä½†åœ¨xibä¸­æ²¡æœ‰è§£é™¤å…³è” -[__NSArray0 addObject:]: unrecognized selector sent to instance 0x7f8a40d039a0é€ æˆåŸå› æ˜¯ä½ ä½¿ç”¨[NSArray addObject],è€Œä¸æ˜¯[NSMutabeArray addObject]; æ·»åŠ äº†ä¸€ä¸ªAll Exceptions å‡ºç°åœåœ¨çº¿ç¨‹é˜Ÿåˆ—çš„æƒ…å†µï¼Œç‚¹ç»§ç»­è¿è¡Œä»ç„¶å¯ä»¥è¿è¡Œï¼Œå°†è¯¥æ–­ç‚¹åˆ é™¤æˆ–è€…å°†é‡Œé¢çš„Allæ”¹æˆObject-Cä¹Ÿå¯ä»¥ï¼ios7ä¸‹é¢ç”¨autolayoutæŠ¥é”™ç±»ä¼¼ *** Assertion failure in -[XXX layoutSublayersOfLayer:], /SourceCache/UIKit/UIKit-2935.138/UIView.è§£å†³æ–¹æ¡ˆï¼šåœ¨å¸ƒå±€ä¹‹å åŠ ä¸Š [super layoutsubviews] [self lauoutifneed] è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚ there was an internal api error â€œâ€”- xcode7ï¼Œè§£å†³: bulid settings -&gt; packaging -&gt; product name ä¸è¦å†™ä¸­æ–‡ã€‚ã€‚ã€‚ã€‚ linker command failed with exit code 1 (use -v to see invocation) æ£€æŸ¥æ˜¯å¦é‡å¤å¼•ç”¨ï¼Œæˆ–è€…ä¾èµ–å¼•ç”¨.h æ£€æŸ¥æŸä¸ªå±æ€§æ˜¯å¦é‡å¤å®šä¹‰ æ£€æŸ¥æ˜¯å¦ import é”™è¯¯ï¼ŒæŠŠ .m å¼•å…¥äº† 555 æŸ¥çœ‹æŠ¥é”™ä¿¡æ¯è¯¦æƒ…ï¼Œä¸€èˆ¬éƒ½ä¼šæç¤ºï¼Œè§‚å¯Ÿä¸€ä¸‹é‡å¤å¼•ç”¨çš„ä¸¤ä¸ªæ–‡ä»¶åï¼Œåˆ†æå³å¯","categories":[],"tags":[{"name":"Bugs","slug":"Bugs","permalink":"https://kysonyangs.github.io/tags/Bugs/"}]},{"title":"è­¦å‘Šæ”¶é›†","slug":"è­¦å‘Šæ”¶é›†","date":"2015-10-01T06:32:33.000Z","updated":"2020-05-17T08:16:09.543Z","comments":true,"path":"default/è­¦å‘Šæ”¶é›†/","link":"","permalink":"https://kysonyangs.github.io/default/è­¦å‘Šæ”¶é›†/","excerpt":"æ¶ˆé™¤è­¦å‘Š ä½¿ç”¨cocoapodsç®¡ç†çš„ç¬¬ä¸‰æ–¹åº“çš„è­¦å‘Šï¼Œç›´æ¥åœ¨podfileæ–‡ä»¶é‡Œé¢åŠ å…¥ inhibit_all_warnings! åŠ å…¥é¢„ç¼–è¯‘æŒ‡ä»¤ï¼š12345#pragma clang diagnostic push#pragma clang diagnostic ignored &quot;-Wdeprecated-declarations&quot; //è¿™é‡Œæ˜¯ä¼šæŠ¥è­¦å‘Šçš„ä»£ç  UIAlertView *alert = [[UIAlertView alloc] initWithFrame:self.view.bounds];#pragma clang diagnostic pop å…¶ä¸­ï¼š-Wdeprecated-declarations è¡¨ç¤ºè¿™é‡Œæœ‰åºŸé™¤ï¼Œä¸æ”¯æŒçš„ä»£ç ï¼ˆUIAlertViewåœ¨2.0-9.0,9.0ä»¥ä¸Šå¼ƒç”¨ï¼Œæ‰€ä»¥ä¼šæœ‰è­¦å‘Šï¼‰","text":"æ¶ˆé™¤è­¦å‘Š ä½¿ç”¨cocoapodsç®¡ç†çš„ç¬¬ä¸‰æ–¹åº“çš„è­¦å‘Šï¼Œç›´æ¥åœ¨podfileæ–‡ä»¶é‡Œé¢åŠ å…¥ inhibit_all_warnings! åŠ å…¥é¢„ç¼–è¯‘æŒ‡ä»¤ï¼š12345#pragma clang diagnostic push#pragma clang diagnostic ignored &quot;-Wdeprecated-declarations&quot; //è¿™é‡Œæ˜¯ä¼šæŠ¥è­¦å‘Šçš„ä»£ç  UIAlertView *alert = [[UIAlertView alloc] initWithFrame:self.view.bounds];#pragma clang diagnostic pop å…¶ä¸­ï¼š-Wdeprecated-declarations è¡¨ç¤ºè¿™é‡Œæœ‰åºŸé™¤ï¼Œä¸æ”¯æŒçš„ä»£ç ï¼ˆUIAlertViewåœ¨2.0-9.0,9.0ä»¥ä¸Šå¼ƒç”¨ï¼Œæ‰€ä»¥ä¼šæœ‰è­¦å‘Šï¼‰ é‚£ä¹ˆï¼Œå¦‚ä½•å¾—åˆ°ç±»ä¼¼ -Wdeprecated-declarations çš„æ ‡è¯†ç¬¦å‘¢ï¼Ÿå¦‚æœä¸‹å›¾çš„ Reveal in logæœ‰æ•ˆï¼Œé‚£ä¹ˆç‚¹å‡»å³å¯æ— æ•ˆçš„è¯ä¹Ÿåˆ«æ€¥ï¼Œä½ å¯ä»¥å¦‚ä¸‹å›¾æ“ä½œæŸ¥çœ‹ï¼Œå¦‚æœæ²¡æœ‰å°±å…ˆç¼–è¯‘/è¿è¡Œä¸€ä¸‹ç„¶ååœ¨ä¸‹å›¾çº¢æ¡†ä½ç½®æ‰¾åˆ°è­¦å‘Šçš„æ ‡è¯†ç¬¦ å¦‚æœè¦åˆ é™¤ä¸€ä¸ª.mé‡Œé¢çš„æ‰€æœ‰å¼ƒç”¨çš„è­¦å‘Šï¼Œå¦‚ä¸‹å›¾æ“ä½œï¼š å¦‚æœè¦åˆ é™¤é¡¹ç›®ä¸­æ‰€æœ‰å¼ƒç”¨çš„è­¦å‘Šï¼Œå¦‚ä¸‹å›¾æ“ä½œï¼šå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å¡«å…¥åˆ«çš„æ ‡è¯†ç¬¦~ æœ‰çš„è­¦å‘Šç¼–è¯‘å™¨ä¼šæ•™ä½ å¦‚ä½•æ¶ˆé™¤ï¼Œè€Œä½ åªéœ€è¦ç‚¹ä¸€ä¸‹å³å¯ï¼ï¼ï¼ æ·»åŠ è­¦å‘Š ç›´æ¥ #warning &lt;#message#&gt; åœ¨è‡ªå·±å†™çš„ä¸‰æ–¹åº“æä¾›çš„æ¥å£ä¸‹å†™ä¸Šé€‚ç”¨èŒƒå›´ 1- (void)test NS_DEPRECATED_IOS(2_0, 4_0); ä¹Ÿå¯ä»¥åŠ ç‚¹ä¿¡æ¯æç¤ºè¯¥æ–¹æ³•å¼ƒç”¨äº† 123- (void)test __attribute((deprecated(&quot;è¿™ä¸ªæ¥å£å·²å¼ƒç”¨ï¼Œè¯·ä½¿ç”¨xxxï¼&quot;));æˆ–è€…- (void)test NS_DEPRECATED(2_0, 2_0, 2_0, 2_0, &quot;è¿™ä¸ªæ¥å£å·²å¼ƒç”¨ï¼Œè¯·ä½¿ç”¨xxxï¼&quot;); ç¢°åˆ°è¿‡çš„è­¦å‘Š Unused variable &#39;xxx&#39; - æ²¡æœ‰ä½¿ç”¨ Deprecated: Push segues are deprecated in iOS 8.0 and later - iOS8ä¹‹åå‘¢ï¼Œä¸è¦å†ç”¨pushæ‹–çº¿äº†ï¼Œç»Ÿä¸€ç”¨showï¼Œä»–ä¼šè‡ªå·±æ ¹æ®ä½ æ˜¯å¦æœ‰å¯¼èˆªæ æ¥åˆ¤æ–­èµ°pushè¿˜æ˜¯èµ°modal Unsupported Configuration: Scene is unreachable due to lack of entry points and does not have an identifier for runtime access via -instantiateViewControllerWithIdentifier:. - ä¸€èˆ¬æ˜¯storyboardæŠ¥çš„è­¦å‘Šï¼Œç®€è€Œè¨€ä¹‹å°±æ˜¯ä½ æœ‰çš„é¡µé¢æ²¡æœ‰å’Œç®­å¤´æ‰€æŒ‡çš„æ§åˆ¶å™¨è¿èµ·æ¥ï¼Œå¯¼è‡´æœ€ç»ˆæ”¹é¡µé¢å¯èƒ½æ— æ³•æ˜¾ç¤º &#39;sizeWithFont:constrainedToSize:lineBreakMode:&#39; is deprecated: first deprecated in iOS 7.0 - Use -boundingRectWithSize:options:attributes:context: - æ–¹æ³•åºŸé™¤ï¼Œæ—§çš„æ–¹æ³•sizeWithFontToSizeåœ¨iOS7åå°±åºŸé™¤äº†å–è€Œä»£ä¹‹æ˜¯boundingRectWithSizeæ–¹æ³• Undeclared selector &#39;historyAction&#39; - ä½¿ç”¨æœªå£°æ˜çš„æ–¹æ³•ï¼Œä¸€èˆ¬å‡ºç°åœ¨@selector() æ‹¬å·é‡Œå†™äº†ä¸ªä¸å­˜åœ¨çš„æ–¹æ³•æˆ–æ–¹æ³•åå†™é”™äº† Code will never be executed - ä»£ç æ°¸è¿œä¹Ÿä¸ä¼šæ‰§è¡Œï¼Œæ£€æŸ¥ä»£ç å§ &quot;Two-stage rotation animation is deprecated. This application should use the smoother single-stage animation.&quot;åŸå› ï¼šä¸åº”è¯¥å°†UITabBarControllieråµŒå…¥åˆ°UINavigationControllerä¸­ä½œä¸ºrootViewControllerï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬çš„ç¡®æƒ³è¦è¿™æ ·åšï¼Œåªéœ€è¦åœ¨å°†tabbarä½œä¸ºrootviewcontrollerä¹‹å‰å…ˆè®¾ç½®tabBarController.selectedIndex= 0ã€‚ Expected a type : ä¸¤ä¸ªç±»ç›¸äº’åŒ…å«, åœ¨å…¶ä¸­ä¸€ä¸ªä½¿ç”¨@class Presenting view controllers on detached view controllers is discouraged &lt;SetViewController: 0x7fedb94f0f60&gt;.: å› ä¸ºpresentå‡ºæ¥çš„æ¨¡æ€çª—å£ï¼Œç¦æ­¢å†ä½¿ç”¨present æ¥å¼¹å‡ºå…¶å®ƒçš„å­çª—å£ è§£å†³æ–¹æ³•: 123AppDelegate *delegate = (AppDelegate *)[UIApplication sharedApplication].delegate;ViewController *with=[[ViewController alloc]init];[delegate.window.rootViewController presentViewController:with animated:YES completion:^&#123;&#125;]; This application is modifying the autolayout engine from a background thread after the engine was accessed from the main thread. This can lead to engine corruption and weird crashes.: åœ¨ä¸»çº¿ç¨‹åšçš„äº‹æƒ…å´æ”¾åœ¨äº†å­çº¿ç¨‹,æ¯”å¦‚å‘é€é€šçŸ¥,åˆ·æ–°UIç­‰ xcodewarning :no rule to process file xxx: åœ¨build phasesâ€”&gt;compile sources é‡Œé¢å°†å¯¹åº”çš„æ–‡ä»¶ç§»é™¤å³å¯ã€‚å¦‚æœæœ‰äº›è¿˜ä¸è¡Œçš„è¯,xcodeé‡Œé¢å“ªå„¿åŒ…å«äº†è¿™ä¸ªï¼Œåˆ ã€‚ ld: warning: directory not found for option &#39;-L/Users/xxxx/Desktop/Mos: 123é€‰æ‹© Build Settings èœå•,ä¹‹åæ‰¾åˆ°Build Settings ,åœ¨Search Paths ä¸­æœ‰ä¸ªDeugå’ŒReleaseç‚¹å‡»ä¹‹åæœ‰ä¼šç›¸å¯¹çš„è·¯å¾„åˆ é™¤è¯¥è·¯å¾„,æ¸…ç†ä¸€ä¸‹å·¥ç¨‹å³å¯.Library Search Paths &amp; Framework Search Pathsï¼Œåˆ æ‰ç¼–è¯‘æŠ¥warningçš„è·¯å¾„ Check dependencies Warning: Multiple build commands for output file: åœ¨copyâ€¦æŸ¥æ‰¾é‡å¤èµ„æº åˆ é™¤ä¸€ä¸ª è­¦å‘Šç±»å‹","categories":[],"tags":[{"name":"Warnning","slug":"Warnning","permalink":"https://kysonyangs.github.io/tags/Warnning/"}]}]}